(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,r){"use strict";r.r(t);var i=r(514);r.d(t,"AntiAirCutin",(function(){return i.a}));var n=r(3047);r.d(t,"CarrierBasedAerialCombat",(function(){return n.a}));var a=r(3048);r.d(t,"LandBaseAerialSupport",(function(){return a.a}));var o=r(225);r.d(t,"FleetAntiAir",(function(){return o.a}));var u=r(276);r.d(t,"ShipAntiAir",(function(){return u.a}))},157:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a}));var i=function(e){var t=(e.accuracy-e.evasion)*e.moraleModifier;return t<10?10:t>96?96:t},n=function(e){var t=e.criticalRateMultiplier,r=e.hitRateBonus,n=void 0===r?0:r,a=e.criticalRateBonus,o=void 0===a?0:a,u=i(e),s=Math.floor(u+1+n),c=Math.floor(Math.sqrt(u)*t+1+100*o),l=Math.min(s/100,1),f=Math.min(c/100,1);return{total:l,criticalRate:f,normalRate:l-f}},a=function(e){var t=Math.random();return t<e.criticalRate?"Critical":t<e.total?"Normal":"Miss"}},196:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return n}));var i=function(e,t){var r=e[0],i=e[1];return Math.floor((i-r)*t/99+r)},n=function(e,t){var r=e[0],i=e[1],n=r;return t>=100&&(n+=r>=91?9:r>=70?8:r>=50?7:r>=40?6:r>=30?5:r>=8?4:3),Math.min(n,i)}},22:function(e,t,r){"use strict";var i=r(66);r.d(t,"a",(function(){return i}))},225:function(e,t,r){"use strict";var i=r(515),n=r(3633),a=r(517),o=function(e){var t=e.name,r=e.antiAir,i=e.improvement;if(0===r)return 0;return(e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?.35:e.is("AntiAircraftShell")?.6:e.is("Radar")?.4:"46cm三連装砲"===t?.25:.2)*r+i.fleetAntiAirModifier},u=function(e){return Math.floor(e.totalEquipmentStats(o))},s=function(){function e(e,t,r){this.ships=e,this.side=t,this.formationModifier=r}return Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.ships,t=this.side,r=this.formationModifier,i=Object(a.a)(e,u),n=2*Math.floor(r*i);return"Player"===t?n/1.3:n},enumerable:!0,configurable:!0}),e}();t.a=s,s.getCombinedFleetModifier=function(e,t){return e===i.a.EscortFleet?.48:t===n.a.AirDefenseBattle?.72:.8},s.calcFleetAntiAir=function(e,t,r){var i=(0,e.totalShipStats)(u),n=2*Math.floor(r*i);return"Player"===t?n/1.3:n}},232:function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var i=r(493),n=r(49),a=function(e){var t=e.shipType,r=e.shipClass,i=e.isInstallation,n=e.hasGear;return t.isAircraftCarrierClass||(r.is("RevisedKazahayaClass")||i)&&(n("DiveBomber")||n("TorpedoBomber"))?"CarrierShelling":"Shelling"},o=function(){function e(e){var t=this;this.ship=e,this.getProficiencyModifiers=function(e){return void 0===e&&(e=!1),"Shelling"===t.type?{power:1,hitRate:0,criticalRate:0}:e?t.ship.getSpecialProficiencyModifiers():t.ship.getNormalProficiencyModifiers()},this.calcBasicPower=function(e){void 0===e&&(e=0);var r=t.ship;return 5+r.stats.firepower+r.totalEquipmentStats((function(e){return e.improvement.shellingPowerModifier}))+e},this.getCarrierShellingFm=function(e){void 0===e&&(e=!1);var r=t,i=r.ship;if("Shelling"!==r.type){var n=e?0:i.stats.torpedo,a=e?i.totalEquipmentStats((function(e){return e.is("AntiInstallationBomber")?e.bombing:0})):i.totalEquipmentStats("bombing"),o=Math.floor(Math.floor(1.3*a)+n)+15;return function(e){return 25+Math.floor(1.5*(e+o))}}},this.calcPower=function(e){var r=e.fleetFactor,i=e.formationModifier,a=e.engagementModifier,o=e.isCritical,u=e.isAntiInstallation,s=e.isArmorPiercing,c=e.specialAttack,l=t.calcBasicPower(r),f=t.ship,p=f.health.shellingPowerModifier,h=f.getCruiserFitBonus(),g=c?c.modifier.power:1,d=t.getProficiencyModifiers(null==c?void 0:c.isCarrierSpecialAttack).power,y={a14:i*a*p,b14:h,a11:g};e.modifiers&&(y=Object(n.a)(y,e.modifiers));var m=t.getCarrierShellingFm(u);return Object(n.b)({basic:l,cap:180,modifiers:y,fm14prev:m,fm11next:function(e){return s&&(e=t.apShellFm(e)),o&&(e=Object(n.c)(d)(e)),e}})},this.calcAccuracy=function(e){var r=t.accuracyShipFactors,i=r.shipAccuracy,n=r.equipmentAccuracy,a=r.improvementModifier,o=r.moraleModifier,u=e.fleetFactor,s=e.formationModifier,c=e.specialAttackModifier,l=e.isArmorPiercing,f=e.fitGunBonus,p=1;l&&(p=t.apShellModifiers.accuracy);var h=Math.floor(u+i+n+a);return Math.floor((h*s*o+f)*c*p)}}return Object.defineProperty(e.prototype,"type",{get:function(){return a(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellModifiers",{get:function(){var e=this.ship.hasGear;return Object(i.b)({hasMainGun:e("MainGun"),hasArmorPiercingShell:e("ArmorPiercingShell"),hasSecondaryGun:e("SecondaryGun"),hasRader:e("Radar")})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellFm",{get:function(){var e=this.apShellModifiers.power;return function(t){return Math.floor(t*e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracyShipFactors",{get:function(){var e=this.ship;return{shipAccuracy:e.shipAccuracy,equipmentAccuracy:e.totalEquipmentStats("accuracy"),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.shellingAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("shelling")}},enumerable:!0,configurable:!0}),e}();t.a=o},233:function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l}));var i=r(39),n=[{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Single,factors:[2,10]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Single,factors:[10,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Single,factors:[-5,10]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.Combined,factors:[5,5]},{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Combined,factors:[-5,-5]}],a=[{attackerFleetType:i.a.Single,defenderFleetType:i.a.CarrierTaskForce,factors:[10,5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.SurfaceTaskForce,factors:[5,-5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.TransportEscort,factors:[10,5]}],o=[{fleetType:i.a.CarrierTaskForce,factors:[78,43]},{fleetType:i.a.SurfaceTaskForce,factors:[70,46]},{fleetType:i.a.TransportEscort,factors:[51,46]}],u=function(e,t){if(!e.fleetType.isCombined&&!t.fleetType.isCombined)return 0;var r="Main"===e.role?0:1;if("Player"===e.side){var i=n.find((function(r){return r.attackerFleetType===e.fleetType&&r.defenderFleetType===t.fleetType}));return i?i.factors[r]:0}if(e.fleetType.isCombined)return[10,-5][r];var o=a.find((function(r){return r.attackerFleetType===e.fleetType&&r.defenderFleetType===t.fleetType}));return o?o.factors[r]:0},s=function(e,t){var r=function(r){return e.side===r?e.fleetType:t.fleetType},i=r("Player").isCombined,n=r("Enemy").isCombined;return i||n?i&&!n?0:15:5},c=function(e){var t,r=e.fleetType,i="Main"===e.role?0:1,n=null===(t=o.find((function(e){return e.fleetType===r})))||void 0===t?void 0:t.factors[i];return null!=n?n:90},l=function(e,t){var r=u(e,t),i=c(e);return{shelling:r,torpedo:s(e,t),shellingAccuracy:i}}},276:function(e,t,r){"use strict";var i=function(e){var t=e.antiAir,r=e.improvement;if(0===t)return 0;var i=0;return e.is("AntiAircraftGun")?i=6:e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?i=4:e.is("Radar")&&(i=3),i*t+r.adjustedAntiAirModifier},n=function(){function e(e,t,r,i,n){var a=this;void 0===i&&(i=1),this.ship=e,this.side=t,this.fleetAntiAir=r,this.combinedFleetModifier=i,this.antiAirCutin=n,this.calcProportionalShotdownRate=function(e){void 0===e&&(e=1);var t=a,r=t.adjustedAntiAir,i=t.combinedFleetModifier;return Math.floor(r*e)*i*.5*.25*.02},this.calcFixedShotdownNumber=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);var r=a,i=r.adjustedAntiAir,n=r.fleetAntiAir,o=r.side,u=r.antiAirCutin,s=r.combinedFleetModifier,c="Player"===o?.8:.75,l=.5*(Math.floor(i*e)+Math.floor(n*t))*.25*c*s;return u&&(l*=u.fixedAirDefenseModifier),Math.floor(l)},this.getShotdownNumber=function(e){var t=e.slotSize,r=e.adjustedAntiAirResistModifier,i=e.fleetAntiAirResistModifier,n=0;if(Math.random()>.5){var o=a.calcProportionalShotdownRate(r);n+=Math.floor(t*o)}if(Math.random()>.5){var u=a.calcFixedShotdownNumber(r,i);n+=Math.floor(u)}return n+=a.minimumBonus}}return Object.defineProperty(e.prototype,"adjustedAntiAir",{get:function(){return function(e,t){var r=e.stats,n=e.nakedStats,a=(0,e.totalEquipmentStats)(i);if("Enemy"===t)return Math.floor(2*Math.floor(Math.sqrt(r.antiAir))+a);var o=n.antiAir+a;return 0===e.countGear()?o:2*Math.floor(o/2)}(this.ship,this.side)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumBonus",{get:function(){var e=this.side,t=this.antiAirCutin;return t?t.minimumBonus:"Player"===e?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAirPropellantBarrageChance",{get:function(){var e,t=this.ship,r=this.adjustedAntiAir,i=t.shipType;if(!(e=i).isAircraftCarrierClass&&!e.any("AviationCruiser","AviationBattleship","SeaplaneTender"))return 0;var n=t.countGear(274);if(!n)return 0;var a=t.shipClass.is("IseClass")?.25:0;return(r+.9*t.stats.luck)/281+.15*(n-1)+a},enumerable:!0,configurable:!0}),e}();t.a=n},277:function(e,t,r){"use strict";var i=r(344),n=r(3626),a=r(515),o=r(225),u=function(){return(u=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=function(){function e(e,t,r,n,a){this.side=e,this.fleetType=t,this.landBase=r,this.mainFleet=n,this.escortFleet=a,this.formation=i.a.LineAhead,this.name="",this.isCombinedFleet&&(this.formation=i.a.CruisingFormation4)}return Object.defineProperty(e.prototype,"allShips",{get:function(){var e=this.mainFleet,t=this.escortFleet,r=e.nonNullableShips.concat();return t?r.concat(t.nonNullableShips):r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.allShips,t=this.side,r=this.formation;return new o.a(e,t,r.fleetAntiAirModifier).fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleet",{get:function(){return this.fleetType!==n.a.Single},enumerable:!0,configurable:!0}),e.prototype.getShipInformation=function(e){var t=this,r=t.mainFleet,i=t.escortFleet,n={side:t.side,fleetType:t.fleetType,fleetAntiAir:t.fleetAntiAir,formation:t.formation};return r.nonNullableShips.find((function(t){return t===e}))?u(u({},n),{fleetRole:a.a.MainFleet}):i&&i.nonNullableShips.find((function(t){return t===e}))?u(u({},n),{fleetRole:a.a.EscortFleet}):void 0},e}();t.a=s},278:function(e,t,r){"use strict";var i=function(){function e(e,t,r){this.player=e,this.enemy=t,this.battleType=r}return e.prototype.getShipInformation=function(e){var t=this.player,r=this.enemy,i=t.getShipInformation(e);if(i)return i;var n=r.getShipInformation(e);if(n)return n;throw console.error("ship info is not found")},e}();t.a=i},289:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(49),n={createPower:function(e){var t=e.nakedAsw,r=e.equipmentAsw,n=e.improvementModifier,a=e.typeConstant,o=e.formationModifier,u=e.engagementModifier,s=e.healthModifier,c=e.synergyModifier,l=e.optionalModifiers,f=e.fm11next,p=2*Math.sqrt(t)+1.5*r+n+a,h=o*u*s*c,g=l?Object(i.a)(l,{a14:h}):{a14:h};return Object(i.b)({basic:p,cap:150,modifiers:g,fm11next:f})},calcAccuracy:function(e){return(80+e.shipAccuracy+e.aswEquipmentModifier+e.improvementModifier)*e.formationModifier*e.moraleModifier}}},3046:function(e,t,r){"use strict";var i=r(148);r.d(t,"a",(function(){return i}))},3047:function(e,t,r){"use strict";var i,n=r(322),a=r(514),o=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,t)||this,i=r.combatInformation,n=i.player,a=i.enemy;return n.isCombinedFleet&&a.isCombinedFleet?(r.playerAntiAirDefenseShips=n.allShips,r.enemyAntiAirDefenseShips=a.allShips):(r.playerAntiAirDefenseShips=n.mainFleet.nonNullableShips,r.enemyAntiAirDefenseShips=a.mainFleet.nonNullableShips),r}return o(t,e),t.prototype.main=function(){var e=this.playerAntiAirDefenseShips,t=this.enemyAntiAirDefenseShips,r=this.combatInformation,i=e.flatMap((function(e){return e.planes})),n=t.flatMap((function(e){return e.planes})),o=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")},u=i.filter(o),s=n.filter(o),c=this.fighterCombat(u,s),l=r.player,f=(r.enemy,u.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}))),p=s.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}));return this.antiAirDefense(e,p,a.a.try(l.allShips)),this.antiAirDefense(t,f,a.a.try(l.allShips)),{airControlState:c}},t}(n.a);t.a=u},3048:function(e,t,r){"use strict";var i,n=r(3635),a=r(345),o=r(322),u=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){var i=e.call(this,t)||this;return i.landBasedAirCorps=r,i}return u(t,e),t.prototype.main=function(){var e=this,t=this.combatInformation.enemy,r=this.landBasedAirCorps,i=r.fighterPower,o=r.planes,u=Object(n.a)(t.allShips,(function(e){return e.planes})),s=u.reduce((function(e,t){return e+t.fighterPower}),0),c=a.a.fromFighterPower(i,s),l=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")||e.is("ReconnaissanceAircraft")},f=o.filter(l),p=u.filter(l);f.forEach((function(t){return e.shotdownInFighterCombat(t,c.constant,"Player")})),p.forEach((function(t){return e.shotdownInFighterCombat(t,c.constant,"Enemy")}));var h=f.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}));return this.antiAirDefense(t.allShips,h),{airControlState:c}},t}(o.a);t.a=s},3100:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(49),n=r(232),a=r(510),o=r(511),u=r(512),s=r(513),c=function(e){var t=e.ship,r=e.target,c=e.fleetFactors,l=e.formation,f=e.role,p=e.engagement,h=e.isArmorPiercing,g=e.nightContactModifier,d=e.optionalPowerModifiers,y=l.getModifiers(f),m=p.modifier,b=r.isInstallation,v=t.getSpecialEnemyModifiers(r),S=new n.a(t),w=new a.a(t),P=o.a.fromShip(t),A=u.a.fromShip(t,"Day"),k=new s.a(t);return{calcShellingPower:function(e,t){var r=Object(i.a)(v,d);return S.calcPower({fleetFactor:c.shelling,formationModifier:y.shelling.power,engagementModifier:m,modifiers:r,isCritical:e,isAntiInstallation:b,isArmorPiercing:h,specialAttack:t})},calcShellingSupportPower:function(e){var t=l.shellingSupportModifiers.power;return w.calcPower({formationModifier:t,engagementModifier:m,isCritical:e,isAntiInstallation:b})},calcTorpedoPower:function(e){return P.calcPower({fleetFactor:c.torpedo,formationModifier:y.torpedo.power,engagementModifier:m,isCritical:e,optionalModifiers:d})},calcAswPower:function(e){return A.calcPower({formationModifier:y.asw.power,engagementModifier:m,isCritical:e,optionalModifiers:d})},calcNightPower:function(e,t){var r=Object(i.a)(v,d);return k.calcPower({formationModifier:y.night.power,nightContactModifier:g,specialAttack:t,modifiers:r,isCritical:e,isAntiInstallation:b})},canDoTorpedoAttack:t.nakedStats.torpedo>0,canDoAsw:"None"!==A.type}}},3107:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=["houg","raig","tyku","souk","kaih","tais","saku","baku","houm","leng"],o=function(){function e(){this.houg=0,this.raig=0,this.tyku=0,this.souk=0,this.kaih=0,this.tais=0,this.saku=0,this.baku=0,this.houm=0,this.leng=0}return e.prototype.paramDisp=function(){console.log("火力:"+this.houg+" 対空:"+this.tyku+" 回避:"+this.kaih+" 雷撃:"+this.raig+" 装甲:"+this.souk+" 対潜:"+this.tais+" 索敵:"+this.saku+" 爆装:"+this.baku+" 命中:"+this.houm+" 射程:"+this.leng)},e.prototype.add=function(e){var t=this;return a.forEach((function(r){t[r]+=e[r]})),this},e.prototype.multiply=function(e){var t=this;return a.forEach((function(r){t[r]*=e})),this},e.prototype.exists=function(){var e=this;return a.some((function(t){return 0!==e[t]}))},e}(),u=function(e,t,r){var i,n=(null!==(i=e[t])&&void 0!==i?i:0)+r;e[t]=n},s=function(){function e(e,t){this.SLOT_LEVEL_MAX=10;for(var r={},i={},n={},a=0,o=t;a<o.length;a++){var s=o[a];if(s){var c=s.mstID,l=s.equipType,f=r[c];Array.isArray(f)?f.push(s):r[c]=[s],u(i,c,1),u(n,l,1)}}this.have_slots_array=t.concat(),this.have_slots_dict=r,this.have_slotnums_dict=i,this.have_type3nums_dict=n,this.ship_id=e.shipId,this.yomi=e.ruby,this.stype=e.shipTypeId,this.ctype=e.shipClassId}return e.prototype.g_sn=function(e){var t;return null!==(t=this.have_slotnums_dict[e])&&void 0!==t?t:0},e.prototype.get_type3_nums=function(e){var t;return null!==(t=this.have_type3nums_dict[e])&&void 0!==t?t:0},e.prototype.g_sn_per_level=function(e){var t=this.have_slots_dict[e],r=Array(11).fill(0);if(!t)return r;for(var i=0,n=t;i<n.length;i++){var a=n[i];u(r,a.level,1)}return r},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getSlotitemEffect=function(e,r){var i,n=new s(e,r),a=[];a.push({iE:n.get_type3_nums(9),execFunc:t.getSlotType9PE},{iE:n.get_type3_nums(29),execFunc:t.getSearchLightEffect},{iE:n.get_type3_nums(42),execFunc:t.getSearchLightLargeEffect},{iE:n.get_type3_nums(12)||n.get_type3_nums(13),execFunc:t.getRaderPrE},{iE:n.g_sn(15),execFunc:t.getSlot15PE},{iE:n.g_sn(18)||n.g_sn(52),execFunc:t.getSlot18_52_PE},{iE:n.g_sn(19),execFunc:t.getSlot19PE},{iE:n.g_sn(24)||n.g_sn(57)||n.g_sn(111),execFunc:t.getSlotOtherSuiseiPE},{iE:n.g_sn(35),execFunc:t.getSlot35PE},{iE:n.g_sn(47),execFunc:t.getSlot47PE},{iE:n.g_sn(50),execFunc:t.getSlot50PE},{iE:n.g_sn(58),execFunc:t.getSlot58PE},{iE:n.g_sn(61),execFunc:t.getSlot61PE},{iE:n.g_sn(61),execFunc:t.getSlot61PE2},{iE:n.g_sn(63),execFunc:t.getSlot63PE},{iE:n.g_sn(67),execFunc:t.getSlot67PE},{iE:n.g_sn(79)||n.g_sn(81),execFunc:t.getSlot79And81PE},{iE:n.g_sn(82),execFunc:t.getSlot82PE},{iE:n.g_sn(90),execFunc:t.getSlot90PE},{iE:n.g_sn(93),execFunc:t.getSlot93PE},{iE:n.g_sn(94),execFunc:t.getSlot94PE},{iE:n.g_sn(99),execFunc:t.getSlot99PE},{iE:n.g_sn(100),execFunc:t.getSlot100PE},{iE:n.g_sn(104),execFunc:t.getSlot104PE},{iE:n.g_sn(106),execFunc:t.getSlot106PE},{iE:n.g_sn(119),execFunc:t.getSlot119PE},{iE:n.g_sn(129),execFunc:t.getSlot129PE},{iE:n.g_sn(143),execFunc:t.getSlot143PE},{iE:n.g_sn(144),execFunc:t.getSlot144PE},{iE:n.g_sn(149),execFunc:t.getSlot149PE},{iE:n.g_sn(184),execFunc:t.getSlot184PE},{iE:n.g_sn(188),execFunc:t.getSlot188PE},{iE:n.g_sn(189),execFunc:t.getSlot189PE},{iE:n.g_sn(194),execFunc:t.getSlot194PE},{iE:n.g_sn(228),execFunc:t.getSlot228PE},{iE:n.g_sn(237),execFunc:t.getSlot237PE},{iE:n.g_sn(266),execFunc:t.getSlot266PE},{iE:n.g_sn(266),execFunc:t.getSlot266PE2},{iE:n.g_sn(267)||n.g_sn(366),execFunc:t.getSlot267PE},{iE:n.g_sn(267)||n.g_sn(366),execFunc:t.getSlot267PE2},{iE:n.g_sn(268),execFunc:t.getCamouflageSlotPE},{iE:n.g_sn(282),execFunc:t.getSlot282PE},{iE:n.g_sn(283),execFunc:t.getSlot283PE},{iE:n.g_sn(285),execFunc:t.getSlot285PE},{iE:n.g_sn(286),execFunc:t.getSlot286PE},{iE:n.g_sn(289),execFunc:t.getSlot289PE},{iE:n.g_sn(290),execFunc:t.getSlot290PE},{iE:n.g_sn(291),execFunc:t.getSlot291PE},{iE:n.g_sn(292),execFunc:t.getSlot292PE},{iE:n.g_sn(229),execFunc:t.getSlot229PE},{iE:n.g_sn(179),execFunc:t.getSlot179PE},{iE:n.g_sn(174),execFunc:t.getSlot174PE},{iE:n.g_sn(287),execFunc:t.getSlot287PE},{iE:n.g_sn(288),execFunc:t.getSlot288PE},{iE:n.g_sn(293),execFunc:t.getSlot293PE},{iE:n.g_sn(294),execFunc:t.getSlot294PE},{iE:n.g_sn(295),execFunc:t.getSlot295PE},{iE:n.g_sn(296),execFunc:t.getSlot296PE},{iE:n.g_sn(297),execFunc:t.getSlot297PE},{iE:n.g_sn(298)||n.g_sn(299)||n.g_sn(300),execFunc:t.getSlot16M1PE},{iE:n.g_sn(301),execFunc:t.getSlot301PE},{iE:n.g_sn(302),execFunc:t.getSlot302PE},{iE:n.g_sn(303),execFunc:t.getSlot303PE},{iE:n.g_sn(304),execFunc:t.getSlot304PE},{iE:n.g_sn(305)||n.g_sn(306),execFunc:t.getSlot305_And_306_PE},{iE:n.g_sn(307),execFunc:t.getSlot307PE},{iE:n.g_sn(308),execFunc:t.getSlot308PE},{iE:n.g_sn(310),execFunc:t.getSlot310PE},{iE:n.g_sn(313),execFunc:t.getSlot313PE},{iE:n.g_sn(314),execFunc:t.getSlot314PE},{iE:n.g_sn(315),execFunc:t.getSlot315PE},{iE:n.g_sn(316),execFunc:t.getSlot316PE},{iE:n.g_sn(317),execFunc:t.getSlot317PE},{iE:n.g_sn(318),execFunc:t.getSlot318PE},{iE:n.g_sn(319),execFunc:t.getSlot319PE},{iE:n.g_sn(320),execFunc:t.getSlot320PE},{iE:n.g_sn(322),execFunc:t.getSlot322PE},{iE:n.g_sn(323),execFunc:t.getSlot323PE},{iE:n.g_sn(324)||n.g_sn(325),execFunc:t.getSlot324And325PE},{iE:n.g_sn(326),execFunc:t.getSlot326PE},{iE:n.g_sn(327),execFunc:t.getSlot327PE},{iE:n.g_sn(328),execFunc:t.getSlot328PE},{iE:n.g_sn(329),execFunc:t.getSlot329PE},{iE:n.g_sn(330)||n.g_sn(331)||n.g_sn(332),execFunc:t.getSlot_16InchMkXRensouhou_PE},{iE:n.g_sn(335),execFunc:t.getSlot335PE},{iE:n.g_sn(336),execFunc:t.getSlot336PE},{iE:n.g_sn(337),execFunc:t.getSlot337PE},{iE:n.g_sn(338),execFunc:t.getSlot338PE},{iE:n.g_sn(339),execFunc:t.getSlot339PE},{iE:n.g_sn(340),execFunc:t.getSlot340PE},{iE:n.g_sn(341),execFunc:t.getSlot341PE},{iE:n.g_sn(342),execFunc:t.getSlot342PE},{iE:n.g_sn(343),execFunc:t.getSlot343PE},{iE:n.g_sn(344),execFunc:t.getSlot344PE},{iE:n.g_sn(345),execFunc:t.getSlot345PE},{iE:n.g_sn(356)||n.g_sn(357),execFunc:t.getSlot356_357PE},{iE:n.g_sn(358),execFunc:t.getSlot358PE},{iE:n.g_sn(359),execFunc:t.getSlot359PE},{iE:n.g_sn(360)||n.g_sn(361),execFunc:t.getSlot360_361PE},{iE:n.g_sn(362)||n.g_sn(363),execFunc:t.getSlot362_363PE},{iE:n.g_sn(364),execFunc:t.getSlot364PE},{iE:n.g_sn(365),execFunc:t.getSlot365PE},{iE:n.g_sn(367),execFunc:t.getSlot367PE},{iE:n.g_sn(368),execFunc:t.getSlot368PE});for(var u=new o,c=0,l=a;c<l.length;c++){var f=l[c];f.iE&&(i=f.execFunc.call(null,n),u.add(i))}return u},t.getCamouflageSlotPE=function(e){var t=new o;return"きそ"!=e.yomi&&"たま"!=e.yomi||(t.kaih=7,t.souk=2),t},t.getSearchLightEffect=function(e){var t=new o,r=e.get_type3_nums(29);return"ひえい"==e.yomi||"きりしま"==e.yomi||"ちょうかい"==e.yomi||"じんつう"==e.yomi||"あかつき"==e.yomi?(t.houg+=4,--t.kaih):"あきぐも"==e.yomi?t.houg+=2*r:"ゆきかぜ"==e.yomi&&(t.houg+=r,t.tyku+=r),"じんつう"==e.yomi&&(t.raig+=6,t.houg+=4),t},t.getSearchLightLargeEffect=function(e){var t=new o;return"ひえい"==e.yomi||"きりしま"==e.yomi?(t.houg+=6,t.kaih-=2):"やまと"!=e.yomi&&"むさし"!=e.yomi||(t.houg+=4,--t.kaih),t},t.getRaderPrE=function(e){var t=0,r=new o;if(569!=e.ship_id)return r;for(var i=0,n=0,a=e.have_slots_array;n<a.length;n++){var u=a[n];12!=(t=u.equipType)&&13!=t||(u.sakuteki,u.taikuu>=2&&++i)}return i>0&&(++r.houg,r.kaih+=3,r.tyku+=2),r},t.getSlot267PE=function(e){var t=new o,r=0,i=0;if(38==e.ctype||22==e.ctype)r=2,i=1;else{if(30!=e.ctype)return t;r=1,i=1}var n=e.g_sn(267)+e.g_sn(366);return t.houg=r*n,t.kaih=i*n,t},t.getSlot267PE2=function(e){var t=0,r=new o,i=e.g_sn(267),n=e.g_sn(366),a=i+n;if(566!=e.ship_id&&567!=e.ship_id&&568!=e.ship_id||(i>0&&++r.houg,1==n?(++r.houg,r.tyku+=2):n>=2&&(r.houg+=2,r.tyku+=4)),38!=e.ctype&&229!=e.ship_id)return r;var u=!1,s=!1,c=!1,l=!1,f=!1,p=!1,h=!1;543==e.ship_id?(r.houg=1*a,u=!0):229==e.ship_id?s=!0:542==e.ship_id?(r.houg=1*a,c=!0):563==e.ship_id?(r.houg=1*a,l=!0):564==e.ship_id?(r.houg=1*a,f=!0):578==e.ship_id?(r.houg=1*a,p=!0):569==e.ship_id&&(r.houg=1*a,h=!0);for(var g=0,d=0,y=0,m=e.have_slots_array;y<m.length;y++){var b=m[y];12!=(t=b.equipType)&&13!=t||(b.sakuteki>=5&&++g,b.taikuu>=2&&++d)}return g>0&&i>0&&(38==e.ctype&&(r.houg+=2,++r.raig,0==u&&0==c&&0==l&&0==f&&0==p&&0==h&&(r.raig+=2),++r.kaih),(c||u||s||l||f||p||h)&&(++r.houg,r.raig+=3,r.kaih+=2)),n>0&&(c||u||l||f||p||s||h)&&(1==n?r.tyku+=3:n>=2&&(r.tyku+=5),h&&(++r.houg,r.tyku+=2),g>0&&(r.houg+=2,r.kaih+=2,r.raig+=4),d>0&&(++r.houg,r.kaih+=2,r.tyku+=5)),r},t.getSlot15PE=function(e){var t=new o,r=!1;if(566!=e.ship_id&&567!=e.ship_id&&568!=e.ship_id||(r=!0),0==r)return t;var i=e.g_sn(15);return 30==e.ctype&&(1==i?t.raig=2:i>=2&&(t.raig=4)),t},t.getSlot285PE=function(e){var t=new o,r=!1;if([195,426,420,407,437,326,419,147,627].indexOf(e.ship_id)>=0&&(r=!0),0==r)return t;var i=e.g_sn_per_level(285),n=e.g_sn(285);n>2&&(n=2),t.raig=2*n,t.kaih=1*n;var a=i[10];return 1==a?++t.houg:a>=2&&(t.houg+=2),t},t.getSlot286PE=function(e){var t=0,r=new o,i=!1;if([566,145,498,144,469,463,468,199,489,490,464,470,198,543,567,568,497,542,563,564,587,578,569].indexOf(e.ship_id)>=0&&(i=!0),0==i)return r;var n=e.g_sn_per_level(286),a=e.g_sn(286);a>2&&(a=2),r.raig=2*a,r.kaih=1*a;var u=n[10];return 1==u?++r.houg:u>=2&&(r.houg+=2),30==e.ctype&&(1==(t=n[5]+n[6]+n[7]+n[8]+n[9]+n[10])?++r.raig:t>=2&&(r.raig+=2)),r},t.getSlot266PE=function(e){var t=new o,r=!1;if(566!=e.ship_id&&567!=e.ship_id&&568!=e.ship_id||(r=!0),0==r)return t;var i=e.g_sn(266);return 30==e.ctype&&(1==i?t.houg=1:i>=2&&(t.houg=3)),t},t.getSlot266PE2=function(e){var t=0,r=new o,i=0,n=new o;if(23==e.ctype||18==e.ctype?(n.houg=1,i=1):30==e.ctype&&(n.houg=1,i=2),("しぐれ"==e.yomi||"ゆきかぜ"==e.yomi||"いそかぜ"==e.yomi)&&(n.kaih=1),!n.exists())return r;var a=e.g_sn(266);if(r=n.multiply(a),0==i)return r;for(var u=0,s=0,c=e.have_slots_array;s<c.length;s++){var l=c[s];(12==(t=l.equipType)||13==t)&&l.sakuteki>=5&&++u}return u>0&&(1==i?(++r.houg,++r.kaih,r.raig+=3):2==i&&(r.houg+=2,++r.kaih,r.raig+=3)),r},t.getSlot104PE=function(e){var t=new o,r=new o;if(149==e.ship_id)r.houg=2;else if(150==e.ship_id)r.houg=1;else if(152==e.ship_id)r.houg=1;else{if(151!=e.ship_id)return t;r.houg=2,r.tyku=1,r.kaih=2}var i=e.g_sn(104);return t=r.multiply(i)},t.getSlot289PE=function(e){var t=0,r=new o,i=0,n=new o;if(149==e.ship_id)n.houg=2,n.tyku=1,i=1;else if(150==e.ship_id)n.houg=1;else if(152==e.ship_id)n.houg=1;else{if(151!=e.ship_id)return r;n.houg=2,n.tyku=2,n.kaih=2,i=1}var a=e.g_sn(289);if(r=n.multiply(a),0==i)return r;for(var u=0,s=0,c=e.have_slots_array;s<c.length;s++){var l=c[s];(12==(t=l.equipType)||13==t)&&l.sakuteki>=5&&++u}return u>0&&(r.houg+=2,r.kaih+=2),r},t.getSlot290PE=function(e){var t=0,r=new o,i=0,n=new o;if(411==e.ship_id)n.houg=1;else if(412==e.ship_id)n.houg=1;else if(82==e.ship_id)n.houg=2,n.tyku=2,n.kaih=1,i=1;else if(553==e.ship_id)n.houg=3,n.tyku=2,n.kaih=1,n.houm=3,i=1;else if(88==e.ship_id)n.houg=2,n.tyku=2,n.kaih=1,i=1;else{if(554!=e.ship_id)return r;n.houg=3,n.tyku=2,n.kaih=2,n.houm=3,i=1}var a=e.g_sn(290);if(r=n.multiply(a),0==i)return r;for(var u=0,s=0,c=e.have_slots_array;s<c.length;s++){var l=c[s];(12==(t=l.equipType)||13==t)&&l.taikuu>=2&&++u}return u>0&&(r.tyku+=2,r.kaih+=3),r},t.getSlot292PE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=8,r.kaih=2,r.tyku=1;else{if(554!=e.ship_id)return t;r.houg=8,r.kaih=2,r.tyku=1}var i=e.g_sn(292);return t=r.multiply(i)},t.getSlot291PE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=6,r.kaih=1;else{if(554!=e.ship_id)return t;r.houg=6,r.kaih=1}var i=e.g_sn(291);return t=r.multiply(i)},t.getSlot237PE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=4,r.kaih=2;else if(82==e.ship_id)r.houg=3,r.kaih=1;else if(88==e.ship_id)r.houg=3,r.kaih=1;else if(554==e.ship_id)r.houg=4,r.kaih=2;else if(411==e.ship_id)r.houg=2;else{if(412!=e.ship_id)return t;r.houg=2}var i=e.g_sn(237);return t=r.multiply(i)},t.getSlot79And81PE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=3;else if(82==e.ship_id)r.houg=2;else if(88==e.ship_id)r.houg=2;else if(554==e.ship_id)r.houg=3;else if(411==e.ship_id)r.houg=2;else{if(412!=e.ship_id)return t;r.houg=2}var i=e.g_sn(79)+e.g_sn(81);return t=r.multiply(i)},t.getSlot229PE=function(e){for(var t,r=0,i=0,n=new o,a=0,u=0,s=null!==(t=e.have_slots_dict[229])&&void 0!==t?t:[];u<s.length;u++){s[u].level>=7&&a++}var c=a,l=0,f=0,p=0;if(622==e.ship_id||623==e.ship_id||624==e.ship_id)r=e.g_sn(229),n.houg+=1*r,n.tyku+=1*r,l=2;else if(0==a)return n;if(488==e.ship_id?(n.tyku+=3*c,l=1):220==e.ship_id?n.tyku+=2*c:23==e.ship_id?n.tyku+=1*c:160==e.ship_id?(n.tyku+=2*c,l=1):224==e.ship_id?n.tyku+=1*c:487==e.ship_id?(n.tyku+=2*c,l=1):289==e.ship_id&&(n.tyku+=1*c),(66==e.ctype||28==e.ctype)&&(n.houg+=1*c,n.tyku+=1*c,f=1),1==e.stype&&(n.houg+=1*c,n.tyku+=1*c,p=1),("ゆら"==e.yomi||"なか"==e.yomi||"きぬ"==e.yomi)&&(n.houg+=2*c),0==l+f+p)return n;for(var h=0,g=0,d=0,y=e.have_slots_array;d<y.length;d++){var m=y[d];12!=(i=m.equipType)&&13!=i||(m.sakuteki>=5&&++h,m.taikuu>=2&&++g)}return 1==l?h>0&&(n.houg+=3,n.kaih+=2):2==l&&(h>0&&(++n.houg,++n.kaih),g>0&&(n.tyku+=2,n.kaih+=2)),1==f&&h>0&&(n.houg+=2,n.kaih+=3),1==p&&h>0&&(++n.houg,n.kaih+=4),n},t.getSlot67PE=function(e){var t=new o,r=new o;if(13!=e.stype&&14!=e.stype&&(r.raig=-5),!r.exists())return t;var i=e.g_sn(67);return t=r.multiply(i)},t.getSlot58PE=function(e){var t=new o,r=new o;if("しまかぜ"!=e.yomi&&4!=e.stype&&54!=e.ctype||(r.raig=1),!r.exists())return t;var i=e.g_sn(58);return t=r.multiply(i)},t.getSlot179PE=function(e){var t=new o,r=new o;if(54==e.ctype&&(r.raig=1),!r.exists())return t;var i=e.g_sn(179);return t=r.multiply(i)},t.getSlot174PE=function(e){var t=new o,r=new o;if(66==e.ctype&&(r.raig=1,r.kaih=2),591==e.ship_id?(r.raig+=6,r.kaih+=3):488!=e.ship_id&&622!=e.ship_id&&623!=e.ship_id&&624!=e.ship_id||(r.houg+=2,r.raig+=4,r.kaih+=4),!r.exists())return t;var i=e.g_sn(174);return t=r.multiply(i)},t.getSlot305_And_306_PE=function(e){var t=new o,r=new o;if(76==e.ctype&&(r.tais=1,r.kaih=1),"しんよう"==e.yomi?(r.tais+=2,++r.kaih):"グラーフ・ツェッペリン"!=e.yomi&&"アクィラ"!=e.yomi||(r.houg=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(305)+e.g_sn(306);return t=r.multiply(i)},t.getSlot82PE=function(e){var t=new o,r=new o;if(76==e.ctype&&(r.tais=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(82);return t=r.multiply(i)},t.getSlot302PE=function(e){var t=new o,r=new o;if(76==e.ctype&&(r.tais=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(302);return t=r.multiply(i)},t.getSlot303PE=function(e){var t=new o,r=new o;if(16==e.ctype||4==e.ctype||20==e.ctype||41==e.ctype?(r.houg=1,r.tyku=1):89==e.ctype&&(r.houg=1,r.tyku=2,r.kaih=1),!r.exists())return t;var i=e.g_sn(303);return t=r.multiply(i)},t.getSlot307PE=function(e){var t=new o,r=new o;if(65!=e.ctype&&69!=e.ctype&&83!=e.ctype&&87!=e.ctype&&84!=e.ctype&&91!=e.ctype&&93!=e.ctype&&95!=e.ctype&&99!=e.ctype||(r.houg=1,r.tyku=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(307);return t=r.multiply(i)},t.getSlot308PE=function(e){var t=new o,r=new o;if(65!=e.ctype&&69!=e.ctype&&83!=e.ctype&&87!=e.ctype&&84!=e.ctype&&91!=e.ctype&&93!=e.ctype&&95!=e.ctype&&99!=e.ctype||(r.houg=1,r.tyku=1,r.kaih=1),2==e.stype?++r.houg:1==e.stype&&(++r.tyku,++r.kaih),!r.exists())return t;var i=e.g_sn(308);return t=r.multiply(i)},t.getSlot304PE=function(e){var t=new o,r=new o;if(16==e.ctype||4==e.ctype||20==e.ctype||41==e.ctype?(r.houg=1,r.tais=1,r.kaih=1):89==e.ctype&&(r.houg=1,r.tais=2,r.kaih=2),!r.exists())return t;var i=e.g_sn(304);return t=r.multiply(i)},t.getSlot99PE=function(e){var t=new o;return"そうりゅう"==e.yomi?t.houg=4:"ひりゅう"==e.yomi&&(t.houg=1),t},t.getSlot100PE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=4;else{if(554!=e.ship_id)return 196==e.ship_id?(t.houg=3,t):197==e.ship_id?(t.houg=6,t):t;r.houg=4}var i=e.g_sn(100);return t=r.multiply(i)},t.getSlotOtherSuiseiPE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=2;else{if(554!=e.ship_id)return t;r.houg=2}var i=e.g_sn(24)+e.g_sn(57)+e.g_sn(111);return t=r.multiply(i)},t.getSlot61PE=function(e){var t=new o;if(553==e.ship_id)t.houg=3,t.kaih=2,t.souk=1,t.houm=5,t.leng=1;else if(554==e.ship_id)t.houg=3,t.kaih=3,t.souk=3,t.houm=5,t.leng=1;else if(196==e.ship_id)t.houm=5,t.leng=1;else{if(197!=e.ship_id)return t;t.houm=5,t.leng=1}return t},t.getSlot93PE=function(e){var t=new o;return"そうりゅう"==e.yomi?t.houg=1:"ひりゅう"==e.yomi&&(t.houg=3),t},t.getSlot94PE=function(e){var t=new o;if(196==e.ship_id)t.houg=7;else{if(197!=e.ship_id)return t;t.houg=3}return t},t.getSlot143PE=function(e){var t=new o;return"あかぎ"==e.yomi?t.houg=3:"かが"==e.yomi||"しょうかく"==e.yomi?t.houg=2:("ずいかく"==e.yomi||"りゅうじょう"==e.yomi)&&(t.houg=1),t},t.getSlot144PE=function(e){var t=new o;return"あかぎ"==e.yomi?t.houg=3:"かが"==e.yomi?t.houg=2:"しょうかく"==e.yomi?(t.houg=2,461!=e.ship_id&&466!=e.ship_id||(t.houg+=2)):"ずいかく"==e.yomi?(t.houg=1,462!=e.ship_id&&467!=e.ship_id||++t.houg):"りゅうじょう"==e.yomi&&(t.houg=1),t},t.getSlot320PE=function(e){var t=new o,r=new o;if(553==e.ship_id)r.houg=2;else if(554==e.ship_id)r.houg=4;else if(196==e.ship_id)r.houg=3;else if(197==e.ship_id)r.houg=3;else if(508==e.ship_id)r.houg=4;else{if(509!=e.ship_id)return t;r.houg=4}var i=e.g_sn(320);return t=r.multiply(i)},t.getSlot293PE=function(e){var t=0,r=new o,i=new o,n=0;if(66==e.ctype||28==e.ctype)i.houg=2,i.tyku=1,i.kaih=3,n=1;else{if(74!=e.ctype&&77!=e.ctype)return r;i.houg=1,i.tyku=1,i.kaih=2,n=2}var a=e.g_sn(293);r=i.multiply(a);for(var u=0,s=0,c=e.have_slots_array;s<c.length;s++){var l=c[s];(12==(t=l.equipType)||13==t)&&l.sakuteki>=5&&++u}var f=e.g_sn(174);return 1==n?(u>0&&(r.houg+=2,r.kaih+=3,++r.raig),1==f?(r.houg+=2,r.raig+=4):f>=2&&(r.houg+=3,r.raig+=7)):2==n&&u>0&&(r.houg+=2,r.kaih+=3,++r.tais),r},t.getSlot294PE=function(e){var t=0,r=new o,i=new o;if(12!=e.ctype&&1!=e.ctype&&5!=e.ctype)return r;i.houg=1;var n=e.g_sn(294);r=i.multiply(n);for(var a=0,u=0,s=e.have_slots_array;u<s.length;u++){var c=s[u];(12==(t=c.equipType)||13==t)&&c.sakuteki>=5&&++a}var l=e.g_sn(13),f=e.g_sn(125),p=e.g_sn(285),h=l+f+p;return a>0&&(r.houg+=3,r.kaih+=2,++r.raig),1==h?(++r.houg,r.raig+=3):h>=2&&(r.houg+=2,r.raig+=5),p>=1&&++r.raig,r},t.getSlot295PE=function(e){var t=0,r=new o,i=new o;if(12!=e.ctype&&1!=e.ctype&&5!=e.ctype)return r;i.houg=2,i.tyku=2;var n=e.g_sn(295);r=i.multiply(n);for(var a=0,u=0,s=0,c=e.have_slots_array;s<c.length;s++){var l=c[s];12!=(t=l.equipType)&&13!=t||(l.sakuteki>=5&&++a,l.taikuu>=2&&++u)}var f=e.g_sn(13),p=e.g_sn(125),h=e.g_sn(285),g=f+p+h;return a>0&&(r.houg+=3,r.kaih+=2,++r.raig),1==g?(++r.houg,r.raig+=3):g>=2&&(r.houg+=2,r.raig+=5),h>=1&&++r.raig,u>0&&(r.tyku+=6),r},t.getSlot297PE=function(e){var t=new o,r=new o;if(12==e.ctype)r.kaih=2;else{if(1!=e.ctype&&5!=e.ctype)return t;r.kaih=1}var i=e.g_sn(297);return t=r.multiply(i)},t.getSlot63PE=function(e){var t=new o,r=new o;1!=e.ctype&&5!=e.ctype&&10!=e.ctype||++r.tyku,"ゆうだち"==e.yomi&&(++r.houg,++r.tyku,r.kaih+=2),145==e.ship_id?++r.houg:144==e.ship_id?++r.raig:469==e.ship_id?r.kaih+=2:242==e.ship_id||497==e.ship_id||244==e.ship_id||498==e.ship_id?++r.kaih:627==e.ship_id&&++r.houg;var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(63);return t=r.multiply(n)},t.getSlot296PE=function(e){var t=0,r=new o,i=new o;1!=e.ctype&&5!=e.ctype&&10!=e.ctype&&23!=e.ctype||++i.houg,10!=e.ctype&&23!=e.ctype||++i.kaih,145==e.ship_id?(++i.houg,++i.tyku):144==e.ship_id?(++i.houg,++i.raig):469==e.ship_id||587==e.ship_id||242==e.ship_id?++i.kaih:497==e.ship_id?(++i.houg,++i.kaih):244==e.ship_id?++i.kaih:498==e.ship_id?(++i.tyku,++i.kaih):627==e.ship_id&&(i.houg+=2,++i.raig);var n=!0;if(i.exists()||(n=!1),0==n)return r;var a=e.g_sn(296);r=i.multiply(a);var u=0;if(1!=e.ctype&&5!=e.ctype&&10!=e.ctype||(u=1),23==e.ctype&&(u=2),0==u)return r;for(var s=0,c=0,l=0,f=e.have_slots_array;l<f.length;l++){var p=f[l];12!=(t=p.equipType)&&13!=t||(p.sakuteki>=5&&++s,p.taikuu>=2&&++c)}return s>0&&(1==u?(++r.houg,r.kaih+=2,r.raig+=2):2==u&&(++r.houg,r.kaih+=2,r.raig+=3)),e.g_sn(285)+e.g_sn(125)>=1&&1==u&&(++r.houg,r.raig+=3),e.g_sn(15)+e.g_sn(286)>=1&&2==u&&(++r.houg,r.raig+=3),c>0&&(1==u?r.tyku+=5:2==u&&(r.tyku+=6)),r},t.getSlot90PE=function(e){var t=0,r=0,i=new o,n=new o;142==e.ship_id?(n.houg+=2,++n.kaih):295==e.ship_id||416==e.ship_id||417==e.ship_id?++n.houg:264==e.ship_id&&(++n.houg,++n.tyku),7!=e.ctype&&13!=e.ctype&&8!=e.ctype&&29!=e.ctype&&9!=e.ctype&&31!=e.ctype||++n.houg,n.exists()&&(t=e.g_sn(90),i=n.multiply(t));var a=[];if("あおば"==e.yomi&&(a[1]=1),13!=e.ctype&&7!=e.ctype||(a[2]=1),0==a.length)return i;for(var u=0,s=0,c=0,l=e.have_slots_array;c<l.length;c++){var f=l[c];12!=(r=f.equipType)&&13!=r||(f.sakuteki>=5&&++u,f.taikuu>=2&&++s)}return s>0&&null!=a[1]&&(i.tyku+=5,i.kaih+=2),u>0&&null!=a[2]&&(i.houg+=3,i.kaih+=2,i.raig+=2),i},t.getSlot50PE=function(e){var t=0,r=new o,i=!1,n=new o;7!=e.ctype&&13!=e.ctype&&8!=e.ctype&&29!=e.ctype&&9!=e.ctype&&31!=e.ctype||(++n.houg,i=!0),8!=e.ctype&&29!=e.ctype&&9!=e.ctype&&31!=e.ctype||(++n.houg,++n.kaih,i=!0);var a=e.g_sn(50);if(9!=e.ctype&&31!=e.ctype||a>=2&&(++n.houg,i=!0),0==i)return r;r=n.multiply(a);for(var u=0,s=0,c=e.have_slots_array;s<c.length;s++){var l=c[s];(12==(t=l.equipType)||13==t)&&l.sakuteki>=5&&++u}return u>0&&(7==e.ctype||13==e.ctype?0==e.g_sn(90)&&(++r.houg,++r.kaih,++r.raig):8!=e.ctype&&29!=e.ctype&&9!=e.ctype&&31!=e.ctype||(r.houg+=3,r.kaih+=2,r.raig+=2)),r},t.getSlot16M1PE=function(e){var t=new o,r=new o;67==e.ctype||78==e.ctype||82==e.ctype||88==e.ctype?(r.houg+=2,++r.souk,67==e.ctype&&(r.kaih-=2)):149!=e.ship_id&&150!=e.ship_id&&151!=e.ship_id&&152!=e.ship_id||(++r.houg,++r.souk,r.kaih-=3);var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(298)+e.g_sn(299)+e.g_sn(300);return t=r.multiply(n)},t.getSlot301PE=function(e){var t=new o,r=new o;67!=e.ctype&&78!=e.ctype&&82!=e.ctype&&88!=e.ctype||(r.tyku+=2,++r.kaih,++r.souk);var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(301);return t=r.multiply(n)},t.getSlot310PE=function(e){var t,r=0,i=0,n=0,a=new o,u=new o;34==e.ctype?(u.houg+=2,++u.tyku,++u.kaih):56==e.ctype?(u.houg+=2,++u.kaih):90==e.ctype&&(u.houg+=3,u.raig+=2,++u.tyku,++u.kaih);var s=new o,c=new o;622!=e.ship_id&&623!=e.ship_id&&624!=e.ship_id||(u.houg+=2,++u.kaih,++u.tais,s.houg=1,s.raig=1,c.houg=3,c.kaih=2,c.raig=2);var l=!0;if(u.exists()||(l=!1),0==l)return a;var f=e.g_sn(310);if(a=u.multiply(f),s.exists()){r=0;for(var p=0,h=null!==(t=e.have_slots_dict[310])&&void 0!==t?t:[];p<h.length;p++){h[p].level>=7&&r++}r>0&&a.add(s.multiply(r))}if(c.exists()){i=0;for(var g=0,d=e.have_slots_array;g<d.length;g++){var y=d[g];(12==(n=y.equipType)||13==n)&&y.sakuteki>=5&&++i}i>0&&a.add(c)}return a},t.getSlot119PE=function(e){var t=new o,r=new o;34==e.ctype||56==e.ctype?++r.houg:90==e.ctype&&(r.houg+=2,++r.raig);var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(119);return t=r.multiply(n)},t.getSlot313PE=function(e){var t=new o,r=new o;87!=e.ctype&&91!=e.ctype||(r.houg+=2,r.tyku+=2,++r.kaih,++r.souk);var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(313);return t=r.multiply(n)},t.getSlot314PE=function(e){var t=new o,r=new o;87!=e.ctype&&91!=e.ctype||(++r.houg,r.raig+=3);var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(314);return t=r.multiply(n)},t.getSlot315PE=function(e){var t=new o,r=new o;65!=e.ctype&&69!=e.ctype&&83!=e.ctype&&87!=e.ctype&&84!=e.ctype&&91!=e.ctype&&93!=e.ctype&&95!=e.ctype&&99!=e.ctype||(r.houg+=2,r.kaih+=3,r.saku+=4),87!=e.ctype&&91!=e.ctype||(++r.houg,t.leng=1);var i=!0;if(r.exists()||(i=!1),0==i)return t;var n=e.g_sn(315);return t.add(r.multiply(n)),t},t.getSlot358PE=function(e){var t=new o,r=new o;if(65!=e.ctype&&69!=e.ctype&&83!=e.ctype&&87!=e.ctype&&84!=e.ctype&&91!=e.ctype&&93!=e.ctype&&95!=e.ctype&&99!=e.ctype&&67!=e.ctype&&78!=e.ctype&&82!=e.ctype&&88!=e.ctype)return t;++r.houg,++r.kaih,++r.tyku,95==e.ctype&&(++r.houg,r.kaih+=2,r.tyku+=2);var i=e.g_sn(358);return t=r.multiply(i)},t.getSlot282PE=function(e){var t=new o,r=!1,i=!1;147!=e.ship_id&&73!=e.ctype&&81!=e.ctype||(r=!0),"ゆうばり"==e.yomi&&(i=!0);var n=new o;if((r||i)&&(n.houg+=2,++n.souk),!n.exists())return t;var a=e.g_sn(282);return t=n.multiply(a)},t.getSlot283PE=function(e){var t=new o,r=!1;147!=e.ship_id&&73!=e.ctype&&81!=e.ctype||(r=!0);var i=new o;if(r&&(i.raig+=3,++i.houg,++i.souk),!i.exists())return t;var n=e.g_sn(283);return t=i.multiply(n)},t.getSlot47PE=function(e){var t=new o,r=new o;if(["あさしも","はるかぜ","かみかぜ","やまかぜ","まいかぜ","しぐれ"].indexOf(e.yomi)>=0?(r.tais+=3,r.kaih+=2,++r.houg):["きしなみ","いそかぜ","はまかぜ","うしお","いかづち","やまぐも"].indexOf(e.yomi)>=0&&(r.tais+=2,r.kaih+=2),!r.exists())return t;var i=e.g_sn(47);return t=r.multiply(i)},t.getSlot106PE=function(e){var t=new o,r=new o;if([407,419,145,151,541].indexOf(e.ship_id)>=0?(++r.houg,r.tyku+=2,++r.souk,r.kaih+=3):["おおよど","ひびき","かしま"].indexOf(e.yomi)>=0?(++r.tyku,++r.souk,r.kaih+=3):["やはぎ","ゆきかぜ","いそかぜ","あさしも","はまかぜ","かすみ","すずつき"].indexOf(e.yomi)>=0&&(r.tyku+=2,++r.souk,r.kaih+=2),!r.exists())return t;var i=e.g_sn(106);return t=r.multiply(i)},t.getSlot129PE=function(e){var t=new o,r=!1,i=new o;if([66,28,12,1,5,10,23,18,30,38,22,54].indexOf(e.ctype)>=0?(i.houg=1,i.raig=2,i.kaih=2,i.tais=2,i.saku=1,r=!0):[21,4,20,16,34,56,41,52].indexOf(e.ctype)>=0?(i.houg=1,i.raig=2,i.kaih=2,i.saku=3,r=!0):[7,13,29,8,9,31].indexOf(e.ctype)>=0&&(i.houg=1,i.kaih=2,i.saku=3,r=!0),0==r)return t;var n=e.g_sn(129);return t=i.multiply(n)},t.getSlot184PE=function(e){var t=new o,r=new o;if(68==e.ctype&&(++r.houg,r.tyku+=2,r.kaih+=3),!r.exists())return t;var i=e.g_sn(184);return t=r.multiply(i)},t.getSlot188PE=function(e){var t=new o,r=new o;if(68==e.ctype&&(r.houg+=3,++r.tyku,++r.kaih),!r.exists())return t;var i=e.g_sn(188);return t=r.multiply(i)},t.getSlot189PE=function(e){var t=new o,r=new o;if(68!=e.ctype&&63!=e.ctype||(++r.tyku,r.kaih+=2),!r.exists())return t;var i=e.g_sn(189);return t=r.multiply(i)},t.getSlot316PE=function(e){var t=new o,r=new o;if(68==e.ctype&&(r.houg+=4,++r.tyku,++r.kaih),!r.exists())return t;var i=e.g_sn(316);return t=r.multiply(i)},t.getSlot194PE=function(e){var t=new o,r=new o;if(70==e.ctype?(r.houg+=3,r.kaih+=2,r.saku+=2):72!=e.ctype&&62!=e.ctype||(++r.kaih,r.saku+=2),392==e.ship_id&&(++r.houg,r.kaih+=2,r.saku+=2),!r.exists())return t;var i=e.g_sn(194);return t=r.multiply(i)},t.getSlotType9PE=function(e){var t=0,r=new o;if(null=={11:1,18:1,7:1,10:1}[e.stype])return r;for(var i=0,n=0,a=e.have_slots_array;n<a.length;n++){var u=a[n];9==u.equipType&&(i<(t=u.level)&&(i=t))}return i>=2&&++r.saku,i>=4&&++r.houg,i>=6&&++r.saku,i>=10&&(++r.houg,++r.saku),r},t.getSlot61PE2=function(e){var t=0,r=new o;if(null==e.have_slots_dict[61])return r;for(var i=0,n=0,a=e.have_slots_dict[61];n<a.length;n++){i<(t=a[n].level)&&(i=t)}return 0==i||("そうりゅう"==e.yomi?(r.houg+=3,r.saku+=3):"ひりゅう"==e.yomi&&(r.houg+=2,r.saku+=2),508!=e.ship_id&&509!=e.ship_id&&560!=e.ship_id||(++r.houg,++r.saku),i>=8&&197==e.ship_id&&(++r.houg,++r.saku)),r},t.getSlot318PE=function(e){var t=0,r=new o,i=new o,n=new o,a=new o;if(411==e.ship_id||412==e.ship_id?++i.houg:82==e.ship_id?(i.houg+=2,i.tyku+=2,i.kaih+=2,a.tyku=2,a.kaih=3,a.houm=1):553==e.ship_id?(i.houg+=2,i.tyku+=2,i.kaih+=2,i.houm+=3,a.tyku=2,a.kaih=3,a.houm=1,n.kaih=2,n.souk=1):88==e.ship_id?(i.houg+=2,i.tyku+=2,i.kaih+=2,a.tyku=2,a.kaih=3,a.houm=1):541==e.ship_id||573==e.ship_id?(i.houg+=3,i.tyku+=2,++i.kaih,i.houm+=2,n.houg=2,n.kaih=2,n.souk=1,n.houm=1):554==e.ship_id&&(i.houg+=3,i.tyku+=2,i.kaih+=2,i.houm+=3,a.tyku=2,a.kaih=3,a.houm=1,n.houg=1,n.kaih=2,n.souk=1,n.houm=1),!i.exists())return r;var u=e.g_sn(318);if(r=i.multiply(u),!n.exists()&&!a.exists())return r;for(var s=0,c=0,l=e.have_slots_array;c<l.length;c++){var f=l[c];(12==(t=f.equipType)||13==t)&&f.taikuu>=2&&++s}var p=e.g_sn(290);return a.exists()&&s>0&&0==p&&r.add(a),n.exists()&&e.g_sn(290)>=1&&r.add(n),r},t.getSlot328PE=function(e){var t=new o,r=new o;if("こんごう"==e.yomi?(r.houg=1,r.kaih=1,209==e.ship_id||149==e.ship_id?++r.houg:591==e.ship_id&&(r.houg+=2,++r.raig)):"ひえい"==e.yomi?(r.houg=1,r.kaih=1,210!=e.ship_id&&150!=e.ship_id||++r.houg):"はるな"==e.yomi?(r.houg=1,r.kaih=1,211!=e.ship_id&&151!=e.ship_id||++r.houg):"きりしま"==e.yomi?(r.houg=1,r.kaih=1,212!=e.ship_id&&152!=e.ship_id||++r.houg):("ふそう"==e.yomi||"やましろ"==e.yomi||"いせ"==e.yomi||"ひゅうが"==e.yomi)&&(r.houg=1),!r.exists())return t;var i=e.g_sn(328);return t=r.multiply(i)},t.getSlot329PE=function(e){var t=new o,r=new o;if("こんごう"==e.yomi?(r.houg=1,r.kaih=1,209==e.ship_id?++r.houg:149==e.ship_id?(r.houg+=2,++r.tyku):591==e.ship_id&&(r.houg+=3,++r.tyku,r.raig+=2)):"ひえい"==e.yomi?(r.houg=1,r.kaih=1,210==e.ship_id?++r.houg:150==e.ship_id&&(r.houg+=2,++r.tyku)):"はるな"==e.yomi?(r.houg=1,r.kaih=1,211==e.ship_id?++r.houg:151==e.ship_id&&(r.houg+=2,++r.tyku)):"きりしま"==e.yomi?(r.houg=1,r.kaih=1,212==e.ship_id?++r.houg:152==e.ship_id&&(r.houg+=2,++r.tyku)):("ふそう"==e.yomi||"やましろ"==e.yomi||"いせ"==e.yomi||"ひゅうが"==e.yomi)&&(r.houg=1),!r.exists())return t;var i=e.g_sn(329);return t=r.multiply(i)},t.getSlot_16InchMkXRensouhou_PE=function(e){var t=0,r=0,i=0,n=new o;if("コロラド"==e.yomi)return(t=e.g_sn(330))>0&&(n.houg+=1*t),(r=e.g_sn(331))>0&&(n.houg+=1*r,1496==e.ship_id&&(n.houg+=1*r,n.kaih+=1*r)),(i=e.g_sn(332))>0&&(n.houg+=1*i,1496==e.ship_id&&(n.houg+=1*i,n.kaih+=1*i,n.tyku+=1*i)),n;var a=new o;if(19==e.ctype?(a.houg=1,(541==e.ship_id||573==e.ship_id)&&++a.houg):88==e.ctype&&(a.houg=1,576==e.ship_id&&++a.houg),!a.exists())return n;var u=e.g_sn(330)+e.g_sn(331)+e.g_sn(332);return n=a.multiply(u)},t.getSlot317PE=function(e){var t=new o,r=new o;return 6==e.ctype&&(++r.houg,++r.tyku),149==e.ship_id||591==e.ship_id?(r.houg+=2,r.tyku+=2):150==e.ship_id?(++r.houg,++r.tyku):151==e.ship_id?(++r.houg,++r.tyku,++r.kaih):152==e.ship_id?(r.houg+=2,++r.tyku):541==e.ship_id?(++r.houg,r.tyku+=2):573==e.ship_id&&(r.houg+=2,r.tyku+=2,++r.kaih),r.exists()?t=r.multiply(1):t},t.getSlot35PE=function(e){var t=new o,r=new o;return 149==e.ship_id||591==e.ship_id?(++r.houg,++r.tyku):150==e.ship_id?++r.tyku:151==e.ship_id?(++r.tyku,++r.kaih):152==e.ship_id&&++r.houg,r.exists()?t=r.multiply(1):t},t.getSlot324And325PE=function(e){var t=new o,r=new o;if(554==e.ship_id?(r.tais=2,r.kaih=1):553==e.ship_id&&(r.tais=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(324)+e.g_sn(325);return t=r.multiply(i)},t.getSlot326PE=function(e){var t=new o,r=new o;if(554==e.ship_id?(r.houg=1,r.tais=3,r.kaih=2):553==e.ship_id&&(r.tais=2,r.kaih=1),!r.exists())return t;var i=e.g_sn(326);return t=r.multiply(i)},t.getSlot327PE=function(e){var t=new o,r=new o;if(554==e.ship_id?(r.houg=2,r.tais=4,r.kaih=2):553==e.ship_id&&(r.houg=1,r.tais=3,r.kaih=1),!r.exists())return t;var i=e.g_sn(327);return t=r.multiply(i)},t.getSlot322PE=function(e){var t=new o,r=new o;if(554!=e.ship_id&&553!=e.ship_id||(r.houg=5,r.tyku=2,r.kaih=2,r.tais=1),!r.exists())return t;var i=e.g_sn(322);return t=r.multiply(i)},t.getSlot323PE=function(e){var t=new o,r=new o;if(554!=e.ship_id&&553!=e.ship_id||(r.houg=6,r.tyku=3,r.kaih=3,r.tais=2),!r.exists())return t;var i=e.g_sn(323);return t=r.multiply(i)},t.getSlot319PE=function(e){var t=new o,r=new o;if(554!=e.ship_id&&553!=e.ship_id||(r.houg=7,r.tyku=3,r.kaih=2),!r.exists())return t;var i=e.g_sn(319);return t=r.multiply(i)},t.getSlot335PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id?(r.tyku=1,r.kaih=1):594!=e.ship_id&&599!=e.ship_id||(r.tyku=2,r.kaih=1),!r.exists())return t;var i=e.g_sn(335);return t=r.multiply(i)},t.getSlot336PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id?(r.houg=1,r.tyku=1,r.kaih=1):594!=e.ship_id&&599!=e.ship_id||(r.houg=1,r.tyku=2,r.kaih=1),!r.exists())return t;var i=e.g_sn(336);return t=r.multiply(i)},t.getSlot337PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id?(r.houg=1,r.tyku=1,r.kaih=1):594!=e.ship_id&&599!=e.ship_id||(r.houg=2,r.tyku=2,r.kaih=1),!r.exists())return t;var i=e.g_sn(337);return t=r.multiply(i)},t.getSlot338PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id?(r.houg=1,r.tyku=1,r.kaih=2):594==e.ship_id?(r.houg=1,r.tyku=2,r.kaih=3):599==e.ship_id&&(r.houg=4,r.tyku=3,r.kaih=4),!r.exists())return t;var i=e.g_sn(338);return t=r.multiply(i)},t.getSlot339PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id?(r.houg=1,r.tyku=2,r.kaih=2):594==e.ship_id?(r.houg=1,r.tyku=3,r.kaih=4):599==e.ship_id&&(r.houg=6,r.tyku=4,r.kaih=5),!r.exists())return t;var i=e.g_sn(339);return t=r.multiply(i)},t.getSlot18_52_PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id||156==e.ship_id?r.houg=1:594==e.ship_id?(r.houg=1,r.kaih=1):599==e.ship_id&&(r.houg=2,r.kaih=1),!r.exists())return t;var i=e.g_sn(18)+e.g_sn(52);return t=r.multiply(i)},t.getSlot342PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id||461==e.ship_id||466==e.ship_id||462==e.ship_id||467==e.ship_id?r.houg=1:594==e.ship_id?(r.houg=2,r.tyku=1,r.kaih=1):599==e.ship_id&&(r.houg=3,r.tyku=2,r.kaih=2),!r.exists())return t;var i=e.g_sn(342);return t=r.multiply(i)},t.getSlot343PE=function(e){var t=new o,r=new o;if(277==e.ship_id||278==e.ship_id?r.houg=2:461==e.ship_id||466==e.ship_id||462==e.ship_id||467==e.ship_id?r.houg=1:594==e.ship_id?(r.houg=3,r.tyku=2,r.kaih=1):599==e.ship_id&&(r.houg=5,r.tyku=3,r.kaih=3),!r.exists())return t;var i=e.g_sn(343);return t=r.multiply(i)},t.getSlot344PE=function(e){var t=new o,r=new o;if(599==e.ship_id?r.houg=3:555==e.ship_id||560==e.ship_id?(r.houg=2,r.tais=2):318==e.ship_id?(r.houg=4,r.tais=1):282==e.ship_id&&(r.houg=2,r.tais=1),!r.exists())return t;var i=e.g_sn(344);return t=r.multiply(i)},t.getSlot345PE=function(e){var t=new o,r=new o;if(599==e.ship_id?(r.houg=3,r.kaih=1):555==e.ship_id||560==e.ship_id?(r.houg=3,r.tais=2,r.kaih=2):318==e.ship_id?(r.houg=5,r.tais=1,r.kaih=2):282==e.ship_id&&(r.houg=3,r.tais=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(345);return t=r.multiply(i)},t.getSlot340PE=function(e){var t=new o,r=new o;if("ガリバルディ"!=e.yomi&&"アブルッツィ"!=e.yomi||(r.houg=1,r.tyku=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(340);return t=r.multiply(i)},t.getSlot341PE=function(e){var t=new o,r=new o;if("ガリバルディ"==e.yomi||"アブルッツィ"==e.yomi?(r.houg=2,r.tyku=1,r.kaih=1):"ゴトランド"==e.yomi&&(r.houg=1,r.tyku=1,r.kaih=1),!r.exists())return t;var i=e.g_sn(341);return t=r.multiply(i)},t.getSlot19PE=function(e){var t=new o,r=new o;if("ほうしょう"==e.yomi&&(r.houg=2,r.kaih=2,r.tais=2,r.tyku=2),75!=e.ctype&&76!=e.ctype||(r.houg=2,r.tais=3),7==e.stype&&(++r.tyku,++r.kaih),!r.exists())return t;var i=e.g_sn(19);return t=r.multiply(i)},t.getSlot228PE=function(e){var t=new o,r=new o;if("ほうしょう"==e.yomi&&(r.houg=3,r.kaih=4,r.tais=4,r.tyku=3),75!=e.ctype&&76!=e.ctype||(r.houg=2,r.tais=5,r.tyku=1,r.kaih=1),7==e.stype&&(r.tais+=2,++r.tyku,++r.kaih),!r.exists())return t;var i=e.g_sn(228);return t=r.multiply(i)},t.getSlot368PE=function(e){var t=new o,r=!1,i=new o;if("ゴトランド"==e.yomi&&(i.houg=4,i.tais=3,i.kaih=2,i.saku=3,r=!0),70==e.ctype?(i.houg=2,i.tais=3,i.kaih=1,i.saku=2,r=!0):72==e.ctype||62==e.ctype?(++i.houg,i.tais+=2,++i.kaih,i.saku+=2,r=!0):67!=e.ctype&&78!=e.ctype&&82!=e.ctype&&88!=e.ctype||(i.houg+=2,i.tais+=2,i.kaih+=2,i.saku+=2,r=!0),0==r)return t;var n=e.g_sn(368);return t=i.multiply(n)},t.getSlot367PE=function(e){var t=new o,r=!1,i=new o;if("ゴトランド"==e.yomi&&(i.houg+=2,++i.tais,++i.kaih,++i.saku,r=!0),70==e.ctype?(++i.houg,++i.tais,++i.kaih,++i.saku,r=!0):72==e.ctype||62==e.ctype?(++i.houg,++i.kaih,++i.saku,r=!0):67!=e.ctype&&78!=e.ctype&&82!=e.ctype&&88!=e.ctype||(i.houg+=2,i.kaih+=2,i.saku+=2,r=!0),0==r)return t;var n=e.g_sn(367);return t=i.multiply(n)},t.getSlot356_357PE=function(e){var t=new o,r=new o;if(95==e.ctype?r.houg=2:9==e.ctype&&(r.houg=1),!r.exists())return t;var i=e.g_sn(356)+e.g_sn(357);return t=r.multiply(i)},t.getSlot359PE=function(e){var t=new o,r=new o;if("パース"==e.yomi?(r.houg=2,r.tyku=2,r.kaih=1):"ゆうばり"==e.yomi&&(r.houg=1,r.tyku=1,r.kaih=1),622!=e.ship_id&&623!=e.ship_id&&624!=e.ship_id||(++r.houg,++r.tyku),!r.exists())return t;var i=e.g_sn(359);return t=r.multiply(i)},t.getSlot360_361PE=function(e){var t=new o,r=new o;if("デ・ロイテル"==e.yomi?(r.houg=2,r.tyku=2,r.kaih=1):"ゴトランド"==e.yomi&&(r.houg=2,r.tyku=1,r.kaih=1),41==e.ctype&&(r.houg=1,r.tyku=1),!r.exists())return t;var i=e.g_sn(360)+e.g_sn(361);return t=r.multiply(i)},t.getSlot362_363PE=function(e){var t=new o,r=new o,i=!1;if(99==e.ctype?(r.houg=1,r.tyku=2,r.kaih=1,i=!0):34==e.ctype||21==e.ctype?(r.houg=-3,r.tyku=-3,r.kaih=-8,i=!0):4==e.ctype||20==e.ctype||16==e.ctype?(r.houg=-3,r.tyku=-2,r.kaih=-6,i=!0):89==e.ctype||56==e.ctype?(r.houg=-2,r.tyku=-1,r.kaih=-4,i=!0):52!=e.ctype&&41!=e.ctype&&98!=e.ctype||(r.tyku=-1,r.kaih=-2,i=!0),65!=e.ctype&&69!=e.ctype&&83!=e.ctype&&87!=e.ctype&&84!=e.ctype&&91!=e.ctype&&93!=e.ctype&&95!=e.ctype&&99!=e.ctype||(++r.tyku,++r.kaih,i=!0),0==i)return t;var n=e.g_sn(362)+e.g_sn(363);return t=r.multiply(n)},t.getSlot364PE=function(e){new o;var t=new o;623==e.ship_id||586==e.ship_id||119==e.ship_id||118==e.ship_id?(t.raig=1,t.kaih=-2,119==e.ship_id?++t.raig:623==e.ship_id&&(++t.houg,t.raig+=3)):(t.houg=-1,t.kaih=-7);var r=e.g_sn(364);return t.multiply(r)},t.getSlot287PE=function(e){var t=new o,r=new o,i=!1;if(488!=e.ship_id&&141!=e.ship_id&&160!=e.ship_id&&624!=e.ship_id||(r.tais=1,r.kaih=1,i=!0),0==i)return t;var n=e.g_sn(287);return t=r.multiply(n)},t.getSlot288PE=function(e){var t=new o,r=new o,i=!1;if(488==e.ship_id||141==e.ship_id||160==e.ship_id?(r.tais=2,r.kaih=1,i=!0):624==e.ship_id&&(r.houg=1,r.tais=3,r.kaih=2,i=!0),0==i)return t;var n=e.g_sn(288);return t=r.multiply(n)},t.getSlot149PE=function(e){var t=new o,r=new o,i=!1;return 488==e.ship_id||141==e.ship_id||160==e.ship_id||622==e.ship_id||623==e.ship_id?(r.tais=1,r.kaih=3,i=!0):624==e.ship_id&&(r.tais=3,r.kaih=5,i=!0),54==e.ctype&&(r.tais=1,r.kaih=2,i=!0),0==i||(t=r.multiply(1)),t},t.getSlot365PE=function(e){var t=new o,r=new o,i=!1;return 37!=e.ctype&&19!=e.ctype&&2!=e.ctype&&26!=e.ctype&&6!=e.ctype||(++r.houg,i=!0),136!=e.ship_id&&148!=e.ship_id&&546!=e.ship_id&&541!=e.ship_id&&573!=e.ship_id||(++r.houg,i=!0),591==e.ship_id&&(r.houg+=2,i=!0),0==i?t:t=r.multiply(1)},t}(Object),l=function(){function e(e){this.gear=e}return Object.defineProperty(e.prototype,"mstID",{get:function(){return this.gear.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memID",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemName",{get:function(){return this.gear.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.gear.star},enumerable:!0,configurable:!0}),e.prototype.isLocked=function(){return!1},Object.defineProperty(e.prototype,"aLevel",{get:function(){return this.gear.proficiency.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cardType",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipType",{get:function(){return this.gear.category.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipTypeSp",{get:function(){return 128==this.mstID?38:142==this.mstID?43:281==this.mstID?38:this.equipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipTypeSp2",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconType",{get:function(){return this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"syatei",{get:function(){return this.gear.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"karyoku",{get:function(){return this.gear.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raisou",{get:function(){return this.gear.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taikuu",{get:function(){return this.gear.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taisen",{get:function(){return this.gear.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bakusou",{get:function(){return this.gear.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meichu",{get:function(){return this.gear.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kaihi",{get:function(){return this.gear.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sakuteki",{get:function(){return this.gear.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soukou",{get:function(){return this.gear.armor},enumerable:!0,configurable:!0}),e.prototype.getDistance=function(){return this.gear.radius},e}();t.createEquipmentBonus=function(e){var t=e.gears.map((function(e){return e&&new l(e)})).filter((function(e){return Boolean(e)})),r=c.getSlotitemEffect(e,t);return{firepower:r.houg,torpedo:r.raig,antiAir:r.tyku,armor:r.souk,evasion:r.kaih,asw:r.tais,los:r.saku,accuracy:r.houm,range:r.leng}}},3139:function(e,t,r){"use strict";var i=r(517),n=function(e){var t=this;this.planes=e,this.calcRate=function(e){var r,n,a=t.planes,o=e.contactMultiplier,u=function(e,t){return 0===t?0:Math.min((e+1)/(70-15*t),1)}(Object(i.a)(a.filter((function(e){return e.is("ReconnaissanceAircraft")})),(function(e){return e.contactTriggerFactor})),o),s=((r={})[1.2]=0,r[1.17]=0,r[1.12]=0,r),c=u*a.filter((function(e){return e.canContact})).sort((function(e,t){return t.gear.accuracy-e.gear.accuracy})).reduce((function(t,r){var i=(1-t)*r.contactSelectionRate(e),n=r.gear.accuracy;return n>=3?s[1.2]+=i:2===n?s[1.17]+=i:s[1.12]+=i,t+i}),0),l=((n={})[1.2]=s[1.2]*u,n[1.17]=s[1.17]*u,n[1.12]=s[1.12]*u,n);return{successRate:c,triggerRate:u,selectionRateMap:s,rateMap:l,airControlState:e}},this.getContactModifier=function(e){if(0===e.contactMultiplier)return 1;var r=t.calcRate(e).rateMap,i=Math.random();return i<r[1.2]?1.2:i<r[1.2]+r[1.17]?1.17:i<r[1.2]+r[1.17]+r[1.12]?1.12:1}};t.a=n},3155:function(e,t,r){"use strict";r.d(t,"b",(function(){return A}));var i=r(37),n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.includes(t.gearId)}},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.map(i.b.keyToId).includes(t.categoryId)}},o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return e(t)}))}},u=a("SmallCaliberMainGun","MediumCaliberMainGun","LargeCaliberMainGun","LargeCaliberMainGun2"),s=a("SmallRadar","LargeRadar","LargeRadar2"),c=o(s,(function(e){return e.los>=5})),l=o(s,(function(e){return e.antiAir>=2})),f=a("ExtraArmor","MediumExtraArmor","LargeExtraArmor"),p=a("CarrierBasedFighterAircraft","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2"),h=a("ReconnaissanceSeaplane","SeaplaneBomber","SeaplaneFighter","LargeFlyingBoat"),g=a("LandBasedAttackAircraft","LandBasedFighter","LandBasedReconnaissanceAircraft"),d=a("JetPoweredFighter","JetPoweredFighterBomber","JetPoweredTorpedoBomber","JetPoweredReconnaissanceAircraft"),y=a("CarrierBasedFighterAircraft","SeaplaneFighter","LandBasedFighter","JetPoweredFighter"),m=a("CarrierBasedDiveBomber","SeaplaneBomber","JetPoweredFighterBomber"),b=a("CarrierBasedTorpedoBomber","JetPoweredTorpedoBomber","LandBasedAttackAircraft"),v=a("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane","LargeFlyingBoat","JetPoweredReconnaissanceAircraft","LandBasedReconnaissanceAircraft"),S={Abyssal:function(e){return e.gearId>500},HighAngleMount:function(e){return 16===e.iconId},MainGun:u,Radar:s,SurfaceRadar:c,AirRadar:l,Armor:f,CarrierBasedAircraft:p,Seaplane:h,LandBasedAircraft:g,JetPoweredAircraft:d,Fighter:y,DiveBomber:m,TorpedoBomber:b,ReconnaissanceAircraft:v,FighterBomber:o(a("CarrierBasedDiveBomber"),(function(e){return e.antiAir>=4})),Aircraft:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e(t)}))}}(y,m,b,v,a("Autogyro","AntiSubmarinePatrolAircraft")),AntiInstallationBomber:n(60,64,305,306,148,233,277,319),AswGear:a("Sonar","DepthCharge","LargeSonar","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft"),AswAircraft:o((function(e){return e.asw>0}),a("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft","LargeFlyingBoat")),DepthChargeProjector:n(44,45),AdditionalDepthCharge:n(226,227),AntiGroundRocketLauncher:n(348,349),Mortar:n(346,347)},w=Object.keys(S),P={from:function(e){var t=function(e){return w.filter((function(t){return S[t](e)}))}(e),r=i.b.numberToKey(e.categoryId);return r&&t.push(r),t}},A=["armor","firepower","torpedo","speed","bombing","antiAir","asw","los","accuracy","evasion","interception","antiBomber","range","radius"],k=function(){function e(e,t,r){var n=this;this.category=t,this.improvable=r,this.radius=0,this.is=function(e){return n.attrs.includes(e)},this.id=e.api_id,this.name=e.api_name,this.categoryId=t.id,this.iconId=e.api_type[3],this.hp=e.api_taik,this.armor=e.api_souk,this.firepower=e.api_houg,this.torpedo=e.api_raig,this.speed=e.api_soku,this.bombing=e.api_baku,this.antiAir=e.api_tyku,this.asw=e.api_tais,this.los=e.api_saku,this.luck=e.api_luck,this.range=e.api_leng;var a=e.api_houm,o=e.api_houk;this.accuracy=0,this.evasion=0,this.antiBomber=0,this.interception=0,this.categoryId===i.a.LandBasedFighter?(this.antiBomber=a,this.interception=o):(this.accuracy=a,this.evasion=o),e.api_distance&&(this.radius=e.api_distance),this.attrs=P.from(this)}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}();t.a=k},322:function(e,t,r){"use strict";var i=r(3162),n=r(345),a=r(276),o=r(225),u=function(){function e(e){var t=this;this.combatInformation=e,this.shotdownInFighterCombat=function(e,t,r){var i;if("Player"===r){var n=t/4,a=Math.floor(t/3*100);i=Math.floor(Math.random()*(a+1))/100+n}else{a=11-t;i=.35*Math.floor(Math.random()*(a+1))+.65*Math.floor(Math.random()*(a+1))}var o=i/10,u=Math.floor(e.slotSize*o);e.is("JetPoweredAircraft")?e.shotdown(.6*u):e.shotdown(u)},this.shipAntiAirDefense=function(e,r,i){var n=t.combatInformation.battleType,u=t.combatInformation.getShipInformation(e),s=u.side,c=u.fleetRole,l=u.fleetAntiAir,f=o.a.getCombinedFleetModifier(c,n),p=new a.a(e,s,l,f,i).getShotdownNumber(r);r.shotdown(p)}}return e.prototype.fighterCombat=function(e,t){var r=this,i=e.reduce((function(e,t){return e+t.fighterPower}),0),a=t.reduce((function(e,t){return e+t.fighterPower}),0),o=n.a.fromFighterPower(i,a);return e.forEach((function(e){return r.shotdownInFighterCombat(e,o.constant,"Player")})),t.forEach((function(e){return r.shotdownInFighterCombat(e,o.constant,"Enemy")})),o},e.prototype.antiAirDefense=function(e,t,r){for(var n=0,a=t;n<a.length;n++){var o=a[n],u=e[Object(i.a)(e.length-1)];this.shipAntiAirDefense(u,o,r)}},e}();t.a=u},344:function(e,t,r){"use strict";var i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=function(){function e(t,r,n){var a=this;this.id=t,this.name=r,this.modifiers=n,this.getModifiers=function(t){return a!==e.Vanguard?a.modifiers:i(i({},a.modifiers),"Main"===t?{shelling:{power:.5,accuracy:.8,evasion:1},torpedo:{power:1,accuracy:.75,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:.5,accuracy:1,evasion:1}}:{shelling:{power:1,accuracy:1.2,evasion:1},torpedo:{power:1,accuracy:.95,evasion:1},asw:{power:.6,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}})},e.values.push(this)}return Object.defineProperty(e,"singleFleetFormations",{get:function(){return e.values.filter((function(e){return e.id<=10}))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"combinedFleetFormations",{get:function(){return e.values.filter((function(e){return e.id>10}))},enumerable:!0,configurable:!0}),e.fromId=function(t){return e.values.find((function(e){return e.id===t}))},Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){return this.modifiers.fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleetFormation",{get:function(){return this.id>10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingSupportModifiers",{get:function(){return this===e.Vanguard?{power:.5,accuracy:.8}:this.isCombinedFleetFormation?{power:1,accuracy:1}:this.getModifiers("Main").shelling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protectionRate",{get:function(){return this===e.LineAhead?.45:this===e.Diamond?.75:.6},enumerable:!0,configurable:!0}),e}();t.a=n,n.keys=["LineAhead","DoubleLine","Diamond","Echelon","LineAbreast","Vanguard","CruisingFormation1","CruisingFormation2","CruisingFormation3","CruisingFormation4"].concat(),n.values=[],n.LineAhead=new n(1,"単縦陣",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),n.DoubleLine=new n(2,"複縦陣",{fleetAntiAir:1.2,shelling:{power:.8,accuracy:1.2,evasion:1},torpedo:{power:.8,accuracy:.8,evasion:1},asw:{power:.8,accuracy:1.2,evasion:1},night:{power:1,accuracy:.9,evasion:1}}),n.Diamond=new n(3,"輪形陣",{fleetAntiAir:1.6,shelling:{power:.7,accuracy:1,evasion:1.1},torpedo:{power:.7,accuracy:.4,evasion:1.1},asw:{power:1.2,accuracy:1,evasion:1},night:{power:1,accuracy:.7,evasion:1}}),n.Echelon=new n(4,"梯形陣",{fleetAntiAir:1,shelling:{power:.75,accuracy:1.2,evasion:1.2},torpedo:{power:.6,accuracy:.6,evasion:1.3},asw:{power:1.1,accuracy:1.2,evasion:1.3},night:{power:1,accuracy:.9,evasion:1.2}}),n.LineAbreast=new n(5,"単横陣",{fleetAntiAir:1,shelling:{power:.6,accuracy:1.2,evasion:1.3},torpedo:{power:.6,accuracy:.3,evasion:1.4},asw:{power:1.3,accuracy:1.2,evasion:1.1},night:{power:1,accuracy:.8,evasion:1.2}}),n.Vanguard=new n(6,"警戒陣",{fleetAntiAir:1.1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation1=new n(11,"第一警戒航行序列",{fleetAntiAir:1.1,shelling:{power:.8,accuracy:1,evasion:1},torpedo:{power:.7,accuracy:1,evasion:1},asw:{power:1.3,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation2=new n(12,"第二警戒航行序列",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:.9,accuracy:1,evasion:1},asw:{power:1.1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation3=new n(13,"第三警戒航行序列",{fleetAntiAir:1.5,shelling:{power:.7,accuracy:1,evasion:1},torpedo:{power:.6,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation4=new n(14,"第四警戒航行序列",{fleetAntiAir:1,shelling:{power:1.1,accuracy:1.1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.7,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),n.isIneffective=function(e,t){return[[n.DoubleLine,n.LineAbreast],[n.LineAbreast,n.Echelon],[n.Echelon,n.LineAhead]].some((function(r){return r[0]===e&&r[1]===t}))}},345:function(e,t,r){"use strict";var i=function(){function e(t,r,i){this.id=t,this.name=r,this.constant=i,e.values.push(this)}return e.fromFighterPower=function(t,r){var i=e.getBoundaryValues(r);return t>=i.AirSupremacy?e.AirSupremacy:t>=i.AirSuperiority?e.AirSuperiority:t>=i.AirParity?e.AirParity:t>=i.AirDenial?e.AirDenial:e.AirIncapability},e.fromId=function(t){return e.values.find((function(e){return e.id===t}))},Object.defineProperty(e.prototype,"contactMultiplier",{get:function(){switch(this){case e.AirSupremacy:return 3;case e.AirSuperiority:return 2;case e.AirDenial:return 1;default:return 0}},enumerable:!0,configurable:!0}),e}();t.a=i,i.values=[],i.AirSupremacy=new i(1,"制空権確保",1),i.AirSuperiority=new i(2,"航空優勢",3),i.AirParity=new i(0,"制空均衡",5),i.AirDenial=new i(3,"航空劣勢",7),i.AirIncapability=new i(4,"制空権喪失",10),i.getBoundaryValues=function(e){return{AirSupremacy:Math.ceil(3*e),AirSuperiority:Math.ceil(1.5*e),AirParity:Math.floor(2/3*e)+1,AirDenial:Math.floor(1/3*e)+1}}},3622:function(e,t,r){"use strict";var i=r(3748),n=r(559),a=r(284),o=r.n(a),u=function(){function e(e,t,r,i,a){var u=this;this.stats=e,this.category=t,this.improvement=r,this.proficiency=i,this.attrs=a,this.is=function(e){return u.attrs.includes(e)},this.match=function(e){return"number"==typeof e?u.gearId===e:o()(e)(u)},this.toState=function(){return{gearId:u.gearId,star:u.star,exp:u.exp}},this.calcFighterPower=function(e,t){void 0===t&&(t=!1);var r=u,i=r.antiAir,a=r.interception,o=r.antiBomber,s=r.improvement,c=r.proficiency,l=s.fighterPowerModifier,f=c.fighterPowerBonus;return Object(n.a)({slotSize:e,antiAir:i,interception:a,antiBomber:o,improvementModifier:l,proficiencyModifier:f,isInterception:t})}}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.stats.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.stats.categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.stats.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.stats.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvable",{get:function(){return this.stats.improvable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.stats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.stats.armor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.stats.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.stats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.stats.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.stats.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.stats.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.stats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.stats.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return this.stats.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.stats.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiBomber",{get:function(){return this.stats.antiBomber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interception",{get:function(){return this.stats.interception},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stats.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.improvement.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this.proficiency.internal},enumerable:!0,configurable:!0}),e}(),s=r(37),c=function(){function e(e,t,r){void 0===e&&(e=0),this.value=e,this.stats=t,this.gearIs=r}return Object.defineProperty(e.prototype,"star",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactSelectionModifier",{get:function(){var e=this.value,t=this.gearIs;if(!t("ReconnaissanceAircraft"))return 0;var r=this.stats.los;if(t("CarrierBasedReconnaissanceAircraft")||t("CarrierBasedReconnaissanceAircraft2")){if(7===r)return.25*e;if(11===r)return.4*e}else{if(6===r)return.2*e;if(r>=4)return.14*e;if(3===r)return.1*e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerModifier",{get:function(){var e=this.star,t=this.gearIs;return t("Fighter")?.2*e:t("FighterBomber")?.25*e:t("LandBasedAttackAircraft")?.5*Math.sqrt(e):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirModifier",{get:function(){var e=this.gearIs,t=this.stats.antiAir;if(0===t)return 0;var r=0;return e("AntiAircraftGun")?r=t<=7?4:6:(e("AntiAircraftFireDirector")||e("HighAngleMount"))&&(r=t<=7?2:3),r*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){var e=this.gearIs,t=this.stats.antiAir;if(0===t)return 0;var r=0;return e("AntiAircraftFireDirector")||e("HighAngleMount")?r=t<=7?2:3:e("AirRadar")&&(r=1.5),r*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){var e=this.stats,t=e.firepower,r=e.gearId,i=this.gearIs;return t>12?1.5*Math.sqrt(this.value):i("CarrierBasedTorpedoBomber")||[10,66,220,275].includes(r)?.2*this.value:[12,234,247].includes(r)?.3*this.value:i("MainGun")||i("SecondaryGun")||i("ArmorPiercingShell")||i("AntiAircraftFireDirector")||i("Searchlight")||i("AntiAircraftGun")||i("LandingCraft")||i("SpecialAmphibiousTank")||i("AntiAircraftShell")||i("AntiGroundEquipment")?Math.sqrt(this.value):i("Sonar")||i("LargeSonar")||i("DepthChargeProjector")||i("Mortar")?.75*Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){var e=this.gearIs;return e("SurfaceRadar")?1.7*Math.sqrt(this.value):e("Radar")||e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftFireDirector")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){var e=this.gearIs,t=this.stats,r=this.star;return e("CarrierBasedTorpedoBomber")?.2*r:e("DepthCharge")||e("Sonar")?Math.sqrt(r):e("Autogyro")?(t.asw>10?.3:.2)*r:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Sonar:case s.a.LargeSonar:case s.a.DepthCharge:return 1.3*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Torpedo:case s.a.AntiAircraftGun:return 1.2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Torpedo:case s.a.MidgetSubmarine:return 2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoEvasionModifier",{get:function(){var e=this.star,t=this.gearIs;return t("Sonar")||t("LargeSonar")?1.5*Math.sqrt(e):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){var e=this.gearIs,t=this.stats.gearId;return[10,66,220,275].includes(t)?.2*this.value:[12,234,247].includes(t)?.3*this.value:e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftShell")||e("Searchlight")||e("AntiAircraftFireDirector")||e("LandingCraft")||e("SpecialAmphibiousTank")||e("AntiGroundEquipment")||e("Torpedo")||e("MidgetSubmarine")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackAccuracyModifier",{get:function(){var e=this.gearIs,t=this.value;return e("SurfaceRadar")?1.6*Math.sqrt(t):e("MediumCaliberMainGun")||e("Radar")?1.3*Math.sqrt(t):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectiveLosModifier",{get:function(){var e=this.gearIs,t=this.value;return e("SmallRadar")?1.25*Math.sqrt(t):e("LargeRadar")||e("LargeRadar2")?1.4*Math.sqrt(t):e("CarrierBasedReconnaissanceAircraft")||e("CarrierBasedReconnaissanceAircraft2")||e("ReconnaissanceSeaplane")?1.2*Math.sqrt(t):e("SeaplaneBomber")?1.15*Math.sqrt(t):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePowerModifier",{get:function(){var e=this.gearIs;return e("MediumExtraArmor")?.2*this.value:e("LargeExtraArmor")?.3*this.value:0},enumerable:!0,configurable:!0}),e}(),l=r(497),f=function(e){var t=this;this.masters=e,this.create=function(e){if(e){var r=t.masters.find((function(t){return t.id===e.masterId}));if(r){var i=l.a.from(r.attrs),n=new c(e.improvement,r,r.is),a=new l.b(e.proficiency,i);return new u(r,r.category,n,a,r.attrs)}}}},p=r(517),h=r(3635),g=function(e){var t=e.los,r=e.improvement,i=.6;return e.is("CarrierBasedTorpedoBomber")?i=.8:e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?i=1:e.is("ReconnaissanceSeaplane")?i=1.2:e.is("SeaplaneBomber")&&(i=1.1),i*(t+r.effectiveLosModifier)},d=function(e,t){var r=e.totalEquipmentStats,i=e.nakedStats,n=e.stats,a=r(g),o=n.getBonus("effectiveLos");return Math.sqrt(i.los+o)+a*t-2},y=function(e,t,r){return e.totalShipStats((function(e){return d(e,t)}))-Math.ceil(.4*r)+12},m=r(41),b=r(92),v=function(e){return[68,166,193,167].includes(e.gearId)},S=function(e){switch(e.gearId){case 68:return.05;case 193:return.075;case 166:return.02;case 167:return.01}return 0},w=function(e){if(e.category.is("LandingCraft"))return 8;if(e.category.is("CombatRation"))return 1;switch(e.gearId){case 75:return 5;case 167:return 2}return 0},P=function(e){return e.totalEquipmentStats(w)+function(e){switch(e){case b.a.SubmarineAircraftCarrier:return 1;case b.a.Destroyer:return 5;case b.a.LightCruiser:return 2;case b.a.AviationCruiser:return 4;case b.a.AviationBattleship:return 7;case b.a.FleetOiler:case b.a.AmphibiousAssaultShip:return 12;case b.a.SeaplaneTender:return 9;case b.a.SubmarineTender:return 7;case b.a.TrainingCruiser:return 6}return 0}(e.shipTypeId)+(487===e.shipId?8:0)},A=function(){function e(e){var t=this;this.ships=e,this.totalShipStats=function(e){return Object(p.a)(t.nonNullableShips,e)},this.effectiveLos=function(e,r){return y(t,e,r)}}return Object.defineProperty(e.prototype,"nonNullableShips",{get:function(){return this.ships.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planes",{get:function(){return Object(h.a)(this.nonNullableShips,(function(e){return e.planes}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnknownSlot",{get:function(){return this.nonNullableShips.flatMap((function(e){return e.slots})).some((function(e){return e<0}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(p.a)(this.planes.filter((function(e){return!e.is("ReconnaissanceAircraft")})),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tp",{get:function(){return Object(p.a)(this.nonNullableShips,P)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expeditionBonus",{get:function(){return e=this.nonNullableShips,t=e.flatMap((function(e){return e.gears})).filter(m.b),r=t.filter(v),i=e.some((function(e){return 487===e.shipId}))?.05:0,(n=Math.min(Object(p.a)(t,S)+i,.2))+.01*n*(r.length&&Object(p.a)(r,(function(e){return e.star}))/r.length)+function(e){var t,r,i=e.filter((function(e){return 68===e.gearId})).length,n=e.filter((function(e){return 193===e.gearId})).length;return n<=2?.02*n:3===n?null!==(t=[.05,.05,.052,.054,.054][i])&&void 0!==t?t:.054:null!==(r=[.054,.056,.058,.059,.06][i])&&void 0!==r?r:.06}(t);var e,t,r,i,n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aviationDetectionScore",{get:function(){return Object(p.a)(this.planes,(function(e){return e.is("LargeFlyingBoat")?e.gear.los*Math.sqrt(e.slotSize):e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")?e.gear.los*Math.sqrt(Math.sqrt(e.slotSize)):0}))},enumerable:!0,configurable:!0}),e}(),k=function(e){var t=this;this.shipFactory=e,this.create=function(e){var r=e.ships.map(t.shipFactory.create);return new A(r)}},_=function(){function e(e,t,r){var i=this;this.gear=e,this.slots=t,this.index=r,this.contactSelectionRate=function(e){var t=i.gear,r=t.los,n=t.improvement;return Math.ceil(r+n.contactSelectionModifier)/(20-2*e.contactMultiplier)},this.calcNightAerialAttackPower=function(e){void 0===e&&(e=!1);var t=i,r=t.isNightPlane,n=t.isNightAircraft,a=t.gear,o=t.slotSize;if(!n)return 0;var u=a.firepower,s=a.torpedo,c=a.asw,l=a.bombing,f=0,p=.3;r&&(f=3,p=.45);var h=Math.sqrt(a.improvement.value);return u+(e?0:s)+l+f*o+p*(u+s+c+l)*Math.sqrt(o)+h},this.shotdown=function(e){i.slotSize-=e,i.slotSize<0&&(i.slotSize=0)}}return Object.defineProperty(e.prototype,"is",{get:function(){return this.gear.is},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.gear.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.slots[this.index]},set:function(e){this.slots[this.index]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){var e=this.gear,t=this.slotSize;return e.calcFighterPower(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){var e=this.gear,t=this.slotSize;return e.calcFighterPower(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canContact",{get:function(){return this.is("CarrierBasedTorpedoBomber")||this.is("ReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactTriggerFactor",{get:function(){var e=this.gear,t=this.slotSize;return Math.floor(e.los*Math.sqrt(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInAirstrike",{get:function(){return 0!==this.slotSize&&(this.is("DiveBomber")||this.is("TorpedoBomber"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInCarrierShelling",{get:function(){var e=this.category;return 0!==this.slotSize&&e.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","JetPoweredFighterBomber","JetPoweredTorpedoBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosModifier",{get:function(){var e=this.gear,t=this.slotSize;return this.is("ReconnaissanceSeaplane")||this.is("SeaplaneBomber")?e.los*Math.floor(Math.sqrt(t)):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwordfish",{get:function(){return this.gear.name.includes("Swordfish")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightFighter",{get:function(){return 45===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAttacker",{get:function(){return 46===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightPlane",{get:function(){return this.isNightFighter||this.isNightAttacker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAircraft",{get:function(){var e=this.isNightPlane,t=this.isSwordfish,r=this.gear;return e||t||[154,320].includes(r.gearId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterCombatResistModifier",{get:function(){return this.is("JetPoweredAircraft")?.6:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirResistModifier",{get:function(){var e=this.gear.gearId;return[93,94,143,144,99,100,154,319,320,79,80,81,237,170].includes(e)?.6:[322,323,199,200].includes(e)?.5:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirResistModifier",{get:function(){var e=this.gear.gearId;return[100,154,81,237,322,199].includes(e)?.7:[323,200].includes(e)?.5:1},enumerable:!0,configurable:!0}),e}(),M=function(e,t){var r=new Array;return e.map((function(i,n){var a=t[n];i&&a&&a.is("Aircraft")&&r.push(new _(a,e,n))})),r},C=function(e){var t=e.los;return e.is("LandBasedReconnaissanceAircraft")?t<=7?1.12:8===t?1.15:1.18:1},E=function(e){var t=e.los;return e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?t<=7?1.2:8===t?1.25:1.3:e.is("LandBasedReconnaissanceAircraft")?1.18:e.is("ReconnaissanceSeaplane")||e.is("LargeFlyingBoat")?t<=7?1.1:8===t?1.13:1.16:1},F=function(){function e(e,t){this.slots=e,this.gears=t,this.planes=M(e,t)}return Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlanes",{get:function(){return this.nonNullableGears.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(p.a)(this.planes,(function(e){return e.fighterPower})),t=Math.max.apply(Math,this.nonNullableGears.map(C));return Math.floor(e*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(p.a)(this.planes,(function(e){return e.interceptionPower})),t=Math.max.apply(Math,this.nonNullableGears.map(E));return Math.floor(e*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCombatRadius",{get:function(){return this.hasPlanes?Math.min.apply(Math,this.nonNullableGears.map((function(e){return e.radius}))):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combatRadius",{get:function(){if(!this.hasPlanes)return 0;var e=this.minCombatRadius,t=this.nonNullableGears,r=Math.max.apply(Math,t.map((function(e){return e.is("ReconnaissanceAircraft")?e.radius:0})));if(r>0){var i=Math.min(Math.sqrt(r-e),3);return Math.round(e+i)}return e},enumerable:!0,configurable:!0}),e}(),O=function(e){var t=this;this.gearFactory=e,this.create=function(e){var r=e.equipments,i=e.slots.concat(),n=r.map(t.gearFactory.create);return new F(i,n)}},j=r(3626),B=function(){function e(e,t,r,i){var n=this;this.side=e,this.fleetType=t,this.fleets=r,this.landBase=i,this.getFighterPower=function(e){void 0===e&&(e=!1);var t=n,r=t.mainFleet,i=t.escortFleet;if(!r.hasUnknownSlot){if(!e||!i)return r.fighterPower;if(!i.hasUnknownSlot)return r.fighterPower+i.fighterPower}},this.getInterceptionPower=function(e){void 0===e&&(e=!1);var t=n,r=t.mainFleet,i=t.escortFleet;if(!r.hasUnknownSlot){var a=Object(p.a)(r.planes,(function(e){return e.interceptionPower}));if(!e||!i)return a;if(!i.hasUnknownSlot)return a+Object(p.a)(i.planes,(function(e){return e.interceptionPower}))}}}return Object.defineProperty(e.prototype,"isCombinedFleetOperation",{get:function(){return this.fleetType!==j.a.Single},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFleet",{get:function(){return this.fleets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escortFleet",{get:function(){if(this.isCombinedFleetOperation)return this.fleets[1]},enumerable:!0,configurable:!0}),e}(),x=function(){function e(e,t){this.fleetFactory=e,this.landBasedAirCorpsFactory=t}return e.prototype.create=function(e){var t=e.side,r=e.fleetType,i=e.fleets,n=e.landBase,a=i.map(this.fleetFactory.create),o=n.map(this.landBasedAirCorpsFactory.create);return new B(t,r,a,o)},e}(),T=r(3156),I=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.map((function(e){return T.a[e]})).includes(t.shipClassId)}},R=I("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass"),D=I("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass","NorthamptonClass","AtlantaClass"),G=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e(t)}))}}((function(e){return 147===e.shipId}),I("TashkentClass","GangutClass")),L=I("AirfieldPrincess","NorthernPrincess","HarbourPrincess","SupplyDepotPrincess","SupplyDepotSummerPrincess"),q=I("ArtilleryImp"),N=I("IsolatedIslandDemon","IsolatedIslandPrincess"),z={RoyalNavy:R,UsNavy:D,SovietNavy:G,Installation:function(e){return 0===e.speed},SoftSkinned:L,Pillbox:q,SupplyDepot:I("SupplyDepotPrincess","SupplyDepotSummerPrincess"),IsolatedIsland:N,Unremodeled:function(e){return e.sortId%10==1},Kai:function(e){return e.name.endsWith("改")},Kai2:function(e){return e.sortId%10>=6&&e.sortId%10<9}},H=Object.keys(z),K={from:function(e){return H.filter((function(t){return z[t](e)}))}},V=function(){function e(e,t){var r=this;this.maxHp=e,this.currentHp=t,this.gte=function(e){var t=r.currentHp/r.maxHp;switch(e){case"Less":return t>=1;case"Shouha":return t>=.75;case"Chuuha":return t>=.5;case"Taiha":return t>=.25}return!0},this.lte=function(e){return e===r.damage||!r.gte(e)}}return Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.currentHp/this.maxHp;return e<=0?"Sunk":e<=.25?"Taiha":e<=.5?"Chuuha":e<=.75?"Shouha":"Less"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.7;case"Taiha":return.4}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.8}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){return this.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){return this.lte("Taiha")?0:this.shellingPowerModifier},enumerable:!0,configurable:!0}),e}(),J={Sparkling:1.2,Normal:1,Orange:.8,Red:.5},U={accuracy:{shelling:J,asw:J,torpedo:{Sparkling:1.3,Normal:1,Orange:.7,Red:.35},night:J},evasion:{Sparkling:.7,Normal:1,Orange:1.2,Red:1.4}},$=function(){function e(e){var t=this;void 0===e&&(e=49),this.value=e,this.getAccuracyModifier=function(e){return U.accuracy[e][t.state]}}return Object.defineProperty(e.prototype,"state",{get:function(){var e=this.value;return e>=50?"Sparkling":e>=30?"Normal":e>=20?"Orange":"Red"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasionModifier",{get:function(){return U.evasion[this.state]},enumerable:!0,configurable:!0}),e}(),Y=r(3677),X=r(3160),Z=r(3162),Q=r(493),W=r(561),ee=r(49),te=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,n++)i[n]=a[o];return i},re={attrs:"Installation"},ie={attrs:"Pillbox"},ne={attrs:"IsolatedIsland"},ae={attrs:"SoftSkinned"},oe={shipClassId:T.a.HarbourSummerPrincess},ue={attrs:"SupplyDepot"},se=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{$or:te(e)}},ce=[{gear:{categoryId:s.a.AntiAircraftShell},rules:[{target:se(ne,oe),count1:{a13:1.75}},{target:ae,count1:{a13:2.5}}]},{gear:{categoryId:s.a.ArmorPiercingShell},rules:[{target:ie,count1:{a13:1.85}},{target:oe,count1:{a13:1.3}}]},{gear:126,rules:[{target:ie,count1:{a13:1.6},count2:{a13:2.72}},{target:ne,count1:{a13:1.4},count2:{a13:2.1}},{target:ae,count1:{a13:1.3},count2:{a13:1.82}},{target:oe,count1:{a13:1.4},count2:{a13:1.68}},{target:ue,count1:{a5:1.25},count2:{a5:1.625}},{target:re,count1:{b13next:75},count2:{b13next:110},count3:{b13next:140},count4:{b13next:160}}]},{gear:{attrs:"AntiGroundRocketLauncher"},rules:[{target:ie,count1:{a13:1.5},count2:{a13:2.7}},{target:ne,count1:{a13:1.3},count2:{a13:2.145}},{target:ae,count1:{a13:1.25},count2:{a13:1.875}},{target:oe,count1:{a13:1.25},count2:{a13:1.75}},{target:ue,count1:{a5:1.2},count2:{a5:1.68}}]},{gear:348,rules:[{target:re,count1:{b13next:55},count2:{b13next:115},count3:{b13next:160},count4:{b13next:190}}]},{gear:349,rules:[{target:re,count1:{b13next:80},count2:{b13next:170}}]},{gear:{attrs:"Mortar"},rules:[{target:ie,count1:{a13:1.3},count2:{a13:1.95}},{target:ne,count1:{a13:1.2},count2:{a13:1.68}},{target:ae,count1:{a13:1.2},count2:{a13:1.56}},{target:oe,count1:{a13:1.1},count2:{a13:1.265}},{target:ue,count1:{a5:1.15},count2:{a5:1.38}}]},{gear:346,rules:[{target:re,count1:{b13next:30},count2:{b13next:55},count3:{b13next:75},count4:{b13next:90}}]},{gear:347,rules:[{target:re,count1:{b13next:60},count2:{b13next:110},count3:{b13next:150},count4:{b13next:180}}]},{gear:{categoryId:s.a.LandingCraft},rules:[{target:se(ie,ne),count1:{a13:1.8}},{target:ae,count1:{a13:1.4}},{target:oe,count1:{a13:1.7}},{target:ue,count1:{a5:1.7}}]},{gear:193,rules:[{target:se(ie,ne,ae),count1:{a13:1.15}},{target:oe,count1:{a13:1.2}},{target:ue,count1:{a5:1.2}}]},{gear:166,rules:[{target:ie,count1:{a13:1.5},count2:{a13:2.1}},{target:ne,count1:{a13:1.2},count2:{a13:1.68}},{target:ae,count1:{a13:1.5},count2:{a13:1.95}},{target:oe,count1:{a13:1.6},count2:{a13:2.4}},{target:ue,count1:{a5:1.3},count2:{a5:2.08}}]},{gear:230,rules:[{target:re,count1:{a13:1.8,b13:25}}]},{gear:355,rules:[{target:ie,count1:{a13:2}},{target:ne,count1:{a13:1.8}},{target:ae,count1:{a13:1.1}},{target:oe,count1:{a13:2}},{target:ue,count1:{a5:1.2}},{target:re,count1:{b13:25,a13next:1.4}}]},{gear:167,rules:[{target:se(ie,ne),count1:{a13:2.4},count2:{a13:3.24}},{target:ae,count1:{a13:1.5},count2:{a13:1.8}},{target:oe,count1:{a13:2.8},count2:{a13:4.2}},{target:ue,count1:{a5:1.7},count2:{a5:2.55}}]},{gear:{categoryId:s.a.CarrierBasedDiveBomber},rules:[{target:ie,count1:{a13:1.5},count2:{a13:3}},{target:ne,count1:{a13:1.4},count2:{a13:2.45}},{target:oe,count1:{a13:1.3}}]},{gear:{categoryId:{$in:[s.a.SeaplaneBomber,s.a.SeaplaneFighter]}},rules:[{target:ie,count1:{a13:1.5}},{target:ae,count1:{a13:1.2}},{target:oe,count1:{a13:1.3}}]},{ship:{shipTypeId:{$in:[b.a.Destroyer,b.a.LightCruiser]}},target:ie,bonus:{a13:1.4}},{ship:{shipTypeId:{$in:[b.a.Submarine,b.a.SubmarineAircraftCarrier]}},target:re,bonus:{b12:30}}],le=function(e,t){var r=e.countGear("LandingCraft"),i={};if(r){var n=e.totalEquipmentStats((function(e){return e.is("LandingCraft")?e.star:0}));if(i.a13=1+n/r/50,!t)return i;i.a5=i.a13,e.hasGear(166)&&(i.a5*=i.a5)}return i},fe=function(e,t){var r=e.countGear(167),i={};if(r){var n=e.totalEquipmentStats((function(e){return e.match(167)?e.star:0}));if(i.a13=1+n/r/30,!t)return i;i.a5=i.a13}return i},pe=function(e,t){var r=function(e,t){var r=function(i,n){void 0===n&&(n=0);var a=[];if(!function(e,t,r){var i=e.ship,n=e.target;return!(i&&!t.match(i))&&!(n&&!r.match(n))}(i,e,t))return a;var o=i.gear,u=i.bonus,s=i.rules,c=o?e.countGear((function(e){return e.match(o)})):n;return c&&a.push(function(e,t){var r=e.count1,i=e.count2,n=e.count3,a=e.count4,o=e.count5,u={};return[r,i,n,a,o].forEach((function(e,r){e&&t>r&&(u=e)})),u}(i,c)),u&&a.push(u),s&&a.push.apply(a,s.flatMap((function(e){return r(e,c)}))),a};return r}(e,t),i=ce.flatMap((function(e){return r(e)})),n=function(e,t){if(!t.isInstallation)return[];var r=t.is("SupplyDepot");return[le(e,r),fe(e,r)]}(e,t);return ee.a.apply(void 0,te(i,n))},he=function(){return(he=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ge=function(){function e(e,t,r,i,n,a,u,s,c){var l=this;this.master=e,this.stats=t,this.nakedStats=r,this.health=i,this.morale=n,this.slots=a,this.gears=u,this.planes=s,this.attrs=c,this.is=function(e){return l.attrs.includes(e)},this.canEquip=function(e,t){var r=l,i=r.shipId,n=r.shipClass,a=l.master,o=a.equippable,u=a.isAbyssal,s=e.gearId,c=e.categoryId;if(u)return!0;if(!o.categories.includes(c))return!1;if([492,392].includes(i)&&e.is("SeaplaneBomber"))return 194===s;if(l.is("RoyalNavy")&&l.shipType.isBattleshipClass&&e.is("SeaplaneBomber"))return[367,368].includes(s);if(l.slots.length<=t){return Y.a.includes(c)||o.expantionSlot.includes(s)||33===s}if(n.is("IseClass")&&l.is("Kai2"))return!(t>1&&e.is("MainGun"));if(n.is("YuubariClass")&&l.is("Kai2")){if(t>=3&&(e.is("MainGun")||e.is("Torpedo")||e.is("MidgetSubmarine")))return!1;if(4===t)return e.is("AntiAircraftGun")||e.is("SmallRadar")||e.is("CombatRation")}return!0},this.match=function(e){return"number"==typeof e?l.shipId===e:o()(e)(l)},this.hasGear=function(e){var t=l.nonNullableGears;return"string"==typeof e?t.some((function(t){return t.is(e)})):"number"==typeof e?t.some((function(t){return t.gearId===e})):t.some(e)},this.countGear=function(e){var t=l.nonNullableGears;return void 0===e?t.length:"string"==typeof e?t.filter((function(t){return t.is(e)})).length:"number"==typeof e?t.filter((function(t){return t.gearId===e})).length:t.filter(e).length},this.totalEquipmentStats=function(e){return Object(p.a)(l.nonNullableGears,e)},this.getDefensePower=function(){var e=l.stats.armor+l.totalEquipmentStats((function(e){return e.improvement.defensePowerModifier})),t=.7*Math.max(e,1),r=t+.6*Math.floor(e-1);return{min:t,max:r,values:function(){return Object(X.a)(Math.floor(e)).map((function(e){return t+.6*e}))},random:function(){return t+.6*Object(Z.a)(Math.floor(e-1))}}},this.getCruiserFitBonus=function(){var e=l,t=e.shipType,r=e.shipClass,i=e.countGear,n=t.any("LightCruiser","TorpedoCruiser","TrainingCruiser"),a=r.is("ZaraClass"),o=i((function(e){return[4,11].includes(e.gearId)})),u=i((function(e){return[65,119,139].includes(e.gearId)}));return Object(Q.a)({isLightCruiserClass:n,singleGunCount:o,twinGunCount:u,isZaraClass:a,zaraGunCount:Math.sqrt(i(162))})},this.getRemainingPlanes=function(){return l.planes.filter(m.b)},this.getNormalProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};if("CarrierShelling"!==l.getShellingType())return e;var t=l.getRemainingPlanes().filter((function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("LargeFlyingBoat")}));e.power=1+Object(p.a)(t,(function(e){return 0===e.index?e.gear.proficiency.criticalPowerModifier/100:e.gear.proficiency.criticalPowerModifier/200}));var r=Object(p.a)(t,(function(e){return e.gear.proficiency.internal}))/t.length,i=0,n=0;return r>=10&&(i=Math.floor(Math.sqrt(.1*r))),r>=25&&(n=1),r>=40&&(n=2),r>=55&&(n=3),r>=70&&(n=4),r>=80&&(n=6),r>=100&&(n=9),e.hitRate=i+n,e.criticalRate=Object(p.a)(t,(function(e){var t=e.gear.proficiency,r=t.internal,i=t.level,n=0===e.index?10:0,a=(Math.sqrt(.1*r)+i)/2;return Math.floor(a+n)/100})),e},this.getSpecialProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};return"CarrierShelling"!==l.getShellingType()||(l.getRemainingPlanes().filter((function(e){return e.participatesInCarrierShelling&&120===e.gear.proficiency.internal})).some((function(e){return 0===e.index}))?e.power=1.25:e.power=1.106),e},this.getSpecialEnemyModifiers=function(e){return pe(l,e)},this.getAntiInstallationModifier=function(e){var t=l.getSpecialEnemyModifiers(e);return he(he({},{a13:1,a13next:1,a5:1,b12:0,b13:0,b13next:0}),t)},this.calcEvasionValue=function(e,t){var r=l.stats,i=r.evasion,n=r.luck,a=l.totalEquipmentStats((function(e){return e.is("EngineImprovement")?e.star:0})),o=Math.floor(1.5*Math.sqrt(a));return Object(W.a)({evasion:i,luck:n,improvementModifier:o,formationModifier:e,postcapModifier:t})},this.slotCapacities=e.slotCapacities.concat()}return Object.defineProperty(e.prototype,"shipId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClassId",{get:function(){return this.master.shipClassId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipTypeId",{get:function(){return this.master.shipType.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){return this.master.remodelGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.master.sortId%10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ruby",{get:function(){return this.master.readingName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClass",{get:function(){return this.master.shipClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipType",{get:function(){return this.master.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.nakedStats.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipAccuracy",{get:function(){var e=this.nakedStats,t=e.level,r=e.luck;return 2*Math.sqrt(t)+1.5*Math.sqrt(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(p.a)(this.planes.filter((function(e){var t=e.gear;return t.is("Fighter")||t.is("TorpedoBomber")||t.is("DiveBomber")})),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosFactor",{get:function(){return this.nakedStats.los+Object(p.a)(this.planes,(function(e){return e.fleetLosModifier}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstallation",{get:function(){return 0===this.nakedStats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"installationType",{get:function(){var e=this.isInstallation,t=this.name;return e?t.includes("砲台")?"Pillbox":t.includes("離島")||t.includes("中枢")?"IsolatedIsland":t.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canNightAttack",{get:function(){var e=this.shipClass,t=(this.shipType,this.health),r=this.master;return!t.lte("Taiha")&&(e.is("ArkRoyalClass")?"Chuuha"!==t.damage&&this.planes.some((function(e){return e.isSwordfish})):r.firepower[0]>0)},enumerable:!0,configurable:!0}),e.prototype.getShellingType=function(){var e=this.shipType,t=this.shipClass,r=this.isInstallation,i=this.hasGear;return e.isAircraftCarrierClass||(t.is("RevisedKazahayaClass")||r)&&(i("DiveBomber")||i("TorpedoBomber"))?"CarrierShelling":"Shelling"},e}(),de=r(492),ye=r(3636),me=r(560),be=r(3766),ve=r(3676),Se=r(3107),we=["firepower","armor","torpedo","accuracy","evasion","antiAir","asw","speed","los","range","speed","effectiveLos"],Pe=[{byGear:194,effectiveLosBonus:!0,rules:[{byShip:392,multiple:{firepower:1,evasion:2,los:2}},{byShip:{shipClassId:T.a.CommandantTesteClass},multiple:{firepower:3,evasion:2,los:2}},{byShip:{shipClassId:{$in:[T.a.MizuhoClass,T.a.KamoiClass]}},multiple:{evasion:1,los:2}}]},{byGear:{categoryId:{$in:[s.a.CarrierBasedReconnaissanceAircraft,s.a.CarrierBasedReconnaissanceAircraft2]}},effectiveLosBonus:!0,rules:[{minStar:2,count1:{los:1}},{minStar:4,count1:{firepower:1}},{minStar:6,count1:{los:1}},{minStar:10,count1:{firepower:1,los:1}}]},{byGear:61,effectiveLosBonus:!0,rules:[{byShip:553,count1:{firepower:3,evasion:2,armor:1,accuracy:5,range:1}},{byShip:554,count1:{firepower:3,evasion:3,armor:3,accuracy:5,range:1}},{byShip:{shipId:{$in:[196,197]}},count1:{accuracy:5,range:1}},{byShip:{shipClassId:T.a.SouryuuClass},minStar:1,count1:{firepower:3,los:3}},{byShip:{shipClassId:T.a.SouryuuClass},minStar:8,count1:{firepower:1,los:1}},{byShip:{shipClassId:T.a.HiryuuClass},minStar:1,count1:{firepower:2,los:2}},{byShip:{shipId:{$in:[560,508,509]}},minStar:1,count1:{firepower:1,los:1}}]}],Ae=function(e,t){for(var r={},i=0,n=we;i<n.length;i++){var a=n[i],o=(e[a]||0)+(t[a]||0);0!==o&&(r[a]=o)}return r},ke=function(e,t,r){return function(i){var n,a,o=i.byShip,u=i.minStar,s=i.countCap,c=i.multiple,l=i.count4,f=i.count3,p=i.count2,h=i.count1,g={};if(o&&!e.match(o))return g;if(u){var d=e.countGear((function(e){return e.match(t)&&e.star>=u}));r=Math.min(r,d)}return s&&(r=Math.min(r,s)),c&&(n=c,a=r,g=Object(be.a)(n,(function(e){return e&&e*a}))),[h,p,f,l].forEach((function(e,t){e&&r>t&&(g=Ae(g,e))})),g}},_e=function(e){return Pe.map(function(e){var t=function(r){var i=r.byGear,n=r.byShip,a=r.countCap,o=r.rules,u=r.synergies,s=r.effectiveLosBonus;if(n&&!e.match(n))return{};var c=e.countGear((function(e){return e.match(i)}));if(0===c)return{};a&&(c=Math.min(a,c));var l=ke(e,i,c),f=l(r),p=o?o.map(l).reduce(Ae,f):f;if(u){var h=u.map(t).reduce(Ae,{});p=Ae(p,h)}return s&&p.los&&(p=Ae(p,{effectiveLos:p.los})),p};return t}(e)).map((function(e){return{effectiveLos:e.effectiveLos}})).reduce(Ae,{})},Me=function(e){var t=Object(Se.createEquipmentBonus)(e),r=function(e){if(!e.hasGear(33))return{};var t=ve.a.getSpeedGroup(e),r=e.countGear(34),i=e.countGear(87),n=ve.a.getSpeedIncrement(t,r,i);return n>0?{speed:n}:e.shipClassId===T.a.JohnCButlerClass||623===e.shipId?{speed:5}:{}}(e);return[_e(e),r].reduce(Ae,t)},Ce=function(){function e(e,t,r){var i=this;void 0===r&&(r={}),this.nakedStats=e,this.gears=t,this.equipmentBonus=r,this.getBonus=function(e){var t=i.equipmentBonus;return Object(me.a)(we,e)&&t[e]||0}}return e.prototype.getStat=function(e){var t=this.nakedStats,r=this.gears;return t[e]+Object(p.a)(r.filter(m.b),e)+this.getBonus(e)},Object.defineProperty(e.prototype,"hp",{get:function(){return this.nakedStats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.getStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.getStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.getStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.getStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.getStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.getStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.getStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.nakedStats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.getStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e=this.nakedStats,t=this.gears,r=this.getBonus,i=e.range,n=Object(ye.a)(t,"range");return(n&&n.range>i?n.range:i)+r("range")},enumerable:!0,configurable:!0}),e}(),Ee=function(e,t){var r=this;this.masters=e,this.gearFactory=t,this.gearsFrom=function(e,t){return e?e.map(r.gearFactory.create):t.isAbyssal?t.initialEquipment.map((function(e){var t=e.id,i=e.improvement;return r.gearFactory.create({masterId:t,improvement:i})})):[]},this.create=function(e){if(e){var t=e.masterId,i=e.level,n=void 0===i?1:i,a=e.increased,o=e.morale,u=r.masters.find((function(e){return e.shipId===t}));if(u){var s=r.gearsFrom(e.equipments,u),c=new de.a(u,n,a),l=new Ce(c,s),f=e.currentHp,p=void 0===f?l.hp:f,h=new V(l.hp,p),g=new $(o),d=e.slots?e.slots.concat():u.slotCapacities.concat(),y=M(d,s),m=K.from(u),b=new ge(u,l,c,h,g,d,s,y,m);return b.stats.equipmentBonus=Me(b),b}}}},Fe=function(){function e(e){void 0===e&&(e=new i.a),this.masterData=e,this.gearFactory=new f(e.gears),this.shipFactory=new Ee(e.ships,this.gearFactory),this.fleetFactory=new k(this.shipFactory),this.landBasedAirCorpsFactory=new O(this.gearFactory),this.operationFactory=new x(this.fleetFactory,this.landBasedAirCorpsFactory)}return Object.defineProperty(e.prototype,"createOperation",{get:function(){return this.operationFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createFleet",{get:function(){return this.fleetFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createLandBasedAirCorps",{get:function(){return this.landBasedAirCorpsFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createShip",{get:function(){return this.shipFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createGear",{get:function(){return this.gearFactory.create},enumerable:!0,configurable:!0}),e}();t.a=Fe},3626:function(e,t,r){"use strict";var i;!function(e){e.Single="Single",e.CarrierTaskForce="CarrierTaskForce",e.SurfaceTaskForce="SurfaceTaskForce",e.TransportEscort="TransportEscort",e.Combined="Combined"}(i||(i={})),t.a=i},3633:function(e,t,r){"use strict";var i;!function(e){e.NormalBattle="NormalBattle",e.NightBattle="NightBattle",e.NightToDayBattle="NightToDayBattle",e.AerialBattle="AerialBattle",e.AirDefenseBattle="AirDefenseBattle"}(i||(i={})),t.a=i},3676:function(e,t,r){"use strict";var i;!function(e){e[e.FastA=0]="FastA",e[e.FastB1SlowA=1]="FastB1SlowA",e[e.FastB2SlowB=2]="FastB2SlowB",e[e.OtherC=3]="OtherC"}(i||(i={}));var n=function(){function e(t,r){var i=this;this.value=t,this.name=r,this.add=function(t){return e.fromNumber(i.value+t)}}return e.getSpeedGroup=function(t){var r=t.shipType,n=t.shipClass,a=t.shipId,o=t.remodelGroup;return e.fromNumber(t.nakedStats.speed)===e.Fast&&r.is("SeaplaneTender")||r.isSubmarineClass||[115,293].includes(a)||["加賀型","特種船丙型","工作艦","改風早型"].includes(n.name)?i.OtherC:["島風型","Ташкент級","大鳳型","翔鶴型","利根型","最上型"].includes(n.name)?i.FastA:["阿賀野型","蒼龍型","飛龍型","金剛型","大和型","Iowa級"].includes(n.name)||181===o||404===o||331===o||541===a?i.FastB1SlowA:i.FastB2SlowB},e.getSpeedIncrement=function(e,t,r){var n=t+r;switch(e){case i.FastA:if(r>=1||n>=2)return 10;break;case i.FastB1SlowA:if(0===r)break;if(n>=3)return 15;if(n>=2)return 10;break;case i.FastB2SlowB:if(r>=2||n>=3)return 10}return n>=1?5:0},e}();t.a=n,n.Land=new n(0,"陸上"),n.Slow=new n(5,"低速"),n.Fast=new n(10,"高速"),n.FastPlus=new n(15,"高速+"),n.Fastest=new n(20,"最速"),n.fromNumber=function(e){var t=[n.Land,n.Slow,n.Fast,n.FastPlus,n.Fastest].find((function(t){return e<=t.value}));return t||n.Fastest}},3681:function(e,t,r){"use strict";var i=r(345),n=r(3162),a=function(){function e(t,r,i,n){this.id=t,this.name=r,this.typeFactor=i,this.modifier=n,e.all.push(this)}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierSpecialAttack",{get:function(){return 7===this.api},enumerable:!0,configurable:!0}),e}();t.a=a,a.all=[],a.MainMain=new a(6,"主主",150,{power:1.5,accuracy:1.2}),a.MainApShell=new a(5,"主徹",140,{power:1.3,accuracy:1.3}),a.MainRader=new a(4,"主電",130,{power:1.2,accuracy:1.5}),a.MainSecond=new a(3,"主副",120,{power:1.1,accuracy:1.3}),a.DoubleAttack=new a(2,"連撃",130,{power:1.2,accuracy:1.1}),a.FighterBomberAttacker=new a(7.1,"FBA",125,{power:1.25,accuracy:1}),a.BomberBomberAttacker=new a(7.2,"BBA",140,{power:1.2,accuracy:1}),a.BomberAttacker=new a(7.3,"BA",155,{power:1.15,accuracy:1}),a.getPossibleAircraftCarrierCutins=function(e){var t=new Array,r=e.planes.filter((function(e){return e.slotSize>0})),i=r.filter((function(e){return e.is("CarrierBasedDiveBomber")})).length,n=r.some((function(e){return e.is("CarrierBasedTorpedoBomber")}));return 0!==i&&n?(t.push(a.BomberAttacker),i>=2&&t.push(a.BomberBomberAttacker),r.some((function(e){return e.is("CarrierBasedFighterAircraft")}))&&t.push(a.FighterBomberAttacker),t.sort((function(e,t){return e.typeFactor-t.typeFactor}))):t},a.getPossibleArtillerySpottings=function(e){var t=new Array,r=e.planes.some((function(e){return e.slotSize>0&&e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")})),i=e.countGear((function(e){return e.is("MainGun")}));if(!r||0===i)return t;var n=e.hasGear((function(e){return e.is("ArmorPiercingShell")})),o=e.hasGear((function(e){return e.is("SecondaryGun")})),u=e.hasGear((function(e){return e.is("Radar")}));return i>=2&&(t.push(a.DoubleAttack),n&&t.push(a.MainMain)),o&&(t.push(a.MainSecond),u&&t.push(a.MainRader),n&&t.push(a.MainApShell)),t.sort((function(e,t){return t.id-e.id}))},a.getPossibleAttacks=function(e,t){return void 0===t&&(t=!1),"Taiha"===e.health.damage?[]:e.shipType.isAircraftCarrierClass&&!t?a.getPossibleAircraftCarrierCutins(e):a.getPossibleArtillerySpottings(e)},a.calcFleetLosModifier=function(e){var t=e.totalShipStats((function(e){return e.fleetLosFactor}));return Math.floor(Math.sqrt(t)+.1*t)},a.calcBaseValue=function(e,t,r,n){var a=e.stats.luck,o=Math.floor(Math.sqrt(a)+10),u=e.totalEquipmentStats("los"),s=n?15:0;return r===i.a.AirSupremacy?Math.floor(o+.7*(t+1.6*u)+10)+s:r===i.a.AirSuperiority?Math.floor(o+.6*(t+1.2*u))+s:0},a.calcRate=function(e,t,r,i){var n=a.calcBaseValue(e,t,r,i),o=new Map,u=a.getPossibleAttacks(e),s=u.reduce((function(e,t){var r=(1-e)*(n/t.typeFactor);return r>1&&(r=1),o.set(t,r),e+r}),0),c=1-s,l=c<=0,f=u.concat();l||f.unshift(void 0);var p=function(e){return e?o.get(e)||0:c};return{baseValue:n,attacks:u,rateMap:o,total:s,dayCombatAttacks:f,getAttackRate:p,entries:function(){return f.map((function(e){return[e,p(e)]}))}}},a.try=function(e,t,r,i){for(var o=a.calcBaseValue(e,t,r,i),u=0,s=a.getPossibleAttacks(e);u<s.length;u++){var c=s[u];if(o>Object(n.a)(c.typeFactor-1))return c}}},3682:function(e,t,r){"use strict";var i=function(e){var t=e.nakedStats,r=e.level;return t.luck<50?Math.floor(t.luck+15+.75*Math.sqrt(r)):Math.floor(Math.sqrt(t.luck-50)+65+.8*Math.sqrt(r))},n=function(){function e(t,r,i,n){var a=this;this.id=t,this.name=r,this.typeFactor=i,this.modifier=n,this.calcRate=function(t){return a===e.DoubleAttack?109/110:Math.ceil(t)/a.typeFactor}}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestroyerCutin",{get:function(){return 7===this.id||8===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAerialAttack",{get:function(){return 6===this.api},enumerable:!0,configurable:!0}),e}();t.a=n,n.DoubleAttack=new n(1,"連撃",110,{power:1.2,accuracy:1.1}),n.MainTorp=new n(2,"主魚",115,{power:1.3,accuracy:1.5}),n.TorpTorp=new n(3,"魚雷",122,{power:1.5,accuracy:1.65}),n.SubmarineTorpTorp=new n(3.1,"潜水魚雷",110,{power:1.65,accuracy:1}),n.SubmarineRadarTorp=new n(3.2,"潜水電探",102,{power:1.75,accuracy:1}),n.MainMainSecond=new n(4,"主副",130,{power:1.75,accuracy:1.65}),n.MainMainMain=new n(5,"主砲",140,{power:2,accuracy:1.5}),n.AerialAttack1=new n(6.1,"夜襲1.25",105,{power:1.25,accuracy:1}),n.AerialAttack2=new n(6.2,"夜襲1.20",115,{power:1.2,accuracy:1}),n.AerialAttack3=new n(6.3,"夜襲1.18",125,{power:1.18,accuracy:1}),n.SuiseiAttack=new n(6.4,"彗星夜襲",115,{power:1.2,accuracy:1}),n.MainTorpRadar=new n(7,"主魚電",130,{power:1.3,accuracy:1}),n.TorpRadarLookout=new n(8,"魚見電",150,{power:1.2,accuracy:1}),n.getPossibleAerialAttacks=function(e){var t=[],r=e.planes.filter((function(e){return e.slotSize>0})),i=r.filter((function(e){return e.isNightFighter})).length,a=r.filter((function(e){return e.isNightAttacker})).length,o=r.filter((function(e){return e.isNightPlane})).length,u=r.filter((function(e){return e.isNightAircraft&&!e.isNightPlane})).length,s=i>=1,c=a>=1,l=o>=1,f=r.some((function(e){return 320===e.gear.gearId}));return i>=2&&c&&t.push(n.AerialAttack1),s&&c&&t.push(n.AerialAttack2),l&&f&&t.push(n.SuiseiAttack),s?((i+u>=3||a+u>=2)&&t.push(n.AerialAttack3),t):t},n.getPossibleAttacks=function(e,t){void 0===t&&(t=!1);var r=e.shipType,i=e.hasGear,a=e.countGear,o=new Array;if(function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.shipId)&&!e.hasGear((function(e){return[258,259].includes(e.gearId)})))&&e.planes.some((function(e){return e.slotSize>0&&e.isNightPlane})))}(e))return n.getPossibleAerialAttacks(e);if(!e.canNightAttack)return o;var u=t?0:a(213)+a(214),s=t?0:a("Torpedo")+a("SubmarineTorpedo");r.is("Destroyer")&&i((function(e){return e.is("SurfaceRadar")}))&&s>=1&&(i((function(e){return e.is("SmallCaliberMainGun")}))&&o.push(n.MainTorpRadar),i(129)&&o.push(n.TorpRadarLookout));var c=a((function(e){return e.is("MainGun")})),l=a((function(e){return e.is("SecondaryGun")}));return u>=1&&i((function(e){return e.is("SubmarineEquipment")}))?o.push(n.SubmarineRadarTorp):u>=2?o.push(n.SubmarineTorpTorp):c>=3?o.push(n.MainMainMain):c>=2&&l>=1?o.push(n.MainMainSecond):s>=2?o.push(n.TorpTorp):c>=1&&s>=1?o.push(n.MainTorp):c+l>=2&&o.push(n.DoubleAttack),o},n.calcPreModifierValue=i,n.calcBaseValue=function(e,t,r,n){var a=i(e);return t&&(a+=15),"Chuuha"===e.health.damage&&(a+=18),e.hasGear(129)&&(a+=5),r.searchlight&&(a+=7),n.searchlight&&(a+=-5),r.starshell&&(a+=4),n.starshell&&(a+=-10),a}},37:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i,n=r(3625);!function(e){e[e.SmallCaliberMainGun=1]="SmallCaliberMainGun",e[e.MediumCaliberMainGun=2]="MediumCaliberMainGun",e[e.LargeCaliberMainGun=3]="LargeCaliberMainGun",e[e.SecondaryGun=4]="SecondaryGun",e[e.Torpedo=5]="Torpedo",e[e.CarrierBasedFighterAircraft=6]="CarrierBasedFighterAircraft",e[e.CarrierBasedDiveBomber=7]="CarrierBasedDiveBomber",e[e.CarrierBasedTorpedoBomber=8]="CarrierBasedTorpedoBomber",e[e.CarrierBasedReconnaissanceAircraft=9]="CarrierBasedReconnaissanceAircraft",e[e.ReconnaissanceSeaplane=10]="ReconnaissanceSeaplane",e[e.SeaplaneBomber=11]="SeaplaneBomber",e[e.SmallRadar=12]="SmallRadar",e[e.LargeRadar=13]="LargeRadar",e[e.Sonar=14]="Sonar",e[e.DepthCharge=15]="DepthCharge",e[e.ExtraArmor=16]="ExtraArmor",e[e.EngineImprovement=17]="EngineImprovement",e[e.AntiAircraftShell=18]="AntiAircraftShell",e[e.ArmorPiercingShell=19]="ArmorPiercingShell",e[e.VTFuze=20]="VTFuze",e[e.AntiAircraftGun=21]="AntiAircraftGun",e[e.MidgetSubmarine=22]="MidgetSubmarine",e[e.EmergencyRepairPersonnel=23]="EmergencyRepairPersonnel",e[e.LandingCraft=24]="LandingCraft",e[e.Autogyro=25]="Autogyro",e[e.AntiSubmarinePatrolAircraft=26]="AntiSubmarinePatrolAircraft",e[e.MediumExtraArmor=27]="MediumExtraArmor",e[e.LargeExtraArmor=28]="LargeExtraArmor",e[e.Searchlight=29]="Searchlight",e[e.SupplyTransportContainer=30]="SupplyTransportContainer",e[e.ShipRepairFacility=31]="ShipRepairFacility",e[e.SubmarineTorpedo=32]="SubmarineTorpedo",e[e.StarShell=33]="StarShell",e[e.CommandFacility=34]="CommandFacility",e[e.AviationPersonnel=35]="AviationPersonnel",e[e.AntiAircraftFireDirector=36]="AntiAircraftFireDirector",e[e.AntiGroundEquipment=37]="AntiGroundEquipment",e[e.LargeCaliberMainGun2=38]="LargeCaliberMainGun2",e[e.SurfaceShipPersonnel=39]="SurfaceShipPersonnel",e[e.LargeSonar=40]="LargeSonar",e[e.LargeFlyingBoat=41]="LargeFlyingBoat",e[e.LargeSearchlight=42]="LargeSearchlight",e[e.CombatRation=43]="CombatRation",e[e.Supplies=44]="Supplies",e[e.SeaplaneFighter=45]="SeaplaneFighter",e[e.SpecialAmphibiousTank=46]="SpecialAmphibiousTank",e[e.LandBasedAttackAircraft=47]="LandBasedAttackAircraft",e[e.LandBasedFighter=48]="LandBasedFighter",e[e.LandBasedReconnaissanceAircraft=49]="LandBasedReconnaissanceAircraft",e[e.TransportationMaterial=50]="TransportationMaterial",e[e.SubmarineEquipment=51]="SubmarineEquipment",e[e.JetPoweredFighter=56]="JetPoweredFighter",e[e.JetPoweredFighterBomber=57]="JetPoweredFighterBomber",e[e.JetPoweredTorpedoBomber=58]="JetPoweredTorpedoBomber",e[e.JetPoweredReconnaissanceAircraft=59]="JetPoweredReconnaissanceAircraft",e[e.LargeRadar2=93]="LargeRadar2",e[e.CarrierBasedReconnaissanceAircraft2=94]="CarrierBasedReconnaissanceAircraft2"}(i||(i={}));var a=function(){function e(e,t){var r=this;this.id=e,this.name=t,this.is=function(e){return r.id===i[e]},this.any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(r.is)}}return e.find=function(t,r){128===r||281===r?t=i.LargeCaliberMainGun2:142===r?t=i.LargeRadar2:151===r&&(t=i.CarrierBasedReconnaissanceAircraft2);var n=e.all.find((function(e){return e.id===t}));if(n)return n;var a=new e(t,"");return this.all.push(a),a},e}();t.b=a,a.keyToId=function(e){return i[e]},a.numberToKey=function(e){var t=i[e];if(void 0!==t)return t},a.all=n.a.map((function(e){var t=e.api_id,r=e.api_name;return new a(t,r)}))},3727:function(e,t,r){"use strict";var i;!function(e){e[e.None=1501]="None",e[e.Pillbox=1665]="Pillbox",e[e.IsolatedIsland=1668]="IsolatedIsland",e[e.SoftSkinned=1581]="SoftSkinned",e[e.HarbourSummerPrincess=1699]="HarbourSummerPrincess",e[e.SupplyDepot=1655]="SupplyDepot"}(i||(i={})),t.a=i},3728:function(e,t,r){"use strict";var i=r(233),n=r(99),a=r(157),o=r(49),u=r(344),s=r(232),c=function(){function e(e){var t=e.battleState,r=e.attacker,i=e.defender,n=e.specialAttack,a=e.isCritical,o=e.remainingAmmoModifier,u=e.fitGunBonus,c=e.optionalPowerModifiers;this.battleState=t,this.attacker=r,this.defender=i,this.specialAttack=n,this.isCritical=a,this.remainingAmmoModifier=o,this.fitGunBonus=u,this.optionalPowerModifiers=c,this.attackCalculator=new s.a(r.ship)}return Object.defineProperty(e.prototype,"isArmorPiercing",{get:function(){var e=this.defender.ship.shipType;return e.isBattleshipClass||e.isHeavyCruiserClass||e.any("AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifiers",{get:function(){var e;return this.attackCalculator.getProficiencyModifiers(null===(e=this.specialAttack)||void 0===e?void 0:e.isCarrierSpecialAttack)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetFactors",{get:function(){var e=this.attacker,t=this.defender;return{power:Object(i.c)(e,t),accuracy:Object(i.b)(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,t=e.battleState,r=e.attacker,i=e.defender,n=e.fleetFactors,a=e.specialAttack,u=e.isCritical,s=e.isArmorPiercing,c=e.optionalPowerModifiers,l=t.engagement,f=r.role,p=r.formation.getModifiers(f).shelling.power,h=l.modifier,g=r.ship.getSpecialEnemyModifiers(i.ship),d=i.ship.isInstallation,y=Object(o.a)(g,c);return this.attackCalculator.calcPower({formationModifier:p,engagementModifier:h,modifiers:y,fleetFactor:n.power,isCritical:u,isAntiInstallation:d,isArmorPiercing:s,specialAttack:a})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this,t=e.attacker,r=e.defender,i=e.fleetFactors,n=e.isArmorPiercing,a=e.specialAttack,o=e.fitGunBonus,s=void 0===o?0:o,c=t.formation.getModifiers(t.role).shelling.accuracy;u.a.isIneffective(t.formation,r.formation)&&(c=1);var l=a?a.modifier.accuracy:1;return this.attackCalculator.calcAccuracy({fleetFactor:i.accuracy,formationModifier:c,specialAttackModifier:l,isArmorPiercing:n,fitGunBonus:s})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,t=e.ship,r=e.formation,i=e.role,n=r.getModifiers(i).shelling.evasion;return t.calcEvasionValue(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,i=this.defenderEvasionValue,n=r.ship.morale.evasionModifier;return Object(a.b)({accuracy:t,evasion:i,moraleModifier:n,criticalRateMultiplier:e.criticalRateMultiplier,hitRateBonus:this.proficiencyModifiers.hitRate,criticalRateBonus:this.proficiencyModifiers.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,i=t.ship.getDefensePower();return new n.a(e.postcap,i,t.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){var e=this.damage,t=this.defender,r=this.hitRate,i=this.isCritical,n=t.ship.health,a=n.currentHp,o=n.maxHp,u=t.side,s=function(e){return(a-e)/o<=.25},c=function(e){return 0===e.length?0:e.filter(s).length/e.length},l=e.scratchDamageProbability,f=e.scratchDamages,p=e.deadlyDamageProbability,h=e.stopperDamages,g="Player"===u?p:0,d=e.values.filter((function(e){return!(e<=0)&&!("Player"===u&&a-e<=0)})),y=d.length/e.values.length*c(d)+l*c(f)+g*c(h);return i?r.criticalRate*y:r.normalRate*y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"can",{get:function(){var e=this.attacker,t=this.defender,r=t.ship.isInstallation,i=this.attackCalculator.type,n=e.ship;if("Sunk"===n.health.damage)return!1;if(t.ship.shipType.isSubmarineClass)return!1;if("CarrierShelling"===i){if(n.health.lte("Taiha"))return!1;if(!n.shipType.is("ArmoredAircraftCarrier")&&n.health.lte("Chuuha"))return!1;var a=n.planes.filter((function(e){return e.slotSize>0}));return(!r||!a.some((function(e){return e.is("DiveBomber")&&!e.is("AntiInstallationBomber")})))&&n.planes.some((function(e){return e.participatesInCarrierShelling}))}return!n.shipType.isSubmarineClass||!r||n.hasGear("SpecialAmphibiousTank")},enumerable:!0,configurable:!0}),e}();t.a=c,c.criticalRateMultiplier=1.3},3729:function(e,t,r){"use strict";var i=r(99),n=r(157),a=r(510),o=function(){function e(e){var t=e.battleState,r=e.attacker,i=e.defender,n=e.isCritical,o=e.remainingAmmoModifier,u=void 0===o?1:o;this.battleState=t,this.attacker=r,this.defender=i,this.isCritical=n,this.remainingAmmoModifier=u,this.attackCalculator=new a.a(r.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.battleState,t=this.attacker,r=this.defender,i=this.isCritical,n=e.engagement,a=t.formation.shellingSupportModifiers.power,o=n.modifier,u=r.ship.isInstallation;return this.attackCalculator.calcPower({formationModifier:a,engagementModifier:o,isCritical:i,isAntiInstallation:u})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker.formation.shellingSupportModifiers.accuracy;return this.attackCalculator.calcAccuracy({formationModifier:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,t=e.ship,r=e.formation,i=e.role,n=r.getModifiers(i).shelling.evasion;return t.calcEvasionValue(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,i=this.defenderEvasionValue,a=r.ship.morale.evasionModifier;return Object(n.b)({accuracy:t,evasion:i,moraleModifier:a,criticalRateMultiplier:e.criticalRateMultiplier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,n=t.ship.getDefensePower();return new i.a(e.postcap,n,t.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),e}();t.a=o,o.criticalRateMultiplier=1.1},3730:function(e,t,r){"use strict";var i=r(157),n=r(344),a=r(99),o=r(512),u=function(){return(u=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=function(){function e(e){var t=this,r=e.attacker,i=e.defender,a=e.engagement,s=e.isCritical,c=void 0!==s&&s,l=e.time,f=void 0===l?"Day":l,p=e.remainingAmmoModifier,h=void 0===p?1:p,g=e.optionalPowerModifiers;this.isPossible=function(){var e=t,r=e.defender,i=e.attackCalculator;return!!r.ship.shipType.isSubmarineClass&&"None"!==i.type},this.getFormationModifiers=function(){var e=t,r=e.attacker,i=e.defender,a=r.formation.getModifiers(r.role).asw,o={power:a.power,accuracy:a.accuracy,evasion:i.formation.getModifiers(i.role).asw.evasion};return n.a.isIneffective(r.formation,i.formation)?u(u({},o),{accuracy:1}):o},this.attacker=r,this.defender=i,this.engagement=a,this.isCritical=c,this.time=f,this.remainingAmmoModifier=h,this.optionalPowerModifiers=g,this.attackCalculator=o.a.fromShip(r.ship,f)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,t=this.optionalPowerModifiers,r=this.getFormationModifiers().power,i=this.engagement.modifier;return this.attackCalculator.calcPower({formationModifier:r,engagementModifier:i,isCritical:e,optionalModifiers:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.getFormationModifiers().accuracy;return this.attackCalculator.calcAccuracy({formationModifier:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.getFormationModifiers().evasion;return this.defender.ship.calcEvasionValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,n=this.evasion,a=r.ship.morale.evasionModifier,o=e.criticalRateMultiplier;return Object(i.b)({accuracy:t,evasion:n,moraleModifier:a,criticalRateMultiplier:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,i=t.ship.getDefensePower(),n=this.attackCalculator.armorPenetration;return new a.a(e.postcap,i,t.ship.health.currentHp,r,n)},enumerable:!0,configurable:!0}),e}();t.a=s,s.cap=150,s.criticalRateMultiplier=1.1},3731:function(e,t,r){"use strict";var i=r(157),n=r(233),a=r(511),o=r(99),u=function(){function e(e){var t=this,r=e.attacker,i=e.defender,n=e.engagement,o=e.isCritical,u=void 0!==o&&o,s=e.remainingAmmoModifier,c=void 0===s?1:s,l=e.innateTorpedoAccuracy,f=void 0===l?0:l,p=e.optionalPowerModifiers;this.getFormationModifiers=function(){var e=t,r=e.attacker,i=e.defender;return{attacker:r.formation.getModifiers(r.role).torpedo,defender:i.formation.getModifiers(i.role).torpedo}},this.attacker=r,this.defender=i,this.engagement=n,this.isCritical=u,this.remainingAmmoModifier=c,this.innateTorpedoAccuracy=f,this.optionalPowerModifiers=p,this.attackCalculator=a.a.fromShip(r.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,t=this.optionalPowerModifiers,r=Object(n.d)(this.attacker,this.defender),i=this.getFormationModifiers().attacker.power,a=this.engagement.modifier;return this.attackCalculator.calcPower({fleetFactor:r,formationModifier:i,engagementModifier:a,isCritical:e,optionalModifiers:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=Math.floor(.2*this.power.preCritical),t=this.getFormationModifiers().attacker.accuracy,r=this.innateTorpedoAccuracy;return this.attackCalculator.calcAccuracy({formationModifier:t,powerModifier:e,innateTorpedoAccuracy:r})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.defender.ship,t=this.getFormationModifiers().defender.evasion,r=e.totalEquipmentStats((function(e){return e.improvement.torpedoEvasionModifier}));return e.calcEvasionValue(t,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,n=this.evasion,a=r.ship.morale.evasionModifier,o=e.criticalRateMultiplier;return Object(i.b)({accuracy:t,evasion:n,moraleModifier:a,criticalRateMultiplier:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,i=t.ship.getDefensePower();return new o.a(e.postcap,i,t.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),e}();t.a=u,u.cap=150,u.criticalRateMultiplier=1.5,u.isPossible=function(e,t){return 0!==e.nakedStats.torpedo&&!t.isInstallation}},3732:function(e,t,r){"use strict";var i=r(513),n=r(99),a=r(157),o=r(49),u=function(){function e(e){var t=e.attacker,r=e.defender,n=e.specialAttack,a=e.isCritical,o=e.starshell,u=e.searchlight,s=e.nightContactModifier,c=e.remainingAmmoModifier,l=e.optionalPowerModifiers;this.attacker=t,this.defender=r,this.specialAttack=n,this.isCritical=a,this.starshell=o,this.searchlight=u,this.nightContactModifier=s,this.remainingAmmoModifier=c,this.optionalPowerModifiers=l,this.attackCalculator=new i.a(t.ship)}return Object.defineProperty(e.prototype,"contactModifiers",{get:function(){return 5===this.nightContactModifier?{power:5,accuracy:1.1,criticalRate:1.57}:{power:0,accuracy:1,criticalRate:e.criticalRateMultiplier}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,t=this.specialAttack,r=this.starshell,i=this.searchlight,n=e.formation,a=e.role,o=n.getModifiers(a).night.accuracy,u=null==t?void 0:t.modifier.accuracy,s=this.contactModifiers.accuracy,c=r?5:0,l=i?7:0;return this.attackCalculator.calcAccuracy({starshellModifier:c,contactModifier:s,searchlightModifier:l,formationModifier:o,specialAttackModifier:u})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,t=e.attacker,r=e.defender,i=e.isCritical,n=e.specialAttack,a=e.optionalPowerModifiers,u=t.role,s=t.formation.getModifiers(u).night.power,c=r.ship.isInstallation,l=t.ship.getSpecialEnemyModifiers(r.ship),f=Object(o.a)(l,a);return this.attackCalculator.calcPower({nightContactModifier:this.contactModifiers.power,formationModifier:s,specialAttack:n,isCritical:i,isAntiInstallation:c,modifiers:f})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,t=e.ship,r=e.formation,i=e.role,n=r.getModifiers(i).night.evasion,a=t.shipType.isHeavyCruiserClass?5:0;return t.calcEvasionValue(n,a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,t=this.defender,r=this.defenderEvasionValue,i=this.contactModifiers,n=t.ship.morale.evasionModifier;return Object(a.b)({accuracy:e,evasion:r,moraleModifier:n,criticalRateMultiplier:i.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defensePower,r=this.remainingAmmoModifier,i=this.defender;return new n.a(e.postcap,t,i.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),e}();t.a=u,u.criticalRateMultiplier=1.5},3733:function(e,t,r){"use strict";var i=function e(t,r,i){this.id=t,this.name=r,this.modifier=i,e.values.push(this)};t.a=i,i.values=[],i.Parallel=new i(1,"同航戦",1),i.HeadOn=new i(2,"反航戦",.8),i.CrossingTheTAdvantage=new i(3,"T有利",1.2),i.CrossingTheTDisadvantage=new i(4,"T不利",.6),i.random=function(e){void 0===e&&(e=!1);var t=Math.random();return t<.15?i.CrossingTheTAdvantage:t<.6?i.Parallel:t<.9||e?i.HeadOn:i.CrossingTheTDisadvantage}},3739:function(e,t,r){"use strict";var i=r(345),n=r(3139),a=r(49),o=r(99),u=r(157),s=function(){function e(e){var t=this,r=e.plane,i=e.target,n=e.contactModifier,s=e.proficiencyModifiers;this.calcPower=function(e){var r=t,i=r.slotSize,n=r.stat,o=r.typeModifier,u=r.contactModifier,s=r.proficiencyModifiers,c=o*(n*Math.sqrt(i)+0),l={a11:u},f=e?Object(a.c)(s.power):void 0;return Object(a.b)({basic:c,cap:150,modifiers:l,fm11next:f})},this.getHitRate=function(){var e=t,r=e.accuracy,i=e.evasion,n=e.proficiencyModifiers,a=e.target.morale.evasionModifier,o=n.hitRate,s=n.criticalRate;return Object(u.b)({accuracy:r,evasion:i,moraleModifier:a,hitRateBonus:o,criticalRateMultiplier:.2,criticalRateBonus:s})},this.getDamage=function(e){var r=t.target,i=t.calcPower(e).postcap;return new o.a(i,r.getDefensePower(),r.health.currentHp)},this.do=function(){var e=t.getHitRate(),r=Object(u.c)(e);if("Miss"!==r){var i=t.getDamage("Critical"===r);t.target.health.currentHp-=i.random()}},this.plane=r,this.target=i,this.contactModifier=n,this.proficiencyModifiers=s}return Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.plane.slotSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){var e=this.plane.is;return e("JetPoweredFighterBomber")?"JetPoweredFighterBomber":e("DiveBomber")?"DiveBomber":e("TorpedoBomber")?"TorpedoBomber":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stat",{get:function(){var e=this.plane;return e.is("DiveBomber")?e.gear.bombing:e.is("TorpedoBomber")?e.gear.torpedo:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeModifier",{get:function(){var e=this.type;return"JetPoweredFighterBomber"===e?1/Math.sqrt(2):"DiveBomber"===e?1:"TorpedoBomber"===e?Math.random()>.5?.8:1.5:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return 95},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.target.calcEvasionValue(1)},enumerable:!0,configurable:!0}),e}(),c=r(41),l=function e(t,r,i,n){var a=this;this.playerFleet=t,this.enemyFleet=r,this.enemyFormation=i,this.contactModifier=n,this.getTarget=function(){var e=a.enemyFleet.nonNullableShips.filter((function(e){return!e.shipType.isSubmarineClass})),t=Object(c.d)(e),r=e[0];if(t!==r)return t;if(!(Math.random()<a.enemyFormation.protectionRate))return t;var i=e.filter((function(e){return e!==t&&!e.isInstallation&&"Less"===e.health.damage}));return 0===i.length?t:Object(c.d)(i)},this.do=function(){var t=a,r=t.playerFleet,i=t.contactModifier;r.nonNullableShips.forEach((function(t){var r=t.getNormalProficiencyModifiers();t.planes.filter(e.isAirstrikePlane).forEach((function(e){var t=a.getTarget();new s({plane:e,target:t,contactModifier:i,proficiencyModifiers:r}).do()}))}))}},f=l;l.isAirstrikePlane=function(e){return e.slotSize>0&&(e.is("TorpedoBomber")||e.is("DiveBomber"))};var p=r(225),h=r(276),g=function(e,t){var r=i.a.fromFighterPower(e.fighterPower,t.fighterPower),n=r.constant;return e.planes.filter((function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")})).forEach((function(e){var t=function(e){var t,r=e.slotSize,i=e.airControlStateConstant,n=e.side,a=e.fighterCombatResistModifier;if("Player"===n){var o=i/4,u=Math.floor(i/3*100);t=Math.floor(Math.random()*(u+1))/100+o}else{u=11-i;t=.35*Math.floor(Math.random()*(u+1))+.65*Math.floor(Math.random()*(u+1))}var s=t/10;return Math.floor(r*s*a)}({slotSize:e.slotSize,airControlStateConstant:n,side:"Player",fighterCombatResistModifier:1});e.shotdown(t)})),r},d=function(e){var t=e.playerFleet,r=e.enemyFleet,i=e.enemyFormation,a=g(t,r),o=new n.a(t.planes).getContactModifier(a);return function(e){var t=e.playerFleet,r=e.enemyFleet,i=e.enemyFormation,n=t.planes.filter(f.isAirstrikePlane),a=p.a.calcFleetAntiAir(r,"Enemy",i.fleetAntiAirModifier);n.forEach((function(e){var t=Object(c.d)(r.nonNullableShips),i=new h.a(t,"Enemy",a).getShotdownNumber(e);e.shotdown(i)}))}(e),new f(t,r,i,o).do(),a},y=function(){function e(){var e=this;this.Less=0,this.Shouha=0,this.Chuuha=0,this.Taiha=0,this.Sunk=0,this.increase=function(t){var r=t.health;e[r.damage]+=1}}return Object.defineProperty(e.prototype,"total",{get:function(){return this.Less+this.Shouha+this.Chuuha+this.Taiha+this.Sunk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lessRate",{get:function(){return this.Less/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouhaRate",{get:function(){return this.Shouha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chuuhaRate",{get:function(){return this.Chuuha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){return this.Taiha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sunkRate",{get:function(){return this.Sunk/this.total},enumerable:!0,configurable:!0}),e}(),m=function(){function e(){var e=this;this.countMap=new Map,this.increase=function(t){var r,i=t.slotSize,n=null!==(r=e.countMap.get(i))&&void 0!==r?r:0;e.countMap.set(i,n+1)},this.entries=function(){var t=e,r=t.total,i=t.countMap;return Array.from(i.entries(),(function(e){return[e[0],e[1]/r]}))}}return Object.defineProperty(e.prototype,"total",{get:function(){var e=0;return this.countMap.forEach((function(t){e+=t})),e},enumerable:!0,configurable:!0}),e}(),b=function(e){var t=this;this.ship=e,this.init=function(){var e=t,r=e.ship,i=e.initialSlots;r.health.currentHp=t.initialHp,i.forEach((function(e,t){r.slots[t]=e}))},this.initialHp=e.health.currentHp,this.initialSlots=e.slots.concat()},v=function(e){var t=this;this.init=function(){t.shipInitialStates.forEach((function(e){return e.init()}))},this.shipInitialStates=e.nonNullableShips.map((function(e){return new b(e)}))},S=r(3749),w=function(e){var t=this;this.creater=e,this.data=new Map,this.update=function(e){var r=t.data.get(e);r||(r=t.creater(),t.data.set(e,r)),r.increase(e)},this.entries=function(){return Array.from(t.data.entries())}},P=function(){function e(){var e=this;this.data=new Map,this.increase=function(t){var r=e.data.get(t);r?e.data.set(t,r+1):e.data.set(t,1)},this.getRate=function(t){var r;return(null!==(r=e.data.get(t))&&void 0!==r?r:0)/e.total},this.getRateList=function(){var t=[];e.data.forEach((function(r,i){t.push([i,e.getRate(i)])}));var r=0;return t.sort((function(e,t){var r=e[0];return t[0]-r})).map((function(e){var t=e[0],i=e[1];return[t,i,r+=i]}))}}return Object.defineProperty(e.prototype,"total",{get:function(){var e=0;return this.data.forEach((function(t){e+=t})),e},enumerable:!0,configurable:!0}),e}(),A=function(){var e=this;this.damageLog=new w((function(){return new y})),this.planeLossLog=new w((function(){return new m})),this.sunkCounter=new P,this.update=function(t,r){r.nonNullableShips.forEach((function(t){e.damageLog.update(t)}));var i=r.nonNullableShips.filter((function(e){return"Sunk"===e.health.damage})).length;e.sunkCounter.increase(i),t.planes.forEach((function(t){e.planeLossLog.update(t)}))}},k=function(e,t,r){var i=this;this.playerFleet=e,this.enemyFleet=t,this.enemyFormation=r,this.record=new A,this.init=function(){var e=i.initialState,t=e.playerFleet,r=e.enemyFleet;t.init(),r.init()},this.once=function(){var e=i,t=e.playerFleet,r=e.enemyFleet,n=e.enemyFormation;d({playerFleet:t,enemyFleet:r,enemyFormation:n}),i.record.update(t,r),i.init()},this.do=function(e){return Object(S.a)(e,i.once),i.record},this.initialState={playerFleet:new v(e),enemyFleet:new v(t)}};t.a=k},3748:function(e,t,r){"use strict";var i=r(3672),n=r(3674),a=r(3675),o=r(37),u=r(3155),s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},c=function(e){return"number"==typeof e?[e,e]:e},l=function(){function e(t,r,i){var n=this;this.shipType=r,this.shipClass=i,this.getNextShip=function(){if(n.canRemodel)return e.all.find((function(e){return n.remodel.nextId===e.shipId}))},this.getPrevShip=function(){return e.all.find((function(e){return e.remodel.nextId===n.shipId}))},this.getRemodelGroupShips=function(){return e.all.filter((function(e){return e.remodelGroup===n.remodelGroup}))},this.shipId=t.id,this.shipClassId=i.id,this.sortNo=t.sortNo,this.sortId=t.sortId,this.name=t.name,this.readingName=t.readingName,this.hp=c(t.hp),this.armor=c(t.armor),this.firepower=c(t.firepower),this.torpedo=c(t.torpedo),this.antiAir=c(t.antiAir),this.luck=c(t.luck),this.asw=c(t.asw),this.evasion=c(t.evasion),this.los=c(t.los),this.speed=t.speed,this.range=t.range,this.fuel=t.fuel,this.ammo=t.ammo,this.slotCapacities=t.slotCapacities.concat(),this.initialEquipment=t.equipments.map((function(e){return"number"==typeof e?{id:e,improvement:0}:e})),t.remodel?this.remodel=t.remodel:this.remodel={nextId:0,nextLevel:0};var a=t.equippable?t.equippable:{};this.equippable=s({categories:this.shipType.equippableCategoryIds,expantionSlot:[]},a),e.all.push(this)}return Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.shipId>e.abyssalIdFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRemodel",{get:function(){return this.remodel.nextId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canConvert",{get:function(){if(!this.canRemodel)return!1;var e=this.getNextShip();if(!e)return!1;if(e.remodel.nextId===this.shipId)return!0;var t=e.getNextShip();return!!t&&t.remodel.nextId===this.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){if(this.remodelGroupMemo)return this.remodelGroupMemo;for(var e=this.shipId,t=this.getPrevShip();t;)e=t.shipId,t=t.getPrevShip();return this.remodelGroupMemo=e,e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.sortId%10},enumerable:!0,configurable:!0}),e}(),f=l;l.all=new Array,l.abyssalIdFrom=1500;var p=r(496),h=r(3673),g=r(92),d=function(){function e(e,t,r){var i=this;this.id=e,this.name=t,this.equippableCategoryIds=r,this.is=function(e){return i.id===g.a[e]},this.any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(i.is)},e===g.a.Battlecruiser&&(this.name="巡洋戦艦")}return Object.defineProperty(e.prototype,"isDestroyer",{get:function(){return this.id===g.a.Destroyer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLightCruiserClass",{get:function(){return this.any("LightCruiser","TorpedoCruiser","TrainingCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeavyCruiserClass",{get:function(){return this.any("HeavyCruiser","AviationCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBattleshipClass",{get:function(){return this.any("Battlecruiser","Battleship","AviationBattleship","SuperDreadnoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraftCarrierClass",{get:function(){return this.any("LightAircraftCarrier","AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubmarineClass",{get:function(){return[g.a.Submarine,g.a.SubmarineAircraftCarrier].includes(this.id)},enumerable:!0,configurable:!0}),e}(),y=d;d.all=h.a.map((function(e){var t=Object.entries(e.api_equip_type).filter((function(e){e[0];return 1===e[1]})).map((function(e){var t=e[0];e[1];return Number(t)}));return new d(e.api_id,e.api_name,t)})),d.fromId=function(e){var t=d.all.find((function(t){return t.id===e}));if(t)return t;var r=new d(e,"",[]);return d.all.push(r),r};var m=function(e){var t=this;void 0===e&&(e=i.a),this.shipsData=e,this.findMasterGear=function(e){return t.gears.find((function(t){return t.id===e}))},this.findMasterShip=function(e){return t.ships.find((function(t){return t.shipId===e}))},this.shipIdToName=function(e){var r=t.ships.find((function(t){return t.shipId===e}));return r?r.name:""},this.shipNameToId=function(e){var r=t.ships.find((function(t){return t.name===e}));return r?r.shipId:0},this.shipClassIdToName=function(e){return p.a.fromId(e).name},this.shipTypeIdToName=function(e){return y.fromId(e).name},this.gearIdToName=function(e){var r=t.findMasterGear(e);return r?r.name:""},this.gearNameToId=function(e){var r=t.gears.find((function(t){return t.name===e}));return r&&r.id},this.gears=n.a.map((function(e){var t=e.api_id,r=e.api_type[2],i=o.b.find(r,t),n=a.a.includes(t);return new u.a(e,i,n)})),this.ships=e.map((function(e){var t=y.fromId(e.shipTypeId),r=p.a.fromId(e.classId);return new f(e,t,r)}))};t.a=m},39:function(e,t,r){"use strict";var i=function(){function e(t,r,i){this.id=t,this.key=r,this.name=i,e.values.push(this)}return Object.defineProperty(e.prototype,"isCombined",{get:function(){return this!==e.Single},enumerable:!0,configurable:!0}),e}();t.a=i,i.values=[],i.Single=new i(0,"Single","通常艦隊"),i.CarrierTaskForce=new i(1,"CarrierTaskForce","空母機動部隊"),i.SurfaceTaskForce=new i(2,"SurfaceTaskForce","水上打撃部隊"),i.TransportEscort=new i(3,"TransportEscort","輸送護衛部隊"),i.Combined=new i(5,"Combined","敵連合"),i.fromId=function(e){return i.values.find((function(t){return t.id===e}))},i.fromString=function(e){return i.values.find((function(t){return t.key===e||t.name===e}))}},41:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return u}));var i=function(e){return null!=e},n=i,a=function(e,t){return t<=e?t:e+Math.sqrt(t-e)},o=function(e){return e.health.currentHp+e.getDefensePower().max},u=function(e){return e[Math.floor(Math.random()*e.length)]}},49:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c}));var i=r(516),n=r(41),a=function(e,t){Object.entries(t).forEach((function(t){var r,i=t[0],n=t[1];"number"==typeof n&&(r=i.startsWith("a")?(e[i]||1)*n:(e[i]||0)+n,e[i]=r)}))},o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};return e.forEach((function(e){return e&&a(r,e)})),r},u=function(e,t,r){return void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=!1),function(i){var n=i*e+t;return r?Math.floor(n):n}},s=function(e){return void 0===e&&(e=1),function(t){return Math.floor(1.5*t*e)}},c=function(e){var t=e.basic,r=e.cap,a=e.modifiers,o=e.fm14prev,s=e.fm11next,c=function(e,t){var r=e.a12,n=e.a13,a=e.a13next,o=e.a14,s=e.b12,c=e.b13,l=e.b13next,f=e.b14,p=u(r,s),h=u(n,c),g=u(a,l),d=u(o,f);return t?Object(i.a)(p,h,g,t,d):Object(i.a)(p,h,g,d)}(a,o),l=function(e){var t=e.a5,r=e.a6,n=e.a11,a=e.b5,o=e.b6,s=e.b11,c=u(t,a,!0),l=u(r,o,!0),f=u(n,s);return Object(i.a)(c,l,f)}(a),f=c(t),p=r<f,h=Object(n.e)(r,f),g=l(h);return s&&(g=s(g)),{precap:f,isCapped:p,capped:h,postcap:g}}},492:function(e,t,r){"use strict";r.d(t,"b",(function(){return n}));var i=r(196),n=["hp","firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","luck"],a=function(){function e(e,t,r){this.master=e,this.level=t,this.increased=r}return e.prototype.getIncreasedStat=function(e){var t=this.increased;if(!t)return 0;var r=t[e];return r?r>1e5?1e5:r:0},Object.defineProperty(e.prototype,"hp",{get:function(){return Object(i.a)(this.master.hp,this.level)+this.getIncreasedStat("hp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower[1]+this.getIncreasedStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo[1]+this.getIncreasedStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir[1]+this.getIncreasedStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor[1]+this.getIncreasedStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return Object(i.b)(this.master.los,this.level)+this.getIncreasedStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return Object(i.b)(this.master.asw,this.level)+this.getIncreasedStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return Object(i.b)(this.master.evasion,this.level)+this.getIncreasedStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck[0]+this.getIncreasedStat("luck")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed+this.getIncreasedStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range+this.getIncreasedStat("range")},enumerable:!0,configurable:!0}),e}();t.a=a},493:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return n}));var i=function(e){var t=e.hasArmorPiercingShell,r=e.hasMainGun,i=e.hasRader,n=e.hasSecondaryGun;return t&&r?n&&i?{power:1.15,accuracy:1.3}:n?{power:1.15,accuracy:1.2}:i?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}:{power:1,accuracy:1}},n=function(e){var t=e.isLightCruiserClass,r=e.isZaraClass,i=e.singleGunCount,n=e.twinGunCount,a=e.zaraGunCount;return t?Math.sqrt(i)+2*Math.sqrt(n):r?Math.sqrt(a):0}},496:function(e,t,r){"use strict";var i=r(3156),n=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,n++)i[n]=a[o];return i},a=Object.entries(i.b).filter((function(e){return"number"==typeof e[1]})),o=function(){function e(e,t){var r=this;this.name=e,this.id=t,this.is=function(e){return r.id===i.a[e]},this.any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(r.is)}}return e.fromId=function(t){var r=e.all.find((function(e){return e.id===t}));if(r)return r;var i=new e("unkown",t);return e.all.push(i),i},Object.defineProperty(e.prototype,"isSpecialTypeDestroyer",{get:function(){return this.any("FubukiClass","AyanamiClass","AkatsukiClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsNavy",{get:function(){return this.any("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoyalNavy",{get:function(){return this.any("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass")},enumerable:!0,configurable:!0}),e}();t.a=o,o.all=a.map((function(e){return new(o.bind.apply(o,n([void 0],e)))}))},497:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(3636),n=function(e,t){var r=Object(i.a)(e.filter((function(e){return e.level<=t})),"value");return r?r.value:0},a={from:function(e){var t=function(t){return e.includes(t)};return t("Fighter")?"Fighter":t("SeaplaneBomber")?"SeaplaneBomber":t("DiveBomber")||t("TorpedoBomber")||t("ReconnaissanceAircraft")?"Other":"None"}},o=function(){function e(e,t){void 0===e&&(e=0),this.internal=e,this.type=t}return e.internalToLevel=function(t){return e.internalBounds.filter((function(e){return e<=t})).length-1},Object.defineProperty(e.prototype,"visible",{get:function(){return"None"!==this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return e.internalToLevel(this.internal)},set:function(t){this.internal=e.internalBounds[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerBonus",{get:function(){var t=this.internal,r=this.level,i=this.type;if(t<=0)return 0;var a=[];return"Fighter"===i?a=e.fighterPowerLevelBonuses.fighter:"SeaplaneBomber"===i&&(a=e.fighterPowerLevelBonuses.seaplaneBomber),n(a,r)+Math.sqrt(t/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalPowerModifier",{get:function(){var t=this.internal,r=this.level,i=n(e.criticalModifierLevelBonuses,r);return Math.floor(Math.sqrt(t)+i)},enumerable:!0,configurable:!0}),e}();t.b=o,o.internalBounds=[0,10,25,40,55,70,85,100],o.fighterPowerLevelBonuses={fighter:[{level:7,value:22},{level:5,value:14},{level:4,value:9},{level:3,value:5},{level:2,value:2},{level:0,value:0}],seaplaneBomber:[{level:7,value:6},{level:5,value:3},{level:2,value:1},{level:0,value:0}]},o.criticalModifierLevelBonuses=[{level:7,value:10},{level:6,value:7},{level:5,value:5},{level:4,value:4},{level:3,value:3},{level:2,value:2},{level:1,value:1},{level:0,value:0}]},510:function(e,t,r){"use strict";var i=r(49),n=r(232),a=function(){function e(e){var t=this;this.ship=e,this.getCarrierShellingFm=function(e){void 0===e&&(e=!1);var r=t,i=r.ship;if("Shelling"!==r.type){var n=i.stats.torpedo,a=e?i.totalEquipmentStats((function(e){return e.is("AntiInstallationBomber")?e.bombing:0})):i.totalEquipmentStats("bombing"),o=Math.floor(Math.floor(1.3*a)+n)+15;return function(e){return 25+Math.floor(1.5*(e+o))}}},this.calcPower=function(e){var r=t.ship,n=e.formationModifier,a=e.engagementModifier,o=e.isCritical,u=e.isAntiInstallation,s=4+r.stats.firepower,c={a14:n*a*r.health.shellingPowerModifier},l=t.getCarrierShellingFm(u),f=o?Object(i.c)():void 0;return Object(i.b)({basic:s,cap:150,modifiers:c,fm14prev:l,fm11next:f})},this.calcAccuracy=function(e){var r=t.accuracyShipFactors,i=r.shipAccuracy,n=r.equipmentAccuracy,a=r.moraleModifier,o=e.formationModifier,u=Math.floor(64+i+n);return Math.floor(u*o*a)}}return Object.defineProperty(e.prototype,"type",{get:function(){return Object(n.b)(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracyShipFactors",{get:function(){var e=this.ship;return{shipAccuracy:e.shipAccuracy,equipmentAccuracy:e.totalEquipmentStats("accuracy"),moraleModifier:e.morale.getAccuracyModifier("shelling")}},enumerable:!0,configurable:!0}),e}();t.a=a},511:function(e,t,r){"use strict";var i=r(49),n=function(){return(n=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=function(e){var t=this;this.state=e,this.calcPower=function(e){return function(e){var t=e.torpedo,r=e.improvementModifier,a=e.healthModifier,o=e.fleetFactor,u=e.formationModifier,s=e.engagementModifier,c=e.isCritical,l=e.optionalModifiers,f=u*s*a,p=Object(i.a)({a14:f},l),h=t+r+o,g=Object(i.b)({basic:h,cap:150,modifiers:p}),d=g.postcap;if(!c)return n(n({},g),{preCritical:d});var y=Math.floor(1.5*g.postcap);return n(n({},g),{preCritical:d,postcap:y})}(n(n({},t.state.power),e))},this.calcAccuracy=function(e){return r=n(n({},t.state.accuracy),e),i=r.shipAccuracy,a=r.equipmentAccuracy,o=r.improvementModifier,u=r.powerModifier,s=r.innateTorpedoAccuracy,c=r.formationModifier,l=r.moraleModifier,f=85+i+a+o+u+s,Math.floor(f*c*l);var r,i,a,o,u,s,c,l,f}};t.a=a,a.fromShip=function(e){var t=e.shipAccuracy,r={power:{torpedo:e.stats.torpedo,improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.torpedoPowerModifier})),healthModifier:e.health.torpedoPowerModifier},accuracy:{shipAccuracy:t,equipmentAccuracy:e.totalEquipmentStats("accuracy"),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.torpedoAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("torpedo")}};return new a(r)}},512:function(e,t,r){"use strict";var i=r(289),n=r(49),a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=function(e){var t=e.hasGear,r=1,i=1;return(t("Sonar")||t("LargeSonar"))&&t("DepthCharge")&&(r=1.15),t("AdditionalDepthCharge")&&t("DepthChargeProjector")&&(i=t("Sonar")?1.25:1.1),r*i},u=function(e){var t=e.shipType.is("CoastalDefenseShip")?1:0;return e.totalEquipmentStats((function(e){return e.is("AdditionalDepthCharge")?Math.sqrt(e.asw-2)+t:0}))},s=function(){function e(e){var t=this;this.state=e,this.calcBasicPower=function(e){void 0===e&&(e=0);var r=t.state.power,i=r.nakedAsw,n=r.equipmentAsw,a=r.improvementModifier,o=r.typeConstant;return 2*Math.sqrt(i)+1.5*n+a+o},this.calcPower=function(e){var r,o=t.state.power.proficiencyModifier;return e.isCritical&&(r=Object(n.c)(o)),i.a.createPower(a(a(a({},t.state.power),e),{fm11next:r}))},this.calcAccuracy=function(e){return i.a.calcAccuracy(a(a({},t.state.accuracy),e))}}return Object.defineProperty(e.prototype,"armorPenetration",{get:function(){return this.state.armorPenetration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.state.type},enumerable:!0,configurable:!0}),e}();t.a=s,s.fromShip=function(e,t){var r=function(e,t){var r=e.shipAccuracy,i=function(e,t){return void 0===t&&(t=!1),!t&&function(e){return!(!e.shipType.any("AviationCruiser","AviationBattleship","SeaplaneTender","LightAircraftCarrier","AmphibiousAssaultShip")&&!e.shipClass.is("RevisedKazahayaClass"))&&e.planes.some((function(e){return e.slotSize>0&&e.is("AswAircraft")}))}(e)?"AircraftCarrier":function(e){return 0!==e.nakedStats.asw&&!e.shipClass.any("FusouClass","IseClass","R1")}(e)?"DepthCharge":"None"}(e,"Night"===t),n=e.totalEquipmentStats((function(e){return e.is("Sonar")?2*e.asw:e.is("AdditionalDepthCharge")?e.asw:0})),a=1;return"AircraftCarrier"!==i||"Opening"===t||e.shipClass.is("RevisedKazahayaClass")||(a=e.getNormalProficiencyModifiers().power),{power:{nakedAsw:e.nakedStats.asw,equipmentAsw:e.totalEquipmentStats((function(e){return e.is("AswGear")?e.asw:0})),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.aswPowerModifier})),typeConstant:"DepthCharge"===i?13:8,healthModifier:e.health.aswPowerModifier,synergyModifier:o(e),proficiencyModifier:a},accuracy:{shipAccuracy:r,aswEquipmentModifier:n,improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.aswAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("asw")},armorPenetration:u(e),type:i}}(e,t);return new s(r)}},513:function(e,t,r){"use strict";var i=r(517),n=r(49),a=function(e){var t=e.gearId;return 258===t||259===t},o=function(){function e(e){var t=this;this.ship=e,this.calcNightAerialAttackPower=function(e){var r=t,n=r.ship;return"NightAerialAttack"!==r.type?0:n.nakedStats.firepower+Object(i.a)(n.planes,(function(t){return t.calcNightAerialAttackPower(e)}))},this.calcBasicPower=function(e,r){var i=t,n=i.ship,a=i.type,o=n.stats.firepower,u=r?0:n.stats.torpedo,s=n.totalEquipmentStats((function(e){return e.improvement.nightAttackPowerModifier}));return"NightAerialAttack"===a?t.calcNightAerialAttackPower(r)+e:o+u+s+e},this.getCriticalFm=function(){if("NightAerialAttack"===t.type){var e=t.ship.getNormalProficiencyModifiers();return Object(n.c)(e.power)}return Object(n.c)()},this.calcPower=function(e){var r=e.nightContactModifier,i=e.formationModifier,a=e.specialAttack,o=e.isCritical,u=e.isAntiInstallation,s=t.calcBasicPower(r,u),c=t.ship.health.nightAttackPowerModifier,l=1,f=1;a&&(l=a.modifier.power,a.isDestroyerCutin&&(f=t.typeDModifier));var p=i*c*l*f,h=t.ship.getCruiserFitBonus(),g=Object(n.a)({a14:p,b14:h},e.modifiers),d=o?t.getCriticalFm():void 0;return Object(n.b)({basic:s,cap:300,modifiers:g,fm11next:d})},this.calcAccuracy=function(e){var r=e.starshellModifier,i=e.contactModifier,n=e.searchlightModifier,a=e.formationModifier,o=e.specialAttackModifier,u=void 0===o?1:o,s=e.fitGunBonus,c=void 0===s?0:s,l=t.ship,f=l.shipAccuracy,p=l.shipType,h=l.hasGear,g=l.totalEquipmentStats("accuracy"),d=l.totalEquipmentStats((function(e){return e.improvement.nightAttackAccuracyModifier})),y=l.morale.getAccuracyModifier("night"),m=0;p.isHeavyCruiserClass&&(h(6)&&(m=10),(h(90)||h(50))&&(m=15));var b=Math.floor((69+r)*i+f+g+d);return Math.floor(b*a*y*u+n+m+c)}}return Object.defineProperty(e.prototype,"type",{get:function(){return function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.shipId)&&!e.hasGear(a))&&e.planes.some((function(e){return e.slotSize>0&&e.isNightPlane})))}(this.ship)?"NightAerialAttack":"NightAttack"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeDModifier",{get:function(){var e=this.ship,t=e.countGear(267),r=e.countGear(366),i=t+r,n=1;return 0===i||(1===i&&(n=1.25),i>=2&&(n=1.4),r&&(n*=1.05)),n},enumerable:!0,configurable:!0}),e}();t.a=o},514:function(e,t,r){"use strict";var i=r(41),n=r(3636),a=r(3162),o=function(e){if(Array.isArray(e)){var t=e.map(o);return Object(n.a)(t,(function(e){return e&&e.id}))}var r=e,i=Object(a.a)(100);return l.getPossibleAntiAirCutins(r).find((function(e){return e.isSpecialAaci()?e.probability>Object(a.a)(100):e.probability>i}))},u=o,s=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,n++)i[n]=a[o];return i},c=function(){function e(e,t,r,i){var n=this;this.id=e,this.minimumBonus=t,this.fixedAirDefenseModifier=r,this.probability=i,this.isSpecialAaci=function(){return[34,35,39,40,41].includes(n.id)}}return e.fromId=function(e){return this.all.find((function(t){return t.id===e}))},e}(),l=t.a=c;c.all=[[1,8,1.7,65],[2,7,1.7,58],[3,5,1.6,50],[4,7,1.5,52],[5,5,1.5,55],[6,5,1.45,40],[7,4,1.35,45],[8,5,1.4,50],[9,3,1.3,40],[10,9,1.65,60],[11,7,1.5,55],[12,4,1.25,45],[13,5,1.35,35],[14,5,1.45,63],[15,4,1.3,58],[16,5,1.4,60],[17,3,1.25,55],[18,3,1.2,60],[19,6,1.45,55],[20,4,1.25,70],[21,6,1.45,60],[22,3,1.2,63],[23,2,1.05,80],[24,4,1.25,60],[25,8,1.55,60],[26,7,1.4,60],[28,5,1.4,53],[29,6,1.55,58],[30,4,1.3,42],[31,3,1.25,50],[32,4,1.2,32],[33,4,1.35,42],[34,8,1.6,60],[35,7,1.55,53],[36,7,1.55,59],[37,5,1.45,38],[39,11,1.7,60],[40,11,1.7,60],[41,10,1.65,60]].map((function(e){return new(c.bind.apply(c,s([void 0],e)))})),c.try=u,c.getPossibleAntiAirCutins=function(e){return function(e){var t,r=e.shipId,i=e.hasGear;!function(e){e[e.MayaKai2=428]="MayaKai2",e[e.IsuzuKai2=141]="IsuzuKai2",e[e.KasumiKai2B=470]="KasumiKai2B",e[e.KinuKai2=487]="KinuKai2",e[e.YuraKai2=488]="YuraKai2",e[e.MusashiKai=148]="MusashiKai",e[e.MusashiKai2=546]="MusashiKai2",e[e.IsokazeBKai=557]="IsokazeBKai",e[e.HamakazeBKai=558]="HamakazeBKai",e[e.SatsukiKai2=418]="SatsukiKai2",e[e.FumizukiKai2=548]="FumizukiKai2",e[e.Uit25=539]="Uit25",e[e.I504=530]="I504",e[e.TatsutaKai2=478]="TatsutaKai2"}(t||(t={}));var n=function(t){return e.masterId===t},a=function(e){return e.is("HighAngleMount")},o=function(e){return a(e)&&e.antiAir>=8},u=function(e){return e.is("Radar")},s=function(e){return e.is("AirRadar")},c=function(e){return e.is("AntiAircraftGun")},l=function(e){return c(e)&&e.antiAir>=9},f=function(e){return c(e)&&e.antiAir>=3&&e.antiAir<9},p=function(e){return 274===e.gearId},h=function(e){return e.is("AntiAircraftShell")},g=function(e){return e.is("AntiAircraftFireDirector")},d=function(e){return e.category.any("LargeCaliberMainGun","LargeCaliberMainGun2")},y=function(t,r){return e.countGear(t)>=r},m=function(t){return e.hasGear(t)},b=[];if(e.shipClass.is("FletcherClass")){var v=e.countGear(284)+e.countGear(313),S=e.countGear(308);S>=2&&b.push(34),S>0&&v>0&&b.push(35),v>=2&&(e.hasGear(307)&&b.push(36),b.push(37))}var w=e.countGear(363),P=e.countGear(362)+w;return e.shipClass.is("AtlantaClass")&&P>=2&&(w>=1&&b.push(39),e.hasGear(307)&&b.push(40),b.push(41)),e.shipClass.is("AkizukiClass")&&m(a)?(y(a,2)&&m(u)&&b.push(1),m(u)&&b.push(2),y(a,2)&&b.push(3)):(n(t.MayaKai2)&&m(a)&&m(l)&&(m(s)&&b.push(10),b.push(11)),n(t.IsuzuKai2)&&m(a)&&m(c)&&(m(s)&&b.push(14),b.push(15)),n(t.KasumiKai2B)&&m(a)&&m(c)&&(m(s)&&b.push(16),b.push(17)),622===r&&i("HighAngleMount")&&i("AntiAircraftGun")&&i("AirRadar")&&b.push(16),n(t.KinuKai2)&&m(l)&&m((function(e){return a(e)&&e.antiAir<8}))&&b.push(19),n(t.YuraKai2)&&m(a)&&m(s)&&b.push(21),e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")&&m(p)&&m(h)&&m(s)&&b.push(25),m(g)&&m(d)&&m(h)&&m(s)&&b.push(4),y(o,2)&&m(s)&&b.push(5),m(g)&&m(d)&&m(h)&&b.push(6),m(o)&&m(s)&&b.push(8),m(g)&&m(a)&&m(s)&&b.push(7),n(t.MusashiKai2)&&m((function(e){return 275===e.gearId}))&&m(u)&&b.push(26),(e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")||n(t.MusashiKai)||n(t.MusashiKai2))&&m(p)&&m(s)&&b.push(28),(n(t.IsokazeBKai)||n(t.HamakazeBKai))&&m(a)&&m(s)&&b.push(29),m(g)&&m(a)&&b.push(9),"Gotland改"===e.name&&e.hasGear(a)&&e.hasGear((function(e){return e.is("AntiAircraftGun")&&e.antiAir>=4}))&&b.push(33),m(l)&&m(s)&&e.countGear((function(e){return e.is("AntiAircraftGun")&&e.antiAir>=3}))>=2&&b.push(12),m(o)&&m(l)&&m(s)&&b.push(13),n(t.SatsukiKai2)&&m(l)&&b.push(18),n(t.KinuKai2)&&m(l)&&b.push(20),n(t.FumizukiKai2)&&m(l)&&b.push(22),(n(t.Uit25)||n(t.I504))&&m(f)&&b.push(23),["龍田改二","天龍改二"].includes(e.name)&&m(a)&&m(f)&&b.push(24),["天龍改二","Gotland改"].includes(e.name)&&e.countGear(a)>=3&&b.push(30),"天龍改二"===e.name&&e.countGear(a)>=2&&b.push(31),(e.shipClass.isRoyalNavy||e.shipClass.is("KongouClass")&&e.name.includes("改二"))&&(e.countGear(301)>=2||e.hasGear(301)&&e.hasGear(191)||e.hasGear(300)&&e.hasGear(191))&&b.push(32)),b}(e).map((function(e){return c.fromId(e)})).filter(i.b)}},515:function(e,t,r){"use strict";var i;!function(e){e.MainFleet="MainFleet",e.EscortFleet="EscortFleet"}(i||(i={})),t.a=i},559:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=function(e){var t=e.slotSize,r=e.antiAir,i=e.interception,n=void 0===i?0:i,a=e.antiBomber,o=void 0===a?0:a,u=e.improvementModifier,s=void 0===u?0:u,c=e.proficiencyModifier,l=void 0===c?0:c,f=e.isInterception,p=r+1.5*n+s;return void 0!==f&&f&&(p=r+n+2*o+s),Math.floor(p*Math.sqrt(t)+l)}},560:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=function(e,t){return e.includes(t)}},561:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=function(e){var t=e.evasion,r=e.luck,i=e.improvementModifier,n=e.formationModifier,a=e.postcapModifier,o=void 0===a?0:a,u=e.additionalFm,s=Math.floor((t+Math.sqrt(2*r))*n),c=s;s>=65?c=Math.floor(55+2*Math.sqrt(s-65)):s>=40&&(c=Math.floor(40+3*Math.sqrt(s-40)));var l=Math.floor(c+o)+i;return u?u(l):l}},66:function(e,t,r){"use strict";r.r(t);var i=r(493);r.d(t,"getApShellModifiers",(function(){return i.b})),r.d(t,"calcCruiserFitBonus",(function(){return i.a}));var n=r(559);r.d(t,"calcFighterPower",(function(){return n.a}));var a=r(196);r.d(t,"calcStatAtLevel",(function(){return a.b})),r.d(t,"calcHpAtLevel",(function(){return a.a}));var o=r(289);r.d(t,"Asw",(function(){return o.a}));var u=r(157);r.d(t,"calcHitRateBasis",(function(){return u.a})),r.d(t,"createHitRate",(function(){return u.b})),r.d(t,"getHitStatus",(function(){return u.c}));var s=r(561);r.d(t,"calcEvasionValue",(function(){return s.a}))},92:function(e,t,r){"use strict";var i;!function(e){e[e.CoastalDefenseShip=1]="CoastalDefenseShip",e[e.Destroyer=2]="Destroyer",e[e.LightCruiser=3]="LightCruiser",e[e.TorpedoCruiser=4]="TorpedoCruiser",e[e.HeavyCruiser=5]="HeavyCruiser",e[e.AviationCruiser=6]="AviationCruiser",e[e.LightAircraftCarrier=7]="LightAircraftCarrier",e[e.Battlecruiser=8]="Battlecruiser",e[e.Battleship=9]="Battleship",e[e.AviationBattleship=10]="AviationBattleship",e[e.AircraftCarrier=11]="AircraftCarrier",e[e.SuperDreadnoughts=12]="SuperDreadnoughts",e[e.Submarine=13]="Submarine",e[e.SubmarineAircraftCarrier=14]="SubmarineAircraftCarrier",e[e.Transport=15]="Transport",e[e.SeaplaneTender=16]="SeaplaneTender",e[e.AmphibiousAssaultShip=17]="AmphibiousAssaultShip",e[e.ArmoredAircraftCarrier=18]="ArmoredAircraftCarrier",e[e.RepairShip=19]="RepairShip",e[e.SubmarineTender=20]="SubmarineTender",e[e.TrainingCruiser=21]="TrainingCruiser",e[e.FleetOiler=22]="FleetOiler"}(i||(i={})),t.a=i},99:function(e,t,r){"use strict";var i=r(3160),n=function(){function e(e,t,r,i,n){var a=this;void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=0),this.attackPower=e,this.defensePower=t,this.defenderCurrentHp=r,this.remainingAmmoModifier=i,this.armorPenetration=n,this.calcValue=function(e){var t=a,r=t.attackPower,i=t.remainingAmmoModifier,n=t.armorPenetration,o=Math.max(1,e-n),u=Math.floor((r-o)*i);return Math.max(0,u)},this.random=function(){return a.calcValue(a.defensePower.random())}}return Object.defineProperty(e.prototype,"min",{get:function(){return this.calcValue(this.defensePower.max)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.calcValue(this.defensePower.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.defensePower,t=this.calcValue;return e.values().map(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeadly",{get:function(){var e=this.min;return this.defenderCurrentHp<=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamageProbability",{get:function(){var e=this.values;return e.filter((function(e){return e<=0})).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map((function(t){return Math.floor(.06*e+.08*t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadlyDamageProbability",{get:function(){var e=this.values,t=this.defenderCurrentHp;return e.filter((function(e){return t-e<=0})).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopperDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map((function(t){return Math.floor(.5*e+.3*t)}))},enumerable:!0,configurable:!0}),e}();t.a=n,n.calc=function(e,t,r){return void 0===e&&(e=0),void 0===r&&(r=1),new n(e,t,r).random()}}}]);