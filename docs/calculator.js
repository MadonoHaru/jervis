(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,r,t){"use strict";t.r(r);var i=t(514);t.d(r,"AntiAirCutin",(function(){return i.a}));var a=t(3045);t.d(r,"CarrierBasedAerialCombat",(function(){return a.a}));var n=t(3046);t.d(r,"LandBaseAerialSupport",(function(){return n.a}));var o=t(225);t.d(r,"FleetAntiAir",(function(){return o.a}));var s=t(276);t.d(r,"ShipAntiAir",(function(){return s.a}))},157:function(e,r,t){"use strict";t.d(r,"a",(function(){return i})),t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return n}));var i=function(e){var r=(e.accuracy-e.evasion)*e.moraleModifier;return r<10?10:r>96?96:r},a=function(e){var r=e.criticalRateMultiplier,t=e.hitRateBonus,a=void 0===t?0:t,n=e.criticalRateBonus,o=void 0===n?0:n,s=i(e),u=Math.floor(s+1+a),c=Math.floor(Math.sqrt(s)*r+1+100*o),l=Math.min(u/100,1),p=Math.min(c/100,1);return{total:l,criticalRate:p,normalRate:l-p}},n=function(e){var r=Math.random();return r<e.criticalRate?"Critical":r<e.total?"Normal":"Miss"}},197:function(e,r,t){"use strict";t.d(r,"b",(function(){return i})),t.d(r,"a",(function(){return a}));var i=function(e,r){var t=e[0],i=e[1];return Math.floor((i-t)*r/99+t)},a=function(e,r){var t=e[0],i=e[1],a=t;return r>=100&&(a+=t>=91?9:t>=70?8:t>=50?7:t>=40?6:t>=30?5:t>=8?4:3),Math.min(a,i)}},22:function(e,r,t){"use strict";var i=t(66);t.d(r,"a",(function(){return i}))},225:function(e,r,t){"use strict";var i=t(515),a=t(3630),n=t(517),o=function(e){var r=e.name,t=e.antiAir,i=e.improvement;if(0===t)return 0;return(e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?.35:e.is("AntiAircraftShell")?.6:e.is("Radar")?.4:"46cm三連装砲"===r?.25:.2)*t+i.fleetAntiAirModifier},s=function(e){return Math.floor(e.totalEquipmentStats(o))},u=function(){function e(e,r,t){this.ships=e,this.side=r,this.formationModifier=t}return Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.ships,r=this.side,t=this.formationModifier,i=Object(n.a)(e,s),a=2*Math.floor(t*i);return"Player"===r?a/1.3:a},enumerable:!0,configurable:!0}),e}();r.a=u,u.getCombinedFleetModifier=function(e,r){return e===i.a.EscortFleet?.48:r===a.a.AirDefenseBattle?.72:.8},u.calcFleetAntiAir=function(e,r,t){var i=(0,e.totalShipStats)(s),a=2*Math.floor(t*i);return"Player"===r?a/1.3:a}},232:function(e,r,t){"use strict";t.d(r,"b",(function(){return n}));var i=t(493),a=t(49),n=function(e){var r=e.shipType,t=e.shipClass,i=e.isInstallation,a=e.hasGear;return r.isAircraftCarrierClass||(t.is("RevisedKazahayaClass")||i)&&(a("DiveBomber")||a("TorpedoBomber"))?"CarrierShelling":"Shelling"},o=function(){function e(e){var r=this;this.ship=e,this.getProficiencyModifiers=function(e){return void 0===e&&(e=!1),"Shelling"===r.type?{power:1,hitRate:0,criticalRate:0}:e?r.ship.getSpecialProficiencyModifiers():r.ship.getNormalProficiencyModifiers()},this.calcBasicPower=function(e){void 0===e&&(e=0);var t=r.ship;return 5+t.stats.firepower+t.totalEquipmentStats((function(e){return e.improvement.shellingPowerModifier}))+e},this.getCarrierShellingFm=function(e){void 0===e&&(e=!1);var t=r,i=t.ship;if("Shelling"!==t.type){var a=e?0:i.stats.torpedo,n=e?i.totalEquipmentStats((function(e){return e.is("AntiInstallationBomber")?e.bombing:0})):i.totalEquipmentStats("bombing"),o=Math.floor(Math.floor(1.3*n)+a)+15;return function(e){return 25+Math.floor(1.5*(e+o))}}},this.calcPower=function(e){var t=e.fleetFactor,i=e.formationModifier,n=e.engagementModifier,o=e.isCritical,s=e.isAntiInstallation,u=e.isArmorPiercing,c=e.specialAttack,l=r.calcBasicPower(t),p=r.ship,f=p.health.shellingPowerModifier,h=p.getCruiserFitBonus(),d=c?c.modifier.power:1,b=r.getProficiencyModifiers(null==c?void 0:c.isCarrierSpecialAttack).power,y={a14:i*n*f,b14:h,a11:d};e.modifiers&&(y=Object(a.a)(y,e.modifiers));var m=r.getCarrierShellingFm(s);return Object(a.b)({basic:l,cap:180,modifiers:y,fm14prev:m,fm11next:function(e){return u&&(e=r.apShellFm(e)),o&&(e=Object(a.c)(b)(e)),e}})},this.calcAccuracy=function(e){var t=r.accuracyShipFactors,i=t.shipAccuracy,a=t.equipmentAccuracy,n=t.improvementModifier,o=t.moraleModifier,s=e.fleetFactor,u=e.formationModifier,c=e.specialAttackModifier,l=e.isArmorPiercing,p=e.fitGunBonus,f=1;l&&(f=r.apShellModifiers.accuracy);var h=Math.floor(s+i+a+n);return Math.floor((h*u*o+p)*c*f)}}return Object.defineProperty(e.prototype,"type",{get:function(){return n(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellModifiers",{get:function(){var e=this.ship.hasGear;return Object(i.b)({hasMainGun:e("MainGun"),hasArmorPiercingShell:e("ArmorPiercingShell"),hasSecondaryGun:e("SecondaryGun"),hasRader:e("Radar")})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellFm",{get:function(){var e=this.apShellModifiers.power;return function(r){return Math.floor(r*e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracyShipFactors",{get:function(){var e=this.ship;return{shipAccuracy:e.shipAccuracy,equipmentAccuracy:e.totalEquipmentStats("accuracy"),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.shellingAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("shelling")}},enumerable:!0,configurable:!0}),e}();r.a=o},233:function(e,r,t){"use strict";t.d(r,"c",(function(){return s})),t.d(r,"d",(function(){return u})),t.d(r,"b",(function(){return c})),t.d(r,"a",(function(){return l}));var i=t(39),a=[{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Single,factors:[2,10]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Single,factors:[10,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Single,factors:[-5,10]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.Combined,factors:[5,5]},{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Combined,factors:[-5,-5]}],n=[{attackerFleetType:i.a.Single,defenderFleetType:i.a.CarrierTaskForce,factors:[10,5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.SurfaceTaskForce,factors:[5,-5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.TransportEscort,factors:[10,5]}],o=[{fleetType:i.a.CarrierTaskForce,factors:[78,43]},{fleetType:i.a.SurfaceTaskForce,factors:[70,46]},{fleetType:i.a.TransportEscort,factors:[51,46]}],s=function(e,r){if(!e.fleetType.isCombined&&!r.fleetType.isCombined)return 0;var t="Main"===e.role?0:1;if("Player"===e.side){var i=a.find((function(t){return t.attackerFleetType===e.fleetType&&t.defenderFleetType===r.fleetType}));return i?i.factors[t]:0}if(e.fleetType.isCombined)return[10,-5][t];var o=n.find((function(t){return t.attackerFleetType===e.fleetType&&t.defenderFleetType===r.fleetType}));return o?o.factors[t]:0},u=function(e,r){var t=function(t){return e.side===t?e.fleetType:r.fleetType},i=t("Player").isCombined,a=t("Enemy").isCombined;return i||a?i&&!a?0:15:5},c=function(e){var r,t=e.fleetType,i="Main"===e.role?0:1,a=null===(r=o.find((function(e){return e.fleetType===t})))||void 0===r?void 0:r.factors[i];return null!=a?a:90},l=function(e,r){var t=s(e,r),i=c(e);return{shelling:t,torpedo:u(e,r),shellingAccuracy:i}}},276:function(e,r,t){"use strict";var i=function(e){var r=e.antiAir,t=e.improvement;if(0===r)return 0;var i=0;return e.is("AntiAircraftGun")?i=6:e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?i=4:e.is("Radar")&&(i=3),i*r+t.adjustedAntiAirModifier},a=function(){function e(e,r,t,i,a){var n=this;void 0===i&&(i=1),this.ship=e,this.side=r,this.fleetAntiAir=t,this.combinedFleetModifier=i,this.antiAirCutin=a,this.calcProportionalShotdownRate=function(e){void 0===e&&(e=1);var r=n,t=r.adjustedAntiAir,i=r.combinedFleetModifier;return Math.floor(t*e)*i*.5*.25*.02},this.calcFixedShotdownNumber=function(e,r){void 0===e&&(e=1),void 0===r&&(r=1);var t=n,i=t.adjustedAntiAir,a=t.fleetAntiAir,o=t.side,s=t.antiAirCutin,u=t.combinedFleetModifier,c="Player"===o?.8:.75,l=.5*(Math.floor(i*e)+Math.floor(a*r))*.25*c*u;return s&&(l*=s.fixedAirDefenseModifier),Math.floor(l)},this.getShotdownNumber=function(e){var r=e.slotSize,t=e.adjustedAntiAirResistModifier,i=e.fleetAntiAirResistModifier,a=0;if(Math.random()>.5){var o=n.calcProportionalShotdownRate(t);a+=Math.floor(r*o)}if(Math.random()>.5){var s=n.calcFixedShotdownNumber(t,i);a+=Math.floor(s)}return a+=n.minimumBonus}}return Object.defineProperty(e.prototype,"adjustedAntiAir",{get:function(){return function(e,r){var t=e.stats,a=e.nakedStats,n=(0,e.totalEquipmentStats)(i);if("Enemy"===r)return Math.floor(2*Math.floor(Math.sqrt(t.antiAir))+n);var o=a.antiAir+n;return 0===e.countGear()?o:2*Math.floor(o/2)}(this.ship,this.side)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumBonus",{get:function(){var e=this.side,r=this.antiAirCutin;return r?r.minimumBonus:"Player"===e?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAirPropellantBarrageChance",{get:function(){var e,r=this.ship,t=this.adjustedAntiAir,i=r.shipType;if(!(e=i).isAircraftCarrierClass&&!e.any("AviationCruiser","AviationBattleship","SeaplaneTender"))return 0;var a=r.countGear(274);if(!a)return 0;var n=r.shipClass.is("IseClass")?.25:0;return(t+.9*r.stats.luck)/281+.15*(a-1)+n},enumerable:!0,configurable:!0}),e}();r.a=a},277:function(e,r,t){"use strict";var i=t(344),a=t(3623),n=t(515),o=t(225),s=function(){return(s=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},u=function(){function e(e,r,t,a,n){this.side=e,this.fleetType=r,this.landBase=t,this.mainFleet=a,this.escortFleet=n,this.formation=i.a.LineAhead,this.name="",this.isCombinedFleet&&(this.formation=i.a.CruisingFormation4)}return Object.defineProperty(e.prototype,"allShips",{get:function(){var e=this.mainFleet,r=this.escortFleet,t=e.nonNullableShips.concat();return r?t.concat(r.nonNullableShips):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.allShips,r=this.side,t=this.formation;return new o.a(e,r,t.fleetAntiAirModifier).fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleet",{get:function(){return this.fleetType!==a.a.Single},enumerable:!0,configurable:!0}),e.prototype.getShipInformation=function(e){var r=this,t=r.mainFleet,i=r.escortFleet,a={side:r.side,fleetType:r.fleetType,fleetAntiAir:r.fleetAntiAir,formation:r.formation};return t.nonNullableShips.find((function(r){return r===e}))?s(s({},a),{fleetRole:n.a.MainFleet}):i&&i.nonNullableShips.find((function(r){return r===e}))?s(s({},a),{fleetRole:n.a.EscortFleet}):void 0},e}();r.a=u},278:function(e,r,t){"use strict";var i=function(){function e(e,r,t){this.player=e,this.enemy=r,this.battleType=t}return e.prototype.getShipInformation=function(e){var r=this.player,t=this.enemy,i=r.getShipInformation(e);if(i)return i;var a=t.getShipInformation(e);if(a)return a;throw console.error("ship info is not found")},e}();r.a=i},289:function(e,r,t){"use strict";t.d(r,"a",(function(){return a}));var i=t(49),a={createPower:function(e){var r=e.nakedAsw,t=e.equipmentAsw,a=e.improvementModifier,n=e.typeConstant,o=e.formationModifier,s=e.engagementModifier,u=e.healthModifier,c=e.synergyModifier,l=e.optionalModifiers,p=e.fm11next,f=2*Math.sqrt(r)+1.5*t+a+n,h=o*s*u*c,d=l?Object(i.a)(l,{a14:h}):{a14:h};return Object(i.b)({basic:f,cap:150,modifiers:d,fm11next:p})},calcAccuracy:function(e){return(80+e.shipAccuracy+e.aswEquipmentModifier+e.improvementModifier)*e.formationModifier*e.moraleModifier}}},3044:function(e,r,t){"use strict";var i=t(148);t.d(r,"a",(function(){return i}))},3045:function(e,r,t){"use strict";var i,a=t(322),n=t(514),o=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),s=function(e){function r(r){var t=e.call(this,r)||this,i=t.combatInformation,a=i.player,n=i.enemy;return a.isCombinedFleet&&n.isCombinedFleet?(t.playerAntiAirDefenseShips=a.allShips,t.enemyAntiAirDefenseShips=n.allShips):(t.playerAntiAirDefenseShips=a.mainFleet.nonNullableShips,t.enemyAntiAirDefenseShips=n.mainFleet.nonNullableShips),t}return o(r,e),r.prototype.main=function(){var e=this.playerAntiAirDefenseShips,r=this.enemyAntiAirDefenseShips,t=this.combatInformation,i=e.flatMap((function(e){return e.planes})),a=r.flatMap((function(e){return e.planes})),o=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")},s=i.filter(o),u=a.filter(o),c=this.fighterCombat(s,u),l=t.player,p=(t.enemy,s.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}))),f=u.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}));return this.antiAirDefense(e,f,n.a.try(l.allShips)),this.antiAirDefense(r,p,n.a.try(l.allShips)),{airControlState:c}},r}(a.a);r.a=s},3046:function(e,r,t){"use strict";var i,a=t(3632),n=t(345),o=t(322),s=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),u=function(e){function r(r,t){var i=e.call(this,r)||this;return i.landBasedAirCorps=t,i}return s(r,e),r.prototype.main=function(){var e=this,r=this.combatInformation.enemy,t=this.landBasedAirCorps,i=t.fighterPower,o=t.planes,s=Object(a.a)(r.allShips,(function(e){return e.planes})),u=s.reduce((function(e,r){return e+r.fighterPower}),0),c=n.a.fromFighterPower(i,u),l=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")||e.is("ReconnaissanceAircraft")},p=o.filter(l),f=s.filter(l);p.forEach((function(r){return e.shotdownInFighterCombat(r,c.constant,"Player")})),f.forEach((function(r){return e.shotdownInFighterCombat(r,c.constant,"Enemy")}));var h=p.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}));return this.antiAirDefense(r.allShips,h),{airControlState:c}},r}(o.a);r.a=u},3098:function(e,r,t){"use strict";t.d(r,"a",(function(){return c}));var i=t(49),a=t(232),n=t(510),o=t(511),s=t(512),u=t(513),c=function(e){var r=e.ship,t=e.target,c=e.fleetFactors,l=e.formation,p=e.role,f=e.engagement,h=e.isArmorPiercing,d=e.nightContactModifier,b=e.optionalPowerModifiers,y=l.getModifiers(p),m=f.modifier,g=t.isInstallation,v=r.getSpecialEnemyModifiers(t),S=new a.a(r),A=new n.a(r),C=o.a.fromShip(r),w=s.a.fromShip(r,"Day"),M=new u.a(r);return{calcShellingPower:function(e,r){var t=Object(i.a)(v,b);return S.calcPower({fleetFactor:c.shelling,formationModifier:y.shelling.power,engagementModifier:m,modifiers:t,isCritical:e,isAntiInstallation:g,isArmorPiercing:h,specialAttack:r})},calcShellingSupportPower:function(e){var r=l.shellingSupportModifiers.power;return A.calcPower({formationModifier:r,engagementModifier:m,isCritical:e,isAntiInstallation:g})},calcTorpedoPower:function(e){return C.calcPower({fleetFactor:c.torpedo,formationModifier:y.torpedo.power,engagementModifier:m,isCritical:e,optionalModifiers:b})},calcAswPower:function(e){return w.calcPower({formationModifier:y.asw.power,engagementModifier:m,isCritical:e,optionalModifiers:b})},calcNightPower:function(e,r){var t=Object(i.a)(v,b);return M.calcPower({formationModifier:y.night.power,nightContactModifier:d,specialAttack:r,modifiers:t,isCritical:e,isAntiInstallation:g})},canDoTorpedoAttack:r.nakedStats.torpedo>0,canDoAsw:"None"!==w.type}}},3136:function(e,r,t){"use strict";var i=t(517),a=function(e){var r=this;this.planes=e,this.calcRate=function(e){var t,a,n=r.planes,o=e.contactMultiplier,s=function(e,r){return 0===r?0:Math.min((e+1)/(70-15*r),1)}(Object(i.a)(n.filter((function(e){return e.is("ReconnaissanceAircraft")})),(function(e){return e.contactTriggerFactor})),o),u=((t={})[1.2]=0,t[1.17]=0,t[1.12]=0,t),c=s*n.filter((function(e){return e.canContact})).sort((function(e,r){return r.gear.accuracy-e.gear.accuracy})).reduce((function(r,t){var i=(1-r)*t.contactSelectionRate(e),a=t.gear.accuracy;return a>=3?u[1.2]+=i:2===a?u[1.17]+=i:u[1.12]+=i,r+i}),0),l=((a={})[1.2]=u[1.2]*s,a[1.17]=u[1.17]*s,a[1.12]=u[1.12]*s,a);return{successRate:c,triggerRate:s,selectionRateMap:u,rateMap:l,airControlState:e}},this.getContactModifier=function(e){if(0===e.contactMultiplier)return 1;var t=r.calcRate(e).rateMap,i=Math.random();return i<t[1.2]?1.2:i<t[1.2]+t[1.17]?1.17:i<t[1.2]+t[1.17]+t[1.12]?1.12:1}};r.a=a},3152:function(e,r,t){"use strict";t.d(r,"b",(function(){return w}));var i=t(37),a=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.includes(r.gearId)}},n=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.map(i.b.keyToId).includes(r.categoryId)}},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.every((function(e){return e(r)}))}},s=n("SmallCaliberMainGun","MediumCaliberMainGun","LargeCaliberMainGun","LargeCaliberMainGun2"),u=n("SmallRadar","LargeRadar","LargeRadar2"),c=o(u,(function(e){return e.los>=5})),l=o(u,(function(e){return e.antiAir>=2})),p=n("ExtraArmor","MediumExtraArmor","LargeExtraArmor"),f=n("CarrierBasedFighterAircraft","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2"),h=n("ReconnaissanceSeaplane","SeaplaneBomber","SeaplaneFighter","LargeFlyingBoat"),d=n("LandBasedAttackAircraft","LandBasedFighter","LandBasedReconnaissanceAircraft"),b=n("JetPoweredFighter","JetPoweredFighterBomber","JetPoweredTorpedoBomber","JetPoweredReconnaissanceAircraft"),y=n("CarrierBasedFighterAircraft","SeaplaneFighter","LandBasedFighter","JetPoweredFighter"),m=n("CarrierBasedDiveBomber","SeaplaneBomber","JetPoweredFighterBomber"),g=n("CarrierBasedTorpedoBomber","JetPoweredTorpedoBomber","LandBasedAttackAircraft"),v=n("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane","LargeFlyingBoat","JetPoweredReconnaissanceAircraft","LandBasedReconnaissanceAircraft"),S={Abyssal:function(e){return e.gearId>500},HighAngleMount:function(e){return 16===e.iconId},MainGun:s,Radar:u,SurfaceRadar:c,AirRadar:l,Armor:p,CarrierBasedAircraft:f,Seaplane:h,LandBasedAircraft:d,JetPoweredAircraft:b,Fighter:y,DiveBomber:m,TorpedoBomber:g,ReconnaissanceAircraft:v,FighterBomber:o(n("CarrierBasedDiveBomber"),(function(e){return e.antiAir>=4})),Aircraft:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.some((function(e){return e(r)}))}}(y,m,g,v,n("Autogyro","AntiSubmarinePatrolAircraft")),AntiInstallationBomber:a(60,64,305,306,148,233,277,319),AswGear:n("Sonar","DepthCharge","LargeSonar","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft"),AswAircraft:o((function(e){return e.asw>0}),n("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft","LargeFlyingBoat")),DepthChargeProjector:a(44,45),AdditionalDepthCharge:a(226,227),AntiGroundRocketLauncher:a(348,349),Mortar:a(346,347)},A=Object.keys(S),C={from:function(e){var r=function(e){return A.filter((function(r){return S[r](e)}))}(e),t=i.b.numberToKey(e.categoryId);return t&&r.push(t),r}},w=["armor","firepower","torpedo","speed","bombing","antiAir","asw","los","accuracy","evasion","interception","antiBomber","range","radius"],M=function(){function e(e,r,t){var a=this;this.category=r,this.improvable=t,this.radius=0,this.is=function(e){return a.attrs.includes(e)},this.id=e.api_id,this.name=e.api_name,this.categoryId=r.id,this.iconId=e.api_type[3],this.hp=e.api_taik,this.armor=e.api_souk,this.firepower=e.api_houg,this.torpedo=e.api_raig,this.speed=e.api_soku,this.bombing=e.api_baku,this.antiAir=e.api_tyku,this.asw=e.api_tais,this.los=e.api_saku,this.luck=e.api_luck,this.range=e.api_leng;var n=e.api_houm,o=e.api_houk;this.accuracy=0,this.evasion=0,this.antiBomber=0,this.interception=0,this.categoryId===i.a.LandBasedFighter?(this.antiBomber=n,this.interception=o):(this.accuracy=n,this.evasion=o),e.api_distance&&(this.radius=e.api_distance),this.attrs=C.from(this)}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}();r.a=M},322:function(e,r,t){"use strict";var i=t(3159),a=t(345),n=t(276),o=t(225),s=function(){function e(e){var r=this;this.combatInformation=e,this.shotdownInFighterCombat=function(e,r,t){var i;if("Player"===t){var a=r/4,n=Math.floor(r/3*100);i=Math.floor(Math.random()*(n+1))/100+a}else{n=11-r;i=.35*Math.floor(Math.random()*(n+1))+.65*Math.floor(Math.random()*(n+1))}var o=i/10,s=Math.floor(e.slotSize*o);e.is("JetPoweredAircraft")?e.shotdown(.6*s):e.shotdown(s)},this.shipAntiAirDefense=function(e,t,i){var a=r.combatInformation.battleType,s=r.combatInformation.getShipInformation(e),u=s.side,c=s.fleetRole,l=s.fleetAntiAir,p=o.a.getCombinedFleetModifier(c,a),f=new n.a(e,u,l,p,i).getShotdownNumber(t);t.shotdown(f)}}return e.prototype.fighterCombat=function(e,r){var t=this,i=e.reduce((function(e,r){return e+r.fighterPower}),0),n=r.reduce((function(e,r){return e+r.fighterPower}),0),o=a.a.fromFighterPower(i,n);return e.forEach((function(e){return t.shotdownInFighterCombat(e,o.constant,"Player")})),r.forEach((function(e){return t.shotdownInFighterCombat(e,o.constant,"Enemy")})),o},e.prototype.antiAirDefense=function(e,r,t){for(var a=0,n=r;a<n.length;a++){var o=n[a],s=e[Object(i.a)(e.length-1)];this.shipAntiAirDefense(s,o,t)}},e}();r.a=s},344:function(e,r,t){"use strict";var i=function(){return(i=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},a=function(){function e(r,t,a){var n=this;this.id=r,this.name=t,this.modifiers=a,this.getModifiers=function(r){return n!==e.Vanguard?n.modifiers:i(i({},n.modifiers),"Main"===r?{shelling:{power:.5,accuracy:.8,evasion:1},torpedo:{power:1,accuracy:.75,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:.5,accuracy:1,evasion:1}}:{shelling:{power:1,accuracy:1.2,evasion:1},torpedo:{power:1,accuracy:.95,evasion:1},asw:{power:.6,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}})},e.values.push(this)}return Object.defineProperty(e,"singleFleetFormations",{get:function(){return e.values.filter((function(e){return e.id<=10}))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"combinedFleetFormations",{get:function(){return e.values.filter((function(e){return e.id>10}))},enumerable:!0,configurable:!0}),e.fromId=function(r){return e.values.find((function(e){return e.id===r}))},Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){return this.modifiers.fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleetFormation",{get:function(){return this.id>10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingSupportModifiers",{get:function(){return this===e.Vanguard?{power:.5,accuracy:.8}:this.isCombinedFleetFormation?{power:1,accuracy:1}:this.getModifiers("Main").shelling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protectionRate",{get:function(){return this===e.LineAhead?.45:this===e.Diamond?.75:.6},enumerable:!0,configurable:!0}),e}();r.a=a,a.keys=["LineAhead","DoubleLine","Diamond","Echelon","LineAbreast","Vanguard","CruisingFormation1","CruisingFormation2","CruisingFormation3","CruisingFormation4"].concat(),a.values=[],a.LineAhead=new a(1,"単縦陣",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),a.DoubleLine=new a(2,"複縦陣",{fleetAntiAir:1.2,shelling:{power:.8,accuracy:1.2,evasion:1},torpedo:{power:.8,accuracy:.8,evasion:1},asw:{power:.8,accuracy:1.2,evasion:1},night:{power:1,accuracy:.9,evasion:1}}),a.Diamond=new a(3,"輪形陣",{fleetAntiAir:1.6,shelling:{power:.7,accuracy:1,evasion:1.1},torpedo:{power:.7,accuracy:.4,evasion:1.1},asw:{power:1.2,accuracy:1,evasion:1},night:{power:1,accuracy:.7,evasion:1}}),a.Echelon=new a(4,"梯形陣",{fleetAntiAir:1,shelling:{power:.75,accuracy:1.2,evasion:1.2},torpedo:{power:.6,accuracy:.6,evasion:1.3},asw:{power:1.1,accuracy:1.2,evasion:1.3},night:{power:1,accuracy:.9,evasion:1.2}}),a.LineAbreast=new a(5,"単横陣",{fleetAntiAir:1,shelling:{power:.6,accuracy:1.2,evasion:1.3},torpedo:{power:.6,accuracy:.3,evasion:1.4},asw:{power:1.3,accuracy:1.2,evasion:1.1},night:{power:1,accuracy:.8,evasion:1.2}}),a.Vanguard=new a(6,"警戒陣",{fleetAntiAir:1.1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation1=new a(11,"第一警戒航行序列",{fleetAntiAir:1.1,shelling:{power:.8,accuracy:1,evasion:1},torpedo:{power:.7,accuracy:1,evasion:1},asw:{power:1.3,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation2=new a(12,"第二警戒航行序列",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:.9,accuracy:1,evasion:1},asw:{power:1.1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation3=new a(13,"第三警戒航行序列",{fleetAntiAir:1.5,shelling:{power:.7,accuracy:1,evasion:1},torpedo:{power:.6,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation4=new a(14,"第四警戒航行序列",{fleetAntiAir:1,shelling:{power:1.1,accuracy:1.1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.7,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),a.isIneffective=function(e,r){return[[a.DoubleLine,a.LineAbreast],[a.LineAbreast,a.Echelon],[a.Echelon,a.LineAhead]].some((function(t){return t[0]===e&&t[1]===r}))}},345:function(e,r,t){"use strict";var i=function(){function e(r,t,i){this.id=r,this.name=t,this.constant=i,e.values.push(this)}return e.fromFighterPower=function(r,t){var i=e.getBoundaryValues(t);return r>=i.AirSupremacy?e.AirSupremacy:r>=i.AirSuperiority?e.AirSuperiority:r>=i.AirParity?e.AirParity:r>=i.AirDenial?e.AirDenial:e.AirIncapability},e.fromId=function(r){return e.values.find((function(e){return e.id===r}))},Object.defineProperty(e.prototype,"contactMultiplier",{get:function(){switch(this){case e.AirSupremacy:return 3;case e.AirSuperiority:return 2;case e.AirDenial:return 1;default:return 0}},enumerable:!0,configurable:!0}),e}();r.a=i,i.values=[],i.AirSupremacy=new i(1,"制空権確保",1),i.AirSuperiority=new i(2,"航空優勢",3),i.AirParity=new i(0,"制空均衡",5),i.AirDenial=new i(3,"航空劣勢",7),i.AirIncapability=new i(4,"制空権喪失",10),i.getBoundaryValues=function(e){return{AirSupremacy:Math.ceil(3*e),AirSuperiority:Math.ceil(1.5*e),AirParity:Math.floor(2/3*e)+1,AirDenial:Math.floor(1/3*e)+1}}},3619:function(e,r,t){"use strict";var i=t(3745),a=t(559),n=t(284),o=t.n(n),s=function(){function e(e,r,t,i,n){var s=this;this.stats=e,this.category=r,this.improvement=t,this.proficiency=i,this.attrs=n,this.is=function(e){return s.attrs.includes(e)},this.match=function(e){return"number"==typeof e?s.gearId===e:o()(e)(s)},this.toState=function(){return{gearId:s.gearId,star:s.star,exp:s.exp}},this.calcFighterPower=function(e,r){void 0===r&&(r=!1);var t=s,i=t.antiAir,n=t.interception,o=t.antiBomber,u=t.improvement,c=t.proficiency,l=u.fighterPowerModifier,p=c.fighterPowerBonus;return Object(a.a)({slotSize:e,antiAir:i,interception:n,antiBomber:o,improvementModifier:l,proficiencyModifier:p,isInterception:r})}}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.stats.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.stats.categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.stats.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.stats.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvable",{get:function(){return this.stats.improvable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.stats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.stats.armor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.stats.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.stats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.stats.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.stats.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.stats.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.stats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.stats.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return this.stats.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.stats.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiBomber",{get:function(){return this.stats.antiBomber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interception",{get:function(){return this.stats.interception},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stats.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.improvement.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this.proficiency.internal},enumerable:!0,configurable:!0}),e}(),u=t(37),c=function(){function e(e,r,t){void 0===e&&(e=0),this.value=e,this.stats=r,this.gearIs=t}return Object.defineProperty(e.prototype,"star",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactSelectionModifier",{get:function(){var e=this.value,r=this.gearIs;if(!r("ReconnaissanceAircraft"))return 0;var t=this.stats.los;if(r("CarrierBasedReconnaissanceAircraft")||r("CarrierBasedReconnaissanceAircraft2")){if(7===t)return.25*e;if(11===t)return.4*e}else{if(6===t)return.2*e;if(t>=4)return.14*e;if(3===t)return.1*e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerModifier",{get:function(){var e=this.star,r=this.gearIs;return r("Fighter")?.2*e:r("FighterBomber")?.25*e:r("LandBasedAttackAircraft")?.5*Math.sqrt(e):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirModifier",{get:function(){var e=this.gearIs,r=this.stats.antiAir;if(0===r)return 0;var t=0;return e("AntiAircraftGun")?t=r<=7?4:6:(e("AntiAircraftFireDirector")||e("HighAngleMount"))&&(t=r<=7?2:3),t*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){var e=this.gearIs,r=this.stats.antiAir;if(0===r)return 0;var t=0;return e("AntiAircraftFireDirector")||e("HighAngleMount")?t=r<=7?2:3:e("AirRadar")&&(t=1.5),t*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){var e=this.stats,r=e.firepower,t=e.gearId,i=this.gearIs;return r>12?1.5*Math.sqrt(this.value):i("CarrierBasedTorpedoBomber")||[10,66,220,275].includes(t)?.2*this.value:[12,234,247].includes(t)?.3*this.value:i("MainGun")||i("SecondaryGun")||i("ArmorPiercingShell")||i("AntiAircraftFireDirector")||i("Searchlight")||i("AntiAircraftGun")||i("LandingCraft")||i("SpecialAmphibiousTank")||i("AntiAircraftShell")||i("AntiGroundEquipment")?Math.sqrt(this.value):i("Sonar")||i("LargeSonar")||i("DepthChargeProjector")||i("Mortar")?.75*Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){var e=this.gearIs;return e("SurfaceRadar")?1.7*Math.sqrt(this.value):e("Radar")||e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftFireDirector")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){var e=this.gearIs,r=this.stats,t=this.star;return e("CarrierBasedTorpedoBomber")?.2*t:e("DepthCharge")||e("Sonar")?Math.sqrt(t):e("Autogyro")?(r.asw>10?.3:.2)*t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case u.a.Sonar:case u.a.LargeSonar:case u.a.DepthCharge:return 1.3*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case u.a.Torpedo:case u.a.AntiAircraftGun:return 1.2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case u.a.Torpedo:case u.a.MidgetSubmarine:return 2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoEvasionModifier",{get:function(){var e=this.star,r=this.gearIs;return r("Sonar")||r("LargeSonar")?1.5*Math.sqrt(e):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){var e=this.gearIs,r=this.stats.gearId;return[10,66,220,275].includes(r)?.2*this.value:[12,234,247].includes(r)?.3*this.value:e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftShell")||e("Searchlight")||e("AntiAircraftFireDirector")||e("LandingCraft")||e("SpecialAmphibiousTank")||e("AntiGroundEquipment")||e("Torpedo")||e("MidgetSubmarine")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackAccuracyModifier",{get:function(){var e=this.gearIs,r=this.value;return e("SurfaceRadar")?1.6*Math.sqrt(r):e("MediumCaliberMainGun")||e("Radar")?1.3*Math.sqrt(r):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectiveLosModifier",{get:function(){var e=this.gearIs,r=this.value;return e("SmallRadar")?1.25*Math.sqrt(r):e("LargeRadar")||e("LargeRadar2")?1.4*Math.sqrt(r):e("CarrierBasedReconnaissanceAircraft")||e("CarrierBasedReconnaissanceAircraft2")||e("ReconnaissanceSeaplane")?1.2*Math.sqrt(r):e("SeaplaneBomber")?1.15*Math.sqrt(r):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePowerModifier",{get:function(){var e=this.gearIs;return e("MediumExtraArmor")?.2*this.value:e("LargeExtraArmor")?.3*this.value:0},enumerable:!0,configurable:!0}),e}(),l=t(497),p=function(e){var r=this;this.masters=e,this.create=function(e){if(e){var t=r.masters.find((function(r){return r.id===e.masterId}));if(t){var i=l.a.from(t.attrs),a=new c(e.improvement,t,t.is),n=new l.b(e.proficiency,i);return new s(t,t.category,a,n,t.attrs)}}}},f=t(517),h=t(3632),d=function(e){var r=e.los,t=e.improvement,i=.6;return e.is("CarrierBasedTorpedoBomber")?i=.8:e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?i=1:e.is("ReconnaissanceSeaplane")?i=1.2:e.is("SeaplaneBomber")&&(i=1.1),i*(r+t.effectiveLosModifier)},b=function(e,r){var t=e.totalEquipmentStats,i=e.nakedStats,a=e.stats,n=t(d),o=a.getBonus("effectiveLos");return Math.sqrt(i.los+o)+n*r-2},y=function(e,r,t){return e.totalShipStats((function(e){return b(e,r)}))-Math.ceil(.4*t)+12},m=t(41),g=t(92),v=function(e){return[68,166,193,167].includes(e.gearId)},S=function(e){switch(e.gearId){case 68:return.05;case 193:return.075;case 166:return.02;case 167:return.01}return 0},A=function(e){if(e.category.is("LandingCraft"))return 8;if(e.category.is("CombatRation"))return 1;switch(e.gearId){case 75:return 5;case 167:return 2}return 0},C=function(e){return e.totalEquipmentStats(A)+function(e){switch(e){case g.a.SubmarineAircraftCarrier:return 1;case g.a.Destroyer:return 5;case g.a.LightCruiser:return 2;case g.a.AviationCruiser:return 4;case g.a.AviationBattleship:return 7;case g.a.FleetOiler:case g.a.AmphibiousAssaultShip:return 12;case g.a.SeaplaneTender:return 9;case g.a.SubmarineTender:return 7;case g.a.TrainingCruiser:return 6}return 0}(e.shipTypeId)+(487===e.shipId?8:0)},w=function(){function e(e){var r=this;this.ships=e,this.totalShipStats=function(e){return Object(f.a)(r.nonNullableShips,e)},this.effectiveLos=function(e,t){return y(r,e,t)}}return Object.defineProperty(e.prototype,"nonNullableShips",{get:function(){return this.ships.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planes",{get:function(){return Object(h.a)(this.nonNullableShips,(function(e){return e.planes}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnknownSlot",{get:function(){return this.nonNullableShips.flatMap((function(e){return e.slots})).some((function(e){return e<0}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(f.a)(this.planes.filter((function(e){return!e.is("ReconnaissanceAircraft")})),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tp",{get:function(){return Object(f.a)(this.nonNullableShips,C)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expeditionBonus",{get:function(){return e=this.nonNullableShips,r=e.flatMap((function(e){return e.gears})).filter(m.b),t=r.filter(v),i=e.some((function(e){return 487===e.shipId}))?.05:0,(a=Math.min(Object(f.a)(r,S)+i,.2))+.01*a*(t.length&&Object(f.a)(t,(function(e){return e.star}))/t.length)+function(e){var r,t,i=e.filter((function(e){return 68===e.gearId})).length,a=e.filter((function(e){return 193===e.gearId})).length;return a<=2?.02*a:3===a?null!==(r=[.05,.05,.052,.054,.054][i])&&void 0!==r?r:.054:null!==(t=[.054,.056,.058,.059,.06][i])&&void 0!==t?t:.06}(r);var e,r,t,i,a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aviationDetectionScore",{get:function(){return Object(f.a)(this.planes,(function(e){return e.is("LargeFlyingBoat")?e.gear.los*Math.sqrt(e.slotSize):e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")?e.gear.los*Math.sqrt(Math.sqrt(e.slotSize)):0}))},enumerable:!0,configurable:!0}),e}(),M=function(e){var r=this;this.shipFactory=e,this.create=function(e){var t=e.ships.map(r.shipFactory.create);return new w(t)}},I=function(){function e(e,r,t){var i=this;this.gear=e,this.slots=r,this.index=t,this.contactSelectionRate=function(e){var r=i.gear,t=r.los,a=r.improvement;return Math.ceil(t+a.contactSelectionModifier)/(20-2*e.contactMultiplier)},this.calcNightAerialAttackPower=function(e){void 0===e&&(e=!1);var r=i,t=r.isNightPlane,a=r.isNightAircraft,n=r.gear,o=r.slotSize;if(!a)return 0;var s=n.firepower,u=n.torpedo,c=n.asw,l=n.bombing,p=0,f=.3;t&&(p=3,f=.45);var h=Math.sqrt(n.improvement.value);return s+(e?0:u)+l+p*o+f*(s+u+c+l)*Math.sqrt(o)+h},this.shotdown=function(e){i.slotSize-=e,i.slotSize<0&&(i.slotSize=0)}}return Object.defineProperty(e.prototype,"is",{get:function(){return this.gear.is},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.gear.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.slots[this.index]},set:function(e){this.slots[this.index]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){var e=this.gear,r=this.slotSize;return e.calcFighterPower(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){var e=this.gear,r=this.slotSize;return e.calcFighterPower(r,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canContact",{get:function(){return this.is("CarrierBasedTorpedoBomber")||this.is("ReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactTriggerFactor",{get:function(){var e=this.gear,r=this.slotSize;return Math.floor(e.los*Math.sqrt(r))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInAirstrike",{get:function(){return 0!==this.slotSize&&(this.is("DiveBomber")||this.is("TorpedoBomber"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInCarrierShelling",{get:function(){var e=this.category;return 0!==this.slotSize&&e.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","JetPoweredFighterBomber","JetPoweredTorpedoBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosModifier",{get:function(){var e=this.gear,r=this.slotSize;return this.is("ReconnaissanceSeaplane")||this.is("SeaplaneBomber")?e.los*Math.floor(Math.sqrt(r)):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwordfish",{get:function(){return this.gear.name.includes("Swordfish")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightFighter",{get:function(){return 45===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAttacker",{get:function(){return 46===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightPlane",{get:function(){return this.isNightFighter||this.isNightAttacker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAircraft",{get:function(){var e=this.isNightPlane,r=this.isSwordfish,t=this.gear;return e||r||[154,320].includes(t.gearId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterCombatResistModifier",{get:function(){return this.is("JetPoweredAircraft")?.6:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirResistModifier",{get:function(){var e=this.gear.gearId;return[93,94,143,144,99,100,154,319,320,79,80,81,237,170].includes(e)?.6:[322,323,199,200].includes(e)?.5:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirResistModifier",{get:function(){var e=this.gear.gearId;return[100,154,81,237,322,199].includes(e)?.7:[323,200].includes(e)?.5:1},enumerable:!0,configurable:!0}),e}(),P=function(e,r){var t=new Array;return e.map((function(i,a){var n=r[a];i&&n&&n.is("Aircraft")&&t.push(new I(n,e,a))})),t},O=function(e){var r=e.los;return e.is("LandBasedReconnaissanceAircraft")?r<=7?1.12:8===r?1.15:1.18:1},j=function(e){var r=e.los;return e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?r<=7?1.2:8===r?1.25:1.3:e.is("LandBasedReconnaissanceAircraft")?1.18:e.is("ReconnaissanceSeaplane")||e.is("LargeFlyingBoat")?r<=7?1.1:8===r?1.13:1.16:1},k=function(){function e(e,r){this.slots=e,this.gears=r,this.planes=P(e,r)}return Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlanes",{get:function(){return this.nonNullableGears.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(f.a)(this.planes,(function(e){return e.fighterPower})),r=Math.max.apply(Math,this.nonNullableGears.map(O));return Math.floor(e*r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(f.a)(this.planes,(function(e){return e.interceptionPower})),r=Math.max.apply(Math,this.nonNullableGears.map(j));return Math.floor(e*r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCombatRadius",{get:function(){return this.hasPlanes?Math.min.apply(Math,this.nonNullableGears.map((function(e){return e.radius}))):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combatRadius",{get:function(){if(!this.hasPlanes)return 0;var e=this.minCombatRadius,r=this.nonNullableGears,t=Math.max.apply(Math,r.map((function(e){return e.is("ReconnaissanceAircraft")?e.radius:0})));if(t>0){var i=Math.min(Math.sqrt(t-e),3);return Math.round(e+i)}return e},enumerable:!0,configurable:!0}),e}(),F=function(e){var r=this;this.gearFactory=e,this.create=function(e){var t=e.equipments,i=e.slots.concat(),a=t.map(r.gearFactory.create);return new k(i,a)}},B=t(3623),G=function(){function e(e,r,t,i){var a=this;this.side=e,this.fleetType=r,this.fleets=t,this.landBase=i,this.getFighterPower=function(e){void 0===e&&(e=!1);var r=a,t=r.mainFleet,i=r.escortFleet;if(!t.hasUnknownSlot){if(!e||!i)return t.fighterPower;if(!i.hasUnknownSlot)return t.fighterPower+i.fighterPower}},this.getInterceptionPower=function(e){void 0===e&&(e=!1);var r=a,t=r.mainFleet,i=r.escortFleet;if(!t.hasUnknownSlot){var n=Object(f.a)(t.planes,(function(e){return e.interceptionPower}));if(!e||!i)return n;if(!i.hasUnknownSlot)return n+Object(f.a)(i.planes,(function(e){return e.interceptionPower}))}}}return Object.defineProperty(e.prototype,"isCombinedFleetOperation",{get:function(){return this.fleetType!==B.a.Single},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFleet",{get:function(){return this.fleets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escortFleet",{get:function(){if(this.isCombinedFleetOperation)return this.fleets[1]},enumerable:!0,configurable:!0}),e}(),T=function(){function e(e,r){this.fleetFactory=e,this.landBasedAirCorpsFactory=r}return e.prototype.create=function(e){var r=e.side,t=e.fleetType,i=e.fleets,a=e.landBase,n=i.map(this.fleetFactory.create),o=a.map(this.landBasedAirCorpsFactory.create);return new G(r,t,n,o)},e}(),R=t(3153),D=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.map((function(e){return R.a[e]})).includes(r.shipClassId)}},L=D("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass"),N=D("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass","NorthamptonClass","AtlantaClass"),$=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.some((function(e){return e(r)}))}}((function(e){return 147===e.shipId}),D("TashkentClass","GangutClass")),q=D("AirfieldPrincess","NorthernPrincess","HarbourPrincess","SupplyDepotPrincess","SupplyDepotSummerPrincess"),K=D("ArtilleryImp"),E=D("IsolatedIslandDemon","IsolatedIslandPrincess"),x={RoyalNavy:L,UsNavy:N,SovietNavy:$,Installation:function(e){return 0===e.speed},SoftSkinned:q,Pillbox:K,SupplyDepot:D("SupplyDepotPrincess","SupplyDepotSummerPrincess"),IsolatedIsland:E,Unremodeled:function(e){return e.sortId%10==1},Kai:function(e){return e.name.endsWith("改")},Kai2:function(e){return e.sortId%10>=6&&e.sortId%10<9}},z=Object.keys(x),H={from:function(e){return z.filter((function(r){return x[r](e)}))}},_=function(){function e(e,r){var t=this;this.maxHp=e,this.currentHp=r,this.gte=function(e){var r=t.currentHp/t.maxHp;switch(e){case"Less":return r>=1;case"Shouha":return r>=.75;case"Chuuha":return r>=.5;case"Taiha":return r>=.25}return!0},this.lte=function(e){return e===t.damage||!t.gte(e)}}return Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.currentHp/this.maxHp;return e<=0?"Sunk":e<=.25?"Taiha":e<=.5?"Chuuha":e<=.75?"Shouha":"Less"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.7;case"Taiha":return.4}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.8}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){return this.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){return this.lte("Taiha")?0:this.shellingPowerModifier},enumerable:!0,configurable:!0}),e}(),V={Sparkling:1.2,Normal:1,Orange:.8,Red:.5},J={accuracy:{shelling:V,asw:V,torpedo:{Sparkling:1.3,Normal:1,Orange:.7,Red:.35},night:V},evasion:{Sparkling:.7,Normal:1,Orange:1.2,Red:1.4}},Y=function(){function e(e){var r=this;void 0===e&&(e=49),this.value=e,this.getAccuracyModifier=function(e){return J.accuracy[e][r.state]}}return Object.defineProperty(e.prototype,"state",{get:function(){var e=this.value;return e>=50?"Sparkling":e>=30?"Normal":e>=20?"Orange":"Red"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasionModifier",{get:function(){return J.evasion[this.state]},enumerable:!0,configurable:!0}),e}(),U=t(3674),Z=t(3157),Q=t(3159),W=t(493),X=t(561),ee=t(49),re=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),a=0;for(r=0;r<t;r++)for(var n=arguments[r],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},te={attrs:"Installation"},ie={attrs:"Pillbox"},ae={attrs:"IsolatedIsland"},ne={attrs:"SoftSkinned"},oe={shipClassId:R.a.HarbourSummerPrincess},se={attrs:"SupplyDepot"},ue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{$or:re(e)}},ce=[{gear:{categoryId:u.a.AntiAircraftShell},rules:[{target:ue(ae,oe),count1:{a13:1.75}},{target:ne,count1:{a13:2.5}}]},{gear:{categoryId:u.a.ArmorPiercingShell},rules:[{target:ie,count1:{a13:1.85}},{target:oe,count1:{a13:1.3}}]},{gear:126,rules:[{target:ie,count1:{a13:1.6},count2:{a13:2.72}},{target:ae,count1:{a13:1.4},count2:{a13:2.1}},{target:ne,count1:{a13:1.3},count2:{a13:1.82}},{target:oe,count1:{a13:1.4},count2:{a13:1.68}},{target:se,count1:{a5:1.25},count2:{a5:1.625}},{target:te,count1:{b13next:75},count2:{b13next:110},count3:{b13next:140},count4:{b13next:160}}]},{gear:{attrs:"AntiGroundRocketLauncher"},rules:[{target:ie,count1:{a13:1.5},count2:{a13:2.7}},{target:ae,count1:{a13:1.3},count2:{a13:2.145}},{target:ne,count1:{a13:1.25},count2:{a13:1.875}},{target:oe,count1:{a13:1.25},count2:{a13:1.75}},{target:se,count1:{a5:1.2},count2:{a5:1.68}}]},{gear:348,rules:[{target:te,count1:{b13next:55},count2:{b13next:115},count3:{b13next:160},count4:{b13next:190}}]},{gear:349,rules:[{target:te,count1:{b13next:80},count2:{b13next:170}}]},{gear:{attrs:"Mortar"},rules:[{target:ie,count1:{a13:1.3},count2:{a13:1.95}},{target:ae,count1:{a13:1.2},count2:{a13:1.68}},{target:ne,count1:{a13:1.2},count2:{a13:1.56}},{target:oe,count1:{a13:1.1},count2:{a13:1.265}},{target:se,count1:{a5:1.15},count2:{a5:1.38}}]},{gear:346,rules:[{target:te,count1:{b13next:30},count2:{b13next:55},count3:{b13next:75},count4:{b13next:90}}]},{gear:347,rules:[{target:te,count1:{b13next:60},count2:{b13next:110},count3:{b13next:150},count4:{b13next:180}}]},{gear:{categoryId:u.a.LandingCraft},rules:[{target:ue(ie,ae),count1:{a13:1.8}},{target:ne,count1:{a13:1.4}},{target:oe,count1:{a13:1.7}},{target:se,count1:{a5:1.7}}]},{gear:193,rules:[{target:ue(ie,ae,ne),count1:{a13:1.15}},{target:oe,count1:{a13:1.2}},{target:se,count1:{a5:1.2}}]},{gear:166,rules:[{target:ie,count1:{a13:1.5},count2:{a13:2.1}},{target:ae,count1:{a13:1.2},count2:{a13:1.68}},{target:ne,count1:{a13:1.5},count2:{a13:1.95}},{target:oe,count1:{a13:1.6},count2:{a13:2.4}},{target:se,count1:{a5:1.3},count2:{a5:2.08}}]},{gear:230,rules:[{target:te,count1:{a13:1.8,b13:25}}]},{gear:355,rules:[{target:ie,count1:{a13:2}},{target:ae,count1:{a13:1.8}},{target:ne,count1:{a13:1.1}},{target:oe,count1:{a13:2}},{target:se,count1:{a5:1.2}},{target:te,count1:{b13:25,a13next:1.4}}]},{gear:167,rules:[{target:ue(ie,ae),count1:{a13:2.4},count2:{a13:3.24}},{target:ne,count1:{a13:1.5},count2:{a13:1.8}},{target:oe,count1:{a13:2.8},count2:{a13:4.2}},{target:se,count1:{a5:1.7},count2:{a5:2.55}}]},{gear:{categoryId:u.a.CarrierBasedDiveBomber},rules:[{target:ie,count1:{a13:1.5},count2:{a13:3}},{target:ae,count1:{a13:1.4},count2:{a13:2.45}},{target:oe,count1:{a13:1.3}}]},{gear:{categoryId:{$in:[u.a.SeaplaneBomber,u.a.SeaplaneFighter]}},rules:[{target:ie,count1:{a13:1.5}},{target:ne,count1:{a13:1.2}},{target:oe,count1:{a13:1.3}}]},{ship:{shipTypeId:{$in:[g.a.Destroyer,g.a.LightCruiser]}},target:ie,bonus:{a13:1.4}},{ship:{shipTypeId:{$in:[g.a.Submarine,g.a.SubmarineAircraftCarrier]}},target:te,bonus:{b12:30}}],le=function(e,r){var t=e.countGear("LandingCraft"),i={};if(t){var a=e.totalEquipmentStats((function(e){return e.is("LandingCraft")?e.star:0}));if(i.a13=1+a/t/50,!r)return i;i.a5=i.a13,e.hasGear(166)&&(i.a5*=i.a5)}return i},pe=function(e,r){var t=e.countGear(167),i={};if(t){var a=e.totalEquipmentStats((function(e){return e.match(167)?e.star:0}));if(i.a13=1+a/t/30,!r)return i;i.a5=i.a13}return i},fe=function(e,r){var t=function(e,r){var t=function(i,a){void 0===a&&(a=0);var n=[];if(!function(e,r,t){var i=e.ship,a=e.target;return!(i&&!r.match(i))&&!(a&&!t.match(a))}(i,e,r))return n;var o=i.gear,s=i.bonus,u=i.rules,c=o?e.countGear((function(e){return e.match(o)})):a;return c&&n.push(function(e,r){var t=e.count1,i=e.count2,a=e.count3,n=e.count4,o=e.count5,s={};return[t,i,a,n,o].forEach((function(e,t){e&&r>t&&(s=e)})),s}(i,c)),s&&n.push(s),u&&n.push.apply(n,u.flatMap((function(e){return t(e,c)}))),n};return t}(e,r),i=ce.flatMap((function(e){return t(e)})),a=function(e,r){if(!r.isInstallation)return[];var t=r.is("SupplyDepot");return[le(e,t),pe(e,t)]}(e,r);return ee.a.apply(void 0,re(i,a))},he=function(){return(he=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},de=function(){function e(e,r,t,i,a,n,s,u,c){var l=this;this.master=e,this.stats=r,this.nakedStats=t,this.health=i,this.morale=a,this.slots=n,this.gears=s,this.planes=u,this.attrs=c,this.is=function(e){return l.attrs.includes(e)},this.canEquip=function(e,r){var t=l,i=t.shipId,a=t.shipClass,n=l.master,o=n.equippable,s=n.isAbyssal,u=e.gearId,c=e.categoryId;if(s)return!0;if(!o.categories.includes(c))return!1;if([492,392].includes(i)&&e.is("SeaplaneBomber"))return 194===u;if(l.slots.length<=r){return U.a.includes(c)||o.expantionSlot.includes(u)||33===u}if(a.is("IseClass")&&l.is("Kai2"))return!(r>1&&e.is("MainGun"));if(a.is("YuubariClass")&&l.is("Kai2")){if(r>=3&&(e.is("MainGun")||e.is("Torpedo")||e.is("MidgetSubmarine")))return!1;if(4===r)return e.is("AntiAircraftGun")||e.is("SmallRadar")||e.is("CombatRation")}return!0},this.match=function(e){return"number"==typeof e?l.shipId===e:o()(e)(l)},this.hasGear=function(e){var r=l.nonNullableGears;return"string"==typeof e?r.some((function(r){return r.is(e)})):"number"==typeof e?r.some((function(r){return r.gearId===e})):r.some(e)},this.countGear=function(e){var r=l.nonNullableGears;return void 0===e?r.length:"string"==typeof e?r.filter((function(r){return r.is(e)})).length:"number"==typeof e?r.filter((function(r){return r.gearId===e})).length:r.filter(e).length},this.totalEquipmentStats=function(e){return Object(f.a)(l.nonNullableGears,e)},this.getDefensePower=function(){var e=l.stats.armor+l.totalEquipmentStats((function(e){return e.improvement.defensePowerModifier})),r=.7*Math.max(e,1),t=r+.6*Math.floor(e-1);return{min:r,max:t,values:function(){return Object(Z.a)(Math.floor(e)).map((function(e){return r+.6*e}))},random:function(){return r+.6*Object(Q.a)(Math.floor(e-1))}}},this.getCruiserFitBonus=function(){var e=l,r=e.shipType,t=e.shipClass,i=e.countGear,a=r.any("LightCruiser","TorpedoCruiser","TrainingCruiser"),n=t.is("ZaraClass"),o=i((function(e){return[4,11].includes(e.gearId)})),s=i((function(e){return[65,119,139].includes(e.gearId)}));return Object(W.a)({isLightCruiserClass:a,singleGunCount:o,twinGunCount:s,isZaraClass:n,zaraGunCount:Math.sqrt(i(162))})},this.getRemainingPlanes=function(){return l.planes.filter(m.b)},this.getNormalProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};if("CarrierShelling"!==l.getShellingType())return e;var r=l.getRemainingPlanes().filter((function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("LargeFlyingBoat")}));e.power=1+Object(f.a)(r,(function(e){return 0===e.index?e.gear.proficiency.criticalPowerModifier/100:e.gear.proficiency.criticalPowerModifier/200}));var t=Object(f.a)(r,(function(e){return e.gear.proficiency.internal}))/r.length,i=0,a=0;return t>=10&&(i=Math.floor(Math.sqrt(.1*t))),t>=25&&(a=1),t>=40&&(a=2),t>=55&&(a=3),t>=70&&(a=4),t>=80&&(a=6),t>=100&&(a=9),e.hitRate=i+a,e.criticalRate=Object(f.a)(r,(function(e){var r=e.gear.proficiency,t=r.internal,i=r.level,a=0===e.index?10:0,n=(Math.sqrt(.1*t)+i)/2;return Math.floor(n+a)/100})),e},this.getSpecialProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};return"CarrierShelling"!==l.getShellingType()||(l.getRemainingPlanes().filter((function(e){return e.participatesInCarrierShelling&&120===e.gear.proficiency.internal})).some((function(e){return 0===e.index}))?e.power=1.25:e.power=1.106),e},this.getSpecialEnemyModifiers=function(e){return fe(l,e)},this.getAntiInstallationModifier=function(e){var r=l.getSpecialEnemyModifiers(e);return he(he({},{a13:1,a13next:1,a5:1,b12:0,b13:0,b13next:0}),r)},this.calcEvasionValue=function(e,r){var t=l.stats,i=t.evasion,a=t.luck,n=l.totalEquipmentStats((function(e){return e.is("EngineImprovement")?e.star:0})),o=Math.floor(1.5*Math.sqrt(n));return Object(X.a)({evasion:i,luck:a,improvementModifier:o,formationModifier:e,postcapModifier:r})},this.slotCapacities=e.slotCapacities.concat()}return Object.defineProperty(e.prototype,"shipId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClassId",{get:function(){return this.master.shipClassId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipTypeId",{get:function(){return this.master.shipType.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){return this.master.remodelGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.master.sortId%10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClass",{get:function(){return this.master.shipClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipType",{get:function(){return this.master.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.nakedStats.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipAccuracy",{get:function(){var e=this.nakedStats,r=e.level,t=e.luck;return 2*Math.sqrt(r)+1.5*Math.sqrt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(f.a)(this.planes.filter((function(e){var r=e.gear;return r.is("Fighter")||r.is("TorpedoBomber")||r.is("DiveBomber")})),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosFactor",{get:function(){return this.nakedStats.los+Object(f.a)(this.planes,(function(e){return e.fleetLosModifier}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstallation",{get:function(){return 0===this.nakedStats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"installationType",{get:function(){var e=this.isInstallation,r=this.name;return e?r.includes("砲台")?"Pillbox":r.includes("離島")||r.includes("中枢")?"IsolatedIsland":r.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canNightAttack",{get:function(){var e=this.shipClass,r=(this.shipType,this.health),t=this.master;return!r.lte("Taiha")&&(e.is("ArkRoyalClass")?"Chuuha"!==r.damage&&this.planes.some((function(e){return e.isSwordfish})):t.firepower[0]>0)},enumerable:!0,configurable:!0}),e.prototype.getShellingType=function(){var e=this.shipType,r=this.shipClass,t=this.isInstallation,i=this.hasGear;return e.isAircraftCarrierClass||(r.is("RevisedKazahayaClass")||t)&&(i("DiveBomber")||i("TorpedoBomber"))?"CarrierShelling":"Shelling"},e}(),be=t(492),ye=t(3633),me=t(560),ge=t(3763),ve=t(3673),Se=["firepower","armor","torpedo","accuracy","evasion","antiAir","asw","speed","los","range","speed","effectiveLos"],Ae=[{byGear:{gearId:294},byShip:{shipClassId:{$in:[R.a.FubukiClass,R.a.AyanamiClass,R.a.AkatsukiClass]}},multiple:{firepower:1},synergies:[{byGear:{attrs:"SurfaceRadar"},count1:{firepower:3,torpedo:1,evasion:2}},{byGear:{gearId:{$in:[13,125,285]}},count1:{firepower:1,torpedo:3},count2:{firepower:1,torpedo:2}},{byGear:{gearId:285},count1:{torpedo:1}}]},{byGear:{gearId:295},byShip:{shipClassId:{$in:[R.a.FubukiClass,R.a.AyanamiClass,R.a.AkatsukiClass]}},multiple:{firepower:2,antiAir:2},synergies:[{byGear:{attrs:"SurfaceRadar"},count1:{firepower:3,torpedo:1,evasion:2}},{byGear:{attrs:"AirRadar"},count1:{antiAir:6}},{byGear:{gearId:{$in:[13,125,285]}},count1:{firepower:1,torpedo:3},count2:{firepower:1,torpedo:2}},{byGear:{gearId:285},count1:{torpedo:1}}]},{byGear:{gearId:296},rules:[{byShip:{shipClassId:{$in:[R.a.AyanamiClass,R.a.AkatsukiClass]}},multiple:{firepower:1}},{byShip:627,multiple:{firepower:2,torpedo:1}},{byShip:{shipClassId:R.a.HatsuharuClass},multiple:{firepower:1,evasion:1}},{byShip:{shipId:497},multiple:{firepower:2,evasion:2}},{byShip:{shipId:145},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipId:498},multiple:{firepower:1,antiAir:1,evasion:2}},{byShip:{shipId:144},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipId:{$in:[587,469]}},multiple:{firepower:1,evasion:2}},{byShip:{shipClassId:R.a.ShiratsuyuClass,attrs:{$not:"Kai2"}},multiple:{firepower:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[R.a.AyanamiClass,R.a.AkatsukiClass,R.a.HatsuharuClass]}},count1:{firepower:1,torpedo:2,evasion:2}},{byShip:{shipClassId:R.a.ShiratsuyuClass},count1:{firepower:1,torpedo:3,evasion:2}}]},{byGear:{attrs:"AirRadar"},rules:[{byShip:{shipClassId:{$in:[R.a.AyanamiClass,R.a.AkatsukiClass,R.a.HatsuharuClass]}},count1:{antiAir:5}},{byShip:{shipClassId:R.a.ShiratsuyuClass},count1:{antiAir:6}}]},{byGear:{gearId:285},byShip:{shipClassId:{$in:[R.a.AyanamiClass,R.a.AkatsukiClass,R.a.HatsuharuClass]}},count1:{firepower:1,torpedo:3}},{byGear:{gearId:286},byShip:{shipClassId:R.a.ShiratsuyuClass},count1:{firepower:1,torpedo:3}}]},{byGear:{gearId:266},byShip:{shipClassId:{$in:[R.a.KagerouClass,R.a.AsashioClass,R.a.ShiratsuyuClass]}},multiple:{firepower:1},rules:[{byShip:{shipClassId:R.a.KagerouClass,attrs:"Kai2"},count1:{firepower:1},count2:{firepower:2}},{byShip:{shipId:{$in:[228,557,145]}},multiple:{evasion:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[R.a.AsashioClass,R.a.ShiratsuyuClass]}},count1:{firepower:1,torpedo:3,evasion:1}},{byShip:{shipClassId:R.a.KagerouClass},count1:{firepower:2,torpedo:3,evasion:1}}]}]},{byGear:{gearId:267},rules:[{byShip:{shipClassId:R.a.YuugumoClass,attrs:"Kai2"},multiple:{firepower:3,evasion:1}},{byShip:{shipClassId:{$in:[R.a.YuugumoClass,R.a.ShimakazeClass]},attrs:{$not:"Kai2"}},multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:R.a.KagerouClass},multiple:{firepower:1,evasion:1}},{byShip:{shipClassId:R.a.KagerouClass,attrs:"Kai2"},count1:{firepower:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:R.a.YuugumoClass,attrs:"Kai2"},count1:{firepower:3,torpedo:4,evasion:3}},{byShip:{shipClassId:R.a.YuugumoClass,attrs:{$not:"Kai2"}},count1:{firepower:2,torpedo:3,evasion:1}},{byShip:{shipId:229},count1:{firepower:1,torpedo:3,evasion:2}}]}]},{byGear:366,rules:[{byShip:{shipClassId:R.a.YuugumoClass,attrs:"Kai2"},multiple:{firepower:3,antiAir:3,evasion:1}},{byShip:569,multiple:{firepower:1,antiAir:1}},{byShip:{shipClassId:R.a.YuugumoClass,attrs:{$not:"Kai2"}},multiple:{firepower:2,evasion:1}},{byShip:229,multiple:{firepower:2,antiAir:3,evasion:1}},{byShip:50,multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:R.a.KagerouClass,attrs:"Kai2"},multiple:{firepower:2,antiAir:2,evasion:1}},{byShip:{shipClassId:R.a.YuugumoClass,attrs:{$not:"Kai2"}},multiple:{firepower:1,evasion:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},byShip:{$or:[{shipClassId:R.a.YuugumoClass,attrs:"Kai2"},{shipId:229}]},count1:{firepower:2,torpedo:4,evasion:2}},{byGear:{attrs:"AirRadar"},byShip:{$or:[{shipClassId:R.a.YuugumoClass,attrs:"Kai2"},{shipId:229}]},count1:{firepower:1,antiAir:5,evasion:2}}]},{byGear:293,rules:[{byShip:{shipClassId:{$in:[R.a.KamikazeClass,R.a.MutsukiClass]}},multiple:{firepower:2,antiAir:1,evasion:3}},{byShip:{shipClassId:{$in:[R.a.ShimushuClass,R.a.EtorofuClass]}},multiple:{firepower:1,antiAir:1,evasion:2}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[R.a.KamikazeClass,R.a.MutsukiClass]}},count1:{firepower:2,torpedo:1,evasion:3}},{byShip:{shipClassId:{$in:[R.a.ShimushuClass,R.a.EtorofuClass]}},count1:{firepower:2,evasion:3,asw:1}}]},{byGear:{gearId:174},byShip:{shipClassId:{$in:[R.a.KamikazeClass,R.a.MutsukiClass]}},count1:{firepower:2,torpedo:4},count2:{firepower:1,torpedo:3}}]},{byGear:229,byShip:{shipClassId:R.a.YuubariClass,attrs:"Kai2"},multiple:{firepower:1,antiAir:1},synergies:[{byGear:{attrs:"SurfaceRadar"},count1:{firepower:1,evasion:1}},{byGear:{attrs:"AirRadar"},count1:{antiAir:2,evasion:2}}]},{byGear:229,minStar:7,rules:[{byShip:{$or:[{shipClassId:{$in:[R.a.KamikazeClass,R.a.MutsukiClass]}},{shipTypeId:g.a.CoastalDefenseShip}]},multiple:{firepower:1,antiAir:1}},{byShip:{shipId:488},multiple:{firepower:2,antiAir:3}},{byShip:{shipId:487},multiple:{firepower:2,antiAir:2}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[R.a.KamikazeClass,R.a.MutsukiClass]}},count1:{firepower:2,evasion:3}},{byShip:{shipTypeId:g.a.CoastalDefenseShip},count1:{firepower:1,evasion:4}},{byShip:{shipId:{$in:[488,487]}},count1:{firepower:3,evasion:2}}]}]},{byGear:{gearId:297},rules:[{byShip:{shipClassId:R.a.FubukiClass},multiple:{evasion:2}},{byShip:{shipClassId:{$in:[R.a.AyanamiClass,R.a.AkatsukiClass]}},multiple:{evasion:1}}]},{byGear:{gearId:63},rules:[{byShip:{shipClassId:{$in:[R.a.AyanamiClass,R.a.AkatsukiClass,R.a.HatsuharuClass]}},multiple:{antiAir:1}},{byShip:627,multiple:{firepower:1}},{byShip:{shipId:{$in:[242,497,498]}},multiple:{evasion:1}},{byShip:{shipId:145},multiple:{firepower:1}},{byShip:{shipId:144},multiple:{firepower:1,torpedo:1,antiAir:1,evasion:2}},{byShip:{shipId:{$in:[469,587]}},multiple:{evasion:2}}]},{byGear:{gearId:313},byShip:{attrs:"UsNavy",shipTypeId:g.a.Destroyer},multiple:{firepower:2,antiAir:2,evasion:1,armor:1}},{byGear:{gearId:308},rules:[{byShip:{attrs:"UsNavy"},multiple:{firepower:1,antiAir:1,evasion:1}},{byShip:{shipTypeId:g.a.Destroyer},multiple:{firepower:1}},{byShip:{shipTypeId:g.a.CoastalDefenseShip},multiple:{antiAir:1,evasion:1}}]},{byGear:{gearId:282},byShip:{$or:[{shipClassId:{$in:[R.a.TashkentClass,R.a.YuubariClass]}},{shipId:147}]},multiple:{firepower:2,armor:1}},{byGear:{gearId:90},rules:[{byShip:{shipId:{$in:[416,417,295]}},multiple:{firepower:1}},{byShip:{shipId:264},multiple:{firepower:1,antiAir:1}},{byShip:{shipId:142},multiple:{firepower:2,evasion:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},byShip:{shipClassId:{$in:[R.a.FurutakaClass,R.a.AobaClass]}},count1:{firepower:3,torpedo:2,evasion:2}},{byGear:{attrs:"AirRadar"},byShip:{shipId:{$in:[61,264]}},count1:{antiAir:5,evasion:2}}]},{byGear:{gearId:303},rules:[{byShip:{shipClassId:{$in:[R.a.KumaClass,R.a.NagaraClass,R.a.SendaiClass,R.a.AganoClass]}},multiple:{firepower:1,antiAir:1}},{byShip:{shipClassId:R.a.GotlandClass},multiple:{firepower:1,antiAir:2,evasion:1}}]},{byGear:{gearId:119},rules:[{byShip:{shipClassId:{$in:[R.a.YuubariClass,R.a.KatoriClass]}},multiple:{firepower:1}},{byShip:{shipClassId:R.a.NisshinClass},multiple:{firepower:2,torpedo:1}}]},{byGear:{gearId:310},rules:[{byShip:{shipId:{$in:[115,293]}},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipClassId:R.a.YuubariClass,attrs:"Kai2"},multiple:{firepower:4,antiAir:1,evasion:2,asw:1}},{byShip:{shipClassId:R.a.YuubariClass,attrs:"Kai2"},minStar:8,multiple:{firepower:1}},{byShip:{shipClassId:R.a.KatoriClass},multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:R.a.NisshinClass},multiple:{firepower:3,torpedo:2,antiAir:1,evasion:1}}],synergies:[{byShip:{shipClassId:R.a.YuubariClass,attrs:"Kai2"},byGear:{attrs:"SurfaceRadar"},count1:{firepower:3,torpedo:2,evasion:2}}]},{byGear:{gearId:340},byShip:{shipClassId:R.a.DucaDegliAbruzziClass},multiple:{firepower:1,antiAir:1,evasion:1}},{byGear:{gearId:341},rules:[{byShip:{shipClassId:R.a.DucaDegliAbruzziClass},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipClassId:R.a.GotlandClass},multiple:{firepower:1,antiAir:1,evasion:1}}]},{byGear:{gearId:{$in:[356,357]}},rules:[{byShip:{shipClassId:R.a.NorthamptonClass},multiple:{firepower:2}},{byShip:{shipClassId:R.a.MogamiClass},multiple:{firepower:1}}]},{byGear:359,rules:[{byShip:{shipClassId:R.a.PerthClass},multiple:{firepower:2,antiAir:2,evasion:1}},{byShip:{shipId:{$in:[115,293]}},multiple:{firepower:1,antiAir:1,evasion:1}},{byShip:{shipClassId:R.a.YuubariClass,attrs:"Kai2"},multiple:{firepower:2,antiAir:2,evasion:1}}]},{byGear:{gearId:{$in:[360,361]}},rules:[{byShip:{shipClassId:R.a.DeRuyterClass},multiple:{firepower:2,antiAir:2,evasion:1}},{byShip:{shipClassId:R.a.GotlandClass},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipClassId:R.a.AganoClass},multiple:{firepower:1,antiAir:1}}]},{byGear:{gearId:{$in:[362,363]}},rules:[{byShip:{shipClassId:R.a.AtlantaClass},multiple:{firepower:1,antiAir:3,evasion:2}},{byShip:{shipClassId:{$in:[R.a.ColoradoClass,R.a.NorthamptonClass]}},multiple:{antiAir:1,evasion:1}},{byShip:{shipClassId:{$in:[R.a.OoyodoClass,R.a.AganoClass,R.a.DeRuyterClass]}},multiple:{antiAir:-1,evasion:-2}},{byShip:{shipClassId:{$in:[R.a.GotlandClass,R.a.KatoriClass]}},multiple:{firepower:-2,antiAir:-1,evasion:-4}},{byShip:{shipClassId:{$in:[R.a.KumaClass,R.a.NagaraClass,R.a.SendaiClass]}},multiple:{firepower:-3,antiAir:-2,evasion:-6}},{byShip:{shipClassId:{$in:[R.a.TenryuuClass,R.a.YuubariClass]}},multiple:{firepower:-3,antiAir:-3,evasion:-8}}]},{byGear:{gearId:289},rules:[{byShip:{shipId:149},multiple:{firepower:2,antiAir:1}},{byShip:{shipId:151},multiple:{firepower:2,antiAir:2,evasion:2}},{byShip:{shipId:{$in:[150,152]}},multiple:{firepower:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},byShip:{shipId:{$in:[149,151]}},count1:{firepower:2,evasion:2}}]},{byGear:{gearId:290},rules:[{byShip:{shipClassId:R.a.FusouClass,attrs:"Kai2"},multiple:{firepower:1}},{byShip:{shipId:{$in:[82,88]}},multiple:{firepower:2,antiAir:2,evasion:1}},{byShip:{shipId:553},multiple:{firepower:3,antiAir:2,evasion:1,accuracy:3}},{byShip:{shipId:554},multiple:{firepower:3,antiAir:2,evasion:2,accuracy:3}}],synergies:[{byGear:{gearId:318},rules:[{byShip:{shipClassId:R.a.NagatoClass,attrs:"Kai2"},count1:{firepower:2,evasion:2,armor:1,accuracy:1}},{byShip:{shipClassId:R.a.IseClass,shipTypeId:g.a.AviationBattleship},count1:{evasion:2,armor:1}},{byShip:{shipId:554},count1:{firepower:1,accuracy:1}}]}]},{byGear:{gearId:318},rules:[{byShip:{shipClassId:R.a.NagatoClass,attrs:"Kai2"},multiple:{firepower:3,antiAir:2,evasion:1,accuracy:2}},{byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{accuracy:3}},{byShip:{shipClassId:R.a.IseClass,shipTypeId:g.a.AviationBattleship},multiple:{firepower:2,antiAir:2,evasion:2}},{byShip:{shipId:554},multiple:{firepower:1}},{byShip:{shipClassId:R.a.FusouClass,attrs:"Kai2"},multiple:{firepower:1}}]},{byGear:{gearId:{$in:[290,318]}},synergies:[{byGear:{attrs:"AirRadar"},byShip:{shipClassId:R.a.IseClass,shipTypeId:g.a.AviationBattleship},count1:{antiAir:2,evasion:3,accuracy:1}}]},{byGear:{gearId:104},rules:[{byShip:{shipId:149},multiple:{firepower:2}},{byShip:{shipId:{$in:[150,152]}},multiple:{firepower:1}},{byShip:{shipId:151},multiple:{firepower:2,antiAir:1,evasion:2}}]},{byGear:{gearId:{$in:[298,299,300]}},rules:[{byShip:{shipClassId:R.a.NelsonClass},multiple:{firepower:2,armor:1}},{byShip:{shipClassId:R.a.QueenElizabethClass},multiple:{firepower:2,armor:1,evasion:-2}},{byShip:{shipClassId:R.a.KongouClass,rank:6},multiple:{firepower:1,armor:1,evasion:-3}}]},{byGear:{gearId:328},rules:[{byShip:{shipClassId:{$in:[R.a.IseClass,R.a.FusouClass]}},multiple:{firepower:1}},{byShip:{shipClassId:R.a.KongouClass,rank:1},multiple:{firepower:1}},{byShip:{shipClassId:R.a.KongouClass,rank:{$in:[2,6]}},multiple:{firepower:2,evasion:1}},{byShip:{shipId:591},multiple:{firepower:3,torpedo:1,evasion:1}}]},{byGear:{gearId:329},rules:[{byShip:{shipClassId:{$in:[R.a.IseClass,R.a.FusouClass]}},multiple:{firepower:1}},{byShip:{shipClassId:R.a.KongouClass,rank:1},multiple:{firepower:1}},{byShip:{shipClassId:R.a.KongouClass,rank:2},multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:R.a.KongouClass,rank:6},multiple:{firepower:3,antiAir:1,evasion:1}},{byShip:{shipId:591},multiple:{firepower:4,torpedo:2,antiAir:1,evasion:1}}]},{byGear:{gearId:330},rules:[{byShip:{shipId:{$in:[541,573,576]}},multiple:{firepower:2}},{byShip:{shipClassId:{$in:[R.a.NagatoClass,R.a.ColoradoClass]},rank:{$lte:2}},multiple:{firepower:1}}]},{byGear:{gearId:331},rules:[{byShip:{shipId:1496},multiple:{firepower:2,evasion:1}},{byShip:{shipId:{$in:[541,573,576]}},multiple:{firepower:2}},{byShip:{$or:[{shipClassId:R.a.NagatoClass,rank:{$lte:2}},{shipId:601}]},multiple:{firepower:1}}]},{byGear:{gearId:332},rules:[{byShip:{shipId:1496},multiple:{firepower:2,evasion:1,antiAir:1}},{byShip:{shipId:{$in:[541,573,576]}},multiple:{firepower:2}},{byShip:{$or:[{shipClassId:R.a.NagatoClass,rank:{$lte:2}},{shipId:601}]},multiple:{firepower:1}}]},{byGear:358,rules:[{byShip:{attrs:{$in:["UsNavy","RoyalNavy"]}},multiple:{firepower:1,antiAir:1,evasion:1}},{byShip:{shipClassId:R.a.NorthamptonClass},multiple:{firepower:1,antiAir:2,evasion:2}}]},{byGear:{gearId:174},rules:[{byShip:{shipClassId:R.a.KamikazeClass},multiple:{torpedo:1,evasion:2}},{byShip:{shipId:591},multiple:{torpedo:6,evasion:3}},{byShip:{shipClassId:R.a.YuubariClass,attrs:"Kai2"},multiple:{firepower:2,torpedo:4}}]},{byGear:{gearId:285},byShip:{shipClassId:{$in:[R.a.FubukiClass,R.a.AyanamiClass,R.a.AkatsukiClass,R.a.HatsuharuClass]},attrs:"Kai2"},countCap:2,rules:[{multiple:{torpedo:2,evasion:1}},{minStar:10,multiple:{firepower:1}}]},{byGear:{gearId:286},byShip:{shipClassId:{$in:[R.a.ShiratsuyuClass,R.a.AsashioClass,R.a.KagerouClass,R.a.YuugumoClass]},attrs:"Kai2"},countCap:2,rules:[{multiple:{torpedo:2,evasion:1}},{byShip:{shipClassId:R.a.KagerouClass},minStar:5,multiple:{torpedo:1}},{minStar:10,multiple:{firepower:1}}]},{byGear:283,byShip:{attrs:"SovietNavy",shipTypeId:g.a.Destroyer},multiple:{firepower:1,torpedo:3,armor:1}},{byGear:314,byShip:{attrs:"UsNavy",shipTypeId:g.a.Destroyer},multiple:{firepower:1,torpedo:3}},{byGear:15,byShip:{shipClassId:R.a.KagerouClass,attrs:"Kai2"},countCap:2,multiple:{torpedo:2}},{byGear:58,byShip:{$or:[{shipTypeId:g.a.TorpedoCruiser},{shipClassId:{$in:[R.a.ShimakazeClass,R.a.AkizukiClass]}}]},multiple:{torpedo:1}},{byGear:179,byShip:{shipClassId:R.a.AkizukiClass},multiple:{torpedo:1}},{byGear:67,byShip:{shipTypeId:{$nin:[g.a.Submarine,g.a.SubmarineAircraftCarrier]}},multiple:{torpedo:-5}},{byGear:364,rules:[{byShip:623,multiple:{firepower:1,torpedo:4,evasion:-2}},{byShip:119,multiple:{torpedo:2,evasion:-2}},{byShip:{shipId:{$in:[118,586]}},multiple:{torpedo:1,evasion:-2}},{byShip:{shipId:{$not:{$in:[623,119,118,586]}}},multiple:{firepower:-1,evasion:-7}}]},{byGear:{gearId:{$in:[79,81]}},rules:[{byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:3}},{byShip:{$or:[{shipClassId:R.a.FusouClass,shipTypeId:g.a.AviationBattleship},{shipClassId:R.a.IseClass,attrs:"Kai"}]},multiple:{firepower:2}}]},{byGear:237,rules:[{byShip:{shipClassId:R.a.FusouClass,shipTypeId:g.a.AviationBattleship},multiple:{firepower:2}},{byShip:{shipClassId:R.a.IseClass,attrs:"Kai"},multiple:{firepower:3,evasion:1}},{byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:4,evasion:2}}]},{byGear:322,byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:5,antiAir:2,asw:1,evasion:2}},{byGear:323,byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:6,antiAir:3,asw:2,evasion:3}},{byGear:304,rules:[{byShip:{shipClassId:{$in:[R.a.KumaClass,R.a.NagaraClass,R.a.SendaiClass,R.a.AganoClass]}},multiple:{firepower:1,evasion:1,asw:1}},{byShip:{shipClassId:R.a.GotlandClass},multiple:{firepower:1,evasion:2,asw:2}}]},{byGear:194,effectiveLosBonus:!0,rules:[{byShip:392,multiple:{firepower:1,evasion:2,los:2}},{byShip:{shipClassId:R.a.CommandantTesteClass},multiple:{firepower:3,evasion:2,los:2}},{byShip:{shipClassId:{$in:[R.a.MizuhoClass,R.a.KamoiClass]}},multiple:{evasion:1,los:2}}]},{byGear:19,rules:[{byShip:{shipTypeId:g.a.LightAircraftCarrier},multiple:{antiAir:1,evasion:1}},{byShip:{shipClassId:R.a.HoushouClass},multiple:{firepower:1,asw:1,evasion:1}},{byShip:{shipClassId:{$in:[R.a.KasugaMaruClass,R.a.TaiyouClass]}},multiple:{firepower:1,asw:2}}]},{byGear:228,rules:[{byShip:{shipTypeId:g.a.LightAircraftCarrier},multiple:{antiAir:1,asw:2,evasion:1}},{byShip:{shipClassId:R.a.HoushouClass},multiple:{firepower:1,antiAir:2,evasion:2}},{byShip:{shipClassId:{$in:[R.a.KasugaMaruClass,R.a.TaiyouClass]}},multiple:{firepower:1,antiAir:1,asw:2,evasion:1}}]},{byGear:335,rules:[{byShip:{shipId:{$in:[594,599]}},count1:{antiAir:2,evasion:1}},{byShip:{shipId:{$in:[277,278]}},count1:{antiAir:1,evasion:1}}]},{byGear:336,rules:[{byShip:{shipId:{$in:[594,599]}},count1:{firepower:1,antiAir:2,evasion:1}},{byShip:{shipId:{$in:[277,278]}},count1:{firepower:1,antiAir:1,evasion:1}}]},{byGear:338,rules:[{byShip:599,count1:{firepower:4,antiAir:3,evasion:4}},{byShip:594,count1:{firepower:1,antiAir:2,evasion:3}},{byShip:{shipId:{$in:[277,278]}},count1:{firepower:1,antiAir:1,evasion:2}}]},{byGear:339,rules:[{byShip:599,count1:{firepower:6,antiAir:4,evasion:5}},{byShip:594,count1:{firepower:1,antiAir:3,evasion:4}},{byShip:{shipId:{$in:[277,278]}},count1:{firepower:1,antiAir:2,evasion:2}}]},{byGear:184,byShip:{shipClassId:R.a.AquilaClass},multiple:{firepower:1,antiAir:2,evasion:3}},{byGear:189,byShip:{shipClassId:{$in:[R.a.AquilaClass,R.a.GrafZeppelinClass]}},multiple:{antiAir:1,evasion:2}},{byGear:{gearId:{$in:[24,57,111]}},byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:2}},{byGear:99,rules:[{byShip:{shipClassId:R.a.HiryuuClass},count1:{firepower:1}},{byShip:{shipClassId:R.a.SouryuuClass},count1:{firepower:4}}]},{byGear:100,rules:[{byShip:196,count1:{firepower:3}},{byShip:197,count1:{firepower:6}},{byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},count1:{firepower:4}}]},{byGear:291,byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:6,evasion:1}},{byGear:292,byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:8,antiAir:1,evasion:2}},{byGear:319,byShip:{shipClassId:R.a.IseClass,attrs:"Kai2"},multiple:{firepower:7,antiAir:3,evasion:2}},{byGear:320,rules:[{byShip:{shipId:{$in:[196,197]}},multiple:{firepower:3}},{byShip:{shipId:{$in:[508,509,554]}},multiple:{firepower:4}},{byShip:553,multiple:{firepower:2}}]},{byGear:{gearId:{$in:[305,306]}},rules:[{byShip:{shipClassId:{$in:[R.a.AquilaClass,R.a.GrafZeppelinClass]}},multiple:{firepower:1,evasion:1}},{byShip:{remodelGroup:521,rank:{$gte:2}},multiple:{asw:1,evasion:1}},{byShip:{remodelGroup:534},multiple:{asw:3,evasion:2}}]},{byGear:316,byShip:{shipClassId:R.a.AquilaClass},multiple:{firepower:4,antiAir:1,evasion:1}},{byGear:{gearId:{$in:[18,52]}},rules:[{byShip:{shipId:{$in:[277,278,156]}},multiple:{firepower:1}},{byShip:594,multiple:{firepower:1,evasion:1}},{byShip:599,multiple:{firepower:2,evasion:1}}]},{byGear:342,rules:[{byShip:599,multiple:{firepower:3,antiAir:2,evasion:2}},{byShip:594,multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{$or:[{shipId:{$in:[277,278]}},{shipClassId:R.a.ShoukakuClass,attrs:"Kai2"}]},multiple:{firepower:1}}]},{byGear:343,rules:[{byShip:599,multiple:{firepower:5,antiAir:3,evasion:3}},{byShip:594,multiple:{firepower:3,antiAir:2,evasion:1}},{byShip:{shipId:{$in:[277,278]}},multiple:{firepower:2}},{byShip:{shipClassId:R.a.ShoukakuClass,attrs:"Kai2"},multiple:{firepower:1}}]},{byGear:93,rules:[{byShip:{shipClassId:R.a.HiryuuClass},count1:{firepower:3}},{byShip:{shipClassId:R.a.SouryuuClass},count1:{firepower:1}}]},{byGear:94,rules:[{byShip:196,count1:{firepower:7}},{byShip:197,count1:{firepower:3}}]},{byGear:143,rules:[{byShip:{shipId:{$in:[277,594]}},count1:{firepower:3}},{byShip:{shipId:{$in:[278,110,288,461,466]}},count1:{firepower:2}},{byShip:{shipId:{$in:[157,111,112,462,467]}},count1:{firepower:1}}]},{byGear:144,rules:[{byShip:{shipId:{$in:[461,466]}},count1:{firepower:4}},{byShip:{shipId:{$in:[277,594,599]}},count1:{firepower:3}},{byShip:{shipId:{$in:[278,110,288,462,467]}},count1:{firepower:2}},{byShip:{shipId:{$in:[111,112,157]}},count1:{firepower:1}}]},{byGear:{gearId:{$in:[82,302]}},byShip:{shipClassId:R.a.TaiyouClass},multiple:{asw:1,evasion:1}},{byGear:188,byShip:{shipClassId:R.a.AquilaClass},multiple:{firepower:3,antiAir:1,evasion:1}},{byGear:344,rules:[{byShip:318,multiple:{firepower:4,asw:1}},{byShip:{shipId:{$in:[555,560]}},multiple:{firepower:2,asw:2}},{byShip:599,multiple:{firepower:3}},{byShip:282,multiple:{firepower:2,asw:1}}]},{byGear:345,rules:[{byShip:318,multiple:{firepower:5,evasion:2,asw:1}},{byShip:{shipId:{$in:[555,560]}},multiple:{firepower:3,evasion:3,asw:2}},{byShip:599,multiple:{firepower:3,evasion:1}},{byShip:282,multiple:{firepower:3,evasion:1,asw:1}}]},{byGear:{categoryId:{$in:[u.a.CarrierBasedReconnaissanceAircraft,u.a.CarrierBasedReconnaissanceAircraft2]}},effectiveLosBonus:!0,rules:[{minStar:2,count1:{los:1}},{minStar:4,count1:{firepower:1}},{minStar:6,count1:{los:1}},{minStar:10,count1:{firepower:1,los:1}}]},{byGear:61,effectiveLosBonus:!0,rules:[{byShip:553,count1:{firepower:3,evasion:2,armor:1,accuracy:5,range:1}},{byShip:554,count1:{firepower:3,evasion:3,armor:3,accuracy:5,range:1}},{byShip:{shipId:{$in:[196,197]}},count1:{accuracy:5,range:1}},{byShip:{shipClassId:R.a.SouryuuClass},minStar:1,count1:{firepower:3,los:3}},{byShip:{shipClassId:R.a.SouryuuClass},minStar:8,count1:{firepower:1,los:1}},{byShip:{shipClassId:R.a.HiryuuClass},minStar:1,count1:{firepower:2,los:2}},{byShip:{shipId:{$in:[560,508,509]}},minStar:1,count1:{firepower:1,los:1}}]},{byGear:106,rules:[{byShip:{shipId:{$in:[407,145,419,151,541]}},multiple:{firepower:1,antiAir:2,evasion:3,armor:1}},{byShip:{remodelGroup:{$in:[139,49,20,167,170,425,532]}},multiple:{antiAir:2,evasion:2,armor:1}},{byShip:{remodelGroup:{$in:[183,35,465]}},multiple:{antiAir:1,evasion:3,armor:1}}]},{byGear:307,byShip:{attrs:"UsNavy"},multiple:{firepower:1,antiAir:1,evasion:1}},{byGear:315,rules:[{byShip:{attrs:"UsNavy"},multiple:{firepower:2,evasion:3,los:4}},{byShip:{attrs:"UsNavy",shipTypeId:g.a.Destroyer},multiple:{firepower:1},count1:{range:1}}]},{byGear:{attrs:"AirRadar"},byShip:569,count1:{firepower:1,antiAir:2,evasion:3}},{byGear:47,rules:[{byShip:{remodelGroup:{$in:[471,473,43,457,122,425]}},multiple:{firepower:1,evasion:2,asw:3}},{byShip:{remodelGroup:{$in:[16,36,414,167,170,527]}},multiple:{evasion:2,asw:2}}]},{byGear:149,rules:[{byShip:{shipId:{$in:[160,488,141,622,623]}},count1:{evasion:3,asw:1}},{byShip:624,count1:{evasion:5,asw:3}},{byShip:{shipClassId:R.a.AkizukiClass},count1:{evasion:2,asw:1}}]},{byGear:365,rules:[{byShip:{shipId:591},count1:{firepower:3}},{byShip:{shipClassId:R.a.YamatoClass,rank:{$gte:2}},count1:{firepower:2}},{byShip:{shipClassId:R.a.NagatoClass,attrs:"Kai2"},count1:{firepower:2}},{byShip:{shipClassId:{$in:[R.a.KongouClass,R.a.FusouClass,R.a.IseClass]},rank:{$lte:6}},count1:{firepower:1}},{byShip:{shipClassId:{$in:[R.a.NagatoClass,R.a.YamatoClass]},rank:1},count1:{firepower:1}}]},{byGear:35,rules:[{byShip:{shipId:{$in:[149,591]}},count1:{firepower:1,antiAir:1}},{byShip:150,count1:{antiAir:1}},{byShip:151,count1:{antiAir:1,evasion:1}},{byShip:152,count1:{firepower:1}}]},{byGear:317,rules:[{byShip:{shipId:{$in:[149,591]}},count1:{firepower:3,antiAir:3}},{byShip:150,count1:{firepower:2,antiAir:2}},{byShip:{shipId:{$in:[151,573]}},count1:{firepower:2,antiAir:2,evasion:1}},{byShip:152,count1:{firepower:3,antiAir:2}},{byShip:541,count1:{firepower:1,antiAir:2}},{byShip:{shipClassId:R.a.KongouClass,rank:{$lte:2}},count1:{firepower:1,antiAir:1}}]},{byGear:301,byShip:{attrs:"RoyalNavy"},multiple:{antiAir:2,evasion:1,armor:1}},{byGear:268,byShip:{shipId:{$in:[216,547,217,146]}},count1:{evasion:7,armor:2}},{byGear:74,rules:[{byShip:{remodelGroup:55},count1:{firepower:2,torpedo:2,evasion:-1}},{byShip:{remodelGroup:{$in:[86,85,69,34]}},count1:{firepower:2,evasion:-1}},{byShip:{remodelGroup:132},multiple:{firepower:1}},{byShip:{remodelGroup:20},multiple:{antiAir:1}}]},{byGear:140,byShip:{remodelGroup:{$in:[86,85]}},count1:{firepower:3,evasion:-2}},{byGear:{gearId:{$in:[324,325]}},rules:[{byShip:553,multiple:{antiAir:1,evasion:1}},{byShip:554,multiple:{antiAir:2,evasion:1}}]},{byGear:326,rules:[{byShip:553,multiple:{asw:2,evasion:1}},{byShip:554,multiple:{firepower:1,asw:3,evasion:2}}]},{byGear:327,rules:[{byShip:553,multiple:{firepower:1,asw:3,evasion:1}},{byShip:554,multiple:{firepower:2,asw:4,evasion:2}}]}],Ce=function(e,r){for(var t={},i=0,a=Se;i<a.length;i++){var n=a[i],o=(e[n]||0)+(r[n]||0);0!==o&&(t[n]=o)}return t},we=function(e,r,t){return function(i){var a,n,o=i.byShip,s=i.minStar,u=i.countCap,c=i.multiple,l=i.count4,p=i.count3,f=i.count2,h=i.count1,d={};if(o&&!e.match(o))return d;if(s){var b=e.countGear((function(e){return e.match(r)&&e.star>=s}));t=Math.min(t,b)}return u&&(t=Math.min(t,u)),c&&(a=c,n=t,d=Object(ge.a)(a,(function(e){return e&&e*n}))),[h,f,p,l].forEach((function(e,r){e&&t>r&&(d=Ce(d,e))})),d}},Me=function(e){var r=function(e){if(!e.hasGear(33))return{};var r=ve.a.getSpeedGroup(e),t=e.countGear(34),i=e.countGear(87),a=ve.a.getSpeedIncrement(r,t,i);return a>0?{speed:a}:e.shipClassId===R.a.JohnCButlerClass||623===e.shipId?{speed:5}:{}}(e);return Ae.map(function(e){var r=function(t){var i=t.byGear,a=t.byShip,n=t.countCap,o=t.rules,s=t.synergies,u=t.effectiveLosBonus;if(a&&!e.match(a))return{};var c=e.countGear((function(e){return e.match(i)}));if(0===c)return{};n&&(c=Math.min(n,c));var l=we(e,i,c),p=l(t),f=o?o.map(l).reduce(Ce,p):p;if(s){var h=s.map(r).reduce(Ce,{});f=Ce(f,h)}return u&&f.los&&(f=Ce(f,{effectiveLos:f.los})),f};return r}(e)).reduce(Ce,r)},Ie=function(){function e(e,r,t){var i=this;void 0===t&&(t={}),this.nakedStats=e,this.gears=r,this.equipmentBonus=t,this.getBonus=function(e){var r=i.equipmentBonus;return Object(me.a)(Se,e)&&r[e]||0}}return e.prototype.getStat=function(e){var r=this.nakedStats,t=this.gears;return r[e]+Object(f.a)(t.filter(m.b),e)+this.getBonus(e)},Object.defineProperty(e.prototype,"hp",{get:function(){return this.nakedStats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.getStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.getStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.getStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.getStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.getStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.getStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.getStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.nakedStats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.getStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e=this.nakedStats,r=this.gears,t=this.getBonus,i=e.range,a=Object(ye.a)(r,"range");return(a&&a.range>i?a.range:i)+t("range")},enumerable:!0,configurable:!0}),e}(),Pe=function(e,r){var t=this;this.masters=e,this.gearFactory=r,this.gearsFrom=function(e,r){return e?e.map(t.gearFactory.create):r.isAbyssal?r.initialEquipment.map((function(e){var r=e.id,i=e.improvement;return t.gearFactory.create({masterId:r,improvement:i})})):[]},this.create=function(e){if(e){var r=e.masterId,i=e.level,a=void 0===i?1:i,n=e.increased,o=e.morale,s=t.masters.find((function(e){return e.shipId===r}));if(s){var u=t.gearsFrom(e.equipments,s),c=new be.a(s,a,n),l=new Ie(c,u),p=e.currentHp,f=void 0===p?l.hp:p,h=new _(l.hp,f),d=new Y(o),b=e.slots?e.slots.concat():s.slotCapacities.concat(),y=P(b,u),m=H.from(s),g=new de(s,l,c,h,d,b,u,y,m);return g.stats.equipmentBonus=Me(g),g}}}},Oe=function(){function e(e){void 0===e&&(e=new i.a),this.masterData=e,this.gearFactory=new p(e.gears),this.shipFactory=new Pe(e.ships,this.gearFactory),this.fleetFactory=new M(this.shipFactory),this.landBasedAirCorpsFactory=new F(this.gearFactory),this.operationFactory=new T(this.fleetFactory,this.landBasedAirCorpsFactory)}return Object.defineProperty(e.prototype,"createOperation",{get:function(){return this.operationFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createFleet",{get:function(){return this.fleetFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createLandBasedAirCorps",{get:function(){return this.landBasedAirCorpsFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createShip",{get:function(){return this.shipFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createGear",{get:function(){return this.gearFactory.create},enumerable:!0,configurable:!0}),e}();r.a=Oe},3623:function(e,r,t){"use strict";var i;!function(e){e.Single="Single",e.CarrierTaskForce="CarrierTaskForce",e.SurfaceTaskForce="SurfaceTaskForce",e.TransportEscort="TransportEscort",e.Combined="Combined"}(i||(i={})),r.a=i},3630:function(e,r,t){"use strict";var i;!function(e){e.NormalBattle="NormalBattle",e.NightBattle="NightBattle",e.NightToDayBattle="NightToDayBattle",e.AerialBattle="AerialBattle",e.AirDefenseBattle="AirDefenseBattle"}(i||(i={})),r.a=i},3673:function(e,r,t){"use strict";var i;!function(e){e[e.FastA=0]="FastA",e[e.FastB1SlowA=1]="FastB1SlowA",e[e.FastB2SlowB=2]="FastB2SlowB",e[e.OtherC=3]="OtherC"}(i||(i={}));var a=function(){function e(r,t){var i=this;this.value=r,this.name=t,this.add=function(r){return e.fromNumber(i.value+r)}}return e.getSpeedGroup=function(r){var t=r.shipType,a=r.shipClass,n=r.shipId,o=r.remodelGroup;return e.fromNumber(r.nakedStats.speed)===e.Fast&&t.is("SeaplaneTender")||t.isSubmarineClass||[115,293].includes(n)||["加賀型","特種船丙型","工作艦","改風早型"].includes(a.name)?i.OtherC:["島風型","Ташкент級","大鳳型","翔鶴型","利根型","最上型"].includes(a.name)?i.FastA:["阿賀野型","蒼龍型","飛龍型","金剛型","大和型","Iowa級"].includes(a.name)||181===o||404===o||331===o||541===n?i.FastB1SlowA:i.FastB2SlowB},e.getSpeedIncrement=function(e,r,t){var a=r+t;switch(e){case i.FastA:if(t>=1||a>=2)return 10;break;case i.FastB1SlowA:if(0===t)break;if(a>=3)return 15;if(a>=2)return 10;break;case i.FastB2SlowB:if(t>=2||a>=3)return 10}return a>=1?5:0},e}();r.a=a,a.Land=new a(0,"陸上"),a.Slow=new a(5,"低速"),a.Fast=new a(10,"高速"),a.FastPlus=new a(15,"高速+"),a.Fastest=new a(20,"最速"),a.fromNumber=function(e){var r=[a.Land,a.Slow,a.Fast,a.FastPlus,a.Fastest].find((function(r){return e<=r.value}));return r||a.Fastest}},3678:function(e,r,t){"use strict";var i=t(345),a=t(3159),n=function(){function e(r,t,i,a){this.id=r,this.name=t,this.typeFactor=i,this.modifier=a,e.all.push(this)}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierSpecialAttack",{get:function(){return 7===this.api},enumerable:!0,configurable:!0}),e}();r.a=n,n.all=[],n.MainMain=new n(6,"主主",150,{power:1.5,accuracy:1.2}),n.MainApShell=new n(5,"主徹",140,{power:1.3,accuracy:1.3}),n.MainRader=new n(4,"主電",130,{power:1.2,accuracy:1.5}),n.MainSecond=new n(3,"主副",120,{power:1.1,accuracy:1.3}),n.DoubleAttack=new n(2,"連撃",130,{power:1.2,accuracy:1.1}),n.FighterBomberAttacker=new n(7.1,"FBA",125,{power:1.25,accuracy:1}),n.BomberBomberAttacker=new n(7.2,"BBA",140,{power:1.2,accuracy:1}),n.BomberAttacker=new n(7.3,"BA",155,{power:1.15,accuracy:1}),n.getPossibleAircraftCarrierCutins=function(e){var r=new Array,t=e.planes.filter((function(e){return e.slotSize>0})),i=t.filter((function(e){return e.is("CarrierBasedDiveBomber")})).length,a=t.some((function(e){return e.is("CarrierBasedTorpedoBomber")}));return 0!==i&&a?(r.push(n.BomberAttacker),i>=2&&r.push(n.BomberBomberAttacker),t.some((function(e){return e.is("CarrierBasedFighterAircraft")}))&&r.push(n.FighterBomberAttacker),r.sort((function(e,r){return e.typeFactor-r.typeFactor}))):r},n.getPossibleArtillerySpottings=function(e){var r=new Array,t=e.planes.some((function(e){return e.slotSize>0&&e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")})),i=e.countGear((function(e){return e.is("MainGun")}));if(!t||0===i)return r;var a=e.hasGear((function(e){return e.is("ArmorPiercingShell")})),o=e.hasGear((function(e){return e.is("SecondaryGun")})),s=e.hasGear((function(e){return e.is("Radar")}));return i>=2&&(r.push(n.DoubleAttack),a&&r.push(n.MainMain)),o&&(r.push(n.MainSecond),s&&r.push(n.MainRader),a&&r.push(n.MainApShell)),r.sort((function(e,r){return r.id-e.id}))},n.getPossibleAttacks=function(e,r){return void 0===r&&(r=!1),"Taiha"===e.health.damage?[]:e.shipType.isAircraftCarrierClass&&!r?n.getPossibleAircraftCarrierCutins(e):n.getPossibleArtillerySpottings(e)},n.calcFleetLosModifier=function(e){var r=e.totalShipStats((function(e){return e.fleetLosFactor}));return Math.floor(Math.sqrt(r)+.1*r)},n.calcBaseValue=function(e,r,t,a){var n=e.stats.luck,o=Math.floor(Math.sqrt(n)+10),s=e.totalEquipmentStats("los"),u=a?15:0;return t===i.a.AirSupremacy?Math.floor(o+.7*(r+1.6*s)+10)+u:t===i.a.AirSuperiority?Math.floor(o+.6*(r+1.2*s))+u:0},n.calcRate=function(e,r,t,i){var a=n.calcBaseValue(e,r,t,i),o=new Map,s=n.getPossibleAttacks(e),u=s.reduce((function(e,r){var t=(1-e)*(a/r.typeFactor);return t>1&&(t=1),o.set(r,t),e+t}),0),c=1-u,l=c<=0,p=s.concat();l||p.unshift(void 0);var f=function(e){return e?o.get(e)||0:c};return{baseValue:a,attacks:s,rateMap:o,total:u,dayCombatAttacks:p,getAttackRate:f,entries:function(){return p.map((function(e){return[e,f(e)]}))}}},n.try=function(e,r,t,i){for(var o=n.calcBaseValue(e,r,t,i),s=0,u=n.getPossibleAttacks(e);s<u.length;s++){var c=u[s];if(o>Object(a.a)(c.typeFactor-1))return c}}},3679:function(e,r,t){"use strict";var i=function(e){var r=e.nakedStats,t=e.level;return r.luck<50?Math.floor(r.luck+15+.75*Math.sqrt(t)):Math.floor(Math.sqrt(r.luck-50)+65+.8*Math.sqrt(t))},a=function(){function e(r,t,i,a){var n=this;this.id=r,this.name=t,this.typeFactor=i,this.modifier=a,this.calcRate=function(r){return n===e.DoubleAttack?109/110:Math.ceil(r)/n.typeFactor}}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestroyerCutin",{get:function(){return 7===this.id||8===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAerialAttack",{get:function(){return 6===this.api},enumerable:!0,configurable:!0}),e}();r.a=a,a.DoubleAttack=new a(1,"連撃",110,{power:1.2,accuracy:1.1}),a.MainTorp=new a(2,"主魚",115,{power:1.3,accuracy:1.5}),a.TorpTorp=new a(3,"魚雷",122,{power:1.5,accuracy:1.65}),a.SubmarineTorpTorp=new a(3.1,"潜水魚雷",110,{power:1.65,accuracy:1}),a.SubmarineRadarTorp=new a(3.2,"潜水電探",102,{power:1.75,accuracy:1}),a.MainMainSecond=new a(4,"主副",130,{power:1.75,accuracy:1.65}),a.MainMainMain=new a(5,"主砲",140,{power:2,accuracy:1.5}),a.AerialAttack1=new a(6.1,"夜襲1.25",105,{power:1.25,accuracy:1}),a.AerialAttack2=new a(6.2,"夜襲1.20",115,{power:1.2,accuracy:1}),a.AerialAttack3=new a(6.3,"夜襲1.18",125,{power:1.18,accuracy:1}),a.SuiseiAttack=new a(6.4,"彗星夜襲",115,{power:1.2,accuracy:1}),a.MainTorpRadar=new a(7,"主魚電",130,{power:1.3,accuracy:1}),a.TorpRadarLookout=new a(8,"魚見電",150,{power:1.2,accuracy:1}),a.getPossibleAerialAttacks=function(e){var r=[],t=e.planes.filter((function(e){return e.slotSize>0})),i=t.filter((function(e){return e.isNightFighter})).length,n=t.filter((function(e){return e.isNightAttacker})).length,o=t.filter((function(e){return e.isNightPlane})).length,s=t.filter((function(e){return e.isNightAircraft&&!e.isNightPlane})).length,u=i>=1,c=n>=1,l=o>=1,p=t.some((function(e){return 320===e.gear.gearId}));return i>=2&&c&&r.push(a.AerialAttack1),u&&c&&r.push(a.AerialAttack2),l&&p&&r.push(a.SuiseiAttack),u?((i+s>=3||n+s>=2)&&r.push(a.AerialAttack3),r):r},a.getPossibleAttacks=function(e,r){void 0===r&&(r=!1);var t=e.shipType,i=e.hasGear,n=e.countGear,o=new Array;if(function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.shipId)&&!e.hasGear((function(e){return[258,259].includes(e.gearId)})))&&e.planes.some((function(e){return e.slotSize>0&&e.isNightPlane})))}(e))return a.getPossibleAerialAttacks(e);if(!e.canNightAttack)return o;var s=r?0:n(213)+n(214),u=r?0:n("Torpedo")+n("SubmarineTorpedo");t.is("Destroyer")&&i((function(e){return e.is("SurfaceRadar")}))&&u>=1&&(i((function(e){return e.is("SmallCaliberMainGun")}))&&o.push(a.MainTorpRadar),i(129)&&o.push(a.TorpRadarLookout));var c=n((function(e){return e.is("MainGun")})),l=n((function(e){return e.is("SecondaryGun")}));return s>=1&&i((function(e){return e.is("SubmarineEquipment")}))?o.push(a.SubmarineRadarTorp):s>=2?o.push(a.SubmarineTorpTorp):c>=3?o.push(a.MainMainMain):c>=2&&l>=1?o.push(a.MainMainSecond):u>=2?o.push(a.TorpTorp):c>=1&&u>=1?o.push(a.MainTorp):c+l>=2&&o.push(a.DoubleAttack),o},a.calcPreModifierValue=i,a.calcBaseValue=function(e,r,t,a){var n=i(e);return r&&(n+=15),"Chuuha"===e.health.damage&&(n+=18),e.hasGear(129)&&(n+=5),t.searchlight&&(n+=7),a.searchlight&&(n+=-5),t.starshell&&(n+=4),a.starshell&&(n+=-10),n}},37:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var i,a=t(3622);!function(e){e[e.SmallCaliberMainGun=1]="SmallCaliberMainGun",e[e.MediumCaliberMainGun=2]="MediumCaliberMainGun",e[e.LargeCaliberMainGun=3]="LargeCaliberMainGun",e[e.SecondaryGun=4]="SecondaryGun",e[e.Torpedo=5]="Torpedo",e[e.CarrierBasedFighterAircraft=6]="CarrierBasedFighterAircraft",e[e.CarrierBasedDiveBomber=7]="CarrierBasedDiveBomber",e[e.CarrierBasedTorpedoBomber=8]="CarrierBasedTorpedoBomber",e[e.CarrierBasedReconnaissanceAircraft=9]="CarrierBasedReconnaissanceAircraft",e[e.ReconnaissanceSeaplane=10]="ReconnaissanceSeaplane",e[e.SeaplaneBomber=11]="SeaplaneBomber",e[e.SmallRadar=12]="SmallRadar",e[e.LargeRadar=13]="LargeRadar",e[e.Sonar=14]="Sonar",e[e.DepthCharge=15]="DepthCharge",e[e.ExtraArmor=16]="ExtraArmor",e[e.EngineImprovement=17]="EngineImprovement",e[e.AntiAircraftShell=18]="AntiAircraftShell",e[e.ArmorPiercingShell=19]="ArmorPiercingShell",e[e.VTFuze=20]="VTFuze",e[e.AntiAircraftGun=21]="AntiAircraftGun",e[e.MidgetSubmarine=22]="MidgetSubmarine",e[e.EmergencyRepairPersonnel=23]="EmergencyRepairPersonnel",e[e.LandingCraft=24]="LandingCraft",e[e.Autogyro=25]="Autogyro",e[e.AntiSubmarinePatrolAircraft=26]="AntiSubmarinePatrolAircraft",e[e.MediumExtraArmor=27]="MediumExtraArmor",e[e.LargeExtraArmor=28]="LargeExtraArmor",e[e.Searchlight=29]="Searchlight",e[e.SupplyTransportContainer=30]="SupplyTransportContainer",e[e.ShipRepairFacility=31]="ShipRepairFacility",e[e.SubmarineTorpedo=32]="SubmarineTorpedo",e[e.StarShell=33]="StarShell",e[e.CommandFacility=34]="CommandFacility",e[e.AviationPersonnel=35]="AviationPersonnel",e[e.AntiAircraftFireDirector=36]="AntiAircraftFireDirector",e[e.AntiGroundEquipment=37]="AntiGroundEquipment",e[e.LargeCaliberMainGun2=38]="LargeCaliberMainGun2",e[e.SurfaceShipPersonnel=39]="SurfaceShipPersonnel",e[e.LargeSonar=40]="LargeSonar",e[e.LargeFlyingBoat=41]="LargeFlyingBoat",e[e.LargeSearchlight=42]="LargeSearchlight",e[e.CombatRation=43]="CombatRation",e[e.Supplies=44]="Supplies",e[e.SeaplaneFighter=45]="SeaplaneFighter",e[e.SpecialAmphibiousTank=46]="SpecialAmphibiousTank",e[e.LandBasedAttackAircraft=47]="LandBasedAttackAircraft",e[e.LandBasedFighter=48]="LandBasedFighter",e[e.LandBasedReconnaissanceAircraft=49]="LandBasedReconnaissanceAircraft",e[e.TransportationMaterial=50]="TransportationMaterial",e[e.SubmarineEquipment=51]="SubmarineEquipment",e[e.JetPoweredFighter=56]="JetPoweredFighter",e[e.JetPoweredFighterBomber=57]="JetPoweredFighterBomber",e[e.JetPoweredTorpedoBomber=58]="JetPoweredTorpedoBomber",e[e.JetPoweredReconnaissanceAircraft=59]="JetPoweredReconnaissanceAircraft",e[e.LargeRadar2=93]="LargeRadar2",e[e.CarrierBasedReconnaissanceAircraft2=94]="CarrierBasedReconnaissanceAircraft2"}(i||(i={}));var n=function(){function e(e,r){var t=this;this.id=e,this.name=r,this.is=function(e){return t.id===i[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(t.is)}}return e.find=function(r,t){128===t||281===t?r=i.LargeCaliberMainGun2:142===t?r=i.LargeRadar2:151===t&&(r=i.CarrierBasedReconnaissanceAircraft2);var a=e.all.find((function(e){return e.id===r}));if(a)return a;var n=new e(r,"");return this.all.push(n),n},e}();r.b=n,n.keyToId=function(e){return i[e]},n.numberToKey=function(e){var r=i[e];if(void 0!==r)return r},n.all=a.a.map((function(e){var r=e.api_id,t=e.api_name;return new n(r,t)}))},3724:function(e,r,t){"use strict";var i;!function(e){e[e.None=1501]="None",e[e.Pillbox=1665]="Pillbox",e[e.IsolatedIsland=1668]="IsolatedIsland",e[e.SoftSkinned=1581]="SoftSkinned",e[e.HarbourSummerPrincess=1699]="HarbourSummerPrincess",e[e.SupplyDepot=1655]="SupplyDepot"}(i||(i={})),r.a=i},3725:function(e,r,t){"use strict";var i=t(233),a=t(99),n=t(157),o=t(49),s=t(344),u=t(232),c=function(){function e(e){var r=e.battleState,t=e.attacker,i=e.defender,a=e.specialAttack,n=e.isCritical,o=e.remainingAmmoModifier,s=e.fitGunBonus,c=e.optionalPowerModifiers;this.battleState=r,this.attacker=t,this.defender=i,this.specialAttack=a,this.isCritical=n,this.remainingAmmoModifier=o,this.fitGunBonus=s,this.optionalPowerModifiers=c,this.attackCalculator=new u.a(t.ship)}return Object.defineProperty(e.prototype,"isArmorPiercing",{get:function(){var e=this.defender.ship.shipType;return e.isBattleshipClass||e.isHeavyCruiserClass||e.any("AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifiers",{get:function(){var e;return this.attackCalculator.getProficiencyModifiers(null===(e=this.specialAttack)||void 0===e?void 0:e.isCarrierSpecialAttack)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetFactors",{get:function(){var e=this.attacker,r=this.defender;return{power:Object(i.c)(e,r),accuracy:Object(i.b)(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,r=e.battleState,t=e.attacker,i=e.defender,a=e.fleetFactors,n=e.specialAttack,s=e.isCritical,u=e.isArmorPiercing,c=e.optionalPowerModifiers,l=r.engagement,p=t.role,f=t.formation.getModifiers(p).shelling.power,h=l.modifier,d=t.ship.getSpecialEnemyModifiers(i.ship),b=i.ship.isInstallation,y=Object(o.a)(d,c);return this.attackCalculator.calcPower({formationModifier:f,engagementModifier:h,modifiers:y,fleetFactor:a.power,isCritical:s,isAntiInstallation:b,isArmorPiercing:u,specialAttack:n})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this,r=e.attacker,t=e.defender,i=e.fleetFactors,a=e.isArmorPiercing,n=e.specialAttack,o=e.fitGunBonus,u=void 0===o?0:o,c=r.formation.getModifiers(r.role).shelling.accuracy;s.a.isIneffective(r.formation,t.formation)&&(c=1);var l=n?n.modifier.accuracy:1;return this.attackCalculator.calcAccuracy({fleetFactor:i.accuracy,formationModifier:c,specialAttackModifier:l,isArmorPiercing:a,fitGunBonus:u})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiers(i).shelling.evasion;return r.calcEvasionValue(a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,i=this.defenderEvasionValue,a=t.ship.morale.evasionModifier;return Object(n.b)({accuracy:r,evasion:i,moraleModifier:a,criticalRateMultiplier:e.criticalRateMultiplier,hitRateBonus:this.proficiencyModifiers.hitRate,criticalRateBonus:this.proficiencyModifiers.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=r.ship.getDefensePower();return new a.a(e.postcap,i,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){var e=this.damage,r=this.defender,t=this.hitRate,i=this.isCritical,a=r.ship.health,n=a.currentHp,o=a.maxHp,s=r.side,u=function(e){return(n-e)/o<=.25},c=function(e){return 0===e.length?0:e.filter(u).length/e.length},l=e.scratchDamageProbability,p=e.scratchDamages,f=e.deadlyDamageProbability,h=e.stopperDamages,d="Player"===s?f:0,b=e.values.filter((function(e){return!(e<=0)&&!("Player"===s&&n-e<=0)})),y=b.length/e.values.length*c(b)+l*c(p)+d*c(h);return i?t.criticalRate*y:t.normalRate*y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"can",{get:function(){var e=this.attacker,r=this.defender,t=r.ship.isInstallation,i=this.attackCalculator.type,a=e.ship;if("Sunk"===a.health.damage)return!1;if(r.ship.shipType.isSubmarineClass)return!1;if("CarrierShelling"===i){if(a.health.lte("Taiha"))return!1;if(!a.shipType.is("ArmoredAircraftCarrier")&&a.health.lte("Chuuha"))return!1;var n=a.planes.filter((function(e){return e.slotSize>0}));return(!t||!n.some((function(e){return e.is("DiveBomber")&&!e.is("AntiInstallationBomber")})))&&a.planes.some((function(e){return e.participatesInCarrierShelling}))}return!a.shipType.isSubmarineClass||!t||a.hasGear("SpecialAmphibiousTank")},enumerable:!0,configurable:!0}),e}();r.a=c,c.criticalRateMultiplier=1.3},3726:function(e,r,t){"use strict";var i=t(99),a=t(157),n=t(510),o=function(){function e(e){var r=e.battleState,t=e.attacker,i=e.defender,a=e.isCritical,o=e.remainingAmmoModifier,s=void 0===o?1:o;this.battleState=r,this.attacker=t,this.defender=i,this.isCritical=a,this.remainingAmmoModifier=s,this.attackCalculator=new n.a(t.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.battleState,r=this.attacker,t=this.defender,i=this.isCritical,a=e.engagement,n=r.formation.shellingSupportModifiers.power,o=a.modifier,s=t.ship.isInstallation;return this.attackCalculator.calcPower({formationModifier:n,engagementModifier:o,isCritical:i,isAntiInstallation:s})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker.formation.shellingSupportModifiers.accuracy;return this.attackCalculator.calcAccuracy({formationModifier:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiers(i).shelling.evasion;return r.calcEvasionValue(a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,i=this.defenderEvasionValue,n=t.ship.morale.evasionModifier;return Object(a.b)({accuracy:r,evasion:i,moraleModifier:n,criticalRateMultiplier:e.criticalRateMultiplier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,a=r.ship.getDefensePower();return new i.a(e.postcap,a,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=o,o.criticalRateMultiplier=1.1},3727:function(e,r,t){"use strict";var i=t(157),a=t(344),n=t(99),o=t(512),s=function(){return(s=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},u=function(){function e(e){var r=this,t=e.attacker,i=e.defender,n=e.engagement,u=e.isCritical,c=void 0!==u&&u,l=e.time,p=void 0===l?"Day":l,f=e.remainingAmmoModifier,h=void 0===f?1:f,d=e.optionalPowerModifiers;this.isPossible=function(){var e=r,t=e.defender,i=e.attackCalculator;return!!t.ship.shipType.isSubmarineClass&&"None"!==i.type},this.getFormationModifiers=function(){var e=r,t=e.attacker,i=e.defender,n=t.formation.getModifiers(t.role).asw,o={power:n.power,accuracy:n.accuracy,evasion:i.formation.getModifiers(i.role).asw.evasion};return a.a.isIneffective(t.formation,i.formation)?s(s({},o),{accuracy:1}):o},this.attacker=t,this.defender=i,this.engagement=n,this.isCritical=c,this.time=p,this.remainingAmmoModifier=h,this.optionalPowerModifiers=d,this.attackCalculator=o.a.fromShip(t.ship,p)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,r=this.optionalPowerModifiers,t=this.getFormationModifiers().power,i=this.engagement.modifier;return this.attackCalculator.calcPower({formationModifier:t,engagementModifier:i,isCritical:e,optionalModifiers:r})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.getFormationModifiers().accuracy;return this.attackCalculator.calcAccuracy({formationModifier:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.getFormationModifiers().evasion;return this.defender.ship.calcEvasionValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,a=this.evasion,n=t.ship.morale.evasionModifier,o=e.criticalRateMultiplier;return Object(i.b)({accuracy:r,evasion:a,moraleModifier:n,criticalRateMultiplier:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=r.ship.getDefensePower(),a=this.attackCalculator.armorPenetration;return new n.a(e.postcap,i,r.ship.health.currentHp,t,a)},enumerable:!0,configurable:!0}),e}();r.a=u,u.cap=150,u.criticalRateMultiplier=1.1},3728:function(e,r,t){"use strict";var i=t(157),a=t(233),n=t(511),o=t(99),s=function(){function e(e){var r=this,t=e.attacker,i=e.defender,a=e.engagement,o=e.isCritical,s=void 0!==o&&o,u=e.remainingAmmoModifier,c=void 0===u?1:u,l=e.innateTorpedoAccuracy,p=void 0===l?0:l,f=e.optionalPowerModifiers;this.getFormationModifiers=function(){var e=r,t=e.attacker,i=e.defender;return{attacker:t.formation.getModifiers(t.role).torpedo,defender:i.formation.getModifiers(i.role).torpedo}},this.attacker=t,this.defender=i,this.engagement=a,this.isCritical=s,this.remainingAmmoModifier=c,this.innateTorpedoAccuracy=p,this.optionalPowerModifiers=f,this.attackCalculator=n.a.fromShip(t.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,r=this.optionalPowerModifiers,t=Object(a.d)(this.attacker,this.defender),i=this.getFormationModifiers().attacker.power,n=this.engagement.modifier;return this.attackCalculator.calcPower({fleetFactor:t,formationModifier:i,engagementModifier:n,isCritical:e,optionalModifiers:r})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=Math.floor(.2*this.power.preCritical),r=this.getFormationModifiers().attacker.accuracy,t=this.innateTorpedoAccuracy;return this.attackCalculator.calcAccuracy({formationModifier:r,powerModifier:e,innateTorpedoAccuracy:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.defender.ship,r=this.getFormationModifiers().defender.evasion,t=e.totalEquipmentStats((function(e){return e.improvement.torpedoEvasionModifier}));return e.calcEvasionValue(r,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,a=this.evasion,n=t.ship.morale.evasionModifier,o=e.criticalRateMultiplier;return Object(i.b)({accuracy:r,evasion:a,moraleModifier:n,criticalRateMultiplier:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=r.ship.getDefensePower();return new o.a(e.postcap,i,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=s,s.cap=150,s.criticalRateMultiplier=1.5,s.isPossible=function(e,r){return 0!==e.nakedStats.torpedo&&!r.isInstallation}},3729:function(e,r,t){"use strict";var i=t(513),a=t(99),n=t(157),o=t(49),s=function(){function e(e){var r=e.attacker,t=e.defender,a=e.specialAttack,n=e.isCritical,o=e.starshell,s=e.searchlight,u=e.nightContactModifier,c=e.remainingAmmoModifier,l=e.optionalPowerModifiers;this.attacker=r,this.defender=t,this.specialAttack=a,this.isCritical=n,this.starshell=o,this.searchlight=s,this.nightContactModifier=u,this.remainingAmmoModifier=c,this.optionalPowerModifiers=l,this.attackCalculator=new i.a(r.ship)}return Object.defineProperty(e.prototype,"contactModifiers",{get:function(){return 5===this.nightContactModifier?{power:5,accuracy:1.1,criticalRate:1.57}:{power:0,accuracy:1,criticalRate:e.criticalRateMultiplier}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,r=this.specialAttack,t=this.starshell,i=this.searchlight,a=e.formation,n=e.role,o=a.getModifiers(n).night.accuracy,s=null==r?void 0:r.modifier.accuracy,u=this.contactModifiers.accuracy,c=t?5:0,l=i?7:0;return this.attackCalculator.calcAccuracy({starshellModifier:c,contactModifier:u,searchlightModifier:l,formationModifier:o,specialAttackModifier:s})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,r=e.attacker,t=e.defender,i=e.isCritical,a=e.specialAttack,n=e.optionalPowerModifiers,s=r.role,u=r.formation.getModifiers(s).night.power,c=t.ship.isInstallation,l=r.ship.getSpecialEnemyModifiers(t.ship),p=Object(o.a)(l,n);return this.attackCalculator.calcPower({nightContactModifier:this.contactModifiers.power,formationModifier:u,specialAttack:a,isCritical:i,isAntiInstallation:c,modifiers:p})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiers(i).night.evasion,n=r.shipType.isHeavyCruiserClass?5:0;return r.calcEvasionValue(a,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,r=this.defender,t=this.defenderEvasionValue,i=this.contactModifiers,a=r.ship.morale.evasionModifier;return Object(n.b)({accuracy:e,evasion:t,moraleModifier:a,criticalRateMultiplier:i.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defensePower,t=this.remainingAmmoModifier,i=this.defender;return new a.a(e.postcap,r,i.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=s,s.criticalRateMultiplier=1.5},3730:function(e,r,t){"use strict";var i=function e(r,t,i){this.id=r,this.name=t,this.modifier=i,e.values.push(this)};r.a=i,i.values=[],i.Parallel=new i(1,"同航戦",1),i.HeadOn=new i(2,"反航戦",.8),i.CrossingTheTAdvantage=new i(3,"T有利",1.2),i.CrossingTheTDisadvantage=new i(4,"T不利",.6),i.random=function(e){void 0===e&&(e=!1);var r=Math.random();return r<.15?i.CrossingTheTAdvantage:r<.6?i.Parallel:r<.9||e?i.HeadOn:i.CrossingTheTDisadvantage}},3736:function(e,r,t){"use strict";var i=t(345),a=t(3136),n=t(49),o=t(99),s=t(157),u=function(){function e(e){var r=this,t=e.plane,i=e.target,a=e.contactModifier,u=e.proficiencyModifiers;this.calcPower=function(e){var t=r,i=t.slotSize,a=t.stat,o=t.typeModifier,s=t.contactModifier,u=t.proficiencyModifiers,c=o*(a*Math.sqrt(i)+0),l={a11:s},p=e?Object(n.c)(u.power):void 0;return Object(n.b)({basic:c,cap:150,modifiers:l,fm11next:p})},this.getHitRate=function(){var e=r,t=e.accuracy,i=e.evasion,a=e.proficiencyModifiers,n=e.target.morale.evasionModifier,o=a.hitRate,u=a.criticalRate;return Object(s.b)({accuracy:t,evasion:i,moraleModifier:n,hitRateBonus:o,criticalRateMultiplier:.2,criticalRateBonus:u})},this.getDamage=function(e){var t=r.target,i=r.calcPower(e).postcap;return new o.a(i,t.getDefensePower(),t.health.currentHp)},this.do=function(){var e=r.getHitRate(),t=Object(s.c)(e);if("Miss"!==t){var i=r.getDamage("Critical"===t);r.target.health.currentHp-=i.random()}},this.plane=t,this.target=i,this.contactModifier=a,this.proficiencyModifiers=u}return Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.plane.slotSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){var e=this.plane.is;return e("JetPoweredFighterBomber")?"JetPoweredFighterBomber":e("DiveBomber")?"DiveBomber":e("TorpedoBomber")?"TorpedoBomber":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stat",{get:function(){var e=this.plane;return e.is("DiveBomber")?e.gear.bombing:e.is("TorpedoBomber")?e.gear.torpedo:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeModifier",{get:function(){var e=this.type;return"JetPoweredFighterBomber"===e?1/Math.sqrt(2):"DiveBomber"===e?1:"TorpedoBomber"===e?Math.random()>.5?.8:1.5:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return 95},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.target.calcEvasionValue(1)},enumerable:!0,configurable:!0}),e}(),c=t(41),l=function e(r,t,i,a){var n=this;this.playerFleet=r,this.enemyFleet=t,this.enemyFormation=i,this.contactModifier=a,this.getTarget=function(){var e=n.enemyFleet.nonNullableShips.filter((function(e){return!e.shipType.isSubmarineClass})),r=Object(c.d)(e),t=e[0];if(r!==t)return r;if(!(Math.random()<n.enemyFormation.protectionRate))return r;var i=e.filter((function(e){return e!==r&&!e.isInstallation&&"Less"===e.health.damage}));return 0===i.length?r:Object(c.d)(i)},this.do=function(){var r=n,t=r.playerFleet,i=r.contactModifier;t.nonNullableShips.forEach((function(r){var t=r.getNormalProficiencyModifiers();r.planes.filter(e.isAirstrikePlane).forEach((function(e){var r=n.getTarget();new u({plane:e,target:r,contactModifier:i,proficiencyModifiers:t}).do()}))}))}},p=l;l.isAirstrikePlane=function(e){return e.slotSize>0&&(e.is("TorpedoBomber")||e.is("DiveBomber"))};var f=t(225),h=t(276),d=function(e,r){var t=i.a.fromFighterPower(e.fighterPower,r.fighterPower),a=t.constant;return e.planes.filter((function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")})).forEach((function(e){var r=function(e){var r,t=e.slotSize,i=e.airControlStateConstant,a=e.side,n=e.fighterCombatResistModifier;if("Player"===a){var o=i/4,s=Math.floor(i/3*100);r=Math.floor(Math.random()*(s+1))/100+o}else{s=11-i;r=.35*Math.floor(Math.random()*(s+1))+.65*Math.floor(Math.random()*(s+1))}var u=r/10;return Math.floor(t*u*n)}({slotSize:e.slotSize,airControlStateConstant:a,side:"Player",fighterCombatResistModifier:1});e.shotdown(r)})),t},b=function(e){var r=e.playerFleet,t=e.enemyFleet,i=e.enemyFormation,n=d(r,t),o=new a.a(r.planes).getContactModifier(n);return function(e){var r=e.playerFleet,t=e.enemyFleet,i=e.enemyFormation,a=r.planes.filter(p.isAirstrikePlane),n=f.a.calcFleetAntiAir(t,"Enemy",i.fleetAntiAirModifier);a.forEach((function(e){var r=Object(c.d)(t.nonNullableShips),i=new h.a(r,"Enemy",n).getShotdownNumber(e);e.shotdown(i)}))}(e),new p(r,t,i,o).do(),n},y=function(){function e(){var e=this;this.Less=0,this.Shouha=0,this.Chuuha=0,this.Taiha=0,this.Sunk=0,this.increase=function(r){var t=r.health;e[t.damage]+=1}}return Object.defineProperty(e.prototype,"total",{get:function(){return this.Less+this.Shouha+this.Chuuha+this.Taiha+this.Sunk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lessRate",{get:function(){return this.Less/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouhaRate",{get:function(){return this.Shouha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chuuhaRate",{get:function(){return this.Chuuha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){return this.Taiha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sunkRate",{get:function(){return this.Sunk/this.total},enumerable:!0,configurable:!0}),e}(),m=function(){function e(){var e=this;this.countMap=new Map,this.increase=function(r){var t,i=r.slotSize,a=null!==(t=e.countMap.get(i))&&void 0!==t?t:0;e.countMap.set(i,a+1)},this.entries=function(){var r=e,t=r.total,i=r.countMap;return Array.from(i.entries(),(function(e){return[e[0],e[1]/t]}))}}return Object.defineProperty(e.prototype,"total",{get:function(){var e=0;return this.countMap.forEach((function(r){e+=r})),e},enumerable:!0,configurable:!0}),e}(),g=function(e){var r=this;this.ship=e,this.init=function(){var e=r,t=e.ship,i=e.initialSlots;t.health.currentHp=r.initialHp,i.forEach((function(e,r){t.slots[r]=e}))},this.initialHp=e.health.currentHp,this.initialSlots=e.slots.concat()},v=function(e){var r=this;this.init=function(){r.shipInitialStates.forEach((function(e){return e.init()}))},this.shipInitialStates=e.nonNullableShips.map((function(e){return new g(e)}))},S=t(3746),A=function(e){var r=this;this.creater=e,this.data=new Map,this.update=function(e){var t=r.data.get(e);t||(t=r.creater(),r.data.set(e,t)),t.increase(e)},this.entries=function(){return Array.from(r.data.entries())}},C=function(){function e(){var e=this;this.data=new Map,this.increase=function(r){var t=e.data.get(r);t?e.data.set(r,t+1):e.data.set(r,1)},this.getRate=function(r){var t;return(null!==(t=e.data.get(r))&&void 0!==t?t:0)/e.total},this.getRateList=function(){var r=[];e.data.forEach((function(t,i){r.push([i,e.getRate(i)])}));var t=0;return r.sort((function(e,r){var t=e[0];return r[0]-t})).map((function(e){var r=e[0],i=e[1];return[r,i,t+=i]}))}}return Object.defineProperty(e.prototype,"total",{get:function(){var e=0;return this.data.forEach((function(r){e+=r})),e},enumerable:!0,configurable:!0}),e}(),w=function(){var e=this;this.damageLog=new A((function(){return new y})),this.planeLossLog=new A((function(){return new m})),this.sunkCounter=new C,this.update=function(r,t){t.nonNullableShips.forEach((function(r){e.damageLog.update(r)}));var i=t.nonNullableShips.filter((function(e){return"Sunk"===e.health.damage})).length;e.sunkCounter.increase(i),r.planes.forEach((function(r){e.planeLossLog.update(r)}))}},M=function(e,r,t){var i=this;this.playerFleet=e,this.enemyFleet=r,this.enemyFormation=t,this.record=new w,this.init=function(){var e=i.initialState,r=e.playerFleet,t=e.enemyFleet;r.init(),t.init()},this.once=function(){var e=i,r=e.playerFleet,t=e.enemyFleet,a=e.enemyFormation;b({playerFleet:r,enemyFleet:t,enemyFormation:a}),i.record.update(r,t),i.init()},this.do=function(e){return Object(S.a)(e,i.once),i.record},this.initialState={playerFleet:new v(e),enemyFleet:new v(r)}};r.a=M},3745:function(e,r,t){"use strict";var i=t(3669),a=t(3671),n=t(3672),o=t(37),s=t(3152),u=function(){return(u=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},c=function(e){return"number"==typeof e?[e,e]:e},l=function(){function e(r,t,i){var a=this;this.shipType=t,this.shipClass=i,this.getNextShip=function(){if(a.canRemodel)return e.all.find((function(e){return a.remodel.nextId===e.shipId}))},this.getPrevShip=function(){return e.all.find((function(e){return e.remodel.nextId===a.shipId}))},this.getRemodelGroupShips=function(){return e.all.filter((function(e){return e.remodelGroup===a.remodelGroup}))},this.shipId=r.id,this.shipClassId=i.id,this.sortNo=r.sortNo,this.sortId=r.sortId,this.name=r.name,this.readingName=r.readingName,this.hp=c(r.hp),this.armor=c(r.armor),this.firepower=c(r.firepower),this.torpedo=c(r.torpedo),this.antiAir=c(r.antiAir),this.luck=c(r.luck),this.asw=c(r.asw),this.evasion=c(r.evasion),this.los=c(r.los),this.speed=r.speed,this.range=r.range,this.fuel=r.fuel,this.ammo=r.ammo,this.slotCapacities=r.slotCapacities.concat(),this.initialEquipment=r.equipments.map((function(e){return"number"==typeof e?{id:e,improvement:0}:e})),r.remodel?this.remodel=r.remodel:this.remodel={nextId:0,nextLevel:0};var n=r.equippable?r.equippable:{};this.equippable=u({categories:this.shipType.equippableCategoryIds,expantionSlot:[]},n),e.all.push(this)}return Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.shipId>e.abyssalIdFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRemodel",{get:function(){return this.remodel.nextId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canConvert",{get:function(){if(!this.canRemodel)return!1;var e=this.getNextShip();if(!e)return!1;if(e.remodel.nextId===this.shipId)return!0;var r=e.getNextShip();return!!r&&r.remodel.nextId===this.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){if(this.remodelGroupMemo)return this.remodelGroupMemo;for(var e=this.shipId,r=this.getPrevShip();r;)e=r.shipId,r=r.getPrevShip();return this.remodelGroupMemo=e,e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.sortId%10},enumerable:!0,configurable:!0}),e}(),p=l;l.all=new Array,l.abyssalIdFrom=1500;var f=t(496),h=t(3670),d=t(92),b=function(){function e(e,r,t){var i=this;this.id=e,this.name=r,this.equippableCategoryIds=t,this.is=function(e){return i.id===d.a[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(i.is)},e===d.a.Battlecruiser&&(this.name="巡洋戦艦")}return Object.defineProperty(e.prototype,"isDestroyer",{get:function(){return this.id===d.a.Destroyer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLightCruiserClass",{get:function(){return this.any("LightCruiser","TorpedoCruiser","TrainingCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeavyCruiserClass",{get:function(){return this.any("HeavyCruiser","AviationCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBattleshipClass",{get:function(){return this.any("Battlecruiser","Battleship","AviationBattleship","SuperDreadnoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraftCarrierClass",{get:function(){return this.any("LightAircraftCarrier","AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubmarineClass",{get:function(){return[d.a.Submarine,d.a.SubmarineAircraftCarrier].includes(this.id)},enumerable:!0,configurable:!0}),e}(),y=b;b.all=h.a.map((function(e){var r=Object.entries(e.api_equip_type).filter((function(e){e[0];return 1===e[1]})).map((function(e){var r=e[0];e[1];return Number(r)}));return new b(e.api_id,e.api_name,r)})),b.fromId=function(e){var r=b.all.find((function(r){return r.id===e}));if(r)return r;var t=new b(e,"",[]);return b.all.push(t),t};var m=function(e){var r=this;void 0===e&&(e=i.a),this.shipsData=e,this.findMasterGear=function(e){return r.gears.find((function(r){return r.id===e}))},this.findMasterShip=function(e){return r.ships.find((function(r){return r.shipId===e}))},this.shipIdToName=function(e){var t=r.ships.find((function(r){return r.shipId===e}));return t?t.name:""},this.shipNameToId=function(e){var t=r.ships.find((function(r){return r.name===e}));return t?t.shipId:0},this.shipClassIdToName=function(e){return f.a.fromId(e).name},this.shipTypeIdToName=function(e){return y.fromId(e).name},this.gearIdToName=function(e){var t=r.findMasterGear(e);return t?t.name:""},this.gearNameToId=function(e){var t=r.gears.find((function(r){return r.name===e}));return t&&t.id},this.gears=a.a.map((function(e){var r=e.api_id,t=e.api_type[2],i=o.b.find(t,r),a=n.a.includes(r);return new s.a(e,i,a)})),this.ships=e.map((function(e){var r=y.fromId(e.shipTypeId),t=f.a.fromId(e.classId);return new p(e,r,t)}))};r.a=m},39:function(e,r,t){"use strict";var i=function(){function e(r,t,i){this.id=r,this.key=t,this.name=i,e.values.push(this)}return Object.defineProperty(e.prototype,"isCombined",{get:function(){return this!==e.Single},enumerable:!0,configurable:!0}),e}();r.a=i,i.values=[],i.Single=new i(0,"Single","通常艦隊"),i.CarrierTaskForce=new i(1,"CarrierTaskForce","空母機動部隊"),i.SurfaceTaskForce=new i(2,"SurfaceTaskForce","水上打撃部隊"),i.TransportEscort=new i(3,"TransportEscort","輸送護衛部隊"),i.Combined=new i(5,"Combined","敵連合"),i.fromId=function(e){return i.values.find((function(r){return r.id===e}))},i.fromString=function(e){return i.values.find((function(r){return r.key===e||r.name===e}))}},41:function(e,r,t){"use strict";t.d(r,"b",(function(){return i})),t.d(r,"c",(function(){return a})),t.d(r,"e",(function(){return n})),t.d(r,"a",(function(){return o})),t.d(r,"d",(function(){return s}));var i=function(e){return null!=e},a=i,n=function(e,r){return r<=e?r:e+Math.sqrt(r-e)},o=function(e){return e.health.currentHp+e.getDefensePower().max},s=function(e){return e[Math.floor(Math.random()*e.length)]}},49:function(e,r,t){"use strict";t.d(r,"a",(function(){return o})),t.d(r,"c",(function(){return u})),t.d(r,"b",(function(){return c}));var i=t(516),a=t(41),n=function(e,r){Object.entries(r).forEach((function(r){var t,i=r[0],a=r[1];"number"==typeof a&&(t=i.startsWith("a")?(e[i]||1)*a:(e[i]||0)+a,e[i]=t)}))},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t={};return e.forEach((function(e){return e&&n(t,e)})),t},s=function(e,r,t){return void 0===e&&(e=1),void 0===r&&(r=0),void 0===t&&(t=!1),function(i){var a=i*e+r;return t?Math.floor(a):a}},u=function(e){return void 0===e&&(e=1),function(r){return Math.floor(1.5*r*e)}},c=function(e){var r=e.basic,t=e.cap,n=e.modifiers,o=e.fm14prev,u=e.fm11next,c=function(e,r){var t=e.a12,a=e.a13,n=e.a13next,o=e.a14,u=e.b12,c=e.b13,l=e.b13next,p=e.b14,f=s(t,u),h=s(a,c),d=s(n,l),b=s(o,p);return r?Object(i.a)(f,h,d,r,b):Object(i.a)(f,h,d,b)}(n,o),l=function(e){var r=e.a5,t=e.a6,a=e.a11,n=e.b5,o=e.b6,u=e.b11,c=s(r,n,!0),l=s(t,o,!0),p=s(a,u);return Object(i.a)(c,l,p)}(n),p=c(r),f=t<p,h=Object(a.e)(t,p),d=l(h);return u&&(d=u(d)),{precap:p,isCapped:f,capped:h,postcap:d}}},492:function(e,r,t){"use strict";t.d(r,"b",(function(){return a}));var i=t(197),a=["hp","firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","luck"],n=function(){function e(e,r,t){this.master=e,this.level=r,this.increased=t}return e.prototype.getIncreasedStat=function(e){var r=this.increased;if(!r)return 0;var t=r[e];return t?t>1e5?1e5:t:0},Object.defineProperty(e.prototype,"hp",{get:function(){return Object(i.a)(this.master.hp,this.level)+this.getIncreasedStat("hp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower[1]+this.getIncreasedStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo[1]+this.getIncreasedStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir[1]+this.getIncreasedStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor[1]+this.getIncreasedStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return Object(i.b)(this.master.los,this.level)+this.getIncreasedStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return Object(i.b)(this.master.asw,this.level)+this.getIncreasedStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return Object(i.b)(this.master.evasion,this.level)+this.getIncreasedStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck[0]+this.getIncreasedStat("luck")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed+this.getIncreasedStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range+this.getIncreasedStat("range")},enumerable:!0,configurable:!0}),e}();r.a=n},493:function(e,r,t){"use strict";t.d(r,"b",(function(){return i})),t.d(r,"a",(function(){return a}));var i=function(e){var r=e.hasArmorPiercingShell,t=e.hasMainGun,i=e.hasRader,a=e.hasSecondaryGun;return r&&t?a&&i?{power:1.15,accuracy:1.3}:a?{power:1.15,accuracy:1.2}:i?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}:{power:1,accuracy:1}},a=function(e){var r=e.isLightCruiserClass,t=e.isZaraClass,i=e.singleGunCount,a=e.twinGunCount,n=e.zaraGunCount;return r?Math.sqrt(i)+2*Math.sqrt(a):t?Math.sqrt(n):0}},496:function(e,r,t){"use strict";var i=t(3153),a=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),a=0;for(r=0;r<t;r++)for(var n=arguments[r],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},n=Object.entries(i.b).filter((function(e){return"number"==typeof e[1]})),o=function(){function e(e,r){var t=this;this.name=e,this.id=r,this.is=function(e){return t.id===i.a[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(t.is)}}return e.fromId=function(r){var t=e.all.find((function(e){return e.id===r}));if(t)return t;var i=new e("unkown",r);return e.all.push(i),i},Object.defineProperty(e.prototype,"isSpecialTypeDestroyer",{get:function(){return this.any("FubukiClass","AyanamiClass","AkatsukiClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsNavy",{get:function(){return this.any("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoyalNavy",{get:function(){return this.any("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass")},enumerable:!0,configurable:!0}),e}();r.a=o,o.all=n.map((function(e){return new(o.bind.apply(o,a([void 0],e)))}))},497:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var i=t(3633),a=function(e,r){var t=Object(i.a)(e.filter((function(e){return e.level<=r})),"value");return t?t.value:0},n={from:function(e){var r=function(r){return e.includes(r)};return r("Fighter")?"Fighter":r("SeaplaneBomber")?"SeaplaneBomber":r("DiveBomber")||r("TorpedoBomber")||r("ReconnaissanceAircraft")?"Other":"None"}},o=function(){function e(e,r){void 0===e&&(e=0),this.internal=e,this.type=r}return e.internalToLevel=function(r){return e.internalBounds.filter((function(e){return e<=r})).length-1},Object.defineProperty(e.prototype,"visible",{get:function(){return"None"!==this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return e.internalToLevel(this.internal)},set:function(r){this.internal=e.internalBounds[r]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerBonus",{get:function(){var r=this.internal,t=this.level,i=this.type;if(r<=0)return 0;var n=[];return"Fighter"===i?n=e.fighterPowerLevelBonuses.fighter:"SeaplaneBomber"===i&&(n=e.fighterPowerLevelBonuses.seaplaneBomber),a(n,t)+Math.sqrt(r/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalPowerModifier",{get:function(){var r=this.internal,t=this.level,i=a(e.criticalModifierLevelBonuses,t);return Math.floor(Math.sqrt(r)+i)},enumerable:!0,configurable:!0}),e}();r.b=o,o.internalBounds=[0,10,25,40,55,70,85,100],o.fighterPowerLevelBonuses={fighter:[{level:7,value:22},{level:5,value:14},{level:4,value:9},{level:3,value:5},{level:2,value:2},{level:0,value:0}],seaplaneBomber:[{level:7,value:6},{level:5,value:3},{level:2,value:1},{level:0,value:0}]},o.criticalModifierLevelBonuses=[{level:7,value:10},{level:6,value:7},{level:5,value:5},{level:4,value:4},{level:3,value:3},{level:2,value:2},{level:1,value:1},{level:0,value:0}]},510:function(e,r,t){"use strict";var i=t(49),a=t(232),n=function(){function e(e){var r=this;this.ship=e,this.getCarrierShellingFm=function(e){void 0===e&&(e=!1);var t=r,i=t.ship;if("Shelling"!==t.type){var a=i.stats.torpedo,n=e?i.totalEquipmentStats((function(e){return e.is("AntiInstallationBomber")?e.bombing:0})):i.totalEquipmentStats("bombing"),o=Math.floor(Math.floor(1.3*n)+a)+15;return function(e){return 25+Math.floor(1.5*(e+o))}}},this.calcPower=function(e){var t=r.ship,a=e.formationModifier,n=e.engagementModifier,o=e.isCritical,s=e.isAntiInstallation,u=4+t.stats.firepower,c={a14:a*n*t.health.shellingPowerModifier},l=r.getCarrierShellingFm(s),p=o?Object(i.c)():void 0;return Object(i.b)({basic:u,cap:150,modifiers:c,fm14prev:l,fm11next:p})},this.calcAccuracy=function(e){var t=r.accuracyShipFactors,i=t.shipAccuracy,a=t.equipmentAccuracy,n=t.moraleModifier,o=e.formationModifier,s=Math.floor(64+i+a);return Math.floor(s*o*n)}}return Object.defineProperty(e.prototype,"type",{get:function(){return Object(a.b)(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracyShipFactors",{get:function(){var e=this.ship;return{shipAccuracy:e.shipAccuracy,equipmentAccuracy:e.totalEquipmentStats("accuracy"),moraleModifier:e.morale.getAccuracyModifier("shelling")}},enumerable:!0,configurable:!0}),e}();r.a=n},511:function(e,r,t){"use strict";var i=t(49),a=function(){return(a=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},n=function(e){var r=this;this.state=e,this.calcPower=function(e){return function(e){var r=e.torpedo,t=e.improvementModifier,n=e.healthModifier,o=e.fleetFactor,s=e.formationModifier,u=e.engagementModifier,c=e.isCritical,l=e.optionalModifiers,p=s*u*n,f=Object(i.a)({a14:p},l),h=r+t+o,d=Object(i.b)({basic:h,cap:150,modifiers:f}),b=d.postcap;if(!c)return a(a({},d),{preCritical:b});var y=Math.floor(1.5*d.postcap);return a(a({},d),{preCritical:b,postcap:y})}(a(a({},r.state.power),e))},this.calcAccuracy=function(e){return t=a(a({},r.state.accuracy),e),i=t.shipAccuracy,n=t.equipmentAccuracy,o=t.improvementModifier,s=t.powerModifier,u=t.innateTorpedoAccuracy,c=t.formationModifier,l=t.moraleModifier,p=85+i+n+o+s+u,Math.floor(p*c*l);var t,i,n,o,s,u,c,l,p}};r.a=n,n.fromShip=function(e){var r=e.shipAccuracy,t={power:{torpedo:e.stats.torpedo,improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.torpedoPowerModifier})),healthModifier:e.health.torpedoPowerModifier},accuracy:{shipAccuracy:r,equipmentAccuracy:e.totalEquipmentStats("accuracy"),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.torpedoAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("torpedo")}};return new n(t)}},512:function(e,r,t){"use strict";var i=t(289),a=t(49),n=function(){return(n=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},o=function(e){var r=e.hasGear,t=1,i=1;return(r("Sonar")||r("LargeSonar"))&&r("DepthCharge")&&(t=1.15),r("AdditionalDepthCharge")&&r("DepthChargeProjector")&&(i=r("Sonar")?1.25:1.1),t*i},s=function(e){var r=e.shipType.is("CoastalDefenseShip")?1:0;return e.totalEquipmentStats((function(e){return e.is("AdditionalDepthCharge")?Math.sqrt(e.asw-2)+r:0}))},u=function(){function e(e){var r=this;this.state=e,this.calcBasicPower=function(e){void 0===e&&(e=0);var t=r.state.power,i=t.nakedAsw,a=t.equipmentAsw,n=t.improvementModifier,o=t.typeConstant;return 2*Math.sqrt(i)+1.5*a+n+o},this.calcPower=function(e){var t,o=r.state.power.proficiencyModifier;return e.isCritical&&(t=Object(a.c)(o)),i.a.createPower(n(n(n({},r.state.power),e),{fm11next:t}))},this.calcAccuracy=function(e){return i.a.calcAccuracy(n(n({},r.state.accuracy),e))}}return Object.defineProperty(e.prototype,"armorPenetration",{get:function(){return this.state.armorPenetration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.state.type},enumerable:!0,configurable:!0}),e}();r.a=u,u.fromShip=function(e,r){var t=function(e,r){var t=e.shipAccuracy,i=function(e,r){return void 0===r&&(r=!1),!r&&function(e){return!(!e.shipType.any("AviationCruiser","AviationBattleship","SeaplaneTender","LightAircraftCarrier","AmphibiousAssaultShip")&&!e.shipClass.is("RevisedKazahayaClass"))&&e.planes.some((function(e){return e.slotSize>0&&e.is("AswAircraft")}))}(e)?"AircraftCarrier":function(e){return 0!==e.nakedStats.asw&&!e.shipClass.any("FusouClass","IseClass","R1")}(e)?"DepthCharge":"None"}(e,"Night"===r),a=e.totalEquipmentStats((function(e){return e.is("Sonar")?2*e.asw:e.is("AdditionalDepthCharge")?e.asw:0})),n=1;return"AircraftCarrier"!==i||"Opening"===r||e.shipClass.is("RevisedKazahayaClass")||(n=e.getNormalProficiencyModifiers().power),{power:{nakedAsw:e.nakedStats.asw,equipmentAsw:e.totalEquipmentStats((function(e){return e.is("AswGear")?e.asw:0})),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.aswPowerModifier})),typeConstant:"DepthCharge"===i?13:8,healthModifier:e.health.aswPowerModifier,synergyModifier:o(e),proficiencyModifier:n},accuracy:{shipAccuracy:t,aswEquipmentModifier:a,improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.aswAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("asw")},armorPenetration:s(e),type:i}}(e,r);return new u(t)}},513:function(e,r,t){"use strict";var i=t(517),a=t(49),n=function(e){var r=e.gearId;return 258===r||259===r},o=function(){function e(e){var r=this;this.ship=e,this.calcNightAerialAttackPower=function(e){var t=r,a=t.ship;return"NightAerialAttack"!==t.type?0:a.nakedStats.firepower+Object(i.a)(a.planes,(function(r){return r.calcNightAerialAttackPower(e)}))},this.calcBasicPower=function(e,t){var i=r,a=i.ship,n=i.type,o=a.stats.firepower,s=t?0:a.stats.torpedo,u=a.totalEquipmentStats((function(e){return e.improvement.nightAttackPowerModifier}));return"NightAerialAttack"===n?r.calcNightAerialAttackPower(t)+e:o+s+u+e},this.getCriticalFm=function(){if("NightAerialAttack"===r.type){var e=r.ship.getNormalProficiencyModifiers();return Object(a.c)(e.power)}return Object(a.c)()},this.calcPower=function(e){var t=e.nightContactModifier,i=e.formationModifier,n=e.specialAttack,o=e.isCritical,s=e.isAntiInstallation,u=r.calcBasicPower(t,s),c=r.ship.health.nightAttackPowerModifier,l=1,p=1;n&&(l=n.modifier.power,n.isDestroyerCutin&&(p=r.typeDModifier));var f=i*c*l*p,h=r.ship.getCruiserFitBonus(),d=Object(a.a)({a14:f,b14:h},e.modifiers),b=o?r.getCriticalFm():void 0;return Object(a.b)({basic:u,cap:300,modifiers:d,fm11next:b})},this.calcAccuracy=function(e){var t=e.starshellModifier,i=e.contactModifier,a=e.searchlightModifier,n=e.formationModifier,o=e.specialAttackModifier,s=void 0===o?1:o,u=e.fitGunBonus,c=void 0===u?0:u,l=r.ship,p=l.shipAccuracy,f=l.shipType,h=l.hasGear,d=l.totalEquipmentStats("accuracy"),b=l.totalEquipmentStats((function(e){return e.improvement.nightAttackAccuracyModifier})),y=l.morale.getAccuracyModifier("night"),m=0;f.isHeavyCruiserClass&&(h(6)&&(m=10),(h(90)||h(50))&&(m=15));var g=Math.floor((69+t)*i+p+d+b);return Math.floor(g*n*y*s+a+m+c)}}return Object.defineProperty(e.prototype,"type",{get:function(){return function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.shipId)&&!e.hasGear(n))&&e.planes.some((function(e){return e.slotSize>0&&e.isNightPlane})))}(this.ship)?"NightAerialAttack":"NightAttack"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeDModifier",{get:function(){var e=this.ship,r=e.countGear(267),t=e.countGear(366),i=r+t,a=1;return 0===i||(1===i&&(a=1.25),i>=2&&(a=1.4),t&&(a*=1.05)),a},enumerable:!0,configurable:!0}),e}();r.a=o},514:function(e,r,t){"use strict";var i=t(41),a=t(3633),n=t(3159),o=function(e){if(Array.isArray(e)){var r=e.map(o);return Object(a.a)(r,(function(e){return e&&e.id}))}var t=e,i=Object(n.a)(100);return l.getPossibleAntiAirCutins(t).find((function(e){return e.isSpecialAaci()?e.probability>Object(n.a)(100):e.probability>i}))},s=o,u=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),a=0;for(r=0;r<t;r++)for(var n=arguments[r],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},c=function(){function e(e,r,t,i){var a=this;this.id=e,this.minimumBonus=r,this.fixedAirDefenseModifier=t,this.probability=i,this.isSpecialAaci=function(){return[34,35,39,40,41].includes(a.id)}}return e.fromId=function(e){return this.all.find((function(r){return r.id===e}))},e}(),l=r.a=c;c.all=[[1,8,1.7,65],[2,7,1.7,58],[3,5,1.6,50],[4,7,1.5,52],[5,5,1.5,55],[6,5,1.45,40],[7,4,1.35,45],[8,5,1.4,50],[9,3,1.3,40],[10,9,1.65,60],[11,7,1.5,55],[12,4,1.25,45],[13,5,1.35,35],[14,5,1.45,63],[15,4,1.3,58],[16,5,1.4,60],[17,3,1.25,55],[18,3,1.2,60],[19,6,1.45,55],[20,4,1.25,70],[21,6,1.45,60],[22,3,1.2,63],[23,2,1.05,80],[24,4,1.25,60],[25,8,1.55,60],[26,7,1.4,60],[28,5,1.4,53],[29,6,1.55,58],[30,4,1.3,42],[31,3,1.25,50],[32,4,1.2,32],[33,4,1.35,42],[34,8,1.6,60],[35,7,1.55,53],[36,7,1.55,59],[37,5,1.45,38],[39,11,1.7,60],[40,11,1.7,60],[41,10,1.65,60]].map((function(e){return new(c.bind.apply(c,u([void 0],e)))})),c.try=s,c.getPossibleAntiAirCutins=function(e){return function(e){var r,t=e.shipId,i=e.hasGear;!function(e){e[e.MayaKai2=428]="MayaKai2",e[e.IsuzuKai2=141]="IsuzuKai2",e[e.KasumiKai2B=470]="KasumiKai2B",e[e.KinuKai2=487]="KinuKai2",e[e.YuraKai2=488]="YuraKai2",e[e.MusashiKai=148]="MusashiKai",e[e.MusashiKai2=546]="MusashiKai2",e[e.IsokazeBKai=557]="IsokazeBKai",e[e.HamakazeBKai=558]="HamakazeBKai",e[e.SatsukiKai2=418]="SatsukiKai2",e[e.FumizukiKai2=548]="FumizukiKai2",e[e.Uit25=539]="Uit25",e[e.I504=530]="I504",e[e.TatsutaKai2=478]="TatsutaKai2"}(r||(r={}));var a=function(r){return e.masterId===r},n=function(e){return e.is("HighAngleMount")},o=function(e){return n(e)&&e.antiAir>=8},s=function(e){return e.is("Radar")},u=function(e){return e.is("AirRadar")},c=function(e){return e.is("AntiAircraftGun")},l=function(e){return c(e)&&e.antiAir>=9},p=function(e){return c(e)&&e.antiAir>=3&&e.antiAir<9},f=function(e){return 274===e.gearId},h=function(e){return e.is("AntiAircraftShell")},d=function(e){return e.is("AntiAircraftFireDirector")},b=function(e){return e.category.any("LargeCaliberMainGun","LargeCaliberMainGun2")},y=function(r,t){return e.countGear(r)>=t},m=function(r){return e.hasGear(r)},g=[];if(e.shipClass.is("FletcherClass")){var v=e.countGear(284)+e.countGear(313),S=e.countGear(308);S>=2&&g.push(34),S>0&&v>0&&g.push(35),v>=2&&(e.hasGear(307)&&g.push(36),g.push(37))}var A=e.countGear(363),C=e.countGear(362)+A;return e.shipClass.is("AtlantaClass")&&C>=2&&(A>=1&&g.push(39),e.hasGear(307)&&g.push(40),g.push(41)),e.shipClass.is("AkizukiClass")&&m(n)?(y(n,2)&&m(s)&&g.push(1),m(s)&&g.push(2),y(n,2)&&g.push(3)):(a(r.MayaKai2)&&m(n)&&m(l)&&(m(u)&&g.push(10),g.push(11)),a(r.IsuzuKai2)&&m(n)&&m(c)&&(m(u)&&g.push(14),g.push(15)),a(r.KasumiKai2B)&&m(n)&&m(c)&&(m(u)&&g.push(16),g.push(17)),622===t&&i("HighAngleMount")&&i("AntiAircraftGun")&&i("AirRadar")&&g.push(16),a(r.KinuKai2)&&m(l)&&m((function(e){return n(e)&&e.antiAir<8}))&&g.push(19),a(r.YuraKai2)&&m(n)&&m(u)&&g.push(21),e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")&&m(f)&&m(h)&&m(u)&&g.push(25),m(d)&&m(b)&&m(h)&&m(u)&&g.push(4),y(o,2)&&m(u)&&g.push(5),m(d)&&m(b)&&m(h)&&g.push(6),m(o)&&m(u)&&g.push(8),m(d)&&m(n)&&m(u)&&g.push(7),a(r.MusashiKai2)&&m((function(e){return 275===e.gearId}))&&m(s)&&g.push(26),(e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")||a(r.MusashiKai)||a(r.MusashiKai2))&&m(f)&&m(u)&&g.push(28),(a(r.IsokazeBKai)||a(r.HamakazeBKai))&&m(n)&&m(u)&&g.push(29),m(d)&&m(n)&&g.push(9),"Gotland改"===e.name&&e.hasGear(n)&&e.hasGear((function(e){return e.is("AntiAircraftGun")&&e.antiAir>=4}))&&g.push(33),m(l)&&m(u)&&e.countGear((function(e){return e.is("AntiAircraftGun")&&e.antiAir>=3}))>=2&&g.push(12),m(o)&&m(l)&&m(u)&&g.push(13),a(r.SatsukiKai2)&&m(l)&&g.push(18),a(r.KinuKai2)&&m(l)&&g.push(20),a(r.FumizukiKai2)&&m(l)&&g.push(22),(a(r.Uit25)||a(r.I504))&&m(p)&&g.push(23),["龍田改二","天龍改二"].includes(e.name)&&m(n)&&m(p)&&g.push(24),["天龍改二","Gotland改"].includes(e.name)&&e.countGear(n)>=3&&g.push(30),"天龍改二"===e.name&&e.countGear(n)>=2&&g.push(31),(e.shipClass.isRoyalNavy||e.shipClass.is("KongouClass")&&e.name.includes("改二"))&&(e.countGear(301)>=2||e.hasGear(301)&&e.hasGear(191)||e.hasGear(300)&&e.hasGear(191))&&g.push(32)),g}(e).map((function(e){return c.fromId(e)})).filter(i.b)}},515:function(e,r,t){"use strict";var i;!function(e){e.MainFleet="MainFleet",e.EscortFleet="EscortFleet"}(i||(i={})),r.a=i},559:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var i=function(e){var r=e.slotSize,t=e.antiAir,i=e.interception,a=void 0===i?0:i,n=e.antiBomber,o=void 0===n?0:n,s=e.improvementModifier,u=void 0===s?0:s,c=e.proficiencyModifier,l=void 0===c?0:c,p=e.isInterception,f=t+1.5*a+u;return void 0!==p&&p&&(f=t+a+2*o+u),Math.floor(f*Math.sqrt(r)+l)}},560:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var i=function(e,r){return e.includes(r)}},561:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var i=function(e){var r=e.evasion,t=e.luck,i=e.improvementModifier,a=e.formationModifier,n=e.postcapModifier,o=void 0===n?0:n,s=e.additionalFm,u=Math.floor((r+Math.sqrt(2*t))*a),c=u;u>=65?c=Math.floor(55+2*Math.sqrt(u-65)):u>=40&&(c=Math.floor(40+3*Math.sqrt(u-40)));var l=Math.floor(c+o)+i;return s?s(l):l}},66:function(e,r,t){"use strict";t.r(r);var i=t(493);t.d(r,"getApShellModifiers",(function(){return i.b})),t.d(r,"calcCruiserFitBonus",(function(){return i.a}));var a=t(559);t.d(r,"calcFighterPower",(function(){return a.a}));var n=t(197);t.d(r,"calcStatAtLevel",(function(){return n.b})),t.d(r,"calcHpAtLevel",(function(){return n.a}));var o=t(289);t.d(r,"Asw",(function(){return o.a}));var s=t(157);t.d(r,"calcHitRateBasis",(function(){return s.a})),t.d(r,"createHitRate",(function(){return s.b})),t.d(r,"getHitStatus",(function(){return s.c}));var u=t(561);t.d(r,"calcEvasionValue",(function(){return u.a}))},92:function(e,r,t){"use strict";var i;!function(e){e[e.CoastalDefenseShip=1]="CoastalDefenseShip",e[e.Destroyer=2]="Destroyer",e[e.LightCruiser=3]="LightCruiser",e[e.TorpedoCruiser=4]="TorpedoCruiser",e[e.HeavyCruiser=5]="HeavyCruiser",e[e.AviationCruiser=6]="AviationCruiser",e[e.LightAircraftCarrier=7]="LightAircraftCarrier",e[e.Battlecruiser=8]="Battlecruiser",e[e.Battleship=9]="Battleship",e[e.AviationBattleship=10]="AviationBattleship",e[e.AircraftCarrier=11]="AircraftCarrier",e[e.SuperDreadnoughts=12]="SuperDreadnoughts",e[e.Submarine=13]="Submarine",e[e.SubmarineAircraftCarrier=14]="SubmarineAircraftCarrier",e[e.Transport=15]="Transport",e[e.SeaplaneTender=16]="SeaplaneTender",e[e.AmphibiousAssaultShip=17]="AmphibiousAssaultShip",e[e.ArmoredAircraftCarrier=18]="ArmoredAircraftCarrier",e[e.RepairShip=19]="RepairShip",e[e.SubmarineTender=20]="SubmarineTender",e[e.TrainingCruiser=21]="TrainingCruiser",e[e.FleetOiler=22]="FleetOiler"}(i||(i={})),r.a=i},99:function(e,r,t){"use strict";var i=t(3157),a=function(){function e(e,r,t,i,a){var n=this;void 0===e&&(e=0),void 0===i&&(i=1),void 0===a&&(a=0),this.attackPower=e,this.defensePower=r,this.defenderCurrentHp=t,this.remainingAmmoModifier=i,this.armorPenetration=a,this.calcValue=function(e){var r=n,t=r.attackPower,i=r.remainingAmmoModifier,a=r.armorPenetration,o=Math.max(1,e-a),s=Math.floor((t-o)*i);return Math.max(0,s)},this.random=function(){return n.calcValue(n.defensePower.random())}}return Object.defineProperty(e.prototype,"min",{get:function(){return this.calcValue(this.defensePower.max)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.calcValue(this.defensePower.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.defensePower,r=this.calcValue;return e.values().map(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeadly",{get:function(){var e=this.min;return this.defenderCurrentHp<=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamageProbability",{get:function(){var e=this.values;return e.filter((function(e){return e<=0})).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map((function(r){return Math.floor(.06*e+.08*r)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadlyDamageProbability",{get:function(){var e=this.values,r=this.defenderCurrentHp;return e.filter((function(e){return r-e<=0})).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopperDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map((function(r){return Math.floor(.5*e+.3*r)}))},enumerable:!0,configurable:!0}),e}();r.a=a,a.calc=function(e,r,t){return void 0===e&&(e=0),void 0===t&&(t=1),new a(e,r,t).random()}}}]);