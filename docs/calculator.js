(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"f",function(){return o}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"a",function(){return c});var i=r(167),n=function(e){return null!=e},a=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0,a=t;i<a.length;i++){var o=a[i];for(var s in o){var u=o[s];n(u)&&(e[s]=u)}}return e},o=function(e,t){return t<=e?t:e+Math.sqrt(t-e)},s=function(e){return/改$/.test(e)},u=function(e){return/(改二|Верный)(?!丙)/.test(e)},c=function(e){var t=e.health.nowHp,r=e.stats.armor;return t+new i.a(r,e.totalEquipmentStats(function(e){return e.improvement.defensePowerModifier})).max}},139:function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"b",function(){return n}),r.d(t,"a",function(){return a});var i=["hp","firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","luck"],n=function(e,t){var r=e[0],i=e[1];return Math.floor((i-r)*t/99+r)},a=function(e,t){var r=e[0],i=e[1];if(t>=100){var n=e[0];r+=n>=91?9:n>=70?8:n>=50?7:n>=40?6:n>=30?5:n>=8?4:3}return Math.min(r,i)},o=function(){function e(e,t,r){this.master=e,this.level=t,this.increased=r}return e.prototype.getIncreasedStat=function(e){var t=this.increased;return t&&t[e]||0},Object.defineProperty(e.prototype,"hp",{get:function(){return a(this.master.hp,this.level)+this.getIncreasedStat("hp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower[1]+this.getIncreasedStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo[1]+this.getIncreasedStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir[1]+this.getIncreasedStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor[1]+this.getIncreasedStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return n(this.master.los,this.level)+this.getIncreasedStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return n(this.master.asw,this.level)+this.getIncreasedStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return n(this.master.evasion,this.level)+this.getIncreasedStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck[0]+this.getIncreasedStat("luck")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed+this.getIncreasedStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range+this.getIncreasedStat("range")},enumerable:!0,configurable:!0}),e}();t.c=o},155:function(e,t,r){"use strict";r.r(t);var i=r(381);r.d(t,"AntiAirCutin",function(){return i.a});var n=r(452);r.d(t,"CarrierBasedAerialCombat",function(){return n.a});var a=r(453);r.d(t,"LandBaseAerialSupport",function(){return a.a});var o=r(208);r.d(t,"FleetAntiAir",function(){return o.a});var s=r(252);r.d(t,"ShipAntiAir",function(){return s.a})},163:function(e,t,r){"use strict";var i=function(){function e(e,t,r){var i=this;void 0===e&&(e=0),void 0===r&&(r=1),this.attackPower=e,this.defensePower=t,this.remainingAmmoModifier=r,this.calcValue=function(e){var t=i,r=t.attackPower,n=t.remainingAmmoModifier,a=Math.floor((r-e)*n);return Math.max(0,a)},this.random=function(){return i.calcValue(i.defensePower.random())}}return Object.defineProperty(e.prototype,"min",{get:function(){return this.calcValue(this.defensePower.max)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.calcValue(this.defensePower.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.defensePower,t=this.calcValue;return e.values.map(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamageProbability",{get:function(){return this.values.filter(function(e){return e<=0}).length/this.values.length},enumerable:!0,configurable:!0}),e}();t.a=i,i.calc=function(e,t,r){return void 0===e&&(e=0),void 0===r&&(r=1),new i(e,t,r).random()}},167:function(e,t,r){"use strict";var i=r(384),n=r(3379),a=function(){function e(e,t){var r=this;this.armor=e,this.improvementModifier=t,this.random=function(){var e=r,t=e.min,n=e.baseArmor;return t+.6*Object(i.a)(Math.floor(n-1))}}return Object.defineProperty(e.prototype,"baseArmor",{get:function(){return this.armor+this.improvementModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return.7*Math.max(this.baseArmor,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){var e=this.min,t=this.baseArmor;return e+.6*Math.floor(t-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.min,t=this.baseArmor;return Object(n.a)(Math.floor(t)).map(function(t){return e+t})},enumerable:!0,configurable:!0}),e}();t.a=a},183:function(e,t,r){"use strict";r.d(t,"b",function(){return i});var i=function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.masterId)&&!e.hasEquipment(function(e){return[258,259].includes(e.masterId)}))&&e.planes.some(function(e){return e.slotSize>0&&e.isNightPlane}))},n=function(e){var t=e.nakedStats,r=e.level;return t.luck<50?Math.floor(t.luck+15+.75*Math.sqrt(r)):Math.floor(Math.sqrt(t.luck-50)+65+.8*Math.sqrt(r))},a=function(){function e(t,r,i,n,a){var o=this;this.id=t,this.name=r,this.typeFactor=i,this.powerModifier=n,this.calcRate=function(t){return o===e.DoubleAttack?109/110:Math.ceil(t)/o.typeFactor},this.accuracyModifier=a||1.1}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestroyerCutin",{get:function(){return 7===this.id||8===this.id},enumerable:!0,configurable:!0}),e}();t.a=a,a.DoubleAttack=new a(1,"連撃",110,1.2,1.1),a.MainTorp=new a(2,"主魚",115,1.3,1.5),a.TorpTorp=new a(3,"魚雷",122,1.5,1.6),a.SubmarineTorpTorp=new a(3.1,"潜水魚雷",110,1.65),a.SubmarineRadarTorp=new a(3.2,"潜水電探",102,1.75),a.MainMainSecond=new a(4,"主副",130,1.75,1.65),a.MainMainMain=new a(5,"主砲",140,2,1.5),a.AerialAttack1=new a(6.1,"夜襲1.25",1/0,1.25),a.AerialAttack2=new a(6.2,"夜襲1.20",1/0,1.2),a.AerialAttack3=new a(6.3,"夜襲1.18",1/0,1.18),a.MainTorpRadar=new a(7,"主魚電",130,1.3),a.TorpRadarLookout=new a(8,"魚見電",150,1.2),a.getPossibleSpecialAttacks=function(e){var t=e.shipType,r=e.hasEquipment,n=e.countEquipment,o=new Array;if(i(e)){var s=e.planes.filter(function(e){return e.slotSize>0}),u=s.filter(function(e){return e.isNightFighter}).length,c=s.filter(function(e){return e.isNightAttacker}).length,l=s.filter(function(e){return e.isNightPlane}).length,p=s.filter(function(e){return e.isNightAircraft&&!e.isNightPlane}).length,f=u>=1,d=c>=1,h=l>=1,m=s.some(function(e){return 320===e.equipment.masterId});return u>=2&&d&&o.push(a.AerialAttack1),(f&&d||h&&m)&&o.push(a.AerialAttack2),f?((u>=3||c+p>=2)&&o.push(a.AerialAttack3),o):o}if(!e.canNightAttack)return o;var g=n(function(e){return e.category.is("SubmarineTorpedo")}),b=n(function(e){return e.category.is("Torpedo")})+g;t.is("Destroyer")&&r(function(e){return e.isSurfaceRadar})&&b>=1&&(r(function(e){return e.category.is("SmallCaliberMainGun")})&&o.push(a.MainTorpRadar),r(129)&&o.push(a.TorpRadarLookout));var y=n(function(e){return e.category.isMainGun}),v=n(function(e){return e.category.is("SecondaryGun")});return g>=1&&r(function(e){return e.category.is("SubmarineEquipment")})?o.push(a.SubmarineRadarTorp):g>=2?o.push(a.SubmarineTorpTorp):y>=3?o.push(a.MainMainMain):y>=2&&v>=1?o.push(a.MainMainSecond):b>=2?o.push(a.TorpTorp):y>=1&&b>=1?o.push(a.MainTorp):y+v>=2&&o.push(a.DoubleAttack),o},a.calcPreModifierValue=n,a.calcBaseValue=function(e,t,r,i){var a=n(e);return t&&(a+=15),"Moderate"===e.health.damage&&(a+=18),e.hasEquipment(129)&&(a+=5),r.searchlight&&(a+=7),i.searchlight&&(a+=-5),r.starshell&&(a+=4),i.starshell&&(a+=-10),a}},204:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=["armor","firepower","torpedo","speed","bombing","antiAir","asw","los","accuracy","evasion","interception","antiBomber","range","radius"]},208:function(e,t,r){"use strict";var i=r(98),n=r(382),a=r(3374),o=r(222),s=function(e){var t=e.name,r=e.antiAir,i=e.category,n=e.isHighAngleMount,a=e.improvement;if(0===r)return 0;return(i.is("AntiAircraftFireDirector")||n?.35:i.is("AntiAircraftShell")?.6:i.isRadar?.4:"46cm三連装砲"===t?.25:.2)*r+a.fleetAntiAirModifier},u=function(e){return Math.floor(e.totalEquipmentStats(s))},c=function(){function e(e,t,r){this.ships=e,this.side=t,this.formationModifier=r}return Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.ships,t=this.side,r=this.formationModifier,n=Object(o.a)(e,u),a=2*Math.floor(r*n);return t===i.a.Player?a/1.3:a},enumerable:!0,configurable:!0}),e}();t.a=c,c.getCombinedFleetModifier=function(e,t){return e===n.a.EscortFleet?.48:t===a.a.AirDefenseBattle?.72:.8},c.calcFleetAntiAir=function(e,t,r){var n=(0,e.totalShipStats)(u),a=2*Math.floor(r*n);return t===i.a.Player?a/1.3:a}},216:function(e,t,r){"use strict";var i=r(582),n=r(3474),a=r(222),o=r(12),s=function(){function e(e){this.shellingType="Shelling",this.firepower=0,this.torpedo=0,this.bombing=0,this.improvementModifier=0,this.combinedFleetFactor=0,this.formationModifier=1,this.engagementModifier=1,this.healthModifier=1,this.cruiserFitBonus=0,this.effectivenessMultiplicative=1,this.effectivenessAdditive=0,this.specialAttackModifier=1,this.apShellModifier=1,this.criticalModifier=1,this.proficiencyModifier=1,this.eventMapModifier=1,this.antiInstallationModifiers={shipTypeAdditive:0,multiplicative:1,additive:0},Object(o.b)(this,e)}return Object.defineProperty(e.prototype,"basicPower",{get:function(){return t=(e=this).shellingType,r=e.firepower,i=e.combinedFleetFactor,n=e.improvementModifier,a=e.bombing,o=e.torpedo,s=5+r+i+n,"CarrierShelling"===t&&(s+=Math.floor(Math.floor(1.3*a)+o)+15,s=25+Math.floor(1.5*s)),s;var e,t,r,i,n,a,o,s},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preCapPower",{get:function(){return e=this.basicPower,r=(t=this).antiInstallationModifiers,i=t.formationModifier,n=t.engagementModifier,a=t.healthModifier,o=t.cruiserFitBonus,((e+r.shipTypeAdditive)*r.multiplicative+r.additive)*i*n*a+o;var e,t,r,i,n,a,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cappedPower",{get:function(){return Object(o.f)(e.cap,this.preCapPower)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCapped",{get:function(){return this.preCapPower>e.cap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return e=this.cappedPower,r=(t=this).effectivenessMultiplicative,i=t.effectivenessAdditive,n=t.specialAttackModifier,a=t.apShellModifier,o=t.criticalModifier,s=t.proficiencyModifier,u=t.eventMapModifier,c=Math.floor(e)*n,(r>1||i>0)&&(c=Math.floor(c*r)+i),a>1&&(c=Math.floor(c*a)),o>1&&(c=Math.floor(c*o*s)),c*u;var e,t,r,i,n,a,o,s,u,c},enumerable:!0,configurable:!0}),e}(),u=s;s.cap=180;var c=r(294),l=function(){function e(e){this.combinedFleetFactor=0,this.level=0,this.luck=0,this.equipmentAccuracy=0,this.improvementModifier=0,this.moraleModifier=1,this.formationModifier=1,this.fitGunBonus=0,this.specialAttackModifier=1,this.apShellModifier=1,Object(o.b)(this,e)}return Object.defineProperty(e.prototype,"basicAccuracy",{get:function(){return t=(e=this).combinedFleetFactor,r=e.level,i=e.luck,n=e.equipmentAccuracy,a=e.improvementModifier,Math.floor(90+t+2*Math.sqrt(r)+1.5*Math.sqrt(i)+n+a);var e,t,r,i,n,a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return e=this.basicAccuracy,r=(t=this).moraleModifier,i=t.formationModifier,n=t.fitGunBonus,a=t.specialAttackModifier,o=t.apShellModifier,Math.floor((e*r*i+n)*a*o);var e,t,r,i,n,a,o},enumerable:!0,configurable:!0}),e}();r.d(t,"a",function(){return p}),r.d(t,"c",function(){return f});var p=function(e){var t=0;if(e.shipType.either("LightCruiser","TorpedoCruiser","TrainingCruiser")){var r=e.countEquipment(function(e){return[4,11].includes(e.masterId)}),i=e.countEquipment(function(e){return[65,119,139].includes(e.masterId)});t+=Math.sqrt(r)+2*Math.sqrt(i)}return e.shipClass.is("ZaraClass")&&(t+=Math.sqrt(e.countEquipment(162))),t},f=function(e,t){var r={power:1};if(t&&t.isCarrierSpecialAttack)return e.planes.filter(function(e){return e.slotSize>0&&e.category.isCarrierShellingAircraft}).some(function(e){return 0===e.index})?r.power=1.25:r.power=1.106,r;var i=e.planes.filter(function(e){var t=e.slotSize,r=e.category;return t>0&&(r.isDiveBomber||r.isTorpedoBomber||r.is("LargeFlyingBoat"))});return r.power=1+Object(a.a)(i,function(e){return 0===e.index?e.equipment.proficiency.criticalPowerModifier/100:e.equipment.proficiency.criticalPowerModifier/200}),r},d=function(){function e(e){var t=this;this.ship=e,this.calcPower=function(e){var r=e.role,a=void 0===r?"Main":r,o=e.isCritical,s=void 0!==o&&o,c=e.formation,l=void 0===c?i.a.LineAhead:c,p=e.engagement,d=void 0===p?n.a.Parallel:p,h=e.combinedFleetFactor,m=void 0===h?0:h,g=e.eventMapModifier,b=void 0===g?1:g,y=e.specialAttack,v=e.isArmorPiercing,A=void 0!==v&&v,w=e.installationType,C=void 0===w?"None":w,M=t,S=M.shellingType,P=M.firepower,O=M.torpedo,q=M.bombing,k=M.improvementModifier,j=M.cruiserFitBonus,F=M.healthModifier,B=l.getModifiersWithRole(a).shelling.power,E=d.modifier,T=s?1.5:1,I=y?y.modifier.power:1,R=A?t.apShellModifiers.power:1,K=t.antiInstallationStatus.getModifiersFromType(C),L="None"!==C,D={shellingType:S,combinedFleetFactor:m,firepower:P,torpedo:L?0:O,bombing:L?t.antiInstallationStatus.bombing:q,improvementModifier:k,antiInstallationModifiers:K,formationModifier:B,engagementModifier:E,healthModifier:F,cruiserFitBonus:j,effectivenessMultiplicative:K.postCapMultiplicative,effectivenessAdditive:0,specialAttackModifier:I,apShellModifier:R,criticalModifier:T,proficiencyModifier:f(t.ship,y).power,eventMapModifier:b};return new u(D)},this.calcAccuracy=function(e){var r=t.ship,i=r.level,n=r.stats.luck,a=e.fitGunBonus,o=e.combinedFleetFactor,s=e.formation,u=e.role,c=e.specialAttack,p=e.isArmorPiercing,f=r.totalEquipmentStats("accuracy"),d=r.totalEquipmentStats(function(e){return e.improvement.shellingAccuracyModifier}),h=r.morale.shellingAccuracyModifier,m=s.getModifiersWithRole(u).shelling.accuracy,g=c?c.modifier.accuracy:1,b=p?t.apShellModifiers.accuracy:1;return new l({combinedFleetFactor:o,level:i,luck:n,equipmentAccuracy:f,improvementModifier:d,moraleModifier:h,formationModifier:m,fitGunBonus:a,specialAttackModifier:g,apShellModifier:b})},this.antiInstallationStatus=new c.a(e)}return Object.defineProperty(e.prototype,"shellingType",{get:function(){var e=this.ship,t=e.shipType,r=e.shipClass,i=e.isInstallation,n=e.hasEquipment;return t.isAircraftCarrierClass?"CarrierShelling":(r.is("RevisedKazahayaClass")||i)&&n(function(e){return e.category.isAerialCombatAircraft})?"CarrierShelling":"Shelling"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.ship.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.ship.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.ship.totalEquipmentStats("bombing")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvementModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){return e.improvement.shellingPowerModifier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cruiserFitBonus",{get:function(){return p(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"healthModifier",{get:function(){return this.ship.health.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellModifiers",{get:function(){var e=this.ship.hasEquipment;if(!e(function(e){return e.category.is("ArmorPiercingShell")})||!e(function(e){return e.category.isMainGun}))return{power:1,accuracy:1};var t=e(function(e){return e.category.is("SecondaryGun")}),r=e(function(e){return e.category.isRadar});return t&&r?{power:1.15,accuracy:1.3}:t?{power:1.15,accuracy:1.2}:r?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifier",{get:function(){return f(this.ship)},enumerable:!0,configurable:!0}),e}();t.b=d},249:function(e,t,r){"use strict";var i=r(85),n=function(){function e(e,t){this.master=t,this.value=e||0}return Object.defineProperty(e.prototype,"contactSelectionModifier",{get:function(){var e=this.value,t=this.master,r=t.los,i=t.category;if(!i.isReconnaissanceAircraft)return 0;if(i.either("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2")){if(7===r)return.25*e;if(11===r)return.4*e}else{if(6===r)return.2*e;if(r>=4)return.14*e;if(3===r)return.1*e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerModifier",{get:function(){var e=this.value,t=this.master.category;return t.isFighter?.2*e:t.is("CarrierBasedDiveBomber")?.25*e:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirModifier",{get:function(){var e=this.master,t=e.antiAir,r=e.category,n=e.isHighAngleMount;if(0===t)return 0;var a=0;return r.id===i.a.AntiAircraftGun?a=t<=7?4:6:(r.id===i.a.AntiAircraftFireDirector||n)&&(a=t<=7?2:3),a*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){var e=this.master,t=e.antiAir,r=e.category,n=e.isHighAngleMount;if(0===t)return 0;var a=0;return r.id===i.a.AntiAircraftFireDirector||n?a=t<=7?2:3:r.isRadar&&t>=2&&(a=1.5),a*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){var e=this.master,t=e.firepower,r=e.category,i=e.id,n=[226,227].includes(i);if(r.is("CarrierBasedTorpedoBomber"))return.2*this.value;if(n||r.isRadar||r.isArmor||r.isAircraft||r.either("Torpedo","MidgetSubmarine","EngineImprovement","CombatRation"))return 0;if([10,66,220,275].includes(i))return.2*this.value;if([12,234,247].includes(i))return.3*this.value;var a=1;return t>12?a=1.5:r.either("Sonar","LargeSonar","DepthCharge")&&(a=.75),a*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){var e=this.master,t=e.accuracy,r=e.category;if(r.is("Torpedo"))return 0;var i=r.is("LargeRadar")||r.is("LargeRadar2"),n=r.isRadar&&t>2;return i||n?1.7*Math.sqrt(this.value):r.isRadar||r.isMainGun||r.isArmor||r.either("SecondaryGun","Sonar","LargeSonar","DepthCharge","ArmorPiercingShell","AntiAircraftGun","AntiAircraftFireDirector")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectiveLosModifier",{get:function(){var e=0,t=this.master.category;return t.is("SmallRadar")?e=1.25:t.either("LargeRadar","LargeRadar2")?e=1.4:t.either("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane")?e=1.2:t.is("SeaplaneBomber")&&(e=1.15),e*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePowerModifier",{get:function(){var e=this.master.category;return e.is("MediumExtraArmor")?.2*this.value:e.is("LargeExtraArmor")?.3*this.value:0},enumerable:!0,configurable:!0}),e}();t.a=n},250:function(e,t,r){"use strict";var i=r(3378),n=function(e,t){var r=Object(i.a)(e.filter(function(e){return e.level<=t}),"value");return r?r.value:0},a=function(){function e(e,t){void 0===e&&(e=0),this.internal=e,this.master=t}return e.internalToLevel=function(t){return e.internalBounds.filter(function(e){return e<=t}).length-1},Object.defineProperty(e.prototype,"level",{get:function(){return e.internalToLevel(this.internal)},set:function(t){this.internal=e.internalBounds[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerBonus",{get:function(){var t=this.internal,r=this.level,i=this.master;if(t<=0)return 0;var a=[];return i.category.isFighter?a=e.fighterPowerLevelBonuses.fighter:i.category.is("SeaplaneBomber")&&(a=e.fighterPowerLevelBonuses.seaplaneBomber),n(a,r)+Math.sqrt(t/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalPowerModifier",{get:function(){var t=this.internal,r=this.level,i=n(e.criticalModifierLevelBonuses,r);return Math.floor(Math.sqrt(t)+i)},enumerable:!0,configurable:!0}),e}();t.a=a,a.internalBounds=[0,10,25,40,55,70,85,100],a.fighterPowerLevelBonuses={fighter:[{level:7,value:22},{level:5,value:14},{level:4,value:9},{level:3,value:5},{level:2,value:2},{level:0,value:0}],seaplaneBomber:[{level:7,value:6},{level:5,value:3},{level:2,value:1},{level:0,value:0}]},a.criticalModifierLevelBonuses=[{level:7,value:10},{level:6,value:7},{level:5,value:5},{level:4,value:4},{level:3,value:3},{level:2,value:2},{level:1,value:1},{level:0,value:0}]},251:function(e,t,r){"use strict";var i=r(582),n=r(3372),a=r(382),o=r(208),s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},u=function(){function e(e,t,r,n,a){this.side=e,this.fleetType=t,this.landBase=r,this.mainFleet=n,this.escortFleet=a,this.formation=i.a.LineAhead,this.name="",this.isCombinedFleet&&(this.formation=i.a.CruisingFormation4)}return Object.defineProperty(e.prototype,"allShips",{get:function(){var e=this.mainFleet,t=this.escortFleet,r=e.nonNullableShips.concat();return t?r.concat(t.nonNullableShips):r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.allShips,t=this.side,r=this.formation;return new o.a(e,t,r.fleetAntiAirModifier).fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleet",{get:function(){return this.fleetType!==n.a.Single},enumerable:!0,configurable:!0}),e.prototype.getShipInformation=function(e){var t=this,r=t.mainFleet,i=t.escortFleet,n={side:t.side,fleetType:t.fleetType,fleetAntiAir:t.fleetAntiAir,formation:t.formation};return r.nonNullableShips.find(function(t){return t===e})?s({},n,{fleetRole:a.a.MainFleet}):i&&i.nonNullableShips.find(function(t){return t===e})?s({},n,{fleetRole:a.a.EscortFleet}):void 0},e}();t.a=u},252:function(e,t,r){"use strict";var i=r(98),n=function(e){var t=e.antiAir,r=e.category,i=e.improvement,n=e.isHighAngleMount;if(0===t)return 0;var a=0;return r.is("AntiAircraftGun")?a=6:r.is("AntiAircraftFireDirector")||n?a=4:r.isRadar&&(a=3),a*t+i.adjustedAntiAirModifier},a=function(){function e(e,t,r,i,n){void 0===i&&(i=1),this.ship=e,this.side=t,this.fleetAntiAir=r,this.combinedFleetModifier=i,this.antiAirCutin=n}return Object.defineProperty(e.prototype,"adjustedAntiAir",{get:function(){return function(e,t){var r=e.stats,a=e.nakedStats,o=(0,e.totalEquipmentStats)(n);if(t===i.a.Enemy)return Math.floor(2*Math.floor(Math.sqrt(r.antiAir))+o);var s=a.antiAir+o;return 0===e.countEquipment()?s:2*Math.floor(s/2)}(this.ship,this.side)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proportionalShotdownRate",{get:function(){return this.adjustedAntiAir*this.combinedFleetModifier*.5*.25*.02},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedShotdownNumber",{get:function(){var e=this,t=e.adjustedAntiAir,r=e.fleetAntiAir,n=e.side,a=e.antiAirCutin,o=e.combinedFleetModifier,s=.5*(t+r)*.25*(n===i.a.Player?.8:.75)*o;return a&&(s*=a.fixedAirDefenseModifier),Math.floor(s)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumBonus",{get:function(){var e=this.side,t=this.antiAirCutin;return t?t.minimumBonus:e===i.a.Player?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAirPropellantBarrageChance",{get:function(){var e,t=this.ship,r=this.adjustedAntiAir,i=t.shipType;if(!(e=i).isAircraftCarrierClass&&!e.either("AviationCruiser","AviationBattleship","SeaplaneTender"))return 0;var n=t.countEquipment(274);if(!n)return 0;var a=400-(48+(40+30*n)+(t.shipClass.is("IseClass")?70:0));return(r+.9*t.stats.luck)/a},enumerable:!0,configurable:!0}),e}();t.a=a},253:function(e,t,r){"use strict";var i=function(){function e(e,t,r){this.player=e,this.enemy=t,this.battleType=r}return e.prototype.getShipInformation=function(e){var t=this.player,r=this.enemy,i=t.getShipInformation(e);if(i)return i;var n=r.getShipInformation(e);if(n)return n;throw console.error("ship info is not found")},e}();t.a=i},291:function(e,t,r){"use strict";var i=r(384),n=r(98),a=r(309),o=r(252),s=r(208),u=function(){function e(e){var t=this;this.combatInformation=e,this.shotdownInFighterCombat=function(e,t,r){var i;if(r===n.a.Player){var a=t/4,o=Math.floor(t/3*100);i=Math.floor(Math.random()*(o+1))/100+a}else{o=11-t;i=.35*Math.floor(Math.random()*(o+1))+.65*Math.floor(Math.random()*(o+1))}var s=i/10,u=Math.floor(e.slotSize*s);e.category.isJetPoweredAircraft?e.shotdown(.6*u):e.shotdown(u)},this.shipAntiAirDefense=function(e,r,i){var n=t.combatInformation.battleType,a=t.combatInformation.getShipInformation(e),u=a.side,c=a.fleetRole,l=a.fleetAntiAir,p=s.a.getCombinedFleetModifier(c,n),f=new o.a(e,u,l,p,i),d=f.proportionalShotdownRate,h=f.fixedShotdownNumber,m=f.minimumBonus,g=m;Math.random()>.5&&(g+=Math.floor(r.slotSize*d)),Math.random()>.5&&(g+=h),g+=m,r.shotdown(g)}}return e.prototype.fighterCombat=function(e,t){var r=this,i=e.reduce(function(e,t){return e+t.fighterPower},0),o=t.reduce(function(e,t){return e+t.fighterPower},0),s=a.a.fromFighterPower(i,o);return e.forEach(function(e){return r.shotdownInFighterCombat(e,s.constant,n.a.Player)}),t.forEach(function(e){return r.shotdownInFighterCombat(e,s.constant,n.a.Enemy)}),s},e.prototype.antiAirDefense=function(e,t,r){for(var n=0,a=t;n<a.length;n++){var o=a[n],s=e[Object(i.a)(e.length-1)];this.shipAntiAirDefense(s,o,r)}},e}();t.a=u},294:function(e,t,r){"use strict";var i=r(222),n=r(12),a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=function(){function e(e){var t=this;this.ship=e,this.getModifiersFromType=function(e){var r={shipTypeAdditive:0,multiplicative:1,additive:0,postCapMultiplicative:1};switch(e){case"SoftSkinned":return a({},r,t.antiSoftSkinnedModifiers);case"Pillbox":return a({},r,t.antiPillboxModifiers);case"IsolatedIsland":return a({},r,t.antiIsolatedIslandModifiers);case"SupplyDepot":return a({},r,t.antiSoftSkinnedModifiers,{postCapMultiplicative:t.antiSupplyDepotPostCapModifier})}return r}}return Object.defineProperty(e.prototype,"items",{get:function(){return this.ship.equipments.filter(n.c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countEquipment",{get:function(){return this.ship.countEquipment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countEquipmentCategory",{get:function(){return this.ship.countEquipmentCategory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasEquipmentCategory",{get:function(){return this.ship.hasEquipmentCategory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wgCount",{get:function(){return this.countEquipmentCategory("AntiGroundEquipment")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return Object(i.a)(this.items.filter(function(e){return[60,64,148,233,277,305,306,316,319].includes(e.masterId)}),function(e){return e.bombing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wgAdditive",{get:function(){var e=this.wgCount;return 1===e?75:2===e?110:3===e?140:e>=4?160:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"landingCraftsImprovementMultiplicative",{get:function(){var e=this.items.filter(function(e){return e.category.is("LandingCraft")});return 0===e.length?1:1+Object(i.a)(e,function(e){return e.improvement.value})/e.length/50},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specialAmphibiousTanksImprovementMultiplicative",{get:function(){var e=this.items.filter(function(e){return e.category.is("SpecialAmphibiousTank")});return 0===e.length?1:1+Object(i.a)(e,function(e){return e.improvement.value})/e.length/30},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokuDaihatsuMultiplicative",{get:function(){return this.ship.hasEquipment(193)?1.15:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shikonModifiers",{get:function(){return this.countEquipment(230)>=1?{additive:25,multiplicative:1.8}:{additive:0,multiplicative:1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submarineClassAdditive",{get:function(){return this.ship.shipType.isSubmarineClass?30:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commonModifiers",{get:function(){var e=this,t=e.wgAdditive,r=e.landingCraftsImprovementMultiplicative,i=e.specialAmphibiousTanksImprovementMultiplicative,n=e.shikonModifiers,a=e.tokuDaihatsuMultiplicative;return{shipTypeAdditive:e.submarineClassAdditive,multiplicative:r*i*a*n.multiplicative,additive:t+n.additive}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiSoftSkinnedModifiers",{get:function(){var e=this,t=e.wgCount,r=e.commonModifiers,i=e.countEquipment,n=e.countEquipmentCategory,a=e.hasEquipmentCategory,o=r.shipTypeAdditive,s=r.multiplicative,u=r.additive;a("AntiAircraftShell")&&(s*=2.5),t>=1&&(s*=1.3),t>=2&&(s*=1.4),a("SeaplaneBomber","SeaplaneFighter")&&(s*=1.2),a("LandingCraft")&&(s*=1.4);var c=i(166);c>=1&&(s*=1.5),c>=2&&(s*=1.3);var l=n("SpecialAmphibiousTank");return l>=1&&(s*=1.5),l>=2&&(s*=1.2),{shipTypeAdditive:o,additive:u,multiplicative:s}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiPillboxModifiers",{get:function(){var e=this,t=e.ship,r=e.wgCount,i=e.commonModifiers,n=e.countEquipment,a=e.hasEquipmentCategory,o=e.countEquipmentCategory,s=t.shipType,u=i.shipTypeAdditive,c=i.multiplicative,l=i.additive;a("ArmorPiercingShell")&&(c*=1.85),r>=1&&(c*=1.6),r>=2&&(c*=1.7),a("SeaplaneBomber","SeaplaneFighter","CarrierBasedDiveBomber")&&(c*=1.5),a("LandingCraft")&&(c*=1.8);var p=n(166);p>=1&&(c*=1.5),p>=2&&(c*=1.4);var f=o("SpecialAmphibiousTank");return f>=1&&(c*=2.4),f>=2&&(c*=1.35),(s.isDestroyer||s.isLightCruiserClass)&&(c*=1.4),{shipTypeAdditive:u,additive:l,multiplicative:c}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiIsolatedIslandModifiers",{get:function(){var e=this,t=e.wgCount,r=e.commonModifiers,i=e.countEquipment,n=e.hasEquipmentCategory,a=e.countEquipmentCategory,o=r.shipTypeAdditive,s=r.multiplicative,u=r.additive;n("AntiAircraftShell")&&(s*=1.75),t>=1&&(s*=1.4),t>=2&&(s*=1.5),n("CarrierBasedDiveBomber")&&(s*=1.4),n("LandingCraft")&&(s*=1.8);var c=i(166);c>=1&&(s*=1.2),c>=2&&(s*=1.4);var l=a("SpecialAmphibiousTank");return l>=1&&(s*=2.4),l>=2&&(s*=1.35),{shipTypeAdditive:o,additive:u,multiplicative:s}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiSupplyDepotPostCapModifier",{get:function(){var e=this,t=e.wgCount,r=e.landingCraftsImprovementMultiplicative,i=e.specialAmphibiousTanksImprovementMultiplicative,n=e.countEquipment,a=e.hasEquipmentCategory,o=e.countEquipmentCategory,s=1;t>=1&&(s*=1.25),t>=2&&(s*=1.3),a("LandingCraft")&&(s*=1.7),n(193)>=1&&(s*=1.2),s*=r;var u=n(166);u>=1&&(s*=1.3*r),u>=2&&(s*=1.6);var c=o("SpecialAmphibiousTank");return c>=1&&(s*=1.7),c>=2&&(s*=1.5),s*=i},enumerable:!0,configurable:!0}),e}();t.a=o},309:function(e,t,r){"use strict";var i=function(){function e(t,r,i){this.id=t,this.name=r,this.constant=i,e.values.push(this)}return e.fromFighterPower=function(t,r){return t>=3*r?e.AirSupremacy:t>=1.5*r?e.AirSuperiority:t>=2/3*r?e.AirParity:t>=1/3*r?e.AirDenial:e.AirIncapability},e.fromId=function(t){return e.values.find(function(e){return e.id===t})},Object.defineProperty(e.prototype,"contactMultiplier",{get:function(){switch(this){case e.AirSupremacy:return 3;case e.AirSuperiority:return 2;case e.AirDenial:return 1;default:return 0}},enumerable:!0,configurable:!0}),e}();t.a=i,i.values=[],i.AirSupremacy=new i(1,"制空権確保",1),i.AirSuperiority=new i(2,"航空優勢",3),i.AirParity=new i(0,"制空均衡",5),i.AirDenial=new i(3,"航空劣勢",7),i.AirIncapability=new i(4,"制空権喪失",10)},3372:function(e,t,r){"use strict";var i;!function(e){e.Single="Single",e.CarrierTaskForce="CarrierTaskForce",e.SurfaceTaskForce="SurfaceTaskForce",e.TransportEscort="TransportEscort",e.Combined="Combined"}(i||(i={})),t.a=i},3374:function(e,t,r){"use strict";var i;!function(e){e.NormalBattle="NormalBattle",e.NightBattle="NightBattle",e.NightToDayBattle="NightToDayBattle",e.AerialBattle="AerialBattle",e.AirDefenseBattle="AirDefenseBattle"}(i||(i={})),t.a=i},3431:function(e,t,r){"use strict";var i;!function(e){e[e.FastA=0]="FastA",e[e.FastB1SlowA=1]="FastB1SlowA",e[e.FastB2SlowB=2]="FastB2SlowB",e[e.OtherC=3]="OtherC"}(i||(i={}));var n=function(){function e(t,r){var i=this;this.value=t,this.name=r,this.add=function(t){return e.fromNumber(i.value+t)}}return e.getSpeedGroup=function(t){var r=t.shipType,n=t.shipClass;if(e.fromNumber(t.nakedStats.speed)===e.Fast&&r.is("SeaplaneTender")||r.isSubmarineClass||["加賀型","夕張型","特種船丙型","工作艦","改風早型"].includes(n.name))return i.OtherC;if(["島風型","Ташкент級","大鳳型","翔鶴型","利根型","最上型"].includes(n.name))return i.FastA;if(["阿賀野型","蒼龍型","飛龍型","金剛型","大和型","Iowa級"].includes(n.name))return i.FastB1SlowA;var a=[181,316].includes(t.masterId),o=[404,406].includes(t.masterId),s=[331,429].includes(t.masterId),u=541===t.masterId;return a||o||s||u?i.FastB1SlowA:i.FastB2SlowB},e.getSpeedIncrement=function(e,t,r){var n=t+r;switch(e){case i.FastA:if(r>=1||n>=2)return 10;break;case i.FastB1SlowA:if(0===r)break;if(n>=3)return 15;if(n>=2)return 10;break;case i.FastB2SlowB:if(r>=2||n>=3)return 10}return n>=1?5:0},e}();t.a=n,n.Land=new n(0,"陸上"),n.Slow=new n(5,"低速"),n.Fast=new n(10,"高速"),n.FastPlus=new n(15,"高速+"),n.Fastest=new n(20,"最速"),n.fromNumber=function(e){var t=[n.Land,n.Slow,n.Fast,n.FastPlus,n.Fastest].find(function(t){return e<=t.value});return t||n.Fastest}},3474:function(e,t,r){"use strict";var i=function(){return function e(t,r,i){this.id=t,this.name=r,this.modifier=i,e.values.push(this)}}();t.a=i,i.values=[],i.Parallel=new i(1,"同航戦",1),i.HeadOn=new i(2,"反航戦",.8),i.CrossingTheTAdvantage=new i(3,"T有利",1.2),i.CrossingTheTDisadvantage=new i(4,"T不利",.6),i.random=function(e){void 0===e&&(e=!1);var t=Math.random();return t<.15?i.CrossingTheTAdvantage:t<.6?i.Parallel:t<.9?i.HeadOn:e?i.HeadOn:i.CrossingTheTDisadvantage}},3475:function(e,t,r){"use strict";var i=r(581),n=r(163),a=r(167),o=function(){function e(e,t,r,i,n,a,o,s){void 0===i&&(i=!1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===o&&(o=1),this.attacker=e,this.defender=t,this.specialAttack=r,this.isCritical=i,this.nightContactModifier=n,this.eventMapModifier=a,this.remainingAmmoModifier=o,this.manualInstallationType=s}return Object.defineProperty(e.prototype,"attackerNightAttackStatus",{get:function(){return new i.a(this.attacker.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderInstallationType",{get:function(){var e=this.defender.ship;return e.isInstallation?e.name.includes("砲台子鬼")?"Pillbox":e.name.includes("離島")||e.name.includes("離島")?"IsolatedIsland":e.name.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,t=e.manualInstallationType,r=e.defenderInstallationType,i=e.attackerNightAttackStatus,n=e.specialAttack,a=e.nightContactModifier,o=e.isCritical,s=e.eventMapModifier,u=this.attacker,c=u.role,l=u.formation,p=t||r;return i.calcPower({role:c,nightContactModifier:a,formation:l,installationType:p,specialAttack:n,isCritical:o,eventMapModifier:s})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,i=new a.a(t.ship.stats.armor,t.ship.totalEquipmentStats(function(e){return e.improvement.defensePowerModifier}));return new n.a(e.value,i,r)},enumerable:!0,configurable:!0}),e}();t.a=o},3476:function(e,t,r){"use strict";var i=function(){function e(t,r,i){this.id=t,this.key=r,this.name=i,e.values.push(this)}return Object.defineProperty(e.prototype,"isCombined",{get:function(){return this!==e.Single},enumerable:!0,configurable:!0}),e}();t.a=i,i.values=[],i.Single=new i(0,"Single","通常艦隊"),i.CarrierTaskForce=new i(1,"CarrierTaskForce","空母機動部隊"),i.SurfaceTaskForce=new i(2,"SurfaceTaskForce","水上打撃部隊"),i.TransportEscort=new i(3,"TransportEscort","輸送護衛部隊"),i.Combined=new i(5,"Combined","敵連合"),i.fromId=function(e){return i.values.find(function(t){return t.id===e})},i.fromString=function(e){return i.values.find(function(t){return t.key===e||t.name===e})}},3477:function(e,t,r){"use strict";var i=r(309),n=r(222),a=r(384),o=function(){function e(t,r,i,n){this.id=t,this.name=r,this.typeFactor=i,this.modifier=n,e.all.push(this)}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierSpecialAttack",{get:function(){return 7===this.api},enumerable:!0,configurable:!0}),e}();t.a=o,o.all=[],o.MainMain=new o(6,"主主",150,{power:1.5,accuracy:1.2}),o.MainApShell=new o(5,"主徹",140,{power:1.3,accuracy:1.3}),o.MainRader=new o(4,"主電",130,{power:1.2,accuracy:1.5}),o.MainSecond=new o(3,"主副",120,{power:1.1,accuracy:1.3}),o.DoubleAttack=new o(2,"連撃",130,{power:1.2,accuracy:1.1}),o.FighterBomberAttacker=new o(7.1,"FBA",125,{power:1.25,accuracy:1}),o.BomberBomberAttacker=new o(7.2,"BBA",140,{power:1.2,accuracy:1}),o.BomberAttacker=new o(7.3,"BA",155,{power:1.15,accuracy:1}),o.getPossibleAircraftCarrierCutins=function(e){var t=new Array,r=e.planes.filter(function(e){return e.slotSize>0}),i=r.filter(function(e){return e.category.is("CarrierBasedDiveBomber")}).length,n=r.some(function(e){return e.category.is("CarrierBasedTorpedoBomber")});return 0!==i&&n?(t.push(o.BomberAttacker),i>=2&&t.push(o.BomberBomberAttacker),r.some(function(e){return e.category.is("CarrierBasedFighterAircraft")})&&t.push(o.FighterBomberAttacker),t.sort(function(e,t){return e.typeFactor-t.typeFactor})):t},o.getPossibleArtillerySpottings=function(e){var t=new Array,r=e.planes.some(function(e){return e.category.isObservationPlane&&e.slotSize>0}),i=e.countEquipment(function(e){return e.category.isMainGun});if(!r||0===i)return t;var n=e.hasEquipment(function(e){return e.category.is("ArmorPiercingShell")}),a=e.hasEquipment(function(e){return e.category.is("SecondaryGun")}),s=e.hasEquipment(function(e){return e.category.isRadar});return i>=2&&(t.push(o.DoubleAttack),n&&t.push(o.MainMain)),a&&(t.push(o.MainSecond),s&&t.push(o.MainRader),n&&t.push(o.MainApShell)),t.sort(function(e,t){return t.id-e.id})},o.getPossibleAttacks=function(e){return"Heavy"===e.health.damage?[]:e.shipType.isAircraftCarrierClass?o.getPossibleAircraftCarrierCutins(e):o.getPossibleArtillerySpottings(e)},o.calcFleetLosModifier=function(e){var t=e.totalShipStats(function(e){return e.nakedStats.los})+Object(n.a)(e.planes,function(e){return e.fleetLosModifier});return Math.floor(Math.sqrt(t)+.1*t)},o.calcBaseValue=function(e,t,r,n){var a=e.stats.luck,o=Math.floor(Math.sqrt(a)+10),s=e.totalEquipmentStats("los"),u=n?15:0;return r===i.a.AirSupremacy?Math.floor(o+.7*(t+1.6*s)+10)+u:r===i.a.AirSuperiority?Math.floor(o+.6*(t+1.2*s))+u:0},o.calcRate=function(e,t,r,i){var n=o.calcBaseValue(e,t,r,i),a=new Map,s=o.getPossibleAttacks(e),u=s.reduce(function(e,t){var r=(1-e)*(n/t.typeFactor);return r>1&&(r=1),a.set(t,r),e+r},0);return{baseValue:n,attacks:s,rateMap:a,total:u}},o.try=function(e,t,r,i){for(var n=o.calcBaseValue(e,t,r,i),s=0,u=o.getPossibleAttacks(e);s<u.length;s++){var c=u[s];if(n>Object(a.a)(c.typeFactor-1))return c}}},3478:function(e,t,r){"use strict";var i=r(517),n=r(222),a=r(383),o=r(12),s=r(139),u=function(){function e(e){this.hp=0,this.firepower=0,this.torpedo=0,this.antiAir=0,this.armor=0,this.asw=0,this.los=0,this.evasion=0,this.speed=0,this.range=0,this.luck=0,e&&this.add(e)}return e.prototype.add=function(e){for(var t=e.multiplier,r=void 0===t?1:t,i=0,n=s.d;i<n.length;i++){var a=n[i],o=e[a];"number"==typeof o&&(this[a]+=o*r)}return this},e}(),c=r(3378),l=[function(e){var t=e.equipments.filter(o.c).filter(function(e){return e.category.either("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2")}).map(function(e){return e.improvement.value});if(0!==t.length){var r=new u,i=Math.max.apply(Math,t);return i>=10?r.add({firepower:2,los:3}):i>=6?r.add({firepower:1,los:2}):i>=4?r.add({firepower:1,los:1}):i>=2&&r.add({los:1}),r}},function(e){var t=e.equipments.filter(function(e){return!!e&&61===e.masterId}),r=Object(c.a)(t,function(e){return e.improvement.value});if(r){var i=new u,n=r.improvement.value;return"伊勢改二"===e.name&&i.add({firepower:3,evasion:2,armor:1,range:1}),"日向改二"===e.name&&i.add({firepower:3,evasion:3,armor:3,range:1}),"蒼龍改二"===e.name&&(i.add({range:1}),n>=1&&i.add({firepower:3,los:3}),n>=8&&i.add({firepower:1,los:1})),"飛龍改二"===e.name&&(i.add({range:1}),n>=1&&i.add({firepower:2,los:2})),["瑞鳳改二乙","鈴谷航改二","熊野航改二"].includes(e.name)&&n>=1&&i.add({firepower:1,los:1}),i}}],p=function(e){var t=e.category,r=e.los,i=e.improvement,n=.6;return t.is("CarrierBasedTorpedoBomber")?n=.8:t.either("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2")?n=1:t.is("ReconnaissanceSeaplane")?n=1.2:t.is("SeaplaneBomber")&&(n=1.1),n*(r+i.effectiveLosModifier)},f=function(e,t){var r=e.totalEquipmentStats,i=e.nakedStats,a=r(p),o=Object(n.a)(l,function(t){var r=t(e);return r?r.los:0});return Math.sqrt(i.los+o)+a*t-2},d=function(){return function(){}}(),h=d;d.equipmentEffectiveLos=p,d.shipEffectiveLos=f,d.fleetEffectiveLos=function(e,t,r){return e.totalShipStats(function(e){return f(e,t)})-Math.ceil(.4*r)+12};var m,g=function(){function e(e){var t=this;this.ships=e,this.totalShipStats=function(e){return Object(n.a)(t.nonNullableShips,e)},this.effectiveLos=function(e,r){return h.fleetEffectiveLos(t,e,r)}}return Object.defineProperty(e.prototype,"nonNullableShips",{get:function(){return this.ships.filter(o.c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planes",{get:function(){return Object(a.a)(this.nonNullableShips,function(e){return e.planes})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(n.a)(this.planes.filter(function(e){return!e.category.isReconnaissanceAircraft}),function(e){return e.fighterPower})},enumerable:!0,configurable:!0}),e}(),b=function(){return function(e){var t=this;this.shipFactory=e,this.create=function(e){var r=e.ships.map(t.shipFactory.create);return new g(r)}}}(),y=function(){function e(e,t,r){var i=this;this.equipment=e,this.slots=t,this.index=r,this.contactSelectionRate=function(e){var t=i.equipment,r=t.los,n=t.improvement;return Math.ceil(r+n.contactSelectionModifier)/(20-2*e.contactMultiplier)}}return Object.defineProperty(e.prototype,"category",{get:function(){return this.equipment.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.slots[this.index]},set:function(e){this.slots[this.index]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return function(e,t){if(0===t)return 0;var r=e.proficiency,i=function(e){return e.antiAir+1.5*e.interception+e.improvement.fighterPowerModifier}(e);return Math.floor(i*Math.sqrt(t)+r.fighterPowerBonus)}(this.equipment,this.slotSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){return function(e,t){if(0===t)return 0;var r=e.proficiency,i=function(e){return e.antiAir+e.interception+2*e.antiBomber+e.improvement.fighterPowerModifier}(e);return Math.floor(i*Math.sqrt(t)+r.fighterPowerBonus)}(this.equipment,this.slotSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canContact",{get:function(){var e=this.category;return e.isTorpedoBomber||e.isReconnaissanceAircraft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactTriggerFactor",{get:function(){var e=this.equipment,t=this.slotSize;return Math.floor(e.los*Math.sqrt(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canParticipateInAirstrike",{get:function(){var e=this.category;return 0!==this.slotSize&&(e.isDiveBomber||e.isTorpedoBomber)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosModifier",{get:function(){var e=this.category,t=this.equipment,r=this.slotSize;return e.isObservationPlane?t.los*Math.floor(Math.sqrt(r)):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwordfish",{get:function(){return this.equipment.name.includes("Swordfish")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightFighter",{get:function(){return 45===this.equipment.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAttacker",{get:function(){return 46===this.equipment.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightPlane",{get:function(){return this.isNightFighter||this.isNightAttacker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAircraft",{get:function(){var e=this.isNightPlane,t=this.isSwordfish,r=this.equipment;return e||t||[154,320].includes(r.masterId)},enumerable:!0,configurable:!0}),e.prototype.calcNightAerialAttackPower=function(e){void 0===e&&(e=!1);var t=this.isNightPlane,r=this.isNightAircraft,i=this.equipment,n=this.slotSize;if(!r)return 0;var a=i.firepower,o=i.torpedo,s=i.asw,u=i.bombing,c=0,l=.3;t&&(c=3,l=.45);var p=Math.sqrt(i.improvement.value);return a+(e?0:o)+u+c*n+l*(a+o+s+u)*Math.sqrt(n)+p},e.prototype.shotdown=function(e){this.slotSize-=e,this.slotSize<0&&(this.slotSize=0)},e}(),v=function(e,t){var r=new Array;return e.map(function(i,n){var a=t[n];i&&a&&a.category.isAerialCombatAircraft&&r.push(new y(a,e,n))}),r},A=function(e){var t=e.category,r=e.los;return t.is("LandBasedReconnaissanceAircraft")?r<=7?1.12:8===r?1.15:1.18:1},w=function(e){var t=e.category,r=e.los;return t.is("CarrierBasedReconnaissanceAircraft")||t.is("CarrierBasedReconnaissanceAircraft2")?r<=7?1.2:8===r?1.25:1.3:t.is("LandBasedReconnaissanceAircraft")?1.18:t.is("ReconnaissanceSeaplane")||t.is("LargeFlyingBoat")?r<=7?1.1:8===r?1.13:1.16:1},C=function(){function e(e,t){this.slots=e,this.equipments=t,this.planes=v(e,t)}return Object.defineProperty(e.prototype,"nonNullableEquipments",{get:function(){return this.equipments.filter(o.c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlanes",{get:function(){return this.nonNullableEquipments.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(n.a)(this.planes,function(e){return e.fighterPower}),t=Math.max.apply(Math,this.nonNullableEquipments.map(A));return Math.floor(e*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(n.a)(this.planes,function(e){return e.interceptionPower}),t=Math.max.apply(Math,this.nonNullableEquipments.map(w));return Math.floor(e*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCombatRadius",{get:function(){return this.hasPlanes?Math.min.apply(Math,this.nonNullableEquipments.map(function(e){return e.radius})):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combatRadius",{get:function(){if(!this.hasPlanes)return 0;var e=this.minCombatRadius,t=this.nonNullableEquipments,r=Math.max.apply(Math,t.map(function(e){var t=e.radius;return e.category.isReconnaissanceAircraft?t:0}));if(r>0){var i=Math.min(Math.sqrt(r-e),3);return Math.round(e+i)}return e},enumerable:!0,configurable:!0}),e}(),M=function(){return function(e){var t=this;this.equipmentFactory=e,this.create=function(e){var r=e.equipments,i=e.slots.concat(),n=r.map(t.equipmentFactory.create);return new C(i,n)}}}(),S=r(3372),P=function(){function e(e,t,r,i){this.side=e,this.fleetType=t,this.fleets=r,this.landBase=i}return Object.defineProperty(e.prototype,"mainFleet",{get:function(){return this.fleets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escortFleet",{get:function(){if(this.isCombinedFleetOperation)return this.fleets[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleetOperation",{get:function(){return this.fleetType!==S.a.Single},enumerable:!0,configurable:!0}),e}(),O=function(){function e(e,t){this.fleetFactory=e,this.landBasedAirCorpsFactory=t}return e.prototype.create=function(e){var t=e.side,r=e.fleetType,i=e.fleets,n=e.landBase,a=i.map(this.fleetFactory.create),o=n.map(this.landBasedAirCorpsFactory.create);return new P(t,r,a,o)},e}();!function(e){e[e.KongouKai2=149]="KongouKai2",e[e.HieiKai2=150]="HieiKai2",e[e.HarunaKai2=151]="HarunaKai2",e[e.KirishimaKai2=152]="KirishimaKai2",e[e.Shinyou=534]="Shinyou",e[e.ShinyouKai=381]="ShinyouKai",e[e.ShinyouKai2=536]="ShinyouKai2",e[e.AobaKai=264]="AobaKai",e[e.KinugasaKai=295]="KinugasaKai",e[e.KinugasaKai2=142]="KinugasaKai2",e[e.FurutakaKai2=416]="FurutakaKai2",e[e.KakoKai2=417]="KakoKai2"}(m||(m={}));var q=m,k=function(e){var t=e.countEquipment(104);if(0!==t){var r=new u,i=e.masterId;return i===q.HarunaKai2?r.add({multiplier:t,firepower:2,antiAir:1,evasion:2}):i===q.KongouKai2?r.add({multiplier:t,firepower:2}):i!==q.HieiKai2&&i!==q.KirishimaKai2||r.add({multiplier:t,firepower:1}),r}},j=function(e){var t=e.countEquipment(15);if(0!==t){var r=new u,i=e.shipClass,n=e.name,a=Object(o.e)(n);return i.is("KagerouClass")&&a&&r.add({multiplier:t,torpedo:2}),r}},F=function(e){var t=e.countEquipment(174);if(0!==t){var r=new u,i=e.shipClass;return i.is("KamikazeClass")&&r.add({multiplier:t,torpedo:1,evasion:2}),i.is("KongouClass")&&r.add({multiplier:t,torpedo:6,evasion:3}),r}},B=function(e){var t=e.countEquipment(179);if(0!==t){var r=new u;return e.shipClass.is("AkizukiClass")&&r.add({multiplier:t,torpedo:1}),r}},E=function(e){var t=e.countEquipment(function(e){return 229===e.masterId&&e.improvement.value>=7});if(0!==t){var r=new u,i=e.name,n=e.shipClass.name,a="神風型"===n,o="睦月型"===n,s="海防艦"===e.shipType.name;return a||o||s?r.add({multiplier:t,firepower:1,antiAir:1}):"由良改二"===i?r.add({multiplier:t,firepower:2,antiAir:3}):"鬼怒改二"===i&&r.add({multiplier:t,firepower:2,antiAir:2}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&(a||o?r.add({firepower:2,evasion:3}):s?r.add({firepower:1,evasion:4}):"由良改二"!==i&&"鬼怒改二"!==i||r.add({firepower:3,evasion:2})),r}},T=function(e){var t=e.countEquipment(266);if(0!==t){var r=new u,i=e.name,n=e.shipClass,a=n.is("ShiratsuyuClass"),s=n.is("AsashioClass"),c=n.is("KagerouClass");return c&&Object(o.e)(i)?1===t?r.add({firepower:2}):2===t?r.add({firepower:5}):3===t&&r.add({firepower:6}):"雪風改"===i||"磯風乙改"===i||"時雨改二"===i?r.add({multiplier:t,firepower:1,evasion:1}):(a||s||c)&&r.add({multiplier:t,firepower:1}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&(a||s?r.add({firepower:1,torpedo:3,evasion:1}):c&&r.add({firepower:2,torpedo:3,evasion:1})),r}},I=function(e){var t=e.countEquipment(267);if(0!==t){var r=new u,i=e.name,n=e.shipClass.name,a="陽炎型"===n,s="夕雲型"===n,c="島風型"===n,l=Object(o.e)(i);return s&&l?r.add({multiplier:t,firepower:3,evasion:1}):s||c?r.add({multiplier:t,firepower:2,evasion:1}):a&&l?1===t?r.add({firepower:2,evasion:1}):2===t?r.add({firepower:3,evasion:2}):3===t&&r.add({firepower:4,evasion:3}):a&&r.add({multiplier:t,firepower:1,evasion:1}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&(s&&l?r.add({firepower:3,torpedo:4,evasion:3}):s?r.add({firepower:2,torpedo:3,evasion:1}):"島風改"===i&&r.add({firepower:1,torpedo:3,evasion:2})),r}},R=function(e){var t=e.equipments.filter(o.c).filter(function(e){return 285===e.masterId}),r=t.length,i=t.filter(function(e){return e.improvement.value>=10}).length;if(0!==r){var n=new u,a=e.shipClass,s=Object(o.e)(e.name),c=a.isSpecialTypeDD&&s,l=a.is("HatsuharuClass")&&s;return(c||l)&&(n.add({multiplier:Math.min(r,2),torpedo:2,evasion:1}),n.add({multiplier:Math.min(i,2),firepower:1})),n}},K=function(e){var t=e.countEquipment(289);if(0!==t){var r=new u,i=e.name;return"金剛改二"===i?r.add({multiplier:t,firepower:2,antiAir:1}):"榛名改二"===i?r.add({multiplier:t,firepower:2,antiAir:2,evasion:2}):"比叡改二"!==i&&"霧島改二"!==i||r.add({multiplier:t,firepower:1}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&("金剛改二"!==i&&"榛名改二"!==i||r.add({firepower:2,evasion:2})),r}},L=function(e){var t=e.countEquipment(293);if(0!==t){var r=new u,i=e.shipClass.name,n="占守型"===i,a="択捉型"===i,o="神風型"===i,s="睦月型"===i;o||s?r.add({multiplier:t,firepower:2,antiAir:1,evasion:3}):(n||a)&&r.add({multiplier:t,firepower:1,antiAir:1,evasion:2}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&(o||s?r.add({firepower:2,torpedo:1,evasion:3}):(n||a)&&r.add({firepower:2,evasion:3,asw:1}));var c=e.countEquipment(174);return 1===c?r.add({firepower:2,torpedo:4}):2===c&&r.add({firepower:3,torpedo:7}),r}},D=function(e){var t=e.countEquipment(294);if(0!==t){var r=new u;if(e.shipClass.isSpecialTypeDD){r.add({multiplier:t,firepower:1}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&r.add({firepower:3,torpedo:1,evasion:2});var i=e.countEquipment(285),n=e.countEquipment(13)+e.countEquipment(125)+i;n>=1&&r.add({firepower:1,torpedo:3}),n>=2&&r.add({firepower:1,torpedo:2}),i>=1&&r.add({torpedo:1})}return r}},N=function(e){var t=e.countEquipment(295);if(0!==t){var r=new u;if(e.shipClass.isSpecialTypeDD){r.add({multiplier:t,firepower:2,antiAir:2}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&r.add({firepower:3,torpedo:1,evasion:2}),e.hasEquipment(function(e){return e.isAntiAirRadar})&&r.add({antiAir:6});var i=e.countEquipment(285),n=e.countEquipment(13)+e.countEquipment(125)+i;n>=1&&r.add({firepower:1,torpedo:3}),n>=2&&r.add({firepower:1,torpedo:2}),i>=1&&r.add({torpedo:1})}return r}},z=function(e){var t=e.countEquipment(296);if(0!==t){var r=new u,i=e.name,n=e.shipClass;return n.either("AyanamiClass","AkatsukiClass")?r.add({multiplier:t,firepower:1}):n.is("HatsuharuClass")?r.add({multiplier:t,firepower:1,evasion:1}):"白露改二"===i?r.add({multiplier:t,firepower:2,evasion:2}):"時雨改二"===i?r.add({multiplier:t,firepower:2,antiAir:1,evasion:1}):"村雨改二"===i?r.add({multiplier:t,firepower:1,antiAir:1,evasion:2}):"夕立改二"===i?r.add({multiplier:t,firepower:2,antiAir:1,evasion:1}):["江風改二","白露改二"].includes(i)?r.add({multiplier:t,firepower:2,evasion:2}):n.is("ShiratsuyuClass")&&r.add({multiplier:t,firepower:1}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&(n.either("AyanamiClass","AkatsukiClass","HatsuharuClass")?r.add({firepower:1,torpedo:2,evasion:2}):n.is("ShiratsuyuClass")&&r.add({firepower:1,torpedo:3,evasion:2})),e.hasEquipment(function(e){return e.isAntiAirRadar})&&(n.either("AyanamiClass","AkatsukiClass","HatsuharuClass")?r.add({antiAir:5}):n.is("ShiratsuyuClass")&&r.add({antiAir:6})),e.hasEquipment(285)&&n.either("AyanamiClass","AkatsukiClass","HatsuharuClass")&&r.add({firepower:1,torpedo:3}),e.hasEquipment(286)&&n.is("ShiratsuyuClass")&&r.add({firepower:1,torpedo:3}),r}},G=function(e){var t=e.countEquipment(297);if(0!==t){var r=new u,i=e.shipClass.name,n="綾波型"===i,a="暁型"===i;return"吹雪型"===i?r.add({multiplier:t,evasion:2}):(n||a)&&r.add({multiplier:t,evasion:1}),r}},H=function(e){var t=e.countEquipment(301);if(0!==t&&e.shipClass.isRoyalNavy)return new u({multiplier:t,antiAir:2,evasion:1,armor:1})},x=function(e){var t=e.countEquipment(304);if(0!==t){var r=new u,i=e.shipClass;return i.is("KumaClass")||i.is("NagaraClass")||i.is("SendaiClass")||i.is("AganoClass")?r.add({multiplier:t,firepower:1,evasion:1,asw:1}):i.is("GotlandClass")&&r.add({multiplier:t,firepower:1,evasion:2,asw:2}),r}},_=r(3431),J=[function(e){var t=e.countEquipment(313);if(0!==t){var r=new u,i=e.shipClass,n=e.shipType;return i.isUsNavy&&n.is("Destroyer")&&r.add({multiplier:t,firepower:2,antiAir:2,evasion:1,armor:1}),r}},function(e){var t=e.countEquipment(308);if(0!==t){var r=new u,i=e.shipClass;if(e.shipType.is("Destroyer"))return i.isUsNavy?r.add({multiplier:t,firepower:2,antiAir:1,evasion:1}):r.add({multiplier:t,firepower:1}),r}},function(e){var t=e.countEquipment(282);if(0!==t){var r=new u,i=e.name.includes("Ташкент"),n=e.name.includes("Верный"),a=e.name.includes("夕張");return(i||n||a)&&r.add({multiplier:t,firepower:2,armor:1}),r}}].concat([function(e){var t=e.countEquipment(119);if(0!==t){var r=new u,i=e.shipClass;return i.either("KatoriClass","YuubariClass")&&r.add({multiplier:t,firepower:1}),i.is("NisshinClass")&&r.add({multiplier:t,firepower:2,torpedo:1}),r}},function(e){var t=e.countEquipment(310);if(0!==t){var r=new u,i=e.shipClass;return i.is("YuubariClass")&&r.add({multiplier:t,firepower:2,antiAir:1,evasion:1}),i.is("KatoriClass")&&r.add({multiplier:t,firepower:2,evasion:1}),i.is("NisshinClass")&&r.add({multiplier:t,firepower:3,torpedo:2,antiAir:1,evasion:1}),r}},function(e){var t=e.countEquipment(90);if(0!==t){var r=new u,i=e.shipClass,n=e.name.includes("青葉");return[q.FurutakaKai2,q.KakoKai2,q.KinugasaKai].includes(e.masterId)&&r.add({multiplier:t,firepower:1}),q.AobaKai===e.masterId&&r.add({multiplier:t,firepower:1,antiAir:1}),q.KinugasaKai2===e.masterId&&r.add({multiplier:t,firepower:2,evasion:1}),e.hasEquipment(function(e){return e.isSurfaceRadar})&&(i.is("FurutakaClass")||i.is("AobaClass"))&&r.add({firepower:3,torpedo:2,evasion:2}),e.hasEquipment(function(e){return e.isAntiAirRadar})&&n&&r.add({antiAir:5,evasion:2}),r}},function(e){var t=e.countEquipment(303);if(0!==t){var r=new u,i=e.shipClass;return i.either("KumaClass","NagaraClass","SendaiClass","AganoClass")?r.add({multiplier:t,firepower:1,antiAir:1}):i.is("GotlandClass")&&r.add({multiplier:t,firepower:1,antiAir:2,evasion:1}),r}},function(e){var t=e.countEquipment(340);if(0!==t){var r=new u;return e.shipClass.is("DucaDegliAbruzziClass")&&r.add({multiplier:t,firepower:1,antiAir:1,evasion:1}),r}},function(e){var t=e.countEquipment(341);if(0!==t){var r=new u,i=e.shipClass;return i.is("DucaDegliAbruzziClass")&&r.add({multiplier:t,firepower:2,antiAir:1,evasion:1}),i.is("GotlandClass")&&r.add({multiplier:t,firepower:1,antiAir:1,evasion:1}),r}}],[function(e){var t=e.countEquipment(318);if(0!==t){var r=new u,i=e.shipClass,n=Object(o.e)(e.name),a=i.is("NagatoClass")&&n,s=e.shipType.is("AviationBattleship")&&i.is("IseClass");return a&&r.add({multiplier:t,firepower:3,antiAir:2,evasion:1}),s&&r.add({multiplier:t,firepower:2,antiAir:2,evasion:2}),"日向改二"===e.name&&r.add({multiplier:t,firepower:1}),e.shipClass.is("FusouClass")&&n&&r.add({multiplier:t,firepower:1}),e.hasEquipment(290)&&(a&&r.add({firepower:2,evasion:2,armor:1}),s&&r.add({evasion:2,armor:1}),"日向改二"===e.name&&r.add({firepower:1})),e.hasEquipment(function(e){return e.isAntiAirRadar})&&s&&r.add({antiAir:2,evasion:3}),r}},function(e){var t=e.countEquipment(290);if(0!==t){var r=new u,i=e.shipClass,n=Object(o.e)(e.name);return i.is("FusouClass")&&n&&r.add({multiplier:t,firepower:1}),i.is("IseClass")&&Object(o.d)(e.name)&&r.add({multiplier:t,firepower:2,antiAir:2,evasion:1}),"伊勢改二"===e.name&&r.add({multiplier:t,firepower:3,antiAir:2,evasion:1}),"日向改二"===e.name&&r.add({multiplier:t,firepower:3,antiAir:2,evasion:2}),e.hasEquipment(function(e){return e.isAntiAirRadar})&&i.is("IseClass")&&n&&r.add({antiAir:2,evasion:3}),r}},function(e){var t=e.countEquipment(328);if(0!==t){var r=e.shipClass,i=new u;return r.is("KongouClass")&&("金剛改二丙"===e.name?i.add({multiplier:t,firepower:3,torpedo:1,evasion:1}):Object(o.e)(e.name)||Object(o.d)(e.name)?i.add({multiplier:t,firepower:2,evasion:1}):i.add({multiplier:t,firepower:1})),r.either("FusouClass","IseClass")&&i.add({multiplier:t,firepower:1}),i}},function(e){var t=e.countEquipment(329);if(0!==t){var r=e.shipClass,i=new u;return r.is("KongouClass")&&("金剛改二丙"===e.name?i.add({multiplier:t,firepower:4,torpedo:2,antiAir:1,evasion:1}):Object(o.e)(e.name)?i.add({multiplier:t,firepower:3,antiAir:1,evasion:1}):Object(o.d)(e.name)?i.add({multiplier:t,firepower:2,evasion:1}):i.add({multiplier:t,firepower:1})),r.either("FusouClass","IseClass")&&i.add({multiplier:t,firepower:1}),i}},function(e){var t=e.countEquipment(330);if(0!==t){var r=new u;return/^(Nelson改|長門改二|陸奥改二)$/.test(e.name)&&r.add({multiplier:t,firepower:2}),(/^(長門改?|陸奥改?)$/.test(e.name)||e.shipClass.is("ColoradoClass"))&&r.add({multiplier:t,firepower:1}),r}},function(e){var t=e.countEquipment(331);if(0!==t){var r=new u;return"Colorado改"===e.name&&r.add({multiplier:t,firepower:2,evasion:1}),/^(Nelson改|長門改二|陸奥改二)$/.test(e.name)&&r.add({multiplier:t,firepower:2}),/^(長門改?|陸奥改?|Colorado)$/.test(e.name)&&r.add({multiplier:t,firepower:1}),r}},function(e){var t=e.countEquipment(332);if(0!==t){var r=new u;return"Colorado改"===e.name?r.add({multiplier:t,firepower:2,evasion:1,antiAir:1}):/^(Nelson改|長門改二|陸奥改二)$/.test(e.name)?r.add({multiplier:t,firepower:2}):e.shipClass.either("NagatoClass","ColoradoClass")&&r.add({multiplier:t,firepower:1}),r}}],[function(e){var t=e.countEquipment(316);if(0!==t){var r=new u;return e.shipClass.is("AquilaClass")&&r.add({multiplier:t,firepower:4,antiAir:1,evasion:1}),r}},function(e){var t=e.countEquipment(184);if(0!==t){var r=new u;return e.shipClass.is("AquilaClass")&&r.add({multiplier:t,firepower:1,antiAir:2,evasion:3}),r}},function(e){var t=e.countEquipment(189);if(0!==t){var r=new u;return e.shipClass.either("AquilaClass","GrafZeppelinClass")&&r.add({multiplier:t,antiAir:1,evasion:2}),r}},function(e){var t=e.countEquipment(188);if(0!==t){var r=new u;return e.shipClass.is("AquilaClass")&&r.add({multiplier:t,firepower:3,antiAir:1,evasion:1}),r}},function(e){if(0!==e.countEquipment(335)){var t=new u;return["赤城改","加賀改"].includes(e.name)&&t.add({antiAir:1,evasion:1}),["赤城改二","赤城改二戊"].includes(e.name)&&t.add({antiAir:2,evasion:1}),t}},function(e){if(0!==e.countEquipment(336)){var t=new u;return["赤城改","加賀改"].includes(e.name)&&t.add({firepower:1,antiAir:1,evasion:1}),["赤城改二","赤城改二戊"].includes(e.name)&&t.add({firepower:1,antiAir:2,evasion:1}),t}},function(e){if(0!==e.countEquipment(338)){var t=new u;return["赤城改","加賀改"].includes(e.name)&&t.add({firepower:1,antiAir:1,evasion:2}),"赤城改二"===e.name&&t.add({firepower:1,antiAir:2,evasion:3}),"赤城改二戊"===e.name&&t.add({firepower:4,antiAir:3,evasion:4}),t}},function(e){if(0!==e.countEquipment(339)){var t=new u;return["赤城改","加賀改"].includes(e.name)&&t.add({firepower:1,antiAir:2,evasion:2}),"赤城改二"===e.name&&t.add({firepower:1,antiAir:3,evasion:4}),"赤城改二戊"===e.name&&t.add({firepower:6,antiAir:4,evasion:5}),t}}],[function(e){var t=e.countEquipment(18);if(0!==t){var r=new u;return["赤城改","加賀改","大鳳改"].includes(e.name)&&r.add({multiplier:t,firepower:1}),"赤城改二"===e.name&&r.add({multiplier:t,firepower:1,evasion:1}),"赤城改二戊"===e.name&&r.add({multiplier:t,firepower:2,evasion:1}),r}},function(e){var t=e.countEquipment(52);if(0!==t){var r=new u;return["赤城改","加賀改","大鳳改"].includes(e.name)&&r.add({multiplier:t,firepower:1}),"赤城改二"===e.name&&r.add({multiplier:t,firepower:1,evasion:1}),"赤城改二戊"===e.name&&r.add({multiplier:t,firepower:2,evasion:1}),r}},function(e){if(0!==e.countEquipment(93)){var t=new u;return/^飛龍/.test(e.name)&&t.add({firepower:3}),/^蒼龍/.test(e.name)&&t.add({firepower:1}),t}},function(e){if(0!==e.countEquipment(94)){var t=new u;return"飛龍改二"===e.name&&t.add({firepower:7}),"蒼龍改二"===e.name&&t.add({firepower:3}),t}},function(e){if(0!==e.countEquipment(143)){var t=new u;return/^赤城改/.test(e.name)&&t.add({firepower:3}),("加賀改"===e.name||/^翔鶴/.test(e.name))&&t.add({firepower:2}),(/^瑞鶴/.test(e.name)||"龍驤改二"===e.name)&&t.add({firepower:1}),t}},function(e){if(0!==e.countEquipment(144)){var t=new u;return/^赤城改/.test(e.name)&&t.add({firepower:3}),/^翔鶴改二甲?/.test(e.name)&&t.add({firepower:4}),/^(瑞鶴改二甲?|翔鶴改?|加賀改)$/.test(e.name)&&t.add({firepower:2}),/^(瑞鶴改?|龍驤改二)$/.test(e.name)&&t.add({firepower:1}),t}},function(e){var t=e.countEquipment(342);if(0!==t){var r=new u;return(["赤城改","加賀改","大鳳改"].includes(e.name)||/^(瑞鶴改二|翔鶴改二)甲?$/.test(e.name))&&r.add({multiplier:t,firepower:1}),"赤城改二"===e.name&&r.add({multiplier:t,firepower:2,antiAir:1,evasion:1}),"赤城改二戊"===e.name&&r.add({multiplier:t,firepower:3,antiAir:2,evasion:2}),r}},function(e){var t=e.countEquipment(343);if(0!==t){var r=new u;return/^(瑞鶴改二|翔鶴改二)甲?$/.test(e.name)&&r.add({multiplier:t,firepower:1}),["赤城改","加賀改"].includes(e.name)&&r.add({multiplier:t,firepower:2}),"赤城改二"===e.name&&r.add({multiplier:t,firepower:3,antiAir:2,evasion:1}),"赤城改二戊"===e.name&&r.add({multiplier:t,firepower:5,antiAir:3,evasion:3}),r}},function(e){var t=e.countEquipment(344);if(0!==t){var r=new u;return"赤城改二戊"===e.name&&r.add({multiplier:t,firepower:3}),"龍鳳改"===e.name&&r.add({multiplier:t,firepower:4,asw:1}),/^瑞鳳改二乙?$/.test(e.name)&&r.add({multiplier:t,firepower:2,asw:2}),"祥鳳改"===e.name&&r.add({multiplier:t,firepower:2,asw:1}),r}},function(e){var t=e.countEquipment(345);if(0!==t){var r=new u;return"赤城改二戊"===e.name&&r.add({multiplier:t,firepower:3,evasion:1}),"龍鳳改"===e.name&&r.add({multiplier:t,firepower:5,asw:1,evasion:2}),/^瑞鳳改二乙?$/.test(e.name)&&r.add({multiplier:t,firepower:3,asw:2,evasion:2}),"祥鳳改"===e.name&&r.add({multiplier:t,firepower:3,asw:1,evasion:1}),r}}],[function(e){var t=Object(o.e)(e.name);if(e.shipClass.is("IseClass")&&t){var r=e.countEquipment(291),i=e.countEquipment(292),n=e.countEquipment(24)+e.countEquipment(57)+e.countEquipment(111),a=new u;return r&&a.add({multiplier:r,firepower:6,evasion:1}),i&&a.add({multiplier:i,firepower:8,evasion:2}),n&&a.add({multiplier:n,firepower:2}),a}},function(e){if(0!==e.countEquipment(99)){var t=new u;return/^飛龍/.test(e.name)&&t.add({firepower:1}),/^蒼龍/.test(e.name)&&t.add({firepower:4}),t}},function(e){if(0!==e.countEquipment(100)){var t=new u;return"飛龍改二"===e.name&&t.add({firepower:3}),"蒼龍改二"===e.name&&t.add({firepower:6}),"伊勢改二"===e.name&&t.add({firepower:4}),t}},function(e){var t=e.countEquipment(319);if(0!==t){var r=Object(o.e)(e.name),i=e.shipClass.is("IseClass")&&r;if(i){var n=new u;return i&&n.add({multiplier:t,firepower:7,antiAir:3,evasion:2}),n}}},function(e){if(0!==e.countEquipment(320)){var t=new u;return/^(蒼龍改二|飛龍改二)$/.test(e.name)&&t.add({firepower:3}),/^(鈴谷航改二|熊野航改二|日向改二)$/.test(e.name)&&t.add({firepower:4}),"伊勢改二"===e.name&&t.add({firepower:2}),t}},function(e){var t=e.countEquipment(305)+e.countEquipment(306);if(0!==t){var r=new u,i=e.shipClass,n=[q.Shinyou,q.ShinyouKai,q.ShinyouKai2].includes(e.masterId);return i.either("GrafZeppelinClass","AquilaClass")?r.add({multiplier:t,firepower:1,evasion:1}):n?r.add({multiplier:t,asw:3,evasion:2}):i.is("TaiyouClass")&&r.add({multiplier:t,asw:1,evasion:1}),r}}],l,[function(e){var t=e.countEquipment(307);if(0!==t){var r=new u;return e.shipClass.isUsNavy&&r.add({multiplier:t,firepower:1,antiAir:1,evasion:1}),r}},function(e){var t=e.countEquipment(315);if(0!==t){var r=new u,i=e.shipClass;return i.either("JohnCButlerClass","FletcherClass")?(r.add({multiplier:t,firepower:3,evasion:3,los:4}),r.add({range:1})):i.isUsNavy&&r.add({multiplier:t,firepower:2,evasion:3,los:4}),r}},function(e){var t=e.countEquipment(106);if(0!==t){var r=new u,i=function(t){return["","改","乙改","改二","改二乙","改ニ丁"].map(function(e){return t+e}).includes(e.name)};return["潮","時雨","初霜"].some(i)||["榛名改二","長門改二"].includes(e.name)?r.add({multiplier:t,firepower:1,antiAir:2,evasion:3,armor:1}):["矢矧","霞","雪風","磯風","磯風","浜風","朝霜","涼月"].some(i)?r.add({multiplier:t,antiAir:2,evasion:2,armor:1}):(["大淀","響","鹿島"].some(i)||147===e.masterId)&&r.add({multiplier:t,antiAir:1,evasion:3,armor:1}),r}}],[function(e){if(0!==e.countEquipment(35)){var t=new u;return"金剛改二"===e.name||"金剛改二丙"===e.name?t.add({firepower:1,antiAir:1}):"比叡改二"===e.name?t.add({antiAir:1}):"榛名改二"===e.name?t.add({antiAir:1,evasion:1}):"霧島改二"===e.name&&t.add({firepower:1}),t}},function(e){if(0!==e.countEquipment(317)){var t=new u;return"金剛改二"===e.name||"金剛改二丙"===e.name?t.add({firepower:3,antiAir:3}):"比叡改二"===e.name?t.add({firepower:2,antiAir:2}):"榛名改二"===e.name||"陸奥改二"===e.name?t.add({firepower:2,antiAir:2,evasion:1}):"霧島改二"===e.name?t.add({firepower:3,antiAir:2}):"長門改二"===e.name?t.add({firepower:1,antiAir:2}):e.shipClass.is("KongouClass")&&t.add({firepower:1,antiAir:1}),t}}],[function(e){if(e.hasEquipment(268)&&["多摩改","多摩改二","木曾改","木曾改二"].includes(e.name))return new u({evasion:7,armor:2})}],[function(e){if(0!==e.countEquipment(74)){var t=new u,r=e.name,i=r.includes("比叡"),n=r.includes("霧島"),a=r.includes("鳥海"),o=r.includes("神通"),s=r.includes("暁"),c=r.includes("秋雲"),l=r.includes("雪風");return o?t.add({firepower:2,torpedo:2,evasion:-1}):i||n||a||s?t.add({firepower:2,evasion:-1}):c?t.add({firepower:1}):l&&t.add({antiAir:1}),t}},function(e){if(0!==e.countEquipment(140)){var t=new u,r=e.name,i=r.includes("比叡"),n=r.includes("霧島");return(i||n)&&t.add({firepower:3,evasion:-2}),t}}],[function(e){var t=e.equipments.filter(o.c).filter(function(e){return 286===e.masterId}),r=t.length,i=t.filter(function(e){return e.improvement.value>=5}).length,n=t.filter(function(e){return e.improvement.value>=10}).length;if(0!==r){var a=new u,s=e.shipClass;if(Object(o.e)(e.name))return s.either("ShiratsuyuClass","AsashioClass","KagerouClass","YuugumoClass")&&(a.add({multiplier:Math.min(r,2),torpedo:2,evasion:1}),a.add({multiplier:Math.min(n,2),firepower:1}),s.is("KagerouClass")&&a.add({multiplier:Math.min(i,2),torpedo:1})),a}},function(e){var t=e.countEquipment(283);if(0!==t){var r=new u,i=e.name.includes("Ташкент"),n=e.name.includes("Верный");return(i||n)&&r.add({multiplier:t,firepower:1,torpedo:3,armor:1}),r}},function(e){var t=e.countEquipment(314);if(0!==t){var r=new u,i=e.shipClass,n=e.shipType;return i.isUsNavy&&n.is("Destroyer")&&r.add({multiplier:t,firepower:1,torpedo:3}),r}}],[function(e){var t=e.countEquipment(47);if(0!==t){var r=new u,i=function(t){return["","改","乙改","改二","改二乙","改ニ丁"].map(function(e){return t+e}).includes(e.name)};return["神風","春風","時雨","山風","舞風","朝霜"].some(i)?r.add({multiplier:t,firepower:1,evasion:2,asw:3}):["潮","雷","山雲","磯風","浜風","岸波"].some(i)&&r.add({multiplier:t,evasion:2,asw:2}),r}}],[function(e){var t=e.countEquipment(79)+e.countEquipment(81);if(0!==t){var r=new u,i=Object(o.e)(e.name),n=e.shipClass,a=n.is("IseClass"),s=n.is("FusouClass")&&i;return a&&i?r.add({multiplier:t,firepower:3}):(a||s)&&r.add({multiplier:t,firepower:2}),r}},function(e){var t=e.countEquipment(237);if(0!==t){var r=new u,i=Object(o.e)(e.name),n=e.shipClass,a=n.is("IseClass"),s=n.is("FusouClass")&&i;return a&&i?r.add({multiplier:t,firepower:4,evasion:2}):a?r.add({multiplier:t,firepower:3,evasion:1}):s&&r.add({multiplier:t,firepower:2}),r}},function(e){var t=e.countEquipment(322);if(0!==t){var r=new u;return e.shipClass.is("IseClass")&&Object(o.e)(e.name)&&r.add({multiplier:t,firepower:5,antiAir:2,asw:1,evasion:2}),r}},function(e){var t=e.countEquipment(323);if(0!==t){var r=new u;return e.shipClass.is("IseClass")&&Object(o.e)(e.name)&&r.add({multiplier:t,firepower:6,antiAir:3,asw:2,evasion:3}),r}}],[function(e){var t=e.countEquipment(326);if(0!==t){var r=new u;return"伊勢改二"===e.name&&r.add({multiplier:t,firepower:2,asw:1,evasion:2}),"日向改二"===e.name&&r.add({multiplier:t,firepower:3,asw:2,evasion:3}),r}},function(e){var t=e.countEquipment(327);if(0!==t){var r=new u;return"伊勢改二"===e.name&&r.add({multiplier:t,firepower:1,asw:3,evasion:1}),"日向改二"===e.name&&r.add({multiplier:t,firepower:2,asw:4,evasion:2}),r}},function(e){var t=e.countEquipment(324)+e.countEquipment(325);if(0!==t){var r=new u;return"伊勢改二"===e.name&&r.add({multiplier:t,antiAir:1,evasion:1}),"日向改二"===e.name&&r.add({multiplier:t,antiAir:2,evasion:1}),r}}],[k,j,F,B,E,T,I,R,K,L,D,N,z,G,H,x,function(e){if(e.hasEquipment(33)){var t=_.a.getSpeedGroup(e),r=e.countEquipment(34),i=e.countEquipment(87),n=_.a.getSpeedIncrement(t,r,i);return n>0?new u({speed:n}):[561,681].includes(e.masterId)?new u({speed:5}):void 0}},function(e){var t=e.countEquipment(58);if(0!==t){var r=new u,i=e.shipClass;return(e.shipType.is("TorpedoCruiser")||i.is("ShimakazeClass")||i.is("AkizukiClass"))&&r.add({multiplier:t,torpedo:1}),r}},function(e){var t=e.countEquipment(63);if(0!==t){var r=new u,i=e.name,n=e.shipClass.name;return"綾波型"===n||"暁型"===n||"初春型"===n?r.add({multiplier:t,antiAir:1}):["白露改","白露改二","村雨改二"].includes(i)?r.add({multiplier:t,evasion:1}):"時雨改二"===i?r.add({multiplier:t,firepower:1}):"夕立改二"===i?r.add({multiplier:t,firepower:1,torpedo:1,antiAir:1,evasion:2}):["江風改二","海風改二"].includes(i)&&r.add({multiplier:t,evasion:2}),r}},function(e){var t=e.countEquipment(67);if(0!==t){var r=new u;return e.shipType.isSubmarineClass||r.add({multiplier:t,torpedo:-5}),r}},function(e){var t=e.countEquipment(298)+e.countEquipment(299)+e.countEquipment(300);if(0!==t){var r=new u,i=e.shipClass;return i.is("NelsonClass")?r.add({multiplier:t,firepower:2,armor:1}):i.is("QueenElizabethClass")?r.add({multiplier:t,firepower:2,armor:1,evasion:-2}):i.is("KongouClass")&&Object(o.e)(e.name)&&r.add({multiplier:t,firepower:1,armor:1,evasion:-3}),r}},function(e){var t=e.countEquipment(82)+e.countEquipment(302);if(0!==t){var r=new u;return e.shipClass.is("TaiyouClass")&&r.add({multiplier:t,asw:1,evasion:1}),r}}]),V=function(e){var t=new u;return J.forEach(function(r){var i=r(e);i&&t.add(i)}),t},$=function(){function e(e,t){var r=this;this.maxHp=e,this.nowHp=t,this.gte=function(e){var t=r.nowHp/r.maxHp;switch(e){case"Less":return t>=1;case"Minor":return t>=.75;case"Moderate":return t>=.5;case"Heavy":return t>=.25}return!0},this.lte=function(e){return e===r.damage||!r.gte(e)}}return Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.nowHp/this.maxHp;return e<=0?"Lost":e<=.25?"Heavy":e<=.5?"Moderate":e<=.75?"Minor":"Less"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){switch(this.damage){case"Less":case"Minor":return 1;case"Moderate":return.7;case"Heavy":return.4}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifire",{get:function(){switch(this.damage){case"Less":case"Minor":return 1;case"Moderate":return.8}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifire",{get:function(){return this.lte("Heavy")?0:this.shellingPowerModifier},enumerable:!0,configurable:!0}),e}(),U=function(){function e(e){void 0===e&&(e=49),this.value=e}return Object.defineProperty(e.prototype,"state",{get:function(){var e=this.value;return e>=50?"Sparkling":e>=30?"Normal":e>=20?"Orange":"Red"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){switch(this.state){case"Sparkling":return 1.2;case"Normal":return 1;case"Orange":return.8;case"Red":return.5}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightBattleAccuracyModifier",{get:function(){return this.shellingAccuracyModifier},enumerable:!0,configurable:!0}),e}(),Y=r(3430),Z=function(){function e(e,t,r,i,a,s,u,c){var l=this;this.master=e,this.stats=t,this.nakedStats=r,this.health=i,this.morale=a,this.slots=s,this.equipments=u,this.planes=c,this.canEquip=function(e,t){var r=l.master,i=r.equippable,n=r.isAbyssal,a=e.masterId,s=e.category;if(n)return!0;if(!i.categories.includes(s.id))return!1;if(l.slots.length<=t){return Y.a.includes(s.id)||i.expantionSlot.includes(a)||33===a}return!l.shipClass.is("IseClass")||!Object(o.e)(l.name)||!(t>1&&s.isMainGun)},this.hasEquipment=function(e){return"number"==typeof e?l.nonNullableEquipments.some(function(t){return t.masterId===e}):l.nonNullableEquipments.some(e)},this.countEquipment=function(e){var t=l.nonNullableEquipments;return void 0===e?t.length:"number"==typeof e?t.filter(function(t){return t.masterId===e}).length:t.filter(e).length},this.countEquipmentCategory=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.nonNullableEquipments.map(function(e){return e.category});return Object(n.a)(e,function(e){return"string"==typeof e?r.filter(function(t){return t.is(e)}).length:r.filter(e).length})},this.hasEquipmentCategory=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.countEquipmentCategory.apply(l,e)>0},this.totalEquipmentStats=function(e){return Object(n.a)(l.nonNullableEquipments,e)},this.slotCapacities=e.slotCapacities.concat()}return Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClass",{get:function(){return this.master.shipClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipType",{get:function(){return this.master.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.nakedStats.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(n.a)(this.planes.filter(function(e){var t=e.category;return t.isFighter||t.isTorpedoBomber||t.isDiveBomber}),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstallation",{get:function(){return 0===this.nakedStats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableEquipments",{get:function(){return this.equipments.filter(o.c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canNightAttack",{get:function(){var e=this.shipClass,t=(this.shipType,this.health),r=this.master;return!t.lte("Heavy")&&(e.is("ArkRoyalClass")?"Moderate"!==t.damage&&this.planes.some(function(e){return e.isSwordfish}):r.firepower[0]>0)},enumerable:!0,configurable:!0}),e}(),Q=function(){function e(e,t,r){this.nakedStats=e,this.equipments=t,this.statsBonus=r}return e.prototype.getStat=function(e){var t=this.nakedStats,r=this.equipments,i=this.statsBonus,a=0;return void 0!==i&&(a=i[e]),t[e]+Object(n.a)(r.filter(o.c),e)+a},Object.defineProperty(e.prototype,"hp",{get:function(){return this.nakedStats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.getStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.getStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.getStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.getStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.getStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.getStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.getStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.nakedStats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.getStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e=this.nakedStats,t=this.equipments,r=this.statsBonus,i=e.range,n=Object(c.a)(t,"range"),a=n&&n.range>i?n.range:i;return void 0===r?a:a+r.range},enumerable:!0,configurable:!0}),e}(),W=function(){return function(e,t){var r=this;this.masters=e,this.equipmentFactory=t,this.create=function(e){if(e){var t=e.masterId,i=e.level,n=void 0===i?1:i,a=e.increased,o=e.morale,u=r.masters.find(function(e){return e.id===t});if(u){var c=e.equipments?e.equipments.map(r.equipmentFactory.create):[],l=new s.c(u,n,a),p=new Q(l,c),f=e.nowHp,d=void 0===f?p.hp:f,h=new $(p.hp,d),m=new U(o),g=e.slots?e.slots.concat():u.slotCapacities.concat(),b=v(g,c),y=new Z(u,p,l,h,m,g,c,b);return y.stats.statsBonus=V(y),y}}}}}(),X=function(){function e(e){this.masterData=e,this.equipmentFactory=new i.a(e.equipments),this.shipFactory=new W(e.ships,this.equipmentFactory),this.fleetFactory=new b(this.shipFactory),this.landBasedAirCorpsFactory=new M(this.equipmentFactory),this.operationFactory=new O(this.fleetFactory,this.landBasedAirCorpsFactory)}return e.prototype.createOperation=function(e){return this.operationFactory.create(e)},e.prototype.createFleet=function(e){return this.fleetFactory.create(e)},e.prototype.createLandBasedAirCorps=function(e){return this.landBasedAirCorpsFactory.create(e)},e.prototype.createShip=function(e){return this.shipFactory.create(e)},e.prototype.createEquipment=function(e){return this.equipmentFactory.create(e)},e}();t.a=X},3480:function(e,t,r){"use strict";var i=r(3425),n=r(3426),a=r(3428),o=r(3427),s=r(85),u=function(){function e(e,t){var r=this;this.id=e,this.name=t,this.is=function(e){return r.id===s.a[e]},this.either=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(r.is)}}return e.fromId=function(t){var r=e.all.find(function(e){return e.id===t});if(r)return r;var i=new e(t,"");return this.all.push(i),i},Object.defineProperty(e.prototype,"isRadar",{get:function(){return this.either("SmallRadar","LargeRadar","LargeRadar2")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierBasedAircraft",{get:function(){return this.either("CarrierBasedFighterAircraft","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSeaplane",{get:function(){return this.either("ReconnaissanceSeaplane","SeaplaneBomber","SeaplaneFighter","LargeFlyingBoat")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLandBasedAircraft",{get:function(){return this.either("LandBasedAttackAircraft","LandBasedFighter","LandBasedReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isJetPoweredAircraft",{get:function(){return this.either("JetPoweredFighter","JetPoweredFighterBomber","JetPoweredTorpedoBomber","JetPoweredReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFighter",{get:function(){return this.either("CarrierBasedFighterAircraft","SeaplaneFighter","LandBasedFighter","JetPoweredFighter")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDiveBomber",{get:function(){return this.either("CarrierBasedDiveBomber","SeaplaneBomber","JetPoweredFighterBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTorpedoBomber",{get:function(){return this.either("CarrierBasedTorpedoBomber","JetPoweredTorpedoBomber","LandBasedAttackAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReconnaissanceAircraft",{get:function(){return this.either("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane","LargeFlyingBoat","JetPoweredReconnaissanceAircraft","LandBasedReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierShellingAircraft",{get:function(){return this.either("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","JetPoweredFighterBomber","JetPoweredTorpedoBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAerialCombatAircraft",{get:function(){return this.isFighter||this.isDiveBomber||this.isTorpedoBomber||this.isReconnaissanceAircraft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraft",{get:function(){var e=this,t=e.isFighter,r=e.isDiveBomber,i=e.isTorpedoBomber,n=e.isReconnaissanceAircraft,a=e.either;return t||r||i||n||a("Autogyro","AntiSubmarinePatrolAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArmor",{get:function(){return this.either("ExtraArmor","MediumExtraArmor","LargeExtraArmor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isObservationPlane",{get:function(){return this.either("SeaplaneBomber","ReconnaissanceSeaplane")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMainGun",{get:function(){return this.either("SmallCaliberMainGun","MediumCaliberMainGun","LargeCaliberMainGun","LargeCaliberMainGun2")},enumerable:!0,configurable:!0}),e}(),c=u;u.all=o.a.map(function(e){var t=e.api_id,r=e.api_name;return new u(t,r)});var l=function(){function e(e,t,r){this.category=t,this.improvable=r,this.radius=0,this.id=e.api_id,this.name=e.api_name,this.typeIds=e.api_type,this.hp=e.api_taik,this.armor=e.api_souk,this.firepower=e.api_houg,this.torpedo=e.api_raig,this.speed=e.api_soku,this.bombing=e.api_baku,this.antiAir=e.api_tyku,this.asw=e.api_tais,this.los=e.api_saku,this.luck=e.api_luck,this.range=e.api_leng;var i=e.api_houm,n=e.api_houk;this.accuracy=0,this.evasion=0,this.antiBomber=0,this.interception=0,this.typeIds[2]===s.a.LandBasedFighter?(this.antiBomber=i,this.interception=n):(this.accuracy=i,this.evasion=n),e.api_distance&&(this.radius=e.api_distance)}return Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.typeIds[2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.typeIds[3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHighAngleMount",{get:function(){return 16===this.iconId},enumerable:!0,configurable:!0}),e}(),p=l;l.abyssalIdFrom=500;var f,d=function(){return(d=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},h=function(e){return"number"==typeof e?[e,e]:e},m=function(){function e(t,r,i){this.shipType=r,this.shipClass=i,this.id=t.id,this.sortNo=t.sortNo,this.sortId=t.sortId,this.name=t.name,this.readingName=t.readingName,this.hp=h(t.hp),this.armor=h(t.armor),this.firepower=h(t.firepower),this.torpedo=h(t.torpedo),this.antiAir=h(t.antiAir),this.luck=h(t.luck),this.asw=h(t.asw),this.evasion=h(t.evasion),this.los=h(t.los),this.speed=t.speed,this.range=t.range,this.fuel=t.fuel,this.ammo=t.ammo,this.slotCapacities=t.slotCapacities.concat(),this.equipments=t.equipments,t.remodel?this.remodel=t.remodel:this.remodel={nextId:0,nextLevel:0};var n=t.equippable?t.equippable:{};this.equippable=d({categories:this.shipType.equippableCategoryIds,expantionSlot:[]},n),e.all.push(this)}return Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.id>e.abyssalIdFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRemodel",{get:function(){return this.remodel.nextId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canConvert",{get:function(){var t=this.id,r=this.remodel.nextId,i=e.all.find(function(e){return e.id===r});return!!i&&i.remodel.nextId===t},enumerable:!0,configurable:!0}),e}(),g=m;m.all=new Array,m.abyssalIdFrom=1500,function(e){e[e.AyanamiClass=1]="AyanamiClass",e[e.IseClass=2]="IseClass",e[e.KagaClass=3]="KagaClass",e[e.KumaClass=4]="KumaClass",e[e.AkatsukiClass=5]="AkatsukiClass",e[e.KongouClass=6]="KongouClass",e[e.FurutakaClass=7]="FurutakaClass",e[e.TakaoClass=8]="TakaoClass",e[e.MogamiClass=9]="MogamiClass",e[e.HatsuharuClass=10]="HatsuharuClass",e[e.ShouhouClass=11]="ShouhouClass",e[e.FubukiClass=12]="FubukiClass",e[e.AobaClass=13]="AobaClass",e[e.AkagiClass=14]="AkagiClass",e[e.ChitoseClass=15]="ChitoseClass",e[e.SendaiClass=16]="SendaiClass",e[e.SouryuuClass=17]="SouryuuClass",e[e.AsashioClass=18]="AsashioClass",e[e.NagatoClass=19]="NagatoClass",e[e.NagaraClass=20]="NagaraClass",e[e.TenryuuClass=21]="TenryuuClass",e[e.ShimakazeClass=22]="ShimakazeClass",e[e.ShiratsuyuClass=23]="ShiratsuyuClass",e[e.HiyouClass=24]="HiyouClass",e[e.HiryuuClass=25]="HiryuuClass",e[e.FusouClass=26]="FusouClass",e[e.HoushouClass=27]="HoushouClass",e[e.MutsukiClass=28]="MutsukiClass",e[e.MyoukouClass=29]="MyoukouClass",e[e.KagerouClass=30]="KagerouClass",e[e.ToneClass=31]="ToneClass",e[e.RyuujouClass=32]="RyuujouClass",e[e.ShoukakuClass=33]="ShoukakuClass",e[e.YuubariClass=34]="YuubariClass",e[e.TypeKaidaiVIa=35]="TypeKaidaiVIa",e[e.TypeBMod2=36]="TypeBMod2",e[e.YamatoClass=37]="YamatoClass",e[e.YuugumoClass=38]="YuugumoClass",e[e.TypeB=39]="TypeB",e[e.JunsenIIIType=40]="JunsenIIIType",e[e.AganoClass=41]="AganoClass",e[e.FleetOfFog=42]="FleetOfFog",e[e.TaihouClass=43]="TaihouClass",e[e.I400Class=44]="I400Class",e[e.AkitsuMaruClass=45]="AkitsuMaruClass",e[e.Type3SubmergenceTransportVehicle=46]="Type3SubmergenceTransportVehicle",e[e.BismarckClass=47]="BismarckClass",e[e.Z1Class=48]="Z1Class",e[e.RepairShip=49]="RepairShip",e[e.TaigeiClass=50]="TaigeiClass",e[e.RyuuhouClass=51]="RyuuhouClass",e[e.OoyodoClass=52]="OoyodoClass",e[e.UnryuuClass=53]="UnryuuClass",e[e.AkizukiClass=54]="AkizukiClass",e[e.AdmiralHipperClass=55]="AdmiralHipperClass",e[e.KatoriClass=56]="KatoriClass",e[e.TypeIXCClass=57]="TypeIXCClass",e[e.VittorioVenetoClass=58]="VittorioVenetoClass",e[e.AkitsushimaClass=59]="AkitsushimaClass",e[e.RevisedKazahayaClass=60]="RevisedKazahayaClass",e[e.MaestraleClass=61]="MaestraleClass",e[e.MizuhoClass=62]="MizuhoClass",e[e.GrafZeppelinClass=63]="GrafZeppelinClass",e[e.ZaraClass=64]="ZaraClass",e[e.IowaClass=65]="IowaClass",e[e.KamikazeClass=66]="KamikazeClass",e[e.QueenElizabethClass=67]="QueenElizabethClass",e[e.AquilaClass=68]="AquilaClass",e[e.LexingtonClass=69]="LexingtonClass",e[e.CommandantTesteClass=70]="CommandantTesteClass",e[e.TypeAM=71]="TypeAM",e[e.KamoiClass=72]="KamoiClass",e[e.GangutClass=73]="GangutClass",e[e.ShimushuClass=74]="ShimushuClass",e[e.KasugaMaruClass=75]="KasugaMaruClass",e[e.TaiyouClass=76]="TaiyouClass",e[e.EtorofuClass=77]="EtorofuClass",e[e.ArkRoyalClass=78]="ArkRoyalClass",e[e.RichelieuClass=79]="RichelieuClass",e[e.MarconiClass=80]="MarconiClass",e[e.TashkentClass=81]="TashkentClass",e[e.JClass=82]="JClass",e[e.CasablancaClass=83]="CasablancaClass",e[e.EssexClass=84]="EssexClass",e[e.HiburiClass=85]="HiburiClass",e[e.RO500=86]="RO500",e[e.JohnCButlerClass=87]="JohnCButlerClass",e[e.NelsonClass=88]="NelsonClass",e[e.GotlandClass=89]="GotlandClass",e[e.NisshinClass=90]="NisshinClass",e[e.FletcherClass=91]="FletcherClass",e[e.DucaDegliAbruzziClass=92]="DucaDegliAbruzziClass",e[e.ColoradoClass=93]="ColoradoClass"}(f||(f={}));var b=f,y=function(){function e(e,t){var r=this;this.id=e,this.name=t,this.is=function(e){return r.id===b[e]},this.either=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(r.is)}}return e.fromId=function(t){var r=e.all.find(function(e){return e.id===t});if(r)return r;var i=new e(t,"");return e.all.push(i),i},Object.defineProperty(e.prototype,"isSpecialTypeDD",{get:function(){return this.either("FubukiClass","AyanamiClass","AkatsukiClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsNavy",{get:function(){return this.either("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoyalNavy",{get:function(){return this.either("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass")},enumerable:!0,configurable:!0}),e}(),v=y;y.all=[[1,"綾波型"],[2,"伊勢型"],[3,"加賀型"],[4,"球磨型"],[5,"暁型"],[6,"金剛型"],[7,"古鷹型"],[8,"高雄型"],[9,"最上型"],[10,"初春型"],[11,"祥鳳型"],[12,"吹雪型"],[13,"青葉型"],[14,"赤城型"],[15,"千歳型"],[16,"川内型"],[17,"蒼龍型"],[18,"朝潮型"],[19,"長門型"],[20,"長良型"],[21,"天龍型"],[22,"島風型"],[23,"白露型"],[24,"飛鷹型"],[25,"飛龍型"],[26,"扶桑型"],[27,"鳳翔型"],[28,"睦月型"],[29,"妙高型"],[30,"陽炎型"],[31,"利根型"],[32,"龍驤型"],[33,"翔鶴型"],[34,"夕張型"],[35,"海大VI型"],[36,"巡潜乙型改二"],[37,"大和型"],[38,"夕雲型"],[39,"巡潜乙型"],[40,"巡潜3型"],[41,"阿賀野型"],[42,"霧の艦隊"],[43,"大鳳型"],[44,"潜特型(伊400型潜水艦)"],[45,"特種船丙型"],[46,"三式潜航輸送艇"],[47,"Bismarck級"],[48,"Z1型"],[49,"工作艦"],[50,"大鯨型"],[51,"龍鳳型"],[52,"大淀型"],[53,"雲龍型"],[54,"秋月型"],[55,"Admiral Hipper級"],[56,"香取型"],[57,"UボートIXC型"],[58,"V.Veneto級"],[59,"秋津洲型"],[60,"改風早型"],[61,"Maestrale級"],[62,"瑞穂型"],[63,"Graf Zeppelin級"],[64,"Zara級"],[65,"Iowa級"],[66,"神風型"],[67,"Queen Elizabeth級"],[68,"Aquila級"],[69,"Lexington級"],[70,"C.Teste級"],[71,"巡潜甲型改二"],[72,"神威型"],[73,"Гангут級"],[74,"占守型"],[75,"春日丸級"],[76,"大鷹型"],[77,"択捉型"],[78,"Ark Royal級"],[79,"Richelieu級"],[80,"Guglielmo Marconi級"],[81,"Ташкент級"],[82,"J級"],[83,"Casablanca級"],[84,"Essex級"],[85,"日振型"],[86,"呂号潜水艦"],[87,"John C.Butler級"],[88,"Nelson級"],[89,"Gotland級"],[90,"日進型"],[91,"Fletcher級"],[92,"L.d.S.D.d.Abruzzi級"],[93,"Colorado級"]].map(function(e){return new(y.bind.apply(y,[void 0].concat(e)))});var A,w=r(3429);!function(e){e[e.CoastalDefenseShip=1]="CoastalDefenseShip",e[e.Destroyer=2]="Destroyer",e[e.LightCruiser=3]="LightCruiser",e[e.TorpedoCruiser=4]="TorpedoCruiser",e[e.HeavyCruiser=5]="HeavyCruiser",e[e.AviationCruiser=6]="AviationCruiser",e[e.LightAircraftCarrier=7]="LightAircraftCarrier",e[e.Battlecruiser=8]="Battlecruiser",e[e.Battleship=9]="Battleship",e[e.AviationBattleship=10]="AviationBattleship",e[e.AircraftCarrier=11]="AircraftCarrier",e[e.SuperDreadnoughts=12]="SuperDreadnoughts",e[e.Submarine=13]="Submarine",e[e.SubmarineAircraftCarrier=14]="SubmarineAircraftCarrier",e[e.Transport=15]="Transport",e[e.SeaplaneTender=16]="SeaplaneTender",e[e.AmphibiousAssaultShip=17]="AmphibiousAssaultShip",e[e.ArmoredAircraftCarrier=18]="ArmoredAircraftCarrier",e[e.RepairShip=19]="RepairShip",e[e.SubmarineTender=20]="SubmarineTender",e[e.TrainingCruiser=21]="TrainingCruiser",e[e.FleetOiler=22]="FleetOiler"}(A||(A={}));var C=A,M=function(){function e(e,t,r){var i=this;this.id=e,this.name=t,this.equippableCategoryIds=r,this.is=function(e){return i.id===C[e]},this.either=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(i.is)},e===C.Battlecruiser&&(this.name="巡洋戦艦")}return Object.defineProperty(e.prototype,"isDestroyer",{get:function(){return this.id===C.Destroyer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLightCruiserClass",{get:function(){return this.either("LightCruiser","TorpedoCruiser","TrainingCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeavyCruiserClass",{get:function(){return this.either("HeavyCruiser","AviationCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBattleshipClass",{get:function(){return this.either("Battlecruiser","Battleship","AviationBattleship","SuperDreadnoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraftCarrierClass",{get:function(){return this.either("LightAircraftCarrier","AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubmarineClass",{get:function(){return[C.Submarine,C.SubmarineAircraftCarrier].includes(this.id)},enumerable:!0,configurable:!0}),e}(),S=M;M.all=w.a.map(function(e){var t=Object.entries(e.api_equip_type).filter(function(e){e[0];return 1===e[1]}).map(function(e){var t=e[0];e[1];return Number(t)});return new M(e.api_id,e.api_name,t)}),M.fromId=function(e){var t=M.all.find(function(t){return t.id===e});if(t)return t;var r=new M(e,"",[]);return M.all.push(r),r};var P=function(){function e(e){void 0===e&&(e=i.a),this.shipsData=e,this.equipments=n.a.map(function(e){var t=e.api_id,r=e.api_type[2];128===t||281===t?r=s.a.LargeCaliberMainGun2:142===t?r=s.a.LargeRadar2:151===t&&(r=s.a.CarrierBasedReconnaissanceAircraft2);var i=c.fromId(r),n=a.a.includes(e.api_id);return new p(e,i,n)}),this.ships=e.map(function(e){var t=S.fromId(e.shipTypeId),r=v.fromId(e.classId);return new g(e,t,r)})}return e.prototype.findMasterEquipment=function(e){return this.equipments.find(function(t){return t.id===e})},e.prototype.findMasterShip=function(e){return this.ships.find(function(t){return t.id===e})},e}();t.a=P},3486:function(e,t,r){"use strict";var i={};r.r(i),r.d(i,"AircraftCarrierCutin",function(){return f}),r.d(i,"ArtillerySpotting",function(){return l});var n=r(155),a=r(222),o=r(309),s=function(e){var t=e.totalShipStats(function(e){return e.nakedStats.los})+Object(a.a)(e.planes,function(e){return e.fleetLosModifier});return Math.floor(Math.sqrt(t)+.1*t)},u=function(e,t,r,i){var n=e.stats.luck,a=Math.floor(Math.sqrt(n)+10),s=e.totalEquipmentStats("los"),u=i?15:0;return r===o.a.AirSupremacy?Math.floor(a+.7*(t+1.6*s)+10)+u:r===o.a.AirSuperiority?Math.floor(a+.6*(t+1.2*s))+u:0},c=function(){return function e(t,r,i,n){this.id=t,this.name=r,this.powerModifier=i,this.typeFactor=n,e.all.push(this)}}(),l=c;c.all=[],c.MainMain=new c(6,"主主",1.5,150),c.MainApShell=new c(5,"主徹",1.3,140),c.MainRader=new c(4,"主電",1.2,130),c.MainSecond=new c(3,"主副",1.1,120),c.DoubleAttack=new c(2,"連撃",1.2,130),c.calculateFleetLosModifier=s,c.calculateArtillerySpottingBaseValue=u,c.getPossibleArtillerySpottings=function(e){var t=new Array;if("Heavy"===e.health.damage)return t;var r=e.planes.some(function(e){return e.category.isObservationPlane&&e.slotSize>0}),i=e.countEquipment(function(e){return e.category.isMainGun});if(!r||0===i)return t;var n=e.hasEquipment(function(e){return e.category.is("ArmorPiercingShell")}),a=e.hasEquipment(function(e){return e.category.is("SecondaryGun")}),o=e.hasEquipment(function(e){return e.category.isRadar});return i>=2&&(t.push(c.DoubleAttack),n&&t.push(c.MainMain)),a&&(t.push(c.MainSecond),o&&t.push(c.MainRader),n&&t.push(c.MainApShell)),t.sort(function(e,t){return t.id-e.id})};var p=function(){return function e(t,r,i){this.name=t,this.powerModifier=r,this.typeFactor=i,e.all.push(this)}}(),f=p;p.all=[],p.FighterBomberAttacker=new p("FBA",1.25,125),p.BomberBomberAttacker=new p("BBA",1.2,140),p.BomberAttacker=new p("BA",1.15,155),p.calculateFleetLosModifier=s,p.calculateAircraftCarrierCutinBaseValue=u,p.getPossibleAircraftCarrierCutins=function(e){var t=new Array;if(!e.shipType.isAircraftCarrierClass)return t;var r=e.planes.filter(function(e){return e.slotSize>0}),i=r.filter(function(e){return e.category.is("CarrierBasedDiveBomber")}).length,n=r.some(function(e){return e.category.is("CarrierBasedTorpedoBomber")});return 0!==i&&n?(t.push(p.BomberAttacker),i>=2&&t.push(p.BomberBomberAttacker),r.some(function(e){return e.category.is("CarrierBasedFighterAircraft")})&&t.push(p.FighterBomberAttacker),t.sort(function(e,t){return e.typeFactor-t.typeFactor})):t},r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i})},3504:function(e,t,r){"use strict";var i=r(216),n=r(3476),a=r(98),o=[{attackerFleetType:n.a.CarrierTaskForce,defenderFleetType:n.a.Single,factors:[2,10]},{attackerFleetType:n.a.SurfaceTaskForce,defenderFleetType:n.a.Single,factors:[10,-5]},{attackerFleetType:n.a.TransportEscort,defenderFleetType:n.a.Single,factors:[-5,10]},{attackerFleetType:n.a.Single,defenderFleetType:n.a.Combined,factors:[5,5]},{attackerFleetType:n.a.CarrierTaskForce,defenderFleetType:n.a.Combined,factors:[2,-5]},{attackerFleetType:n.a.SurfaceTaskForce,defenderFleetType:n.a.Combined,factors:[2,-5]},{attackerFleetType:n.a.TransportEscort,defenderFleetType:n.a.Combined,factors:[-5,-5]}],s=[{attackerFleetType:n.a.Single,defenderFleetType:n.a.CarrierTaskForce,factors:[10,5]},{attackerFleetType:n.a.Single,defenderFleetType:n.a.SurfaceTaskForce,factors:[5,-5]},{attackerFleetType:n.a.Single,defenderFleetType:n.a.TransportEscort,factors:[10,5]}],u=function(e,t){if(!e.fleetType.isCombined&&!t.fleetType.isCombined)return 0;var r="Main"===e.role?0:1;if(e.side===a.a.Player){var i=o.find(function(r){return r.attackerFleetType===e.fleetType&&r.defenderFleetType===t.fleetType});return i?i.factors[r]:0}if(e.fleetType.isCombined)return[10,-5][r];var n=s.find(function(r){return r.attackerFleetType===e.fleetType&&r.defenderFleetType===t.fleetType});return n?n.factors[r]:0},c=r(163),l=r(167),p=function(){function e(e,t,r,i,n,a,o,s,u){void 0===n&&(n=!1),void 0===a&&(a=1),void 0===o&&(o=1),void 0===u&&(u=0),this.attacker=e,this.defender=t,this.engagement=r,this.specialAttack=i,this.isCritical=n,this.eventMapModifier=a,this.remainingAmmoModifier=o,this.manualInstallationType=s,this.fitGunBonus=u}return Object.defineProperty(e.prototype,"shellingType",{get:function(){var e=this.attacker.ship,t=e.shipType,r=e.shipClass,i=e.isInstallation,n=e.hasEquipment;return t.isAircraftCarrierClass?"CarrierShelling":(r.is("RevisedKazahayaClass")||i)&&n(function(e){return e.category.isAerialCombatAircraft})?"CarrierShelling":"Shelling"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArmorPiercing",{get:function(){var e=this.defender.ship.shipType;return e.isBattleshipClass||e.isHeavyCruiserClass||e.either("AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combinedFleetFactors",{get:function(){var e=this.attacker,t=this.defender;return{power:u(e,t),accuracy:1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canParticipate",{get:function(){var e=this.shellingType,t=this.attacker;return"CarrierShelling"!=e||t.ship.planes.some(function(e){return e.slotSize>0&&e.category.isCarrierShellingAircraft})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalModifier",{get:function(){return this.isCritical?1.5:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attackerShellingStatus",{get:function(){return new i.b(this.attacker.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderInstallationType",{get:function(){var e=this.defender.ship;return e.isInstallation?e.name.includes("砲台子鬼")?"Pillbox":e.name.includes("離島")||e.name.includes("離島")?"IsolatedIsland":e.name.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,t=e.manualInstallationType,r=e.defenderInstallationType,i=e.attackerShellingStatus,n=e.engagement,a=e.combinedFleetFactors,o=e.eventMapModifier,s=e.specialAttack,u=e.isArmorPiercing,c=e.isCritical,l=this.attacker,p=l.role,f=l.formation,d=a.power,h=t||r;return i.calcPower({role:p,formation:f,engagement:n,combinedFleetFactor:d,eventMapModifier:o,specialAttack:s,isArmorPiercing:u,installationType:h,isCritical:c})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this,t=e.attacker,r=e.combinedFleetFactors,i=e.attackerShellingStatus,n=e.isArmorPiercing,a=e.specialAttack,o=e.fitGunBonus,s=t.role,u=t.formation;return i.calcAccuracy({fitGunBonus:o,combinedFleetFactor:r.accuracy,role:s,formation:u,isArmorPiercing:n,specialAttack:a})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,i=new l.a(t.ship.stats.armor,t.ship.totalEquipmentStats(function(e){return e.improvement.defensePowerModifier}));return new c.a(e.value,i,r)},enumerable:!0,configurable:!0}),e}();t.a=p;p.getCombinedFleetFactor=u},381:function(e,t,r){"use strict";var i=r(12),n=r(3378),a=r(384),o=function(e){if(Array.isArray(e)){var t=e.map(o);return Object(n.a)(t,function(e){return e&&e.id})}var r=e,i=Object(a.a)(100);return c.getPossibleAntiAirCutins(r).find(function(e){return 34===e.id||35===e.id?e.probability>Object(a.a)(100):e.probability>i})},s=o,u=function(){function e(e,t,r,i){this.id=e,this.minimumBonus=t,this.fixedAirDefenseModifier=r,this.probability=i}return e.fromId=function(e){return this.all.find(function(t){return t.id===e})},e}(),c=t.a=u;u.all=[[1,8,1.7,65],[2,7,1.7,58],[3,5,1.6,50],[4,7,1.5,52],[5,5,1.5,55],[6,5,1.45,40],[7,4,1.35,45],[8,5,1.4,50],[9,3,1.3,40],[10,9,1.65,60],[11,7,1.5,55],[12,4,1.25,45],[13,5,1.35,35],[14,5,1.45,63],[15,4,1.3,58],[16,5,1.4,60],[17,3,1.25,55],[18,3,1.2,60],[19,6,1.45,55],[20,4,1.25,70],[21,6,1.45,60],[22,3,1.2,63],[23,2,1.05,80],[24,4,1.25,60],[25,8,1.55,60],[26,7,1.4,60],[28,5,1.4,53],[29,6,1.55,58],[30,4,1.3,42],[31,3,1.25,50],[32,4,1.2,32],[33,4,1.35,42],[34,8,1.6,60],[35,7,1.55,53],[36,7,1.55,59],[37,5,1.45,38]].map(function(e){return new(u.bind.apply(u,[void 0].concat(e)))}),u.try=s,u.getPossibleAntiAirCutins=function(e){return function(e){var t;!function(e){e[e.MayaKai2=428]="MayaKai2",e[e.IsuzuKai2=141]="IsuzuKai2",e[e.KasumiKai2B=470]="KasumiKai2B",e[e.KinuKai2=487]="KinuKai2",e[e.YuraKai2=488]="YuraKai2",e[e.MusashiKai=148]="MusashiKai",e[e.MusashiKai2=546]="MusashiKai2",e[e.IsokazeBKai=557]="IsokazeBKai",e[e.HamakazeBKai=558]="HamakazeBKai",e[e.SatsukiKai2=418]="SatsukiKai2",e[e.FumizukiKai2=548]="FumizukiKai2",e[e.Uit25=539]="Uit25",e[e.I504=530]="I504",e[e.TatsutaKai2=478]="TatsutaKai2"}(t||(t={}));var r=function(t){return e.masterId===t},i=function(e){return e.isHighAngleMount},n=function(e){return i(e)&&e.antiAir>=8},a=function(e){return e.category.isRadar},o=function(e){return a(e)&&e.antiAir>=2},s=function(e){return e.category.is("AntiAircraftGun")},u=function(e){return s(e)&&e.antiAir>=9},c=function(e){return 274===e.masterId},l=function(e){return e.category.is("AntiAircraftShell")},p=function(e){return e.category.is("AntiAircraftFireDirector")},f=function(e){return e.category.either("LargeCaliberMainGun","LargeCaliberMainGun2")},d=function(t,r){return e.countEquipment(t)>=r},h=function(t){return e.hasEquipment(t)},m=[];return e.shipClass.is("FletcherClass")&&(e.countEquipment(308)>=2&&m.push(34),e.hasEquipment(308)&&e.hasEquipment(313)&&m.push(35),e.countEquipment(313)>=2&&(e.hasEquipment(307)&&m.push(36),m.push(37))),e.shipClass.is("AkizukiClass")&&h(i)?(d(i,2)&&h(a)&&m.push(1),h(a)&&m.push(2),d(i,2)&&m.push(3)):(r(t.MayaKai2)&&h(i)&&h(u)?(h(o)&&m.push(10),m.push(11)):r(t.IsuzuKai2)&&h(i)&&h(s)?(h(o)&&m.push(14),m.push(15)):r(t.KasumiKai2B)&&h(i)&&h(s)?(h(o)&&m.push(16),m.push(17)):r(t.KinuKai2)&&h(u)&&h(function(e){return i(e)&&e.antiAir<8})?m.push(19):r(t.YuraKai2)&&h(i)&&h(o)?m.push(21):e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")&&h(c)&&h(l)&&h(o)&&m.push(25),h(p)&&h(f)&&h(l)&&h(o)&&m.push(4),d(n,2)&&h(o)&&m.push(5),h(p)&&h(f)&&h(l)&&m.push(6),h(n)&&h(o)&&m.push(8),h(p)&&h(i)&&h(o)&&m.push(7),r(t.MusashiKai2)&&h(function(e){return 275===e.masterId})&&h(a)&&m.push(26),(e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")||r(t.MusashiKai)||r(t.MusashiKai2))&&h(c)&&h(o)&&m.push(28),(r(t.IsokazeBKai)||r(t.HamakazeBKai))&&h(i)&&h(o)&&m.push(29),h(p)&&h(i)&&m.push(9),"Gotland改"===e.name&&e.hasEquipment(i)&&e.hasEquipment(function(e){return e.category.is("AntiAircraftGun")&&e.antiAir>=3})&&m.push(33),h(u)&&h(o)&&e.countEquipment(function(e){return e.category.is("AntiAircraftGun")&&e.antiAir>=3})>=2&&m.push(12),h(n)&&h(u)&&h(o)&&m.push(13),r(t.SatsukiKai2)&&h(u)&&m.push(18),r(t.KinuKai2)&&h(u)&&m.push(20),r(t.FumizukiKai2)&&h(u)&&m.push(22),(r(t.Uit25)||r(t.I504))&&h(u)&&m.push(23),["龍田改二","天龍改二"].includes(e.name)&&h(i)&&h(function(e){return s(e)&&e.antiAir>=3&&e.antiAir<9})&&m.push(24),["天龍改二","Gotland改"].includes(e.name)&&e.countEquipment(i)>=3&&m.push(30),"天龍改二"===e.name&&e.countEquipment(i)>=2&&m.push(31),(e.shipClass.isRoyalNavy||e.shipClass.is("KongouClass")&&e.name.includes("改二"))&&(e.countEquipment(301)>=2||e.hasEquipment(301)&&e.hasEquipment(191)||e.hasEquipment(300)&&e.hasEquipment(191))&&m.push(32)),m}(e).map(function(e){return u.fromId(e)}).filter(i.c)}},382:function(e,t,r){"use strict";var i;!function(e){e.MainFleet="MainFleet",e.EscortFleet="EscortFleet"}(i||(i={})),t.a=i},441:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=function(e,t,r){void 0===r&&(r=0);var i=e.stats,n=function(e){var t=e.evasion,r=e.luck,i=e.formationModifier;return Math.floor((t+Math.sqrt(2*r))*i)}({evasion:i.evasion,luck:i.luck,formationModifier:t}),a=n;return n>=65?a=Math.floor(55+2*Math.sqrt(n-65)):n>=40&&(a=Math.floor(40+3*Math.sqrt(n-40))),Math.floor(a+r)}},452:function(e,t,r){"use strict";var i,n=r(383),a=r(291),o=r(381),s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,t)||this,i=r.combatInformation,n=i.player,a=i.enemy;return n.isCombinedFleet&&a.isCombinedFleet?(r.playerAntiAirDefenseShips=n.allShips,r.enemyAntiAirDefenseShips=a.allShips):(r.playerAntiAirDefenseShips=n.mainFleet.nonNullableShips,r.enemyAntiAirDefenseShips=a.mainFleet.nonNullableShips),r}return s(t,e),t.prototype.main=function(){var e=this.playerAntiAirDefenseShips,t=this.enemyAntiAirDefenseShips,r=this.combatInformation,i=Object(n.a)(e,function(e){return e.planes}),a=Object(n.a)(t,function(e){return e.planes}),s=i.filter(function(e){return!e.category.isReconnaissanceAircraft}),u=a.filter(function(e){return!e.category.isReconnaissanceAircraft}),c=this.fighterCombat(s,u),l=r.player,p=(r.enemy,s.filter(function(e){return e.slotSize>0&&e.canParticipateInAirstrike})),f=u.filter(function(e){return e.slotSize>0&&e.canParticipateInAirstrike});return this.antiAirDefense(e,f,o.a.try(l.allShips)),this.antiAirDefense(t,p,o.a.try(l.allShips)),{airControlState:c}},t}(a.a);t.a=u},453:function(e,t,r){"use strict";var i,n=r(383),a=r(309),o=r(98),s=r(291),u=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(t,r){var i=e.call(this,t)||this;return i.landBasedAirCorps=r,i}return u(t,e),t.prototype.main=function(){var e=this,t=this.combatInformation.enemy,r=this.landBasedAirCorps,i=r.fighterPower,s=r.planes,u=Object(n.a)(t.allShips,function(e){return e.planes}),c=u.reduce(function(e,t){return e+t.fighterPower},0),l=a.a.fromFighterPower(i,c);s.forEach(function(t){return e.shotdownInFighterCombat(t,l.constant,o.a.Player)}),u.forEach(function(t){return e.shotdownInFighterCombat(t,l.constant,o.a.Enemy)});var p=s.filter(function(e){return e.slotSize>0&&e.canParticipateInAirstrike});return this.antiAirDefense(t.allShips,p),{airControlState:l}},t}(s.a);t.a=c},517:function(e,t,r){"use strict";var i=function(){function e(e,t,r){this.master=e,this.improvement=t,this.proficiency=r}return Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.master.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.master.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.master.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.master.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.master.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return this.master.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interception",{get:function(){return this.master.interception},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.master.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiBomber",{get:function(){return this.master.antiBomber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.master.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.master.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.masterId>500},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHighAngleMount",{get:function(){return 16===this.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSurfaceRadar",{get:function(){var e=this.category,t=this.los;return e.isRadar&&t>=5},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAntiAirRadar",{get:function(){var e=this.category,t=this.antiAir;return e.isRadar&&t>=2},enumerable:!0,configurable:!0}),e}(),n=r(249),a=r(250),o=function(){return function(e){var t=this;this.masters=e,this.create=function(e){if(e){var r=t.masters.find(function(t){return t.id===e.masterId});if(r){var o=new n.a(e.improvement,r),s=new a.a(e.proficiency,r);return new i(r,o,s)}}}}}();t.a=o},581:function(e,t,r){"use strict";var i=r(222),n=r(582),a=r(12),o=function(){function e(e){this.nightAttackType="NightAttack",this.firepower=0,this.torpedo=0,this.improvementModifier=0,this.nightAerialAttackPower=0,this.nightContactModifier=0,this.formationModifier=1,this.healthModifier=1,this.specialAttackModifier=1,this.cruiserFitBonus=0,this.antiInstallationModifiers={shipTypeAdditive:0,multiplicative:1,additive:0},this.effectivenessMultiplicative=1,this.effectivenessAdditive=0,this.criticalModifier=1,this.proficiencyModifier=1,this.eventMapModifier=1,Object(a.b)(this,e)}return Object.defineProperty(e.prototype,"basicPower",{get:function(){return t=(e=this).nightAttackType,r=e.firepower,i=e.torpedo,n=e.improvementModifier,a=e.nightAerialAttackPower,o=e.nightContactModifier,"NightAerialAttack"===t?a+o:r+i+n+o;var e,t,r,i,n,a,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preCapPower",{get:function(){return e=this.basicPower,r=(t=this).formationModifier,i=t.healthModifier,n=t.specialAttackModifier,a=t.cruiserFitBonus,o=t.antiInstallationModifiers,((e+o.shipTypeAdditive)*o.multiplicative+o.additive)*r*i*n+a;var e,t,r,i,n,a,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cappedPower",{get:function(){return Object(a.f)(e.cap,this.preCapPower)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCapped",{get:function(){return this.preCapPower>e.cap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return e=this.cappedPower,r=(t=this).effectivenessMultiplicative,i=t.effectivenessAdditive,n=t.criticalModifier,a=t.proficiencyModifier,o=t.eventMapModifier,s=Math.floor(e),(r>1||i>0)&&(s=Math.floor(s*r+i)),n>1&&(s=Math.floor(s*n*a)),Math.floor(s*o);var e,t,r,i,n,a,o,s},enumerable:!0,configurable:!0}),e}(),s=o;o.cap=300;var u=r(294),c=r(216),l=r(183),p=function(){function e(e){var t=this;this.ship=e,this.calcPower=function(e){var r=e.role,i=void 0===r?"Main":r,a=e.nightContactModifier,o=void 0===a?0:a,l=e.formation,p=void 0===l?n.a.LineAhead:l,f=e.eventMapModifier,d=void 0===f?1:f,h=e.installationType,m=void 0===h?"None":h,g=e.specialAttack,b=e.isCritical,y=void 0!==b&&b,v=t,A=v.ship,w=v.nightAttackType,C=v.firepower,M=v.torpedo,S=v.improvementModifier,P="None"!==m,O=t.calcNightAerialAttackPower(P),q=p.getModifiersWithRole(i).nightBattle.power,k=A.health.nightAttackPowerModifire,j=new u.a(A).getModifiersFromType(m),F=1;g&&(F=g.powerModifier,g.isDestroyerCutin&&A.hasEquipment(267)&&(F*=1.25));var B=Object(c.a)(A),E=j.postCapMultiplicative,T=y?1.5:1,I=Object(c.c)(A).power;return new s({nightAttackType:w,firepower:C,torpedo:P?0:M,improvementModifier:S,nightAerialAttackPower:O,nightContactModifier:o,formationModifier:q,healthModifier:k,specialAttackModifier:F,cruiserFitBonus:B,antiInstallationModifiers:j,effectivenessMultiplicative:E,effectivenessAdditive:0,criticalModifier:T,proficiencyModifier:I,eventMapModifier:d})}}return Object.defineProperty(e.prototype,"nightAttackType",{get:function(){var e=this.ship;return Object(l.b)(e)?"NightAerialAttack":"NightAttack"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.ship.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.ship.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvementModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){var t=e.masterId,r=e.improvement,i=e.category;return[10,66,220,275].includes(t)?.2*r.value:[12,234,247].includes(t)?.3*r.value:i.isMainGun||i.either("SecondaryGun","ArmorPiercingShell","AntiAircraftShell","AntiAircraftFireDirector","Searchlight","Torpedo","LandingCraft","SpecialAmphibiousTank","MidgetSubmarine")?Math.sqrt(r.value):0})},enumerable:!0,configurable:!0}),e.prototype.calcNightAerialAttackPower=function(e){var t=this.ship;return"NightAerialAttack"!==this.nightAttackType?0:t.nakedStats.firepower+Object(i.a)(t.planes,function(t){return t.calcNightAerialAttackPower(e)})},e}();t.a=p},582:function(e,t,r){"use strict";var i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=function(){function e(t,r,n){var a=this;this.id=t,this.name=r,this.modifiers=n,this.getModifiersWithRole=function(t){return a!==e.Vanguard?a.modifiers:i({},a.modifiers,"Main"===t?{shelling:{power:.5,accuracy:.85,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:.5,accuracy:1,evasion:1}}:{shelling:{power:1,accuracy:1.25,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}})},e.values.push(this)}return Object.defineProperty(e,"singleFleetFormations",{get:function(){return e.values.filter(function(e){return e.id<=10})},enumerable:!0,configurable:!0}),Object.defineProperty(e,"combinedFleetFormations",{get:function(){return e.values.filter(function(e){return e.id>10})},enumerable:!0,configurable:!0}),e.fromId=function(t){return e.values.find(function(e){return e.id===t})},Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){return this.modifiers.fleetAntiAir},enumerable:!0,configurable:!0}),e}();t.a=n,n.keys=["LineAhead","DoubleLine","Diamond","Echelon","LineAbreast","Vanguard","CruisingFormation1","CruisingFormation2","CruisingFormation3","CruisingFormation4"].concat(),n.values=[],n.LineAhead=new n(1,"単縦陣",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.DoubleLine=new n(2,"複縦陣",{fleetAntiAir:1.2,shelling:{power:.8,accuracy:1.2,evasion:1},torpedo:{power:.8,accuracy:.8,evasion:1},asw:{power:.8,accuracy:1.2,evasion:1},nightBattle:{power:1,accuracy:.9,evasion:1}}),n.Diamond=new n(3,"輪形陣",{fleetAntiAir:1.6,shelling:{power:.7,accuracy:1,evasion:1.1},torpedo:{power:.7,accuracy:.4,evasion:1.1},asw:{power:1.2,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:.7,evasion:1}}),n.Echelon=new n(4,"梯形陣",{fleetAntiAir:1,shelling:{power:.75,accuracy:1.2,evasion:1.2},torpedo:{power:.6,accuracy:.6,evasion:1.3},asw:{power:1.1,accuracy:1.2,evasion:1.3},nightBattle:{power:1,accuracy:.9,evasion:1.2}}),n.LineAbreast=new n(5,"単横陣",{fleetAntiAir:1,shelling:{power:.6,accuracy:1.2,evasion:1.3},torpedo:{power:.6,accuracy:.3,evasion:1.4},asw:{power:1.3,accuracy:1.2,evasion:1.1},nightBattle:{power:1,accuracy:.8,evasion:1.2}}),n.Vanguard=new n(6,"警戒陣",{fleetAntiAir:1.1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation1=new n(11,"第一警戒航行序列",{fleetAntiAir:1.1,shelling:{power:.8,accuracy:1,evasion:1},torpedo:{power:.7,accuracy:1,evasion:1},asw:{power:1.3,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation2=new n(12,"第二警戒航行序列",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:.9,accuracy:1,evasion:1},asw:{power:1.1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation3=new n(13,"第三警戒航行序列",{fleetAntiAir:1.5,shelling:{power:.7,accuracy:1,evasion:1},torpedo:{power:.6,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation4=new n(14,"第四警戒航行序列",{fleetAntiAir:1,shelling:{power:1.1,accuracy:1.1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.7,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}})},85:function(e,t,r){"use strict";var i;!function(e){e[e.SmallCaliberMainGun=1]="SmallCaliberMainGun",e[e.MediumCaliberMainGun=2]="MediumCaliberMainGun",e[e.LargeCaliberMainGun=3]="LargeCaliberMainGun",e[e.SecondaryGun=4]="SecondaryGun",e[e.Torpedo=5]="Torpedo",e[e.CarrierBasedFighterAircraft=6]="CarrierBasedFighterAircraft",e[e.CarrierBasedDiveBomber=7]="CarrierBasedDiveBomber",e[e.CarrierBasedTorpedoBomber=8]="CarrierBasedTorpedoBomber",e[e.CarrierBasedReconnaissanceAircraft=9]="CarrierBasedReconnaissanceAircraft",e[e.ReconnaissanceSeaplane=10]="ReconnaissanceSeaplane",e[e.SeaplaneBomber=11]="SeaplaneBomber",e[e.SmallRadar=12]="SmallRadar",e[e.LargeRadar=13]="LargeRadar",e[e.Sonar=14]="Sonar",e[e.DepthCharge=15]="DepthCharge",e[e.ExtraArmor=16]="ExtraArmor",e[e.EngineImprovement=17]="EngineImprovement",e[e.AntiAircraftShell=18]="AntiAircraftShell",e[e.ArmorPiercingShell=19]="ArmorPiercingShell",e[e.VTFuze=20]="VTFuze",e[e.AntiAircraftGun=21]="AntiAircraftGun",e[e.MidgetSubmarine=22]="MidgetSubmarine",e[e.EmergencyRepairPersonnel=23]="EmergencyRepairPersonnel",e[e.LandingCraft=24]="LandingCraft",e[e.Autogyro=25]="Autogyro",e[e.AntiSubmarinePatrolAircraft=26]="AntiSubmarinePatrolAircraft",e[e.MediumExtraArmor=27]="MediumExtraArmor",e[e.LargeExtraArmor=28]="LargeExtraArmor",e[e.Searchlight=29]="Searchlight",e[e.SupplyTransportContainer=30]="SupplyTransportContainer",e[e.ShipRepairFacility=31]="ShipRepairFacility",e[e.SubmarineTorpedo=32]="SubmarineTorpedo",e[e.StarShell=33]="StarShell",e[e.CommandFacility=34]="CommandFacility",e[e.AviationPersonnel=35]="AviationPersonnel",e[e.AntiAircraftFireDirector=36]="AntiAircraftFireDirector",e[e.AntiGroundEquipment=37]="AntiGroundEquipment",e[e.LargeCaliberMainGun2=38]="LargeCaliberMainGun2",e[e.SurfaceShipPersonnel=39]="SurfaceShipPersonnel",e[e.LargeSonar=40]="LargeSonar",e[e.LargeFlyingBoat=41]="LargeFlyingBoat",e[e.LargeSearchlight=42]="LargeSearchlight",e[e.CombatRation=43]="CombatRation",e[e.Supplies=44]="Supplies",e[e.SeaplaneFighter=45]="SeaplaneFighter",e[e.SpecialAmphibiousTank=46]="SpecialAmphibiousTank",e[e.LandBasedAttackAircraft=47]="LandBasedAttackAircraft",e[e.LandBasedFighter=48]="LandBasedFighter",e[e.LandBasedReconnaissanceAircraft=49]="LandBasedReconnaissanceAircraft",e[e.TransportationMaterial=50]="TransportationMaterial",e[e.SubmarineEquipment=51]="SubmarineEquipment",e[e.JetPoweredFighter=56]="JetPoweredFighter",e[e.JetPoweredFighterBomber=57]="JetPoweredFighterBomber",e[e.JetPoweredTorpedoBomber=58]="JetPoweredTorpedoBomber",e[e.JetPoweredReconnaissanceAircraft=59]="JetPoweredReconnaissanceAircraft",e[e.LargeRadar2=93]="LargeRadar2",e[e.CarrierBasedReconnaissanceAircraft2=94]="CarrierBasedReconnaissanceAircraft2"}(i||(i={})),t.a=i},98:function(e,t,r){"use strict";var i;!function(e){e.Player="Player",e.Enemy="Enemy"}(i||(i={})),t.a=i}}]);