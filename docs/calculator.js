(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,r){"use strict";r.r(t);var n=r(557);r.d(t,"AntiAirCutin",(function(){return n.a}));var i=r(3273);r.d(t,"CarrierBasedAerialCombat",(function(){return i.a}));var a=r(3274);r.d(t,"LandBaseAerialSupport",(function(){return a.a}));var o=r(231);r.d(t,"FleetAntiAir",(function(){return o.a}));var u=r(295);r.d(t,"ShipAntiAir",(function(){return u.a}))},162:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));var n=function(e){var t=(e.accuracy-e.evasion)*e.moraleModifier;return t<10?10:t>96?96:t},i=function(e){var t=e.criticalRateMultiplier,r=e.hitRateBonus,i=void 0===r?0:r,a=e.criticalRateBonus,o=void 0===a?0:a,u=n(e),s=Math.floor(u+1+i),c=Math.floor(Math.sqrt(u)*t+1+100*o),l=Math.min(s/100,1),f=Math.min(c/100,1);return{total:l,criticalRate:f,normalRate:l-f}},a=function(e){var t=Math.random();return t<e.criticalRate?"Critical":t<e.total?"Normal":"Miss"}},201:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));var n=function(e,t){var r=e[0],n=e[1];return Math.floor((n-r)*t/99+r)},i=function(e,t){var r=e[0],n=e[1],i=r;return t>=100&&(i+=r>=91?9:r>=70?8:r>=50?7:r>=40?6:r>=30?5:r>=8?4:3),Math.min(i,n)}},22:function(e,t,r){"use strict";var n=r(66);r.d(t,"a",(function(){return n}))},231:function(e,t,r){"use strict";var n=r(558),i=r(4048),a=r(560),o=function(e){var t=e.name,r=e.antiAir,n=e.improvement;if(0===r)return 0;return(e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?.35:e.is("AntiAircraftShell")?.6:e.is("Radar")?.4:"46cm三連装砲"===t?.25:.2)*r+n.fleetAntiAirModifier},u=function(e){return Math.floor(e.totalEquipmentStats(o))},s=function(){function e(e,t,r){this.ships=e,this.side=t,this.formationModifier=r}return Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.ships,t=this.side,r=this.formationModifier,n=Object(a.a)(e,u),i=2*Math.floor(r*n);return"Player"===t?i/1.3:i},enumerable:!0,configurable:!0}),e}();t.a=s,s.getCombinedFleetModifier=function(e,t){return e===n.a.EscortFleet?.48:t===i.a.AirDefenseBattle?.72:.8},s.calcFleetAntiAir=function(e,t,r){var n=(0,e.totalShipStats)(u),i=2*Math.floor(r*n);return"Player"===t?i/1.3:i}},240:function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var n=r(532),i=r(49),a=function(e){var t=e.shipType,r=e.shipClass,n=e.isInstallation,i=e.hasGear;return t.isAircraftCarrierClass||(r.is("RevisedKazahayaClass")||n)&&(i("DiveBomber")||i("TorpedoBomber"))?"CarrierShelling":"Shelling"},o=function(){function e(e){var t=this;this.ship=e,this.getProficiencyModifiers=function(e){return void 0===e&&(e=!1),"Shelling"===t.type?{power:1,hitRate:0,criticalRate:0}:e?t.ship.getSpecialProficiencyModifiers():t.ship.getNormalProficiencyModifiers()},this.calcBasicPower=function(e,r){void 0===r&&(r=!1);var n=t.ship;return 5+n.stats.firepower+(r?n.totalEquipmentStats((function(e){return e.is("TorpedoBomber")?0:e.improvement.shellingPowerModifier})):n.totalEquipmentStats((function(e){return e.improvement.shellingPowerModifier})))+e},this.getCarrierShellingFm=function(e){void 0===e&&(e=!1);var r=t,n=r.ship;if("Shelling"!==r.type){var i=e?0:n.totalEquipmentStats("torpedo"),a=e?n.totalEquipmentStats((function(e){return e.is("AntiInstallationBomber")?e.bombing:0})):n.totalEquipmentStats("bombing"),o=Math.floor(Math.floor(1.3*a)+i)+15;return function(e){return 25+Math.floor(1.5*(e+o))}}},this.calcPower=function(e){var r=e.fleetFactor,n=e.formationModifier,a=e.engagementModifier,o=e.isCritical,u=e.isAntiInstallation,s=e.isArmorPiercing,c=e.specialAttack,l=t.calcBasicPower(r,u),f=t.ship,p=f.health.shellingPowerModifier,h=f.getCruiserFitBonus(),d=c?c.modifier.power:1,g=t.getProficiencyModifiers(null==c?void 0:c.isCarrierSpecialAttack).power,m={a14:n*a*p,b14:h,a11:d};e.modifiers&&(m=Object(i.a)(m,e.modifiers));var b=t.getCarrierShellingFm(u);return Object(i.b)({basic:l,cap:180,modifiers:m,fm14prev:b,fm11next:function(e){return s&&(e=t.apShellFm(e)),o&&(e=Object(i.c)(g)(e)),e}})},this.calcAccuracy=function(e){var r=t.accuracyShipFactors,n=r.shipAccuracy,i=r.equipmentAccuracy,a=r.improvementModifier,o=r.moraleModifier,u=e.fleetFactor,s=e.formationModifier,c=e.specialAttackModifier,l=e.isArmorPiercing,f=e.fitGunBonus,p=1;l&&(p=t.apShellModifiers.accuracy);var h=Math.floor(u+n+i+a);return Math.floor((h*s*o+f)*c*p)}}return Object.defineProperty(e.prototype,"type",{get:function(){return a(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellModifiers",{get:function(){var e=this.ship.hasGear;return Object(n.b)({hasMainGun:e("MainGun"),hasArmorPiercingShell:e("ArmorPiercingShell"),hasSecondaryGun:e("SecondaryGun"),hasRader:e("Radar")})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellFm",{get:function(){var e=this.apShellModifiers.power;return function(t){return Math.floor(t*e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracyShipFactors",{get:function(){var e=this.ship;return{shipAccuracy:e.shipAccuracy,equipmentAccuracy:e.totalEquipmentStats("accuracy"),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.shellingAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("shelling")}},enumerable:!0,configurable:!0}),e}();t.a=o},241:function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l}));var n=r(39),i=[{attackerFleetType:n.a.CarrierTaskForce,defenderFleetType:n.a.Single,factors:[2,10]},{attackerFleetType:n.a.SurfaceTaskForce,defenderFleetType:n.a.Single,factors:[10,-5]},{attackerFleetType:n.a.TransportEscort,defenderFleetType:n.a.Single,factors:[-5,10]},{attackerFleetType:n.a.Single,defenderFleetType:n.a.Combined,factors:[5,5]},{attackerFleetType:n.a.CarrierTaskForce,defenderFleetType:n.a.Combined,factors:[2,-5]},{attackerFleetType:n.a.SurfaceTaskForce,defenderFleetType:n.a.Combined,factors:[2,-5]},{attackerFleetType:n.a.TransportEscort,defenderFleetType:n.a.Combined,factors:[-5,-5]}],a=[{attackerFleetType:n.a.Single,defenderFleetType:n.a.CarrierTaskForce,factors:[10,5]},{attackerFleetType:n.a.Single,defenderFleetType:n.a.SurfaceTaskForce,factors:[5,-5]},{attackerFleetType:n.a.Single,defenderFleetType:n.a.TransportEscort,factors:[10,5]}],o=[{fleetType:n.a.CarrierTaskForce,factors:[78,43]},{fleetType:n.a.SurfaceTaskForce,factors:[46,70]},{fleetType:n.a.TransportEscort,factors:[51,46]}],u=function(e,t){if(!e.fleetType.isCombined&&!t.fleetType.isCombined)return 0;var r="Main"===e.role?0:1;if("Player"===e.side){var n=i.find((function(r){return r.attackerFleetType===e.fleetType&&r.defenderFleetType===t.fleetType}));return n?n.factors[r]:0}if(e.fleetType.isCombined)return[10,-5][r];var o=a.find((function(r){return r.attackerFleetType===e.fleetType&&r.defenderFleetType===t.fleetType}));return o?o.factors[r]:0},s=function(e,t){var r=function(r){return e.side===r?e.fleetType:t.fleetType},n=r("Player").isCombined,i=r("Enemy").isCombined;return n||i?n&&!i?0:15:5},c=function(e){var t,r=e.fleetType,n="Main"===e.role?0:1,i=null===(t=o.find((function(e){return e.fleetType===r})))||void 0===t?void 0:t.factors[n];return null!=i?i:90},l=function(e,t){var r=u(e,t),n=c(e);return{shelling:r,torpedo:s(e,t),shellingAccuracy:n}}},295:function(e,t,r){"use strict";var n=function(e){var t=e.antiAir,r=e.improvement;if(0===t)return 0;var n=0;return e.is("AntiAircraftGun")?n=6:e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?n=4:e.is("Radar")&&(n=3),n*t+r.adjustedAntiAirModifier},i=function(){function e(e,t,r,n,i){var a=this;void 0===n&&(n=1),this.ship=e,this.side=t,this.fleetAntiAir=r,this.combinedFleetModifier=n,this.antiAirCutin=i,this.calcProportionalShotdownRate=function(e){void 0===e&&(e=1);var t=a,r=t.adjustedAntiAir,n=t.combinedFleetModifier;return Math.floor(r*e)*n*.5*.25*.02},this.calcFixedShotdownNumber=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);var r=a,n=r.adjustedAntiAir,i=r.fleetAntiAir,o=r.side,u=r.antiAirCutin,s=r.combinedFleetModifier,c="Player"===o?.8:.75,l=.5*(Math.floor(n*e)+Math.floor(i*t))*.25*c*s;return u&&(l*=u.fixedAirDefenseModifier),Math.floor(l)},this.getShotdownNumber=function(e){var t=e.slotSize,r=e.adjustedAntiAirResistModifier,n=e.fleetAntiAirResistModifier,i=0;if(Math.random()>.5){var o=a.calcProportionalShotdownRate(r);i+=Math.floor(t*o)}if(Math.random()>.5){var u=a.calcFixedShotdownNumber(r,n);i+=Math.floor(u)}return i+=a.minimumBonus}}return Object.defineProperty(e.prototype,"adjustedAntiAir",{get:function(){return function(e,t){var r=e.stats,i=e.nakedStats,a=(0,e.totalEquipmentStats)(n);if("Enemy"===t)return Math.floor(2*Math.floor(Math.sqrt(r.antiAir))+a);var o=i.antiAir+a;return 0===e.countGear()?o:2*Math.floor(o/2)}(this.ship,this.side)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumBonus",{get:function(){var e=this.side,t=this.antiAirCutin;return t?t.minimumBonus:"Player"===e?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAirPropellantBarrageChance",{get:function(){var e,t=this.ship,r=this.adjustedAntiAir,n=t.shipType;if(!(e=n).isAircraftCarrierClass&&!e.any("AviationCruiser","AviationBattleship","SeaplaneTender"))return 0;var i=t.countGear(274);if(!i)return 0;var a=t.shipClass.is("IseClass")?.25:0;return(r+.9*t.stats.luck)/281+.15*(i-1)+a},enumerable:!0,configurable:!0}),e}();t.a=i},296:function(e,t,r){"use strict";var n=r(364),i=r(4041),a=r(558),o=r(231),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(){function e(e,t,r,i,a){this.side=e,this.fleetType=t,this.landBase=r,this.mainFleet=i,this.escortFleet=a,this.formation=n.a.LineAhead,this.name="",this.isCombinedFleet&&(this.formation=n.a.CruisingFormation4)}return Object.defineProperty(e.prototype,"allShips",{get:function(){var e=this.mainFleet,t=this.escortFleet,r=e.nonNullableShips.concat();return t?r.concat(t.nonNullableShips):r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.allShips,t=this.side,r=this.formation;return new o.a(e,t,r.fleetAntiAirModifier).fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleet",{get:function(){return this.fleetType!==i.a.Single},enumerable:!0,configurable:!0}),e.prototype.getShipInformation=function(e){var t=this,r=t.mainFleet,n=t.escortFleet,i={side:t.side,fleetType:t.fleetType,fleetAntiAir:t.fleetAntiAir,formation:t.formation};return r.nonNullableShips.find((function(t){return t===e}))?u(u({},i),{fleetRole:a.a.MainFleet}):n&&n.nonNullableShips.find((function(t){return t===e}))?u(u({},i),{fleetRole:a.a.EscortFleet}):void 0},e}();t.a=s},297:function(e,t,r){"use strict";var n=function(){function e(e,t,r){this.player=e,this.enemy=t,this.battleType=r}return e.prototype.getShipInformation=function(e){var t=this.player,r=this.enemy,n=t.getShipInformation(e);if(n)return n;var i=r.getShipInformation(e);if(i)return i;throw console.error("ship info is not found")},e}();t.a=n},308:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(49),i={createPower:function(e){var t=e.nakedAsw,r=e.equipmentAsw,i=e.improvementModifier,a=e.typeConstant,o=e.formationModifier,u=e.engagementModifier,s=e.healthModifier,c=e.synergyModifier,l=e.optionalModifiers,f=e.fm11next,p=2*Math.sqrt(t)+1.5*r+i+a,h=o*u*s*c,d=l?Object(n.a)(l,{a14:h}):{a14:h};return Object(n.b)({basic:p,cap:150,modifiers:d,fm11next:f})},calcAccuracy:function(e){return(80+e.shipAccuracy+e.aswEquipmentModifier+e.improvementModifier)*e.formationModifier*e.moraleModifier}}},3272:function(e,t,r){"use strict";var n=r(150);r.d(t,"a",(function(){return n}))},3273:function(e,t,r){"use strict";var n,i=r(342),a=r(557),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,t)||this,n=r.combatInformation,i=n.player,a=n.enemy;return i.isCombinedFleet&&a.isCombinedFleet?(r.playerAntiAirDefenseShips=i.allShips,r.enemyAntiAirDefenseShips=a.allShips):(r.playerAntiAirDefenseShips=i.mainFleet.nonNullableShips,r.enemyAntiAirDefenseShips=a.mainFleet.nonNullableShips),r}return o(t,e),t.prototype.main=function(){var e=this.playerAntiAirDefenseShips,t=this.enemyAntiAirDefenseShips,r=this.combatInformation,n=e.flatMap((function(e){return e.planes})),i=t.flatMap((function(e){return e.planes})),o=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")},u=n.filter(o),s=i.filter(o),c=this.fighterCombat(u,s),l=r.player,f=(r.enemy,u.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}))),p=s.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}));return this.antiAirDefense(e,p,a.a.try(l.allShips)),this.antiAirDefense(t,f,a.a.try(l.allShips)),{airControlState:c}},t}(i.a);t.a=u},3274:function(e,t,r){"use strict";var n,i=r(4050),a=r(365),o=r(342),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){var n=e.call(this,t)||this;return n.landBasedAirCorps=r,n}return u(t,e),t.prototype.main=function(){var e=this,t=this.combatInformation.enemy,r=this.landBasedAirCorps,n=r.fighterPower,o=r.planes,u=Object(i.a)(t.allShips,(function(e){return e.planes})),s=u.reduce((function(e,t){return e+t.fighterPower}),0),c=a.a.fromFighterPower(n,s),l=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")||e.is("ReconnaissanceAircraft")},f=o.filter(l),p=u.filter(l);f.forEach((function(t){return e.shotdownInFighterCombat(t,c.constant,"Player")})),p.forEach((function(t){return e.shotdownInFighterCombat(t,c.constant,"Enemy")}));var h=f.filter((function(e){return e.slotSize>0&&e.participatesInAirstrike}));return this.antiAirDefense(t.allShips,h),{airControlState:c}},t}(o.a);t.a=s},3355:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(49),i=r(240),a=r(553),o=r(554),u=r(555),s=r(556),c=function(e){var t=e.ship,r=e.target,c=e.fleetFactors,l=e.formation,f=e.role,p=e.engagement,h=e.isArmorPiercing,d=e.nightContactModifier,g=e.optionalPowerModifiers,m=l.getModifiers(f),b=p.modifier,y=r.isInstallation,v=t.getSpecialEnemyModifiers(r),O=new i.a(t),w=new a.a(t),A=o.a.fromShip(t),j=u.a.fromShip(t,"Day"),M=new s.a(t);return{calcShellingPower:function(e,t){var r=Object(n.a)(v,g);return O.calcPower({fleetFactor:c.shelling,formationModifier:m.shelling.power,engagementModifier:b,modifiers:r,isCritical:e,isAntiInstallation:y,isArmorPiercing:h,specialAttack:t})},calcShellingSupportPower:function(e){var t=l.shellingSupportModifiers.power;return w.calcPower({formationModifier:t,engagementModifier:b,isCritical:e,isAntiInstallation:y})},calcTorpedoPower:function(e){return A.calcPower({fleetFactor:c.torpedo,formationModifier:m.torpedo.power,engagementModifier:b,isCritical:e,optionalModifiers:g})},calcAswPower:function(e){return j.calcPower({formationModifier:m.asw.power,engagementModifier:b,isCritical:e,optionalModifiers:g})},calcNightPower:function(e,t){var r=Object(n.a)(v,g);return M.calcPower({formationModifier:m.night.power,nightContactModifier:d,specialAttack:t,modifiers:r,isCritical:e,isAntiInstallation:y})},canDoTorpedoAttack:t.nakedStats.torpedo>0,canDoAsw:"None"!==j.type}}},3393:function(e,t,r){"use strict";var n=r(560),i=function(e){var t=this;this.planes=e,this.calcRate=function(e){var r,i,a=t.planes,o=e.contactMultiplier,u=function(e,t){return 0===t?0:Math.min((e+1)/(70-15*t),1)}(Object(n.a)(a.filter((function(e){return e.is("ReconnaissanceAircraft")})),(function(e){return e.contactTriggerFactor})),o),s=((r={})[1.2]=0,r[1.17]=0,r[1.12]=0,r),c=u*a.filter((function(e){return e.canContact})).sort((function(e,t){return t.gear.accuracy-e.gear.accuracy})).reduce((function(t,r){var n=(1-t)*r.contactSelectionRate(e),i=r.gear.accuracy;return i>=3?s[1.2]+=n:2===i?s[1.17]+=n:s[1.12]+=n,t+n}),0),l=((i={})[1.2]=s[1.2]*u,i[1.17]=s[1.17]*u,i[1.12]=s[1.12]*u,i);return{successRate:c,triggerRate:u,selectionRateMap:s,rateMap:l,airControlState:e}},this.getContactModifier=function(e){if(0===e.contactMultiplier)return 1;var r=t.calcRate(e).rateMap,n=Math.random();return n<r[1.2]?1.2:n<r[1.2]+r[1.17]?1.17:n<r[1.2]+r[1.17]+r[1.12]?1.12:1}};t.a=i},3410:function(e,t,r){"use strict";r.d(t,"b",(function(){return j}));var n=r(42),i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.includes(t.gearId)}},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.map(n.b.keyToId).includes(t.categoryId)}},o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return e(t)}))}},u=a("SmallCaliberMainGun","MediumCaliberMainGun","LargeCaliberMainGun","LargeCaliberMainGun2"),s=a("SmallRadar","LargeRadar","LargeRadar2"),c=o(s,(function(e){return e.los>=5})),l=o(s,(function(e){return e.antiAir>=2})),f=a("ExtraArmor","MediumExtraArmor","LargeExtraArmor"),p=a("CarrierBasedFighterAircraft","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2"),h=a("ReconnaissanceSeaplane","SeaplaneBomber","SeaplaneFighter","LargeFlyingBoat"),d=a("LandBasedAttackAircraft","LandBasedFighter","LandBasedReconnaissanceAircraft"),g=a("JetPoweredFighter","JetPoweredFighterBomber","JetPoweredTorpedoBomber","JetPoweredReconnaissanceAircraft"),m=a("CarrierBasedFighterAircraft","SeaplaneFighter","LandBasedFighter","JetPoweredFighter"),b=a("CarrierBasedDiveBomber","SeaplaneBomber","JetPoweredFighterBomber"),y=a("CarrierBasedTorpedoBomber","JetPoweredTorpedoBomber","LandBasedAttackAircraft"),v=a("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane","LargeFlyingBoat","JetPoweredReconnaissanceAircraft","LandBasedReconnaissanceAircraft"),O={Abyssal:function(e){return e.gearId>500},HighAngleMount:function(e){return 16===e.iconId},MainGun:u,Radar:s,SurfaceRadar:c,AirRadar:l,Armor:f,CarrierBasedAircraft:p,Seaplane:h,LandBasedAircraft:d,JetPoweredAircraft:g,Fighter:m,DiveBomber:b,TorpedoBomber:y,ReconnaissanceAircraft:v,FighterBomber:o(a("CarrierBasedDiveBomber"),(function(e){return e.antiAir>=1})),Aircraft:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e(t)}))}}(m,b,y,v,a("Autogyro","AntiSubmarinePatrolAircraft")),AntiInstallationBomber:i(60,64,305,306,148,233,277,319),AswGear:a("Sonar","DepthCharge","LargeSonar","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft"),AswAircraft:o((function(e){return e.asw>0}),a("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft","LargeFlyingBoat")),DepthChargeProjector:i(44,45),AdditionalDepthCharge:i(226,227),AntiGroundRocketLauncher:i(348,349),Mortar:i(346,347)},w=Object.keys(O),A={from:function(e){var t=function(e){return w.filter((function(t){return O[t](e)}))}(e),r=n.b.numberToKey(e.categoryId);return r&&t.push(r),t}},j=["armor","firepower","torpedo","speed","bombing","antiAir","asw","los","accuracy","evasion","interception","antiBomber","range","radius"],M=function(){function e(e,t,r){var i=this;this.category=t,this.improvable=r,this.radius=0,this.is=function(e){return i.attrs.includes(e)},this.id=e.api_id,this.name=e.api_name,this.categoryId=t.id,this.iconId=e.api_type[3],this.hp=e.api_taik,this.armor=e.api_souk,this.firepower=e.api_houg,this.torpedo=e.api_raig,this.speed=e.api_soku,this.bombing=e.api_baku,this.antiAir=e.api_tyku,this.asw=e.api_tais,this.los=e.api_saku,this.luck=e.api_luck,this.range=e.api_leng;var a=e.api_houm,o=e.api_houk;this.accuracy=0,this.evasion=0,this.antiBomber=0,this.interception=0,this.categoryId===n.a.LandBasedFighter?(this.antiBomber=a,this.interception=o):(this.accuracy=a,this.evasion=o),e.api_distance&&(this.radius=e.api_distance),this.attrs=A.from(this)}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}();t.a=M},342:function(e,t,r){"use strict";var n=r(3417),i=r(365),a=r(295),o=r(231),u=function(){function e(e){var t=this;this.combatInformation=e,this.shotdownInFighterCombat=function(e,t,r){var n;if("Player"===r){var i=t/4,a=Math.floor(t/3*100);n=Math.floor(Math.random()*(a+1))/100+i}else{a=11-t;n=.35*Math.floor(Math.random()*(a+1))+.65*Math.floor(Math.random()*(a+1))}var o=n/10,u=Math.floor(e.slotSize*o);e.is("JetPoweredAircraft")?e.shotdown(.6*u):e.shotdown(u)},this.shipAntiAirDefense=function(e,r,n){var i=t.combatInformation.battleType,u=t.combatInformation.getShipInformation(e),s=u.side,c=u.fleetRole,l=u.fleetAntiAir,f=o.a.getCombinedFleetModifier(c,i),p=new a.a(e,s,l,f,n).getShotdownNumber(r);r.shotdown(p)}}return e.prototype.fighterCombat=function(e,t){var r=this,n=e.reduce((function(e,t){return e+t.fighterPower}),0),a=t.reduce((function(e,t){return e+t.fighterPower}),0),o=i.a.fromFighterPower(n,a);return e.forEach((function(e){return r.shotdownInFighterCombat(e,o.constant,"Player")})),t.forEach((function(e){return r.shotdownInFighterCombat(e,o.constant,"Enemy")})),o},e.prototype.antiAirDefense=function(e,t,r){for(var i=0,a=t;i<a.length;i++){var o=a[i],u=e[Object(n.a)(e.length-1)];this.shipAntiAirDefense(u,o,r)}},e}();t.a=u},364:function(e,t,r){"use strict";var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(){function e(t,r,i){var a=this;this.id=t,this.name=r,this.modifiers=i,this.getModifiers=function(t){return a!==e.Vanguard?a.modifiers:n(n({},a.modifiers),"Main"===t?{shelling:{power:.5,accuracy:.8,evasion:1},torpedo:{power:1,accuracy:.75,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:.5,accuracy:1,evasion:1}}:{shelling:{power:1,accuracy:1.2,evasion:1},torpedo:{power:1,accuracy:.95,evasion:1},asw:{power:.6,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}})},e.values.push(this)}return Object.defineProperty(e,"singleFleetFormations",{get:function(){return e.values.filter((function(e){return e.id<=10}))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"combinedFleetFormations",{get:function(){return e.values.filter((function(e){return e.id>10}))},enumerable:!0,configurable:!0}),e.fromId=function(t){return e.values.find((function(e){return e.id===t}))},Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){return this.modifiers.fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleetFormation",{get:function(){return this.id>10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingSupportModifiers",{get:function(){return this===e.Vanguard?{power:.5,accuracy:.8}:this.isCombinedFleetFormation?{power:1,accuracy:1}:this.getModifiers("Main").shelling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protectionRate",{get:function(){return this===e.LineAhead?.45:this===e.Diamond?.75:.6},enumerable:!0,configurable:!0}),e}();t.a=i,i.keys=["LineAhead","DoubleLine","Diamond","Echelon","LineAbreast","Vanguard","CruisingFormation1","CruisingFormation2","CruisingFormation3","CruisingFormation4"].concat(),i.values=[],i.LineAhead=new i(1,"単縦陣",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),i.DoubleLine=new i(2,"複縦陣",{fleetAntiAir:1.2,shelling:{power:.8,accuracy:1.2,evasion:1},torpedo:{power:.8,accuracy:.8,evasion:1},asw:{power:.8,accuracy:1.2,evasion:1},night:{power:1,accuracy:.9,evasion:1}}),i.Diamond=new i(3,"輪形陣",{fleetAntiAir:1.6,shelling:{power:.7,accuracy:1,evasion:1.1},torpedo:{power:.7,accuracy:.4,evasion:1.1},asw:{power:1.2,accuracy:1,evasion:1},night:{power:1,accuracy:.7,evasion:1}}),i.Echelon=new i(4,"梯形陣",{fleetAntiAir:1,shelling:{power:.75,accuracy:1.2,evasion:1.2},torpedo:{power:.6,accuracy:.6,evasion:1.3},asw:{power:1.1,accuracy:1.2,evasion:1.3},night:{power:1,accuracy:.9,evasion:1.2}}),i.LineAbreast=new i(5,"単横陣",{fleetAntiAir:1,shelling:{power:.6,accuracy:1.2,evasion:1.3},torpedo:{power:.6,accuracy:.3,evasion:1.4},asw:{power:1.3,accuracy:1.2,evasion:1.1},night:{power:1,accuracy:.8,evasion:1.2}}),i.Vanguard=new i(6,"警戒陣",{fleetAntiAir:1.1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),i.CruisingFormation1=new i(11,"第一警戒航行序列",{fleetAntiAir:1.1,shelling:{power:.8,accuracy:1,evasion:1},torpedo:{power:.7,accuracy:1,evasion:1},asw:{power:1.3,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),i.CruisingFormation2=new i(12,"第二警戒航行序列",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:.9,accuracy:1,evasion:1},asw:{power:1.1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),i.CruisingFormation3=new i(13,"第三警戒航行序列",{fleetAntiAir:1.5,shelling:{power:.7,accuracy:1,evasion:1},torpedo:{power:.6,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),i.CruisingFormation4=new i(14,"第四警戒航行序列",{fleetAntiAir:1,shelling:{power:1.1,accuracy:1.1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.7,accuracy:1,evasion:1},night:{power:1,accuracy:1,evasion:1}}),i.isIneffective=function(e,t){return[[i.DoubleLine,i.LineAbreast],[i.LineAbreast,i.Echelon],[i.Echelon,i.LineAhead]].some((function(r){return r[0]===e&&r[1]===t}))}},365:function(e,t,r){"use strict";var n=function(){function e(t,r,n){this.id=t,this.name=r,this.constant=n,e.values.push(this)}return e.fromFighterPower=function(t,r){var n=e.getBoundaryValues(r);return t>=n.AirSupremacy?e.AirSupremacy:t>=n.AirSuperiority?e.AirSuperiority:t>=n.AirParity?e.AirParity:t>=n.AirDenial?e.AirDenial:e.AirIncapability},e.fromId=function(t){return e.values.find((function(e){return e.id===t}))},Object.defineProperty(e.prototype,"contactMultiplier",{get:function(){switch(this){case e.AirSupremacy:return 3;case e.AirSuperiority:return 2;case e.AirDenial:return 1;default:return 0}},enumerable:!0,configurable:!0}),e}();t.a=n,n.values=[],n.AirSupremacy=new n(1,"制空権確保",1),n.AirSuperiority=new n(2,"航空優勢",3),n.AirParity=new n(0,"制空均衡",5),n.AirDenial=new n(3,"航空劣勢",7),n.AirIncapability=new n(4,"制空権喪失",10),n.getBoundaryValues=function(e){return{AirSupremacy:Math.ceil(3*e),AirSuperiority:Math.ceil(1.5*e),AirParity:Math.floor(2/3*e)+1,AirDenial:Math.floor(1/3*e)+1}}},37:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return u}));var n=function(e){return null!=e},i=n,a=function(e,t){return t<=e?t:e+Math.sqrt(t-e)},o=function(e){return e.health.currentHp+e.getDefensePower().max},u=function(e){return e[Math.floor(Math.random()*e.length)]}},39:function(e,t,r){"use strict";var n=function(){function e(t,r,n){this.id=t,this.key=r,this.name=n,e.values.push(this)}return Object.defineProperty(e.prototype,"isCombined",{get:function(){return this!==e.Single},enumerable:!0,configurable:!0}),e}();t.a=n,n.values=[],n.Single=new n(0,"Single","通常艦隊"),n.CarrierTaskForce=new n(1,"CarrierTaskForce","空母機動部隊"),n.SurfaceTaskForce=new n(2,"SurfaceTaskForce","水上打撃部隊"),n.TransportEscort=new n(3,"TransportEscort","輸送護衛部隊"),n.Combined=new n(5,"Combined","敵連合"),n.fromId=function(e){return n.values.find((function(t){return t.id===e}))},n.fromString=function(e){return n.values.find((function(t){return t.key===e||t.name===e}))}},4037:function(e,t,r){"use strict";var n=r(4163),i=r(602),a=r(303),o=r.n(a),u=function(){function e(e,t,r,n,a){var u=this;this.stats=e,this.category=t,this.improvement=r,this.proficiency=n,this.attrs=a,this.is=function(e){return u.attrs.includes(e)},this.match=function(e){return"number"==typeof e?u.gearId===e:o()(e)(u)},this.toState=function(){return{gearId:u.gearId,star:u.star,exp:u.exp}},this.calcFighterPower=function(e,t){void 0===t&&(t=!1);var r=u,n=r.antiAir,a=r.interception,o=r.antiBomber,s=r.improvement,c=r.proficiency,l=s.fighterPowerModifier,f=c.fighterPowerBonus;return Object(i.a)({slotSize:e,antiAir:n,interception:a,antiBomber:o,improvementModifier:l,proficiencyModifier:f,isInterception:t})}}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.stats.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.stats.categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.stats.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.stats.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvable",{get:function(){return this.stats.improvable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.stats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.stats.armor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.stats.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.stats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.stats.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.stats.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.stats.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.stats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.stats.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return this.stats.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.stats.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiBomber",{get:function(){return this.stats.antiBomber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interception",{get:function(){return this.stats.interception},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stats.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.improvement.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this.proficiency.internal},enumerable:!0,configurable:!0}),e}(),s=r(42),c=function(){function e(e,t,r){void 0===e&&(e=0),this.value=e,this.stats=t,this.gearIs=r}return Object.defineProperty(e.prototype,"star",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactSelectionModifier",{get:function(){var e=this.value,t=this.gearIs;if(!t("ReconnaissanceAircraft"))return 0;var r=this.stats.los;if(t("CarrierBasedReconnaissanceAircraft")||t("CarrierBasedReconnaissanceAircraft2")){if(7===r)return.25*e;if(11===r)return.4*e}else{if(6===r)return.2*e;if(r>=4)return.14*e;if(3===r)return.1*e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerModifier",{get:function(){var e=this.star,t=this.gearIs;return t("Fighter")?.2*e:t("FighterBomber")?.25*e:t("LandBasedAttackAircraft")?.5*Math.sqrt(e):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirModifier",{get:function(){var e=this.gearIs,t=this.stats.antiAir;if(0===t)return 0;var r=0;return e("AntiAircraftGun")?r=t<=7?4:6:(e("AntiAircraftFireDirector")||e("HighAngleMount"))&&(r=t<=7?2:3),r*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){var e=this.gearIs,t=this.stats.antiAir;if(0===t)return 0;var r=0;return e("AntiAircraftFireDirector")||e("HighAngleMount")?r=t<=7?2:3:e("AirRadar")&&(r=1.5),r*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){var e=this.stats,t=e.firepower,r=e.gearId,n=this.gearIs;return t>12?1.5*Math.sqrt(this.value):n("CarrierBasedTorpedoBomber")||[10,66,220,275,358].includes(r)?.2*this.value:[12,234,247].includes(r)?.3*this.value:n("MainGun")||n("SecondaryGun")||n("ArmorPiercingShell")||n("AntiAircraftFireDirector")||n("Searchlight")||n("LargeSearchlight")||n("AntiAircraftGun")||n("LandingCraft")||n("SpecialAmphibiousTank")||n("AntiAircraftShell")||n("AntiGroundEquipment")?Math.sqrt(this.value):n("Sonar")||n("LargeSonar")||n("DepthChargeProjector")||n("Mortar")?.75*Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){var e=this.gearIs;return e("SurfaceRadar")?1.7*Math.sqrt(this.value):e("Radar")||e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftFireDirector")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){var e=this.gearIs,t=this.stats,r=this.star;return e("CarrierBasedTorpedoBomber")?.2*r:e("DepthCharge")||e("Sonar")?Math.sqrt(r):e("Autogyro")?(t.asw>10?.3:.2)*r:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Sonar:case s.a.LargeSonar:case s.a.DepthCharge:return 1.3*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Torpedo:case s.a.AntiAircraftGun:return 1.2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Torpedo:case s.a.MidgetSubmarine:return 2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoEvasionModifier",{get:function(){var e=this.star,t=this.gearIs;return t("Sonar")||t("LargeSonar")?1.5*Math.sqrt(e):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){var e=this.gearIs,t=this.stats.gearId;return[10,66,220,275,358].includes(t)?.2*this.value:[12,234,247].includes(t)?.3*this.value:e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftShell")||e("Searchlight")||e("LargeSearchlight")||e("AntiAircraftFireDirector")||e("LandingCraft")||e("SpecialAmphibiousTank")||e("AntiGroundEquipment")||e("Torpedo")||e("MidgetSubmarine")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackAccuracyModifier",{get:function(){var e=this.gearIs,t=this.value;return e("SurfaceRadar")?1.6*Math.sqrt(t):e("MediumCaliberMainGun")||e("Radar")?1.3*Math.sqrt(t):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectiveLosModifier",{get:function(){var e=this.gearIs,t=this.value;return e("SmallRadar")?1.25*Math.sqrt(t):e("LargeRadar")||e("LargeRadar2")?1.4*Math.sqrt(t):e("CarrierBasedReconnaissanceAircraft")||e("CarrierBasedReconnaissanceAircraft2")||e("ReconnaissanceSeaplane")?1.2*Math.sqrt(t):e("SeaplaneBomber")?1.15*Math.sqrt(t):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePowerModifier",{get:function(){var e=this.gearIs;return e("MediumExtraArmor")?.2*this.value:e("LargeExtraArmor")?.3*this.value:0},enumerable:!0,configurable:!0}),e}(),l=r(538),f=function(e){var t=this;this.masters=e,this.create=function(e){if(e){var r=t.masters.find((function(t){return t.id===e.masterId}));if(r){var n=l.a.from(r.attrs),i=new c(e.improvement,r,r.is),a=new l.b(e.proficiency,n);return new u(r,r.category,i,a,r.attrs)}}}},p=r(560),h=r(4050),d=r(37),g=function(e){var t=e.los,r=e.improvement,n=.6;return e.is("CarrierBasedTorpedoBomber")?n=.8:e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?n=1:e.is("ReconnaissanceSeaplane")?n=1.2:e.is("SeaplaneBomber")&&(n=1.1),n*(t+r.effectiveLosModifier)},m=function(e,t,r){void 0===r&&(r=!1);var n,i=e.nakedStats,a=e.stats,o=e.totalEquipmentStats,u=e.gears;if(r){var s=u.filter((function(e,t){return t!==u.length-1})).filter(d.b);n=Object(p.a)(s,g)}else n=o(g);var c=a.getBonus("effectiveLos");return Math.sqrt(i.los+c)+n*t-2},b=function(e,t,r,n){return e.totalShipStats((function(e){return m(e,t,n)}))-Math.ceil(.4*r)+12},y=r(88),v=function(e){return[68,166,193,167].includes(e.gearId)},O=function(e){switch(e.gearId){case 68:case 193:return.05;case 166:return.02;case 167:return.01}return 0},w=function(e){if(e.category.is("LandingCraft"))return 8;if(e.category.is("CombatRation"))return 1;switch(e.gearId){case 75:return 5;case 167:return 2}return 0},A=function(e){return e.totalEquipmentStats(w)+function(e){switch(e){case y.a.SubmarineAircraftCarrier:return 1;case y.a.Destroyer:return 5;case y.a.LightCruiser:return 2;case y.a.AviationCruiser:return 4;case y.a.AviationBattleship:return 7;case y.a.FleetOiler:case y.a.AmphibiousAssaultShip:return 12;case y.a.SeaplaneTender:return 9;case y.a.SubmarineTender:return 7;case y.a.TrainingCruiser:return 6}return 0}(e.shipTypeId)+(487===e.shipId?8:0)},j=function(){function e(e){var t=this;this.ships=e,this.totalShipStats=function(e){return Object(p.a)(t.nonNullableShips,e)},this.effectiveLos=function(e,r,n){return b(t,e,r,n)}}return Object.defineProperty(e.prototype,"nonNullableShips",{get:function(){return this.ships.filter(d.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planes",{get:function(){return Object(h.a)(this.nonNullableShips,(function(e){return e.planes}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnknownSlot",{get:function(){return this.nonNullableShips.flatMap((function(e){return e.slots})).some((function(e){return e<0}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(p.a)(this.planes.filter((function(e){return!e.is("ReconnaissanceAircraft")})),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tp",{get:function(){return Object(p.a)(this.nonNullableShips,A)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expeditionBonus",{get:function(){return e=this.nonNullableShips,t=e.flatMap((function(e){return e.gears})).filter(d.b),r=t.filter(v),n=e.some((function(e){return 487===e.shipId}))?.05:0,(i=Math.min(Object(p.a)(t,O)+n,.2))+.01*i*(r.length&&Object(p.a)(r,(function(e){return e.star}))/r.length)+function(e){var t,r,n=e.filter((function(e){return 68===e.gearId})).length,i=e.filter((function(e){return 193===e.gearId})).length;return i<=2?.02*i:3===i?null!==(t=[.05,.05,.052,.054,.054][n])&&void 0!==t?t:.054:null!==(r=[.054,.056,.058,.059,.06][n])&&void 0!==r?r:.06}(t);var e,t,r,n,i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aviationDetectionScore",{get:function(){return Object(p.a)(this.planes,(function(e){return e.is("LargeFlyingBoat")?e.gear.los*Math.sqrt(e.slotSize):e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")?e.gear.los*Math.sqrt(Math.sqrt(e.slotSize)):0}))},enumerable:!0,configurable:!0}),e}(),M=function(e){var t=this;this.shipFactory=e,this.create=function(e){var r=e.ships.map(t.shipFactory.create);return new j(r)}},C=function(){function e(e,t,r){var n=this;this.gear=e,this.slots=t,this.index=r,this.contactSelectionRate=function(e){var t=n.gear,r=t.los,i=t.improvement;return Math.ceil(r+i.contactSelectionModifier)/(20-2*e.contactMultiplier)},this.calcNightAerialAttackPower=function(e){void 0===e&&(e=!1);var t=n,r=t.isNightPlane,i=t.isNightAircraft,a=t.gear,o=t.slotSize;if(!i)return 0;var u=a.firepower,s=a.torpedo,c=a.asw,l=a.bombing,f=0,p=.3;r&&(f=3,p=.45);var h=Math.sqrt(a.improvement.value);return u+(e?0:s)+l+f*o+p*(u+s+c+l)*Math.sqrt(o)+h},this.shotdown=function(e){n.slotSize-=e,n.slotSize<0&&(n.slotSize=0)}}return Object.defineProperty(e.prototype,"is",{get:function(){return this.gear.is},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.gear.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.slots[this.index]},set:function(e){this.slots[this.index]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){var e=this.gear,t=this.slotSize;return e.calcFighterPower(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){var e=this.gear,t=this.slotSize;return e.calcFighterPower(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canContact",{get:function(){return this.is("CarrierBasedTorpedoBomber")||this.is("ReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactTriggerFactor",{get:function(){var e=this.gear,t=this.slotSize;return Math.floor(e.los*Math.sqrt(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInAirstrike",{get:function(){return 0!==this.slotSize&&(this.is("DiveBomber")||this.is("TorpedoBomber"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInCarrierShelling",{get:function(){var e=this.category;return 0!==this.slotSize&&e.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","JetPoweredFighterBomber","JetPoweredTorpedoBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosModifier",{get:function(){var e=this.gear,t=this.slotSize;return this.is("ReconnaissanceSeaplane")||this.is("SeaplaneBomber")?e.los*Math.floor(Math.sqrt(t)):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwordfish",{get:function(){return this.gear.name.includes("Swordfish")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightFighter",{get:function(){return 45===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAttacker",{get:function(){return 46===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightPlane",{get:function(){return this.isNightFighter||this.isNightAttacker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAircraft",{get:function(){var e=this.isNightPlane,t=this.isSwordfish,r=this.gear;return e||t||[154,320].includes(r.gearId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterCombatResistModifier",{get:function(){return this.is("JetPoweredAircraft")?.6:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirResistModifier",{get:function(){var e=this.gear.gearId;return[93,94,143,144,99,100,154,319,320,79,80,81,237,170].includes(e)?.6:[322,323,199,200].includes(e)?.5:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirResistModifier",{get:function(){var e=this.gear.gearId;return[100,154,81,237,322,199].includes(e)?.7:[323,200].includes(e)?.5:1},enumerable:!0,configurable:!0}),e}(),S=function(e,t){var r=new Array;return e.map((function(n,i){var a=t[i];n&&a&&a.is("Aircraft")&&r.push(new C(a,e,i))})),r},L=function(e){var t=e.los;return e.is("LandBasedReconnaissanceAircraft")?t<=7?1.12:8===t?1.15:1.18:1},P=function(e){var t=e.los;return e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?t<=7?1.2:8===t?1.25:1.3:e.is("LandBasedReconnaissanceAircraft")?1.18:e.is("ReconnaissanceSeaplane")||e.is("LargeFlyingBoat")?t<=7?1.1:8===t?1.13:1.16:1},F=function(){function e(e,t){this.slots=e,this.gears=t,this.planes=S(e,t)}return Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(d.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlanes",{get:function(){return this.nonNullableGears.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(p.a)(this.planes,(function(e){return e.fighterPower})),t=Math.max.apply(Math,this.nonNullableGears.map(L));return Math.floor(e*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(p.a)(this.planes,(function(e){return e.interceptionPower})),t=Math.max.apply(Math,this.nonNullableGears.map(P));return Math.floor(e*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCombatRadius",{get:function(){return this.hasPlanes?Math.min.apply(Math,this.nonNullableGears.map((function(e){return e.radius}))):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combatRadius",{get:function(){if(!this.hasPlanes)return 0;var e=this.minCombatRadius,t=this.nonNullableGears,r=Math.max.apply(Math,t.map((function(e){return e.is("ReconnaissanceAircraft")?e.radius:0})));if(r>0){var n=Math.min(Math.sqrt(r-e),3);return Math.round(e+n)}return e},enumerable:!0,configurable:!0}),e}(),B=function(e){var t=this;this.gearFactory=e,this.create=function(e){var r=e.equipments,n=e.slots.concat(),i=r.map(t.gearFactory.create);return new F(n,i)}},k=r(4041),I=function(){function e(e,t,r,n){var i=this;this.side=e,this.fleetType=t,this.fleets=r,this.landBase=n,this.getFighterPower=function(e){void 0===e&&(e=!1);var t=i,r=t.mainFleet,n=t.escortFleet;if(!r.hasUnknownSlot){if(!e||!n)return r.fighterPower;if(!n.hasUnknownSlot)return r.fighterPower+n.fighterPower}},this.getInterceptionPower=function(e){void 0===e&&(e=!1);var t=i,r=t.mainFleet,n=t.escortFleet;if(!r.hasUnknownSlot){var a=Object(p.a)(r.planes,(function(e){return e.interceptionPower}));if(!e||!n)return a;if(!n.hasUnknownSlot)return a+Object(p.a)(n.planes,(function(e){return e.interceptionPower}))}}}return Object.defineProperty(e.prototype,"isCombinedFleetOperation",{get:function(){return this.fleetType!==k.a.Single},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFleet",{get:function(){return this.fleets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escortFleet",{get:function(){if(this.isCombinedFleetOperation)return this.fleets[1]},enumerable:!0,configurable:!0}),e}(),q=function(){function e(e,t){this.fleetFactory=e,this.landBasedAirCorpsFactory=t}return e.prototype.create=function(e){var t=e.side,r=e.fleetType,n=e.fleets,i=e.landBase,a=n.map(this.fleetFactory.create),o=i.map(this.landBasedAirCorpsFactory.create);return new I(t,r,a,o)},e}(),T=r(3411),N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.map((function(e){return T.a[e]})).includes(t.shipClassId)}},R=N("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass"),D=N("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass","NorthamptonClass","AtlantaClass"),G=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e(t)}))}}((function(e){return 147===e.shipId}),N("TashkentClass","GangutClass")),E=N("AirfieldPrincess","NorthernPrincess","HarbourPrincess","SupplyDepotPrincess","SupplyDepotSummerPrincess"),x=N("ArtilleryImp"),z=N("IsolatedIslandDemon","IsolatedIslandPrincess"),_={RoyalNavy:R,UsNavy:D,SovietNavy:G,Installation:function(e){return 0===e.speed},SoftSkinned:E,Pillbox:x,SupplyDepot:N("SupplyDepotPrincess","SupplyDepotSummerPrincess"),IsolatedIsland:z,Unremodeled:function(e){return e.sortId%10==1},Kai:function(e){return e.name.endsWith("改")},Kai2:function(e){return e.sortId%10>=6&&e.sortId%10<9}},H=Object.keys(_),K={from:function(e){return H.filter((function(t){return _[t](e)}))}},V=function(){function e(e,t){var r=this;this.maxHp=e,this.currentHp=t,this.gte=function(e){var t=r.currentHp/r.maxHp;switch(e){case"Less":return t>=1;case"Shouha":return t>=.75;case"Chuuha":return t>=.5;case"Taiha":return t>=.25}return!0},this.lte=function(e){return e===r.damage||!r.gte(e)}}return Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.currentHp/this.maxHp;return e<=0?"Sunk":e<=.25?"Taiha":e<=.5?"Chuuha":e<=.75?"Shouha":"Less"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.7;case"Taiha":return.4}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.8}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){return this.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){return this.lte("Taiha")?0:this.shellingPowerModifier},enumerable:!0,configurable:!0}),e}(),J={Sparkling:1.2,Normal:1,Orange:.8,Red:.5},U={accuracy:{shelling:J,asw:J,torpedo:{Sparkling:1.3,Normal:1,Orange:.7,Red:.35},night:J},evasion:{Sparkling:.7,Normal:1,Orange:1.2,Red:1.4}},Y=function(){function e(e){var t=this;void 0===e&&(e=49),this.value=e,this.getAccuracyModifier=function(e){return U.accuracy[e][t.state]}}return Object.defineProperty(e.prototype,"state",{get:function(){var e=this.value;return e>=50?"Sparkling":e>=30?"Normal":e>=20?"Orange":"Red"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasionModifier",{get:function(){return U.evasion[this.state]},enumerable:!0,configurable:!0}),e}(),$=r(4092),Z=r(3415),W=r(3417),Q=r(532),X=r(604),ee=r(49),te=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,i++)n[i]=a[o];return n},re={attrs:"Installation"},ne={attrs:"Pillbox"},ie={attrs:"IsolatedIsland"},ae={attrs:"SoftSkinned"},oe={shipClassId:T.a.HarbourSummerPrincess},ue={attrs:"SupplyDepot"},se=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{$or:te(e)}},ce=[{gear:{categoryId:s.a.AntiAircraftShell},rules:[{target:se(ie,oe),count1:{a13:1.75}},{target:ae,count1:{a13:2.5}}]},{gear:{categoryId:s.a.ArmorPiercingShell},rules:[{target:ne,count1:{a13:1.85}},{target:oe,count1:{a13:1.3}}]},{gear:126,rules:[{target:ne,count1:{a13:1.6},count2:{a13:2.72}},{target:ie,count1:{a13:1.4},count2:{a13:2.1}},{target:ae,count1:{a13:1.3},count2:{a13:1.82}},{target:oe,count1:{a13:1.4},count2:{a13:1.68}},{target:ue,count1:{a5:1.25},count2:{a5:1.625}},{target:re,count1:{b13next:75},count2:{b13next:110},count3:{b13next:140},count4:{b13next:160}}]},{gear:{attrs:"AntiGroundRocketLauncher"},rules:[{target:ne,count1:{a13:1.5},count2:{a13:2.7}},{target:ie,count1:{a13:1.3},count2:{a13:2.145}},{target:ae,count1:{a13:1.25},count2:{a13:1.875}},{target:oe,count1:{a13:1.25},count2:{a13:1.75}},{target:ue,count1:{a5:1.2},count2:{a5:1.68}}]},{gear:348,rules:[{target:re,count1:{b13next:55},count2:{b13next:115},count3:{b13next:160},count4:{b13next:190}}]},{gear:349,rules:[{target:re,count1:{b13next:80},count2:{b13next:170}}]},{gear:{attrs:"Mortar"},rules:[{target:ne,count1:{a13:1.3},count2:{a13:1.95}},{target:ie,count1:{a13:1.2},count2:{a13:1.68}},{target:ae,count1:{a13:1.2},count2:{a13:1.56}},{target:oe,count1:{a13:1.1},count2:{a13:1.265}},{target:ue,count1:{a5:1.15},count2:{a5:1.38}}]},{gear:346,rules:[{target:re,count1:{b13next:30},count2:{b13next:55},count3:{b13next:75},count4:{b13next:90}}]},{gear:347,rules:[{target:re,count1:{b13next:60},count2:{b13next:110},count3:{b13next:150},count4:{b13next:180}}]},{gear:{categoryId:s.a.LandingCraft},rules:[{target:se(ne,ie),count1:{a13:1.8}},{target:ae,count1:{a13:1.4}},{target:oe,count1:{a13:1.7}},{target:ue,count1:{a5:1.7}}]},{gear:193,rules:[{target:se(ne,ie,ae),count1:{a13:1.15}},{target:oe,count1:{a13:1.2}},{target:ue,count1:{a5:1.2}}]},{gear:166,rules:[{target:ne,count1:{a13:1.5},count2:{a13:2.1}},{target:ie,count1:{a13:1.2},count2:{a13:1.68}},{target:ae,count1:{a13:1.5},count2:{a13:1.95}},{target:oe,count1:{a13:1.6},count2:{a13:2.4}},{target:ue,count1:{a5:1.3},count2:{a5:2.08}}]},{gear:230,rules:[{target:re,count1:{a13:1.8,b13:25}}]},{gear:355,rules:[{target:ne,count1:{a13:2}},{target:ie,count1:{a13:1.8}},{target:ae,count1:{a13:1.1}},{target:oe,count1:{a13:2}},{target:ue,count1:{a5:1.2}},{target:re,count1:{b13:25,a13next:1.4}}]},{gear:167,rules:[{target:se(ne,ie),count1:{a13:2.4},count2:{a13:3.24}},{target:ae,count1:{a13:1.5},count2:{a13:1.8}},{target:oe,count1:{a13:2.8},count2:{a13:4.2}},{target:ue,count1:{a5:1.7},count2:{a5:2.55}}]},{gear:{categoryId:s.a.CarrierBasedDiveBomber},rules:[{target:ne,count1:{a13:1.5},count2:{a13:3}},{target:ie,count1:{a13:1.4},count2:{a13:2.45}},{target:oe,count1:{a13:1.3}}]},{gear:{categoryId:{$in:[s.a.SeaplaneBomber,s.a.SeaplaneFighter]}},rules:[{target:ne,count1:{a13:1.5}},{target:ae,count1:{a13:1.2}},{target:oe,count1:{a13:1.3}}]},{ship:{shipTypeId:{$in:[y.a.Destroyer,y.a.LightCruiser]}},target:ne,bonus:{a13:1.4}},{ship:{shipTypeId:{$in:[y.a.Submarine,y.a.SubmarineAircraftCarrier]}},target:re,bonus:{b12:30}}],le=function(e,t){var r=e.countGear("LandingCraft"),n={};if(r){var i=e.totalEquipmentStats((function(e){return e.is("LandingCraft")?e.star:0}));if(n.a13=1+i/r/50,!t)return n;n.a5=n.a13,e.hasGear(166)&&(n.a5*=n.a5)}return n},fe=function(e,t){var r=e.countGear(167),n={};if(r){var i=e.totalEquipmentStats((function(e){return e.match(167)?e.star:0}));if(n.a13=1+i/r/30,!t)return n;n.a5=n.a13}return n},pe=function(e,t){var r=function(e,t){var r=function(n,i){void 0===i&&(i=0);var a=[];if(!function(e,t,r){var n=e.ship,i=e.target;return!(n&&!t.match(n))&&!(i&&!r.match(i))}(n,e,t))return a;var o=n.gear,u=n.bonus,s=n.rules,c=o?e.countGear((function(e){return e.match(o)})):i;return c&&a.push(function(e,t){var r=e.count1,n=e.count2,i=e.count3,a=e.count4,o=e.count5,u={};return[r,n,i,a,o].forEach((function(e,r){e&&t>r&&(u=e)})),u}(n,c)),u&&a.push(u),s&&a.push.apply(a,s.flatMap((function(e){return r(e,c)}))),a};return r}(e,t),n=ce.flatMap((function(e){return r(e)})),i=function(e,t){if(!t.isInstallation)return[];var r=t.is("SupplyDepot");return[le(e,r),fe(e,r)]}(e,t);return ee.a.apply(void 0,te(n,i))},he=function(){return(he=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},de=function(){function e(e,t,r,n,i,a,u,s,c){var l=this;this.master=e,this.stats=t,this.nakedStats=r,this.health=n,this.morale=i,this.slots=a,this.gears=u,this.planes=s,this.attrs=c,this.is=function(e){return l.attrs.includes(e)},this.canEquip=function(e,t){var r=l,n=r.shipId,i=r.shipClass,a=l.master,o=a.equippable,u=a.isAbyssal,s=e.gearId,c=e.categoryId;if(u)return!0;if(!o.categories.includes(c))return!1;if([492,392].includes(n)&&e.is("SeaplaneBomber"))return 194===s;if(l.is("RoyalNavy")&&l.shipType.isBattleshipClass&&e.is("SeaplaneBomber"))return[367,368].includes(s);if(l.slots.length<=t){return $.a.includes(c)||o.expantionSlot.includes(s)||33===s}if(i.is("IseClass")&&l.is("Kai2"))return!(t>1&&e.is("MainGun"));if(i.is("YuubariClass")&&l.is("Kai2")){if(t>=3&&(e.is("MainGun")||e.is("Torpedo")||e.is("MidgetSubmarine")))return!1;if(4===t)return e.is("AntiAircraftGun")||e.is("SmallRadar")||e.is("CombatRation")}return!0},this.match=function(e){return"number"==typeof e?l.shipId===e:o()(e)(l)},this.hasGear=function(e){var t=l.nonNullableGears;return"string"==typeof e?t.some((function(t){return t.is(e)})):"number"==typeof e?t.some((function(t){return t.gearId===e})):t.some(e)},this.countGear=function(e){var t=l.nonNullableGears;return void 0===e?t.length:"string"==typeof e?t.filter((function(t){return t.is(e)})).length:"number"==typeof e?t.filter((function(t){return t.gearId===e})).length:t.filter(e).length},this.totalEquipmentStats=function(e){return Object(p.a)(l.nonNullableGears,e)},this.getDefensePower=function(){var e=l.stats.armor+l.totalEquipmentStats((function(e){return e.improvement.defensePowerModifier})),t=.7*Math.max(e,1),r=t+.6*Math.floor(e-1);return{min:t,max:r,values:function(){return Object(Z.a)(Math.floor(e)).map((function(e){return t+.6*e}))},random:function(){return t+.6*Object(W.a)(Math.floor(e-1))}}},this.getCruiserFitBonus=function(){var e=l,t=e.shipType,r=e.shipClass,n=e.countGear,i=t.any("LightCruiser","TorpedoCruiser","TrainingCruiser"),a=r.is("ZaraClass"),o=n((function(e){return[4,11].includes(e.gearId)})),u=n((function(e){return[65,119,139].includes(e.gearId)}));return Object(Q.a)({isLightCruiserClass:i,singleGunCount:o,twinGunCount:u,isZaraClass:a,zaraGunCount:Math.sqrt(n(162))})},this.getRemainingPlanes=function(){return l.planes.filter(d.b)},this.getNormalProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};if("CarrierShelling"!==l.getShellingType())return e;var t=l.getRemainingPlanes().filter((function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("LargeFlyingBoat")}));e.power=1+Object(p.a)(t,(function(e){return 0===e.index?e.gear.proficiency.criticalPowerModifier/100:e.gear.proficiency.criticalPowerModifier/200}));var r=Object(p.a)(t,(function(e){return e.gear.proficiency.internal}))/t.length,n=0,i=0;return r>=10&&(n=Math.floor(Math.sqrt(.1*r))),r>=25&&(i=1),r>=40&&(i=2),r>=55&&(i=3),r>=70&&(i=4),r>=80&&(i=6),r>=100&&(i=9),e.hitRate=n+i,e.criticalRate=Object(p.a)(t,(function(e){var t=e.gear.proficiency,r=t.internal,n=t.level,i=0===e.index?10:0,a=(Math.sqrt(.1*r)+n)/2;return Math.floor(a+i)/100})),e},this.getSpecialProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};return"CarrierShelling"!==l.getShellingType()||(l.getRemainingPlanes().filter((function(e){return e.participatesInCarrierShelling&&120===e.gear.proficiency.internal})).some((function(e){return 0===e.index}))?e.power=1.25:e.power=1.106),e},this.getSpecialEnemyModifiers=function(e){return pe(l,e)},this.getAntiInstallationModifier=function(e){var t=l.getSpecialEnemyModifiers(e);return he(he({},{a13:1,a13next:1,a5:1,b12:0,b13:0,b13next:0}),t)},this.calcEvasionValue=function(e,t){var r=l.stats,n=r.evasion,i=r.luck,a=l.totalEquipmentStats((function(e){return e.is("EngineImprovement")?e.star:0})),o=Math.floor(1.5*Math.sqrt(a));return Object(X.a)({evasion:n,luck:i,improvementModifier:o,formationModifier:e,postcapModifier:t})},this.slotCapacities=e.slotCapacities.concat()}return Object.defineProperty(e.prototype,"shipId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClassId",{get:function(){return this.master.shipClassId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipTypeId",{get:function(){return this.master.shipType.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){return this.master.remodelGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.master.sortId%10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ruby",{get:function(){return this.master.readingName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClass",{get:function(){return this.master.shipClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipType",{get:function(){return this.master.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.nakedStats.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipAccuracy",{get:function(){var e=this.nakedStats,t=e.level,r=e.luck;return 2*Math.sqrt(t)+1.5*Math.sqrt(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(p.a)(this.planes.filter((function(e){var t=e.gear;return t.is("Fighter")||t.is("TorpedoBomber")||t.is("DiveBomber")})),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosFactor",{get:function(){return this.nakedStats.los+Object(p.a)(this.planes,(function(e){return e.fleetLosModifier}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstallation",{get:function(){return 0===this.nakedStats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"installationType",{get:function(){var e=this.isInstallation,t=this.name;return e?t.includes("砲台")?"Pillbox":t.includes("離島")||t.includes("中枢")?"IsolatedIsland":t.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(d.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canNightAttack",{get:function(){var e=this.shipClass,t=(this.shipType,this.health),r=this.master;return!t.lte("Taiha")&&(e.is("ArkRoyalClass")?"Chuuha"!==t.damage&&this.planes.some((function(e){return e.isSwordfish})):r.firepower[0]>0)},enumerable:!0,configurable:!0}),e.prototype.getShellingType=function(){var e=this.shipType,t=this.shipClass,r=this.isInstallation,n=this.hasGear;return e.isAircraftCarrierClass||(t.is("RevisedKazahayaClass")||r)&&(n("DiveBomber")||n("TorpedoBomber"))?"CarrierShelling":"Shelling"},e}(),ge=r(531),me=r(4051),be=r(603),ye=(r(4181),r(4091)),ve=r(540),Oe=["firepower","armor","torpedo","accuracy","evasion","antiAir","asw","speed","los","range","speed","effectiveLos"],we=function(e,t){for(var r={},n=0,i=Oe;n<i.length;n++){var a=i[n],o=(e[a]||0)+(t[a]||0);0!==o&&(r[a]=o)}return r},Ae=function(e){var t=e.gears.filter((function(e){return e&&function(e){return!e.is("SmallRadar")}(e)})),r=e.shipId,n=e.ruby,i=e.shipTypeId,a=e.shipClassId;return Object(ve.createEquipmentBonus)({shipId:r,ruby:n,shipTypeId:i,shipClassId:a,gears:t}).los},je=function(e){var t=Object(ve.createEquipmentBonus)(e),r=function(e){if(!e.hasGear(33))return{};var t=ye.a.getSpeedGroup(e),r=e.countGear(34),n=e.countGear(87),i=ye.a.getSpeedIncrement(t,r,n);return i>0?{speed:i}:e.shipClassId===T.a.JohnCButlerClass||623===e.shipId?{speed:5}:{}}(e);return[{effectiveLos:Ae(e)},r].reduce(we,t)},Me=function(){function e(e,t,r){var n=this;void 0===r&&(r={}),this.nakedStats=e,this.gears=t,this.equipmentBonus=r,this.getBonus=function(e){var t=n.equipmentBonus;return Object(be.a)(Oe,e)&&t[e]||0}}return e.prototype.getStat=function(e){var t=this.nakedStats,r=this.gears;return t[e]+Object(p.a)(r.filter(d.b),e)+this.getBonus(e)},Object.defineProperty(e.prototype,"hp",{get:function(){return this.nakedStats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.getStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.getStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.getStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.getStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.getStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.getStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.getStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.nakedStats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.getStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e=this.nakedStats,t=this.gears,r=this.getBonus,n=e.range,i=Object(me.a)(t,"range");return(i&&i.range>n?i.range:n)+r("range")},enumerable:!0,configurable:!0}),e}(),Ce=function(e,t){var r=this;this.masters=e,this.gearFactory=t,this.gearsFrom=function(e,t){return e?e.map(r.gearFactory.create):t.isAbyssal?t.initialEquipment.map((function(e){var t=e.id,n=e.improvement;return r.gearFactory.create({masterId:t,improvement:n})})):[]},this.create=function(e){if(e){var t=e.masterId,n=e.level,i=void 0===n?1:n,a=e.increased,o=e.morale,u=r.masters.find((function(e){return e.shipId===t}));if(u){var s=r.gearsFrom(e.equipments,u),c=new ge.a(u,i,a),l=new Me(c,s),f=e.currentHp,p=void 0===f?l.hp:f,h=new V(l.hp,p),d=new Y(o),g=e.slots?e.slots.concat():u.slotCapacities.concat(),m=S(g,s),b=K.from(u),y=new de(u,l,c,h,d,g,s,m,b);return y.stats.equipmentBonus=je(y),y}}}},Se=function(){function e(e){void 0===e&&(e=new n.a),this.masterData=e,this.gearFactory=new f(e.gears),this.shipFactory=new Ce(e.ships,this.gearFactory),this.fleetFactory=new M(this.shipFactory),this.landBasedAirCorpsFactory=new B(this.gearFactory),this.operationFactory=new q(this.fleetFactory,this.landBasedAirCorpsFactory)}return Object.defineProperty(e.prototype,"createOperation",{get:function(){return this.operationFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createFleet",{get:function(){return this.fleetFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createLandBasedAirCorps",{get:function(){return this.landBasedAirCorpsFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createShip",{get:function(){return this.shipFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createGear",{get:function(){return this.gearFactory.create},enumerable:!0,configurable:!0}),e}();t.a=Se},4041:function(e,t,r){"use strict";var n;!function(e){e.Single="Single",e.CarrierTaskForce="CarrierTaskForce",e.SurfaceTaskForce="SurfaceTaskForce",e.TransportEscort="TransportEscort",e.Combined="Combined"}(n||(n={})),t.a=n},4048:function(e,t,r){"use strict";var n;!function(e){e.NormalBattle="NormalBattle",e.NightBattle="NightBattle",e.NightToDayBattle="NightToDayBattle",e.AerialBattle="AerialBattle",e.AirDefenseBattle="AirDefenseBattle"}(n||(n={})),t.a=n},4091:function(e,t,r){"use strict";var n;!function(e){e[e.FastA=0]="FastA",e[e.FastB1SlowA=1]="FastB1SlowA",e[e.FastB2SlowB=2]="FastB2SlowB",e[e.OtherC=3]="OtherC"}(n||(n={}));var i=function(){function e(t,r){var n=this;this.value=t,this.name=r,this.add=function(t){return e.fromNumber(n.value+t)}}return e.getSpeedGroup=function(t){var r=t.shipType,i=t.shipClass,a=t.shipId,o=t.remodelGroup;return e.fromNumber(t.nakedStats.speed)===e.Fast&&r.is("SeaplaneTender")||r.isSubmarineClass||[115,293].includes(a)||["加賀型","特種船丙型","工作艦","改風早型"].includes(i.name)?n.OtherC:["島風型","Ташкент級","大鳳型","翔鶴型","利根型","最上型"].includes(i.name)?n.FastA:["阿賀野型","蒼龍型","飛龍型","金剛型","大和型","Iowa級"].includes(i.name)||181===o||404===o||331===o||541===a?n.FastB1SlowA:n.FastB2SlowB},e.getSpeedIncrement=function(e,t,r){var i=t+r;switch(e){case n.FastA:if(r>=1||i>=2)return 10;break;case n.FastB1SlowA:if(0===r)break;if(i>=3)return 15;if(i>=2)return 10;break;case n.FastB2SlowB:if(r>=2||i>=3)return 10}return i>=1?5:0},e}();t.a=i,i.Land=new i(0,"陸上"),i.Slow=new i(5,"低速"),i.Fast=new i(10,"高速"),i.FastPlus=new i(15,"高速+"),i.Fastest=new i(20,"最速"),i.fromNumber=function(e){var t=[i.Land,i.Slow,i.Fast,i.FastPlus,i.Fastest].find((function(t){return e<=t.value}));return t||i.Fastest}},4096:function(e,t,r){"use strict";var n=r(365),i=r(3417),a=function(){function e(t,r,n,i){this.id=t,this.name=r,this.typeFactor=n,this.modifier=i,e.all.push(this)}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierSpecialAttack",{get:function(){return 7===this.api},enumerable:!0,configurable:!0}),e}();t.a=a,a.all=[],a.MainMain=new a(6,"主主",150,{power:1.5,accuracy:1.2}),a.MainApShell=new a(5,"主徹",140,{power:1.3,accuracy:1.3}),a.MainRader=new a(4,"主電",130,{power:1.2,accuracy:1.5}),a.MainSecond=new a(3,"主副",120,{power:1.1,accuracy:1.3}),a.DoubleAttack=new a(2,"連撃",130,{power:1.2,accuracy:1.1}),a.FighterBomberAttacker=new a(7.1,"FBA",125,{power:1.25,accuracy:1}),a.BomberBomberAttacker=new a(7.2,"BBA",140,{power:1.2,accuracy:1}),a.BomberAttacker=new a(7.3,"BA",155,{power:1.15,accuracy:1}),a.getPossibleAircraftCarrierCutins=function(e){var t=new Array,r=e.planes.filter((function(e){return e.slotSize>0})),n=r.filter((function(e){return e.is("CarrierBasedDiveBomber")})).length,i=r.some((function(e){return e.is("CarrierBasedTorpedoBomber")}));return 0!==n&&i?(t.push(a.BomberAttacker),n>=2&&t.push(a.BomberBomberAttacker),r.some((function(e){return e.is("CarrierBasedFighterAircraft")}))&&t.push(a.FighterBomberAttacker),t.sort((function(e,t){return e.typeFactor-t.typeFactor}))):t},a.getPossibleArtillerySpottings=function(e){var t=new Array,r=e.planes.some((function(e){return e.slotSize>0&&e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")})),n=e.countGear((function(e){return e.is("MainGun")}));if(!r||0===n)return t;var i=e.hasGear((function(e){return e.is("ArmorPiercingShell")})),o=e.hasGear((function(e){return e.is("SecondaryGun")})),u=e.hasGear((function(e){return e.is("Radar")}));return n>=2&&(t.push(a.DoubleAttack),i&&t.push(a.MainMain)),o&&(t.push(a.MainSecond),u&&t.push(a.MainRader),i&&t.push(a.MainApShell)),t.sort((function(e,t){return t.id-e.id}))},a.getPossibleAttacks=function(e,t){return void 0===t&&(t=!1),"Taiha"===e.health.damage?[]:e.shipType.isAircraftCarrierClass&&!t?a.getPossibleAircraftCarrierCutins(e):a.getPossibleArtillerySpottings(e)},a.calcFleetLosModifier=function(e){var t=e.totalShipStats((function(e){return e.fleetLosFactor}));return Math.floor(Math.sqrt(t)+.1*t)},a.calcBaseValue=function(e,t,r,i){var a=e.stats.luck,o=Math.floor(Math.sqrt(a)+10),u=e.totalEquipmentStats("los"),s=i?15:0;return r===n.a.AirSupremacy?Math.floor(o+.7*(t+1.6*u)+10)+s:r===n.a.AirSuperiority?Math.floor(o+.6*(t+1.2*u))+s:0},a.calcRate=function(e,t,r,n){var i=a.calcBaseValue(e,t,r,n),o=new Map,u=a.getPossibleAttacks(e),s=u.reduce((function(e,t){var r=(1-e)*(i/t.typeFactor);return r>1&&(r=1),o.set(t,r),e+r}),0),c=1-s,l=c<=0,f=u.concat();l||f.unshift(void 0);var p=function(e){return e?o.get(e)||0:c};return{baseValue:i,attacks:u,rateMap:o,total:s,dayCombatAttacks:f,getAttackRate:p,entries:function(){return f.map((function(e){return[e,p(e)]}))}}},a.try=function(e,t,r,n){for(var o=a.calcBaseValue(e,t,r,n),u=0,s=a.getPossibleAttacks(e);u<s.length;u++){var c=s[u];if(o>Object(i.a)(c.typeFactor-1))return c}}},4097:function(e,t,r){"use strict";var n=function(e){var t=e.nakedStats,r=e.level;return t.luck<50?Math.floor(t.luck+15+.75*Math.sqrt(r)):Math.floor(Math.sqrt(t.luck-50)+65+.8*Math.sqrt(r))},i=function(){function e(t,r,n,i){var a=this;this.id=t,this.name=r,this.typeFactor=n,this.modifier=i,this.calcRate=function(t){return a===e.DoubleAttack?109/110:Math.ceil(t)/a.typeFactor}}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestroyerCutin",{get:function(){return 7===this.id||8===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAerialAttack",{get:function(){return 6===this.api},enumerable:!0,configurable:!0}),e}();t.a=i,i.DoubleAttack=new i(1,"連撃",110,{power:1.2,accuracy:1.1}),i.MainTorp=new i(2,"主魚",115,{power:1.3,accuracy:1.5}),i.TorpTorp=new i(3,"魚雷",122,{power:1.5,accuracy:1.65}),i.SubmarineTorpTorp=new i(3.1,"潜水魚雷",110,{power:1.65,accuracy:1}),i.SubmarineRadarTorp=new i(3.2,"潜水電探",102,{power:1.75,accuracy:1}),i.MainMainSecond=new i(4,"主副",130,{power:1.75,accuracy:1.65}),i.MainMainMain=new i(5,"主砲",140,{power:2,accuracy:1.5}),i.AerialAttack1=new i(6.1,"夜襲1.25",105,{power:1.25,accuracy:1}),i.AerialAttack2=new i(6.2,"夜襲1.20",115,{power:1.2,accuracy:1}),i.AerialAttack3=new i(6.3,"夜襲1.18",125,{power:1.18,accuracy:1}),i.SuiseiAttack=new i(6.4,"彗星夜襲",115,{power:1.2,accuracy:1}),i.MainTorpRadar=new i(7,"主魚電",130,{power:1.3,accuracy:1}),i.TorpRadarLookout=new i(8,"魚見電",150,{power:1.2,accuracy:1}),i.getPossibleAerialAttacks=function(e){var t=[],r=e.planes.filter((function(e){return e.slotSize>0})),n=r.filter((function(e){return e.isNightFighter})).length,a=r.filter((function(e){return e.isNightAttacker})).length,o=r.filter((function(e){return e.isNightPlane})).length,u=r.filter((function(e){return e.isNightAircraft&&!e.isNightPlane})).length,s=n>=1,c=a>=1,l=o>=1,f=r.some((function(e){return 320===e.gear.gearId}));return n>=2&&c&&t.push(i.AerialAttack1),s&&c&&t.push(i.AerialAttack2),l&&f&&t.push(i.SuiseiAttack),s?((n+u>=3||a+u>=2)&&t.push(i.AerialAttack3),t):t},i.getPossibleAttacks=function(e,t){void 0===t&&(t=!1);var r=e.shipType,n=e.hasGear,a=e.countGear,o=new Array;if(function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.shipId)&&!e.hasGear((function(e){return[258,259].includes(e.gearId)})))&&e.planes.some((function(e){return e.slotSize>0&&e.isNightPlane})))}(e))return i.getPossibleAerialAttacks(e);if(!e.canNightAttack)return o;var u=t?0:a((function(e){return[213,214,383].includes(e.gearId)})),s=t?0:a("Torpedo")+a("SubmarineTorpedo");r.is("Destroyer")&&n((function(e){return e.is("SurfaceRadar")}))&&s>=1&&(n((function(e){return e.is("SmallCaliberMainGun")}))&&o.push(i.MainTorpRadar),n(129)&&o.push(i.TorpRadarLookout));var c=a((function(e){return e.is("MainGun")})),l=a((function(e){return e.is("SecondaryGun")}));return u>=1&&n((function(e){return e.is("SubmarineEquipment")}))?o.push(i.SubmarineRadarTorp):u>=2?o.push(i.SubmarineTorpTorp):c>=3?o.push(i.MainMainMain):c>=2&&l>=1?o.push(i.MainMainSecond):s>=2?o.push(i.TorpTorp):c>=1&&s>=1?o.push(i.MainTorp):c+l>=2&&o.push(i.DoubleAttack),o},i.calcPreModifierValue=n,i.calcBaseValue=function(e,t,r,i){var a=n(e);return t&&(a+=15),"Chuuha"===e.health.damage&&(a+=18),e.hasGear(129)&&(a+=5),r.searchlight&&(a+=7),i.searchlight&&(a+=-5),r.starshell&&(a+=4),i.starshell&&(a+=-10),a}},4142:function(e,t,r){"use strict";var n;!function(e){e[e.None=1501]="None",e[e.Pillbox=1665]="Pillbox",e[e.IsolatedIsland=1668]="IsolatedIsland",e[e.SoftSkinned=1581]="SoftSkinned",e[e.HarbourSummerPrincess=1699]="HarbourSummerPrincess",e[e.SupplyDepot=1655]="SupplyDepot"}(n||(n={})),t.a=n},4143:function(e,t,r){"use strict";var n=r(241),i=r(98),a=r(162),o=r(49),u=r(364),s=r(240),c=function(){function e(e){var t=e.battleState,r=e.attacker,n=e.defender,i=e.specialAttack,a=e.isCritical,o=e.remainingAmmoModifier,u=e.fitGunBonus,c=e.optionalPowerModifiers;this.battleState=t,this.attacker=r,this.defender=n,this.specialAttack=i,this.isCritical=a,this.remainingAmmoModifier=o,this.fitGunBonus=u,this.optionalPowerModifiers=c,this.attackCalculator=new s.a(r.ship)}return Object.defineProperty(e.prototype,"isArmorPiercing",{get:function(){var e=this.defender.ship.shipType;return e.isBattleshipClass||e.isHeavyCruiserClass||e.any("AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifiers",{get:function(){var e;return this.attackCalculator.getProficiencyModifiers(null===(e=this.specialAttack)||void 0===e?void 0:e.isCarrierSpecialAttack)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetFactors",{get:function(){var e=this.attacker,t=this.defender;return{power:Object(n.c)(e,t),accuracy:Object(n.b)(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,t=e.battleState,r=e.attacker,n=e.defender,i=e.fleetFactors,a=e.specialAttack,u=e.isCritical,s=e.isArmorPiercing,c=e.optionalPowerModifiers,l=t.engagement,f=r.role,p=r.formation.getModifiers(f).shelling.power,h=l.modifier,d=r.ship.getSpecialEnemyModifiers(n.ship),g=n.ship.isInstallation,m=Object(o.a)(d,c);return this.attackCalculator.calcPower({formationModifier:p,engagementModifier:h,modifiers:m,fleetFactor:i.power,isCritical:u,isAntiInstallation:g,isArmorPiercing:s,specialAttack:a})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this,t=e.attacker,r=e.defender,n=e.fleetFactors,i=e.isArmorPiercing,a=e.specialAttack,o=e.fitGunBonus,s=void 0===o?0:o,c=t.formation.getModifiers(t.role).shelling.accuracy;u.a.isIneffective(t.formation,r.formation)&&(c=1);var l=a?a.modifier.accuracy:1;return this.attackCalculator.calcAccuracy({fleetFactor:n.accuracy,formationModifier:c,specialAttackModifier:l,isArmorPiercing:i,fitGunBonus:s})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,t=e.ship,r=e.formation,n=e.role,i=r.getModifiers(n).shelling.evasion;return t.calcEvasionValue(i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,n=this.defenderEvasionValue,i=r.ship.morale.evasionModifier;return Object(a.b)({accuracy:t,evasion:n,moraleModifier:i,criticalRateMultiplier:e.criticalRateMultiplier,hitRateBonus:this.proficiencyModifiers.hitRate,criticalRateBonus:this.proficiencyModifiers.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,n=t.ship.getDefensePower();return new i.a(e.postcap,n,t.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){var e=this.damage,t=this.defender,r=this.hitRate,n=this.isCritical,i=t.ship.health,a=i.currentHp,o=i.maxHp,u=t.side,s=function(e){return(a-e)/o<=.25},c=function(e){return 0===e.length?0:e.filter(s).length/e.length},l=e.scratchDamageProbability,f=e.scratchDamages,p=e.deadlyDamageProbability,h=e.stopperDamages,d="Player"===u?p:0,g=e.values.filter((function(e){return!(e<=0)&&!("Player"===u&&a-e<=0)})),m=g.length/e.values.length*c(g)+l*c(f)+d*c(h);return n?r.criticalRate*m:r.normalRate*m},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"can",{get:function(){var e=this.attacker,t=this.defender,r=t.ship.isInstallation,n=this.attackCalculator.type,i=e.ship;if("Sunk"===i.health.damage)return!1;if(t.ship.shipType.isSubmarineClass)return!1;if("CarrierShelling"===n){if(i.health.lte("Taiha"))return!1;if(!i.shipType.is("ArmoredAircraftCarrier")&&i.health.lte("Chuuha"))return!1;var a=i.planes.filter((function(e){return e.slotSize>0}));return(!r||!a.some((function(e){return e.is("DiveBomber")&&!e.is("AntiInstallationBomber")})))&&i.planes.some((function(e){return e.participatesInCarrierShelling}))}return!i.shipType.isSubmarineClass||!r||i.hasGear("SpecialAmphibiousTank")},enumerable:!0,configurable:!0}),e}();t.a=c,c.criticalRateMultiplier=1.3},4144:function(e,t,r){"use strict";var n=r(98),i=r(162),a=r(553),o=function(){function e(e){var t=e.battleState,r=e.attacker,n=e.defender,i=e.isCritical,o=e.remainingAmmoModifier,u=void 0===o?1:o;this.battleState=t,this.attacker=r,this.defender=n,this.isCritical=i,this.remainingAmmoModifier=u,this.attackCalculator=new a.a(r.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.battleState,t=this.attacker,r=this.defender,n=this.isCritical,i=e.engagement,a=t.formation.shellingSupportModifiers.power,o=i.modifier,u=r.ship.isInstallation;return this.attackCalculator.calcPower({formationModifier:a,engagementModifier:o,isCritical:n,isAntiInstallation:u})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker.formation.shellingSupportModifiers.accuracy;return this.attackCalculator.calcAccuracy({formationModifier:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,t=e.ship,r=e.formation,n=e.role,i=r.getModifiers(n).shelling.evasion;return t.calcEvasionValue(i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,n=this.defenderEvasionValue,a=r.ship.morale.evasionModifier;return Object(i.b)({accuracy:t,evasion:n,moraleModifier:a,criticalRateMultiplier:e.criticalRateMultiplier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,i=t.ship.getDefensePower();return new n.a(e.postcap,i,t.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),e}();t.a=o,o.criticalRateMultiplier=1.1},4145:function(e,t,r){"use strict";var n=r(162),i=r(364),a=r(98),o=r(555),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(){function e(e){var t=this,r=e.attacker,n=e.defender,a=e.engagement,s=e.isCritical,c=void 0!==s&&s,l=e.time,f=void 0===l?"Day":l,p=e.remainingAmmoModifier,h=void 0===p?1:p,d=e.optionalPowerModifiers;this.isPossible=function(){var e=t,r=e.defender,n=e.attackCalculator;return!!r.ship.shipType.isSubmarineClass&&"None"!==n.type},this.getFormationModifiers=function(){var e=t,r=e.attacker,n=e.defender,a=r.formation.getModifiers(r.role).asw,o={power:a.power,accuracy:a.accuracy,evasion:n.formation.getModifiers(n.role).asw.evasion};return i.a.isIneffective(r.formation,n.formation)?u(u({},o),{accuracy:1}):o},this.attacker=r,this.defender=n,this.engagement=a,this.isCritical=c,this.time=f,this.remainingAmmoModifier=h,this.optionalPowerModifiers=d,this.attackCalculator=o.a.fromShip(r.ship,f)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,t=this.optionalPowerModifiers,r=this.getFormationModifiers().power,n=this.engagement.modifier;return this.attackCalculator.calcPower({formationModifier:r,engagementModifier:n,isCritical:e,optionalModifiers:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.getFormationModifiers().accuracy;return this.attackCalculator.calcAccuracy({formationModifier:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.getFormationModifiers().evasion;return this.defender.ship.calcEvasionValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,i=this.evasion,a=r.ship.morale.evasionModifier,o=e.criticalRateMultiplier;return Object(n.b)({accuracy:t,evasion:i,moraleModifier:a,criticalRateMultiplier:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,n=t.ship.getDefensePower(),i=this.attackCalculator.armorPenetration;return new a.a(e.postcap,n,t.ship.health.currentHp,r,i)},enumerable:!0,configurable:!0}),e}();t.a=s,s.cap=150,s.criticalRateMultiplier=1.1},4146:function(e,t,r){"use strict";var n=r(162),i=r(241),a=r(554),o=r(98),u=function(){function e(e){var t=this,r=e.attacker,n=e.defender,i=e.engagement,o=e.isCritical,u=void 0!==o&&o,s=e.remainingAmmoModifier,c=void 0===s?1:s,l=e.innateTorpedoAccuracy,f=void 0===l?0:l,p=e.optionalPowerModifiers;this.getFormationModifiers=function(){var e=t,r=e.attacker,n=e.defender;return{attacker:r.formation.getModifiers(r.role).torpedo,defender:n.formation.getModifiers(n.role).torpedo}},this.attacker=r,this.defender=n,this.engagement=i,this.isCritical=u,this.remainingAmmoModifier=c,this.innateTorpedoAccuracy=f,this.optionalPowerModifiers=p,this.attackCalculator=a.a.fromShip(r.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,t=this.optionalPowerModifiers,r=Object(i.d)(this.attacker,this.defender),n=this.getFormationModifiers().attacker.power,a=this.engagement.modifier;return this.attackCalculator.calcPower({fleetFactor:r,formationModifier:n,engagementModifier:a,isCritical:e,optionalModifiers:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=Math.floor(.2*this.power.preCritical),t=this.getFormationModifiers().attacker.accuracy,r=this.innateTorpedoAccuracy;return this.attackCalculator.calcAccuracy({formationModifier:t,powerModifier:e,innateTorpedoAccuracy:r})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.defender.ship,t=this.getFormationModifiers().defender.evasion,r=e.totalEquipmentStats((function(e){return e.improvement.torpedoEvasionModifier}));return e.calcEvasionValue(t,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var t=this.accuracy,r=this.defender,i=this.evasion,a=r.ship.morale.evasionModifier,o=e.criticalRateMultiplier;return Object(n.b)({accuracy:t,evasion:i,moraleModifier:a,criticalRateMultiplier:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defender,r=this.remainingAmmoModifier,n=t.ship.getDefensePower();return new o.a(e.postcap,n,t.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),e}();t.a=u,u.cap=150,u.criticalRateMultiplier=1.5,u.isPossible=function(e,t){return 0!==e.nakedStats.torpedo&&!t.isInstallation}},4147:function(e,t,r){"use strict";var n=r(556),i=r(98),a=r(162),o=r(49),u=function(){function e(e){var t=e.attacker,r=e.defender,i=e.specialAttack,a=e.isCritical,o=e.starshell,u=e.searchlight,s=e.nightContactModifier,c=e.remainingAmmoModifier,l=e.optionalPowerModifiers;this.attacker=t,this.defender=r,this.specialAttack=i,this.isCritical=a,this.starshell=o,this.searchlight=u,this.nightContactModifier=s,this.remainingAmmoModifier=c,this.optionalPowerModifiers=l,this.attackCalculator=new n.a(t.ship)}return Object.defineProperty(e.prototype,"contactModifiers",{get:function(){return 5===this.nightContactModifier?{power:5,accuracy:1.1,criticalRate:1.57}:{power:0,accuracy:1,criticalRate:e.criticalRateMultiplier}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,t=this.specialAttack,r=this.starshell,n=this.searchlight,i=e.formation,a=e.role,o=i.getModifiers(a).night.accuracy,u=null==t?void 0:t.modifier.accuracy,s=this.contactModifiers.accuracy,c=r?5:0,l=n?7:0;return this.attackCalculator.calcAccuracy({starshellModifier:c,contactModifier:s,searchlightModifier:l,formationModifier:o,specialAttackModifier:u})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,t=e.attacker,r=e.defender,n=e.isCritical,i=e.specialAttack,a=e.optionalPowerModifiers,u=t.role,s=t.formation.getModifiers(u).night.power,c=r.ship.isInstallation,l=t.ship.getSpecialEnemyModifiers(r.ship),f=Object(o.a)(l,a);return this.attackCalculator.calcPower({nightContactModifier:this.contactModifiers.power,formationModifier:s,specialAttack:i,isCritical:n,isAntiInstallation:c,modifiers:f})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,t=e.ship,r=e.formation,n=e.role,i=r.getModifiers(n).night.evasion,a=t.shipType.isHeavyCruiserClass?5:0;return t.calcEvasionValue(i,a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,t=this.defender,r=this.defenderEvasionValue,n=this.contactModifiers,i=t.ship.morale.evasionModifier;return Object(a.b)({accuracy:e,evasion:r,moraleModifier:i,criticalRateMultiplier:n.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,t=this.defensePower,r=this.remainingAmmoModifier,n=this.defender;return new i.a(e.postcap,t,n.ship.health.currentHp,r)},enumerable:!0,configurable:!0}),e}();t.a=u,u.criticalRateMultiplier=1.5},4148:function(e,t,r){"use strict";var n=function e(t,r,n){this.id=t,this.name=r,this.modifier=n,e.values.push(this)};t.a=n,n.values=[],n.Parallel=new n(1,"同航戦",1),n.HeadOn=new n(2,"反航戦",.8),n.CrossingTheTAdvantage=new n(3,"T有利",1.2),n.CrossingTheTDisadvantage=new n(4,"T不利",.6),n.random=function(e){void 0===e&&(e=!1);var t=Math.random();return t<.15?n.CrossingTheTAdvantage:t<.6?n.Parallel:t<.9||e?n.HeadOn:n.CrossingTheTDisadvantage}},4154:function(e,t,r){"use strict";var n=r(365),i=r(3393),a=r(49),o=r(98),u=r(162),s=function(){function e(e){var t=this,r=e.plane,n=e.target,i=e.contactModifier,s=e.proficiencyModifiers;this.calcPower=function(e){var r=t,n=r.slotSize,i=r.stat,o=r.typeModifier,u=r.contactModifier,s=r.proficiencyModifiers,c=o*(i*Math.sqrt(n)+0),l={a11:u},f=e?Object(a.c)(s.power):void 0;return Object(a.b)({basic:c,cap:150,modifiers:l,fm11next:f})},this.getHitRate=function(){var e=t,r=e.accuracy,n=e.evasion,i=e.proficiencyModifiers,a=e.target.morale.evasionModifier,o=i.hitRate,s=i.criticalRate;return Object(u.b)({accuracy:r,evasion:n,moraleModifier:a,hitRateBonus:o,criticalRateMultiplier:.2,criticalRateBonus:s})},this.getDamage=function(e){var r=t.target,n=t.calcPower(e).postcap;return new o.a(n,r.getDefensePower(),r.health.currentHp)},this.do=function(){var e=t.getHitRate(),r=Object(u.c)(e);if("Miss"!==r){var n=t.getDamage("Critical"===r);t.target.health.currentHp-=n.random()}},this.plane=r,this.target=n,this.contactModifier=i,this.proficiencyModifiers=s}return Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.plane.slotSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){var e=this.plane.is;return e("JetPoweredFighterBomber")?"JetPoweredFighterBomber":e("DiveBomber")?"DiveBomber":e("TorpedoBomber")?"TorpedoBomber":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stat",{get:function(){var e=this.plane;return e.is("DiveBomber")?e.gear.bombing:e.is("TorpedoBomber")?e.gear.torpedo:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeModifier",{get:function(){var e=this.type;return"JetPoweredFighterBomber"===e?1/Math.sqrt(2):"DiveBomber"===e?1:"TorpedoBomber"===e?Math.random()>.5?.8:1.5:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return 95},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.target.calcEvasionValue(1)},enumerable:!0,configurable:!0}),e}(),c=r(37),l=function e(t,r,n,i){var a=this;this.playerFleet=t,this.enemyFleet=r,this.enemyFormation=n,this.contactModifier=i,this.getTarget=function(){var e=a.enemyFleet.nonNullableShips.filter((function(e){return!e.shipType.isSubmarineClass})),t=Object(c.d)(e),r=e[0];if(t!==r)return t;if(!(Math.random()<a.enemyFormation.protectionRate))return t;var n=e.filter((function(e){return e!==t&&!e.isInstallation&&"Less"===e.health.damage}));return 0===n.length?t:Object(c.d)(n)},this.do=function(){var t=a,r=t.playerFleet,n=t.contactModifier;r.nonNullableShips.forEach((function(t){var r=t.getNormalProficiencyModifiers();t.planes.filter(e.isAirstrikePlane).forEach((function(e){var t=a.getTarget();new s({plane:e,target:t,contactModifier:n,proficiencyModifiers:r}).do()}))}))}},f=l;l.isAirstrikePlane=function(e){return e.slotSize>0&&(e.is("TorpedoBomber")||e.is("DiveBomber"))};var p=r(231),h=r(295),d=function(e,t){var r=n.a.fromFighterPower(e.fighterPower,t.fighterPower),i=r.constant;return e.planes.filter((function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")})).forEach((function(e){var t=function(e){var t,r=e.slotSize,n=e.airControlStateConstant,i=e.side,a=e.fighterCombatResistModifier;if("Player"===i){var o=n/4,u=Math.floor(n/3*100);t=Math.floor(Math.random()*(u+1))/100+o}else{u=11-n;t=.35*Math.floor(Math.random()*(u+1))+.65*Math.floor(Math.random()*(u+1))}var s=t/10;return Math.floor(r*s*a)}({slotSize:e.slotSize,airControlStateConstant:i,side:"Player",fighterCombatResistModifier:1});e.shotdown(t)})),r},g=function(e){var t=e.playerFleet,r=e.enemyFleet,n=e.enemyFormation,a=d(t,r),o=new i.a(t.planes).getContactModifier(a);return function(e){var t=e.playerFleet,r=e.enemyFleet,n=e.enemyFormation,i=t.planes.filter(f.isAirstrikePlane),a=p.a.calcFleetAntiAir(r,"Enemy",n.fleetAntiAirModifier);i.forEach((function(e){var t=Object(c.d)(r.nonNullableShips),n=new h.a(t,"Enemy",a).getShotdownNumber(e);e.shotdown(n)}))}(e),new f(t,r,n,o).do(),a},m=function(){function e(){var e=this;this.Less=0,this.Shouha=0,this.Chuuha=0,this.Taiha=0,this.Sunk=0,this.increase=function(t){var r=t.health;e[r.damage]+=1}}return Object.defineProperty(e.prototype,"total",{get:function(){return this.Less+this.Shouha+this.Chuuha+this.Taiha+this.Sunk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lessRate",{get:function(){return this.Less/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouhaRate",{get:function(){return this.Shouha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chuuhaRate",{get:function(){return this.Chuuha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){return this.Taiha/this.total},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sunkRate",{get:function(){return this.Sunk/this.total},enumerable:!0,configurable:!0}),e}(),b=function(){function e(){var e=this;this.countMap=new Map,this.increase=function(t){var r,n=t.slotSize,i=null!==(r=e.countMap.get(n))&&void 0!==r?r:0;e.countMap.set(n,i+1)},this.entries=function(){var t=e,r=t.total,n=t.countMap;return Array.from(n.entries(),(function(e){return[e[0],e[1]/r]}))}}return Object.defineProperty(e.prototype,"total",{get:function(){var e=0;return this.countMap.forEach((function(t){e+=t})),e},enumerable:!0,configurable:!0}),e}(),y=function(e){var t=this;this.ship=e,this.init=function(){var e=t,r=e.ship,n=e.initialSlots;r.health.currentHp=t.initialHp,n.forEach((function(e,t){r.slots[t]=e}))},this.initialHp=e.health.currentHp,this.initialSlots=e.slots.concat()},v=function(e){var t=this;this.init=function(){t.shipInitialStates.forEach((function(e){return e.init()}))},this.shipInitialStates=e.nonNullableShips.map((function(e){return new y(e)}))},O=r(4164),w=function(e){var t=this;this.creater=e,this.data=new Map,this.update=function(e){var r=t.data.get(e);r||(r=t.creater(),t.data.set(e,r)),r.increase(e)},this.entries=function(){return Array.from(t.data.entries())}},A=function(){function e(){var e=this;this.data=new Map,this.increase=function(t){var r=e.data.get(t);r?e.data.set(t,r+1):e.data.set(t,1)},this.getRate=function(t){var r;return(null!==(r=e.data.get(t))&&void 0!==r?r:0)/e.total},this.getRateList=function(){var t=[];e.data.forEach((function(r,n){t.push([n,e.getRate(n)])}));var r=0;return t.sort((function(e,t){var r=e[0];return t[0]-r})).map((function(e){var t=e[0],n=e[1];return[t,n,r+=n]}))}}return Object.defineProperty(e.prototype,"total",{get:function(){var e=0;return this.data.forEach((function(t){e+=t})),e},enumerable:!0,configurable:!0}),e}(),j=function(){var e=this;this.damageLog=new w((function(){return new m})),this.planeLossLog=new w((function(){return new b})),this.sunkCounter=new A,this.update=function(t,r){r.nonNullableShips.forEach((function(t){e.damageLog.update(t)}));var n=r.nonNullableShips.filter((function(e){return"Sunk"===e.health.damage})).length;e.sunkCounter.increase(n),t.planes.forEach((function(t){e.planeLossLog.update(t)}))}},M=function(e,t,r){var n=this;this.playerFleet=e,this.enemyFleet=t,this.enemyFormation=r,this.record=new j,this.init=function(){var e=n.initialState,t=e.playerFleet,r=e.enemyFleet;t.init(),r.init()},this.once=function(){var e=n,t=e.playerFleet,r=e.enemyFleet,i=e.enemyFormation;g({playerFleet:t,enemyFleet:r,enemyFormation:i}),n.record.update(t,r),n.init()},this.do=function(e){return Object(O.a)(e,n.once),n.record},this.initialState={playerFleet:new v(e),enemyFleet:new v(t)}};t.a=M},4163:function(e,t,r){"use strict";var n=r(4087),i=r(4089),a=r(4090),o=r(42),u=r(3410),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=function(e){return"number"==typeof e?[e,e]:e},l=function(){function e(t,r,n){var i=this;this.shipType=r,this.shipClass=n,this.getNextShip=function(){if(i.canRemodel)return e.all.find((function(e){return i.remodel.nextId===e.shipId}))},this.getPrevShip=function(){return e.all.find((function(e){return e.remodel.nextId===i.shipId&&e.rank<i.rank}))},this.getRemodelGroupShips=function(){return e.all.filter((function(e){return e.remodelGroup===i.remodelGroup}))},this.shipId=t.id,this.shipClassId=n.id,this.sortNo=t.sortNo,this.sortId=t.sortId,this.name=t.name,this.readingName=t.readingName,this.hp=c(t.hp),this.armor=c(t.armor),this.firepower=c(t.firepower),this.torpedo=c(t.torpedo),this.antiAir=c(t.antiAir),this.luck=c(t.luck),this.asw=c(t.asw),this.evasion=c(t.evasion),this.los=c(t.los),this.speed=t.speed,this.range=t.range,this.fuel=t.fuel,this.ammo=t.ammo,this.slotCapacities=t.slotCapacities.concat(),this.initialEquipment=t.equipments.map((function(e){return"number"==typeof e?{id:e,improvement:0}:e})),t.remodel?this.remodel=t.remodel:this.remodel={nextId:0,nextLevel:0};var a=t.equippable?t.equippable:{};this.equippable=s({categories:this.shipType.equippableCategoryIds,expantionSlot:[]},a),e.all.push(this)}return Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.shipId>e.abyssalIdFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRemodel",{get:function(){return this.remodel.nextId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canConvert",{get:function(){if(!this.canRemodel)return!1;var e=this.getNextShip();if(!e)return!1;if(e.remodel.nextId===this.shipId)return!0;var t=e.getNextShip();return!!t&&t.remodel.nextId===this.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){if(this.remodelGroupMemo)return this.remodelGroupMemo;for(var e=this.shipId,t=this.getPrevShip();t;)e=t.shipId,t=t.getPrevShip();return this.remodelGroupMemo=e,e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.sortId%10},enumerable:!0,configurable:!0}),e}(),f=l;l.all=new Array,l.abyssalIdFrom=1500;var p=r(537),h=r(4088),d=r(88),g=function(){function e(e,t,r){var n=this;this.id=e,this.name=t,this.equippableCategoryIds=r,this.is=function(e){return n.id===d.a[e]},this.any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(n.is)},e===d.a.Battlecruiser&&(this.name="巡洋戦艦")}return Object.defineProperty(e.prototype,"isDestroyer",{get:function(){return this.id===d.a.Destroyer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLightCruiserClass",{get:function(){return this.any("LightCruiser","TorpedoCruiser","TrainingCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeavyCruiserClass",{get:function(){return this.any("HeavyCruiser","AviationCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBattleshipClass",{get:function(){return this.any("Battlecruiser","Battleship","AviationBattleship","SuperDreadnoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraftCarrierClass",{get:function(){return this.any("LightAircraftCarrier","AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubmarineClass",{get:function(){return[d.a.Submarine,d.a.SubmarineAircraftCarrier].includes(this.id)},enumerable:!0,configurable:!0}),e}(),m=g;g.all=h.a.map((function(e){var t=Object.entries(e.api_equip_type).filter((function(e){e[0];return 1===e[1]})).map((function(e){var t=e[0];e[1];return Number(t)}));return new g(e.api_id,e.api_name,t)})),g.fromId=function(e){var t=g.all.find((function(t){return t.id===e}));if(t)return t;var r=new g(e,"",[]);return g.all.push(r),r};var b=function(e){var t=this;void 0===e&&(e=n.a),this.shipsData=e,this.findMasterGear=function(e){return t.gears.find((function(t){return t.id===e}))},this.findMasterShip=function(e){return t.ships.find((function(t){return t.shipId===e}))},this.shipIdToName=function(e){var r=t.ships.find((function(t){return t.shipId===e}));return r?r.name:""},this.shipNameToId=function(e){var r=t.ships.find((function(t){return t.name===e}));return r?r.shipId:0},this.shipClassIdToName=function(e){return p.a.fromId(e).name},this.shipTypeIdToName=function(e){return m.fromId(e).name},this.gearIdToName=function(e){var r=t.findMasterGear(e);return r?r.name:""},this.gearNameToId=function(e){var r=t.gears.find((function(t){return t.name===e}));return r&&r.id},this.gears=i.a.map((function(e){var t=e.api_id,r=e.api_type[2],n=o.b.find(r,t),i=a.a.includes(t);return new u.a(e,n,i)})),this.ships=e.map((function(e){var t=m.fromId(e.shipTypeId),r=p.a.fromId(e.classId);return new f(e,t,r)}))};t.a=b},42:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n,i=r(4040);!function(e){e[e.SmallCaliberMainGun=1]="SmallCaliberMainGun",e[e.MediumCaliberMainGun=2]="MediumCaliberMainGun",e[e.LargeCaliberMainGun=3]="LargeCaliberMainGun",e[e.SecondaryGun=4]="SecondaryGun",e[e.Torpedo=5]="Torpedo",e[e.CarrierBasedFighterAircraft=6]="CarrierBasedFighterAircraft",e[e.CarrierBasedDiveBomber=7]="CarrierBasedDiveBomber",e[e.CarrierBasedTorpedoBomber=8]="CarrierBasedTorpedoBomber",e[e.CarrierBasedReconnaissanceAircraft=9]="CarrierBasedReconnaissanceAircraft",e[e.ReconnaissanceSeaplane=10]="ReconnaissanceSeaplane",e[e.SeaplaneBomber=11]="SeaplaneBomber",e[e.SmallRadar=12]="SmallRadar",e[e.LargeRadar=13]="LargeRadar",e[e.Sonar=14]="Sonar",e[e.DepthCharge=15]="DepthCharge",e[e.ExtraArmor=16]="ExtraArmor",e[e.EngineImprovement=17]="EngineImprovement",e[e.AntiAircraftShell=18]="AntiAircraftShell",e[e.ArmorPiercingShell=19]="ArmorPiercingShell",e[e.VTFuze=20]="VTFuze",e[e.AntiAircraftGun=21]="AntiAircraftGun",e[e.MidgetSubmarine=22]="MidgetSubmarine",e[e.EmergencyRepairPersonnel=23]="EmergencyRepairPersonnel",e[e.LandingCraft=24]="LandingCraft",e[e.Autogyro=25]="Autogyro",e[e.AntiSubmarinePatrolAircraft=26]="AntiSubmarinePatrolAircraft",e[e.MediumExtraArmor=27]="MediumExtraArmor",e[e.LargeExtraArmor=28]="LargeExtraArmor",e[e.Searchlight=29]="Searchlight",e[e.SupplyTransportContainer=30]="SupplyTransportContainer",e[e.ShipRepairFacility=31]="ShipRepairFacility",e[e.SubmarineTorpedo=32]="SubmarineTorpedo",e[e.StarShell=33]="StarShell",e[e.CommandFacility=34]="CommandFacility",e[e.AviationPersonnel=35]="AviationPersonnel",e[e.AntiAircraftFireDirector=36]="AntiAircraftFireDirector",e[e.AntiGroundEquipment=37]="AntiGroundEquipment",e[e.LargeCaliberMainGun2=38]="LargeCaliberMainGun2",e[e.SurfaceShipPersonnel=39]="SurfaceShipPersonnel",e[e.LargeSonar=40]="LargeSonar",e[e.LargeFlyingBoat=41]="LargeFlyingBoat",e[e.LargeSearchlight=42]="LargeSearchlight",e[e.CombatRation=43]="CombatRation",e[e.Supplies=44]="Supplies",e[e.SeaplaneFighter=45]="SeaplaneFighter",e[e.SpecialAmphibiousTank=46]="SpecialAmphibiousTank",e[e.LandBasedAttackAircraft=47]="LandBasedAttackAircraft",e[e.LandBasedFighter=48]="LandBasedFighter",e[e.LandBasedReconnaissanceAircraft=49]="LandBasedReconnaissanceAircraft",e[e.TransportationMaterial=50]="TransportationMaterial",e[e.SubmarineEquipment=51]="SubmarineEquipment",e[e.JetPoweredFighter=56]="JetPoweredFighter",e[e.JetPoweredFighterBomber=57]="JetPoweredFighterBomber",e[e.JetPoweredTorpedoBomber=58]="JetPoweredTorpedoBomber",e[e.JetPoweredReconnaissanceAircraft=59]="JetPoweredReconnaissanceAircraft",e[e.LargeRadar2=93]="LargeRadar2",e[e.CarrierBasedReconnaissanceAircraft2=94]="CarrierBasedReconnaissanceAircraft2"}(n||(n={}));var a=function(){function e(e,t){var r=this;this.id=e,this.name=t,this.is=function(e){return r.id===n[e]},this.any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(r.is)}}return e.find=function(t,r){128===r||281===r?t=n.LargeCaliberMainGun2:142===r?t=n.LargeRadar2:151===r&&(t=n.CarrierBasedReconnaissanceAircraft2);var i=e.all.find((function(e){return e.id===t}));if(i)return i;var a=new e(t,"");return this.all.push(a),a},e}();t.b=a,a.keyToId=function(e){return n[e]},a.numberToKey=function(e){var t=n[e];if(void 0!==t)return t},a.all=i.a.map((function(e){var t=e.api_id,r=e.api_name;return new a(t,r)}))},49:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c}));var n=r(559),i=r(37),a=function(e,t){Object.entries(t).forEach((function(t){var r,n=t[0],i=t[1];"number"==typeof i&&(r=n.startsWith("a")?(e[n]||1)*i:(e[n]||0)+i,e[n]=r)}))},o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};return e.forEach((function(e){return e&&a(r,e)})),r},u=function(e,t,r){return void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=!1),function(n){var i=n*e+t;return r?Math.floor(i):i}},s=function(e){return void 0===e&&(e=1),function(t){return Math.floor(1.5*t*e)}},c=function(e){var t=e.basic,r=e.cap,a=e.modifiers,o=e.fm14prev,s=e.fm11next,c=function(e,t){var r=e.a12,i=e.a13,a=e.a13next,o=e.a14,s=e.b12,c=e.b13,l=e.b13next,f=e.b14,p=u(r,s),h=u(i,c),d=u(a,l),g=u(o,f);return t?Object(n.a)(p,h,d,t,g):Object(n.a)(p,h,d,g)}(a,o),l=function(e){var t=e.a5,r=e.a6,i=e.a11,a=e.b5,o=e.b6,s=e.b11,c=u(t,a,!0),l=u(r,o,!0),f=u(i,s);return Object(n.a)(c,l,f)}(a),f=c(t),p=r<f,h=Object(i.e)(r,f),d=l(h);return s&&(d=s(d)),{precap:f,isCapped:p,capped:h,postcap:d}}},531:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));var n=r(201),i=["hp","firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","luck"],a=function(){function e(e,t,r){this.master=e,this.level=t,this.increased=r}return e.prototype.getIncreasedStat=function(e){var t=this.increased;if(!t)return 0;var r=t[e];return r?r>1e5?1e5:r:0},Object.defineProperty(e.prototype,"hp",{get:function(){return Object(n.a)(this.master.hp,this.level)+this.getIncreasedStat("hp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower[1]+this.getIncreasedStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo[1]+this.getIncreasedStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir[1]+this.getIncreasedStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor[1]+this.getIncreasedStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return Object(n.b)(this.master.los,this.level)+this.getIncreasedStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return Object(n.b)(this.master.asw,this.level)+this.getIncreasedStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return Object(n.b)(this.master.evasion,this.level)+this.getIncreasedStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck[0]+this.getIncreasedStat("luck")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed+this.getIncreasedStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range+this.getIncreasedStat("range")},enumerable:!0,configurable:!0}),e}();t.a=a},532:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));var n=function(e){var t=e.hasArmorPiercingShell,r=e.hasMainGun,n=e.hasRader,i=e.hasSecondaryGun;return t&&r?i&&n?{power:1.15,accuracy:1.3}:i?{power:1.15,accuracy:1.2}:n?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}:{power:1,accuracy:1}},i=function(e){var t=e.isLightCruiserClass,r=e.isZaraClass,n=e.singleGunCount,i=e.twinGunCount,a=e.zaraGunCount;return t?Math.sqrt(n)+2*Math.sqrt(i):r?Math.sqrt(a):0}},537:function(e,t,r){"use strict";var n=r(3411),i=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,i++)n[i]=a[o];return n},a=Object.entries(n.b).filter((function(e){return"number"==typeof e[1]})),o=function(){function e(e,t){var r=this;this.name=e,this.id=t,this.is=function(e){return r.id===n.a[e]},this.any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(r.is)}}return e.fromId=function(t){var r=e.all.find((function(e){return e.id===t}));if(r)return r;var n=new e("unknown",t);return e.all.push(n),n},Object.defineProperty(e.prototype,"isSpecialTypeDestroyer",{get:function(){return this.any("FubukiClass","AyanamiClass","AkatsukiClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsNavy",{get:function(){return this.any("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoyalNavy",{get:function(){return this.any("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass")},enumerable:!0,configurable:!0}),e}();t.a=o,o.all=a.map((function(e){return new(o.bind.apply(o,i([void 0],e)))}))},538:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(4051),i=function(e,t){var r=Object(n.a)(e.filter((function(e){return e.level<=t})),"value");return r?r.value:0},a={from:function(e){var t=function(t){return e.includes(t)};return t("Fighter")?"Fighter":t("SeaplaneBomber")?"SeaplaneBomber":t("DiveBomber")||t("TorpedoBomber")||t("ReconnaissanceAircraft")?"Other":"None"}},o=function(){function e(e,t){void 0===e&&(e=0),this.internal=e,this.type=t}return e.internalToLevel=function(t){return e.internalBounds.filter((function(e){return e<=t})).length-1},Object.defineProperty(e.prototype,"visible",{get:function(){return"None"!==this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return e.internalToLevel(this.internal)},set:function(t){this.internal=e.internalBounds[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerBonus",{get:function(){var t=this.internal,r=this.level,n=this.type;if(t<=0)return 0;var a=[];return"Fighter"===n?a=e.fighterPowerLevelBonuses.fighter:"SeaplaneBomber"===n&&(a=e.fighterPowerLevelBonuses.seaplaneBomber),i(a,r)+Math.sqrt(t/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalPowerModifier",{get:function(){var t=this.internal,r=this.level,n=i(e.criticalModifierLevelBonuses,r);return Math.floor(Math.sqrt(t)+n)},enumerable:!0,configurable:!0}),e}();t.b=o,o.internalBounds=[0,10,25,40,55,70,85,100],o.fighterPowerLevelBonuses={fighter:[{level:7,value:22},{level:5,value:14},{level:4,value:9},{level:3,value:5},{level:2,value:2},{level:0,value:0}],seaplaneBomber:[{level:7,value:6},{level:5,value:3},{level:2,value:1},{level:0,value:0}]},o.criticalModifierLevelBonuses=[{level:7,value:10},{level:6,value:7},{level:5,value:5},{level:4,value:4},{level:3,value:3},{level:2,value:2},{level:1,value:1},{level:0,value:0}]},540:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"t",{value:!0});var a=function(){function e(){this.s=0,this.o=0,this.u=0,this.i=0,this.l=0,this.g=0,this.S=0,this.F=0,this.P=0,this.h=0}return e.prototype.add=function(t){var r=this;return e.keys.forEach((function(e){r[e]+=t[e]})),this},e.prototype.multiply=function(t){var r=this;return e.keys.forEach((function(e){r[e]*=t})),this},e.prototype.p=function(){var t=this;return e.keys.some((function(e){return 0!==t[e]}))},e}();a.keys=Object.keys(new a);var o=function(e,t,r){var n,i=(null!==(n=e[t])&&void 0!==n?n:0)+r;e[t]=i},u=function(){function e(e,t){this.v=10;for(var r={},n={},i={},a=0,u=t;a<u.length;a++){var s=u[a];if(s){var c=s._,l=s.m,f=r[c];Array.isArray(f)?f.push(s):r[c]=[s],o(n,c,1),o(i,l,1)}}this.k=t.concat(),this.T=r,this.A=n,this.I=i,this.L=e.shipId,this.q=e.ruby,this.D=e.shipTypeId,this.O=e.shipClassId}return e.prototype.j=function(e){var t;return null!==(t=this.A[e])&&void 0!==t?t:0},e.prototype.M=function(e){var t;return null!==(t=this.I[e])&&void 0!==t?t:0},e.prototype.R=function(e){var t=this.T[e],r=Array(11).fill(0);if(!t)return r;for(var n=0,i=t;n<i.length;n++){var a=i[n];o(r,a.level,1)}return r},e}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.B=function(e,r){var n,i=new u(e,r),o=[];o.push({C:i.M(9),N:t.X},{C:i.M(29),N:t.G},{C:i.M(42),N:t.H},{C:i.M(12)||i.M(13),N:t.J},{C:i.j(15),N:t.K},{C:i.j(18)||i.j(52),N:t.U},{C:i.j(19),N:t.V},{C:i.j(24)||i.j(57)||i.j(111),N:t.W},{C:i.j(35),N:t.Y},{C:i.j(47),N:t.Z},{C:i.j(50),N:t.$},{C:i.j(58),N:t.ee},{C:i.j(61),N:t.te},{C:i.j(61),N:t.ne},{C:i.j(63),N:t.ce},{C:i.j(67),N:t.se},{C:i.j(69),N:t.re},{C:i.j(79)||i.j(81),N:t.oe},{C:i.j(82),N:t.ue},{C:i.j(87),N:t.ie},{C:i.j(90),N:t.le},{C:i.j(93),N:t.fe},{C:i.j(94),N:t.ae},{C:i.j(99),N:t.xe},{C:i.j(100),N:t.Ee},{C:i.j(104),N:t.we},{C:i.j(106),N:t.ge},{C:i.j(119),N:t.Se},{C:i.j(129),N:t.Fe},{C:i.j(143),N:t.Pe},{C:i.j(144),N:t.he},{C:i.j(149),N:t.pe},{C:i.j(171),N:t.ve},{C:i.j(174),N:t.de},{C:i.j(179),N:t._e},{C:i.j(184),N:t.ye},{C:i.j(188),N:t.me},{C:i.j(189),N:t.ke},{C:i.j(194),N:t.Te},{C:i.j(204),N:t.Ae},{C:i.j(228),N:t.Ie},{C:i.j(229),N:t.Le},{C:i.j(237),N:t.be},{C:i.j(266),N:t.qe},{C:i.j(266),N:t.De},{C:i.j(267)||i.j(366),N:t.Oe},{C:i.j(267)||i.j(366),N:t.je},{C:i.j(268),N:t.Me},{C:i.j(278),N:t.Re},{C:i.j(279),N:t.Be},{C:i.j(282),N:t.Ce},{C:i.j(283),N:t.Ne},{C:i.j(285),N:t.Xe},{C:i.j(286),N:t.ze},{C:i.j(287),N:t.Ge},{C:i.j(288),N:t.He},{C:i.j(289),N:t.Je},{C:i.j(290),N:t.Ke},{C:i.j(291),N:t.Qe},{C:i.j(292),N:t.Ue},{C:i.j(293),N:t.Ve},{C:i.j(294),N:t.We},{C:i.j(295),N:t.Ye},{C:i.j(296),N:t.Ze},{C:i.j(297),N:t.$e},{C:i.j(298)||i.j(299)||i.j(300),N:t.et},{C:i.j(301),N:t.tt},{C:i.j(302),N:t.nt},{C:i.j(303),N:t.ct},{C:i.j(304),N:t.st},{C:i.j(305)||i.j(306),N:t.rt},{C:i.j(307),N:t.ot},{C:i.j(308),N:t.ut},{C:i.j(310),N:t.it},{C:i.j(313),N:t.lt},{C:i.j(314),N:t.ft},{C:i.j(315),N:t.at},{C:i.j(316),N:t.xt},{C:i.j(317),N:t.Et},{C:i.j(318),N:t.wt},{C:i.j(319),N:t.gt},{C:i.j(320),N:t.St},{C:i.j(322),N:t.Ft},{C:i.j(323),N:t.Pt},{C:i.j(324)||i.j(325),N:t.ht},{C:i.j(326),N:t.pt},{C:i.j(327),N:t.vt},{C:i.j(328),N:t.dt},{C:i.j(329),N:t._t},{C:i.j(330)||i.j(331)||i.j(332),N:t.yt},{C:i.j(335),N:t.kt},{C:i.j(336),N:t.Tt},{C:i.j(337),N:t.At},{C:i.j(338),N:t.It},{C:i.j(339),N:t.Lt},{C:i.j(340),N:t.bt},{C:i.j(341),N:t.qt},{C:i.j(342),N:t.Dt},{C:i.j(343),N:t.Ot},{C:i.j(344),N:t.jt},{C:i.j(345),N:t.Mt},{C:i.j(356)||i.j(357),N:t.Rt},{C:i.j(358),N:t.Bt},{C:i.j(359),N:t.Ct},{C:i.j(360)||i.j(361),N:t.Nt},{C:i.j(362)||i.j(363),N:t.Xt},{C:i.j(364),N:t.zt},{C:i.j(365),N:t.Gt},{C:i.j(367),N:t.Ht},{C:i.j(368),N:t.Jt},{C:i.j(369),N:t.Kt},{C:i.j(370),N:t.Qt},{C:i.j(371),N:t.Ut},{C:i.j(372),N:t.Vt},{C:i.j(373),N:t.Wt},{C:i.j(374),N:t.Yt},{C:i.j(375),N:t.Zt},{C:i.j(376),N:t.$t},{C:i.j(377),N:t.en},{C:i.j(378),N:t.tn},{C:i.j(379),N:t.nn},{C:i.j(380),N:t.cn},{C:i.j(381),N:t.sn},{C:i.j(382),N:t.rn},{C:i.j(383),N:t.on},{C:i.j(384),N:t.un},{C:i.j(385),N:t.in},{C:i.j(386),N:t.ln},{C:i.j(387),N:t.fn},{C:i.j(389),N:t.an});for(var s=new a,c=0,l=o;c<l.length;c++){var f=l[c];f.C&&(n=f.N.call(null,i),s.add(n))}return s},t.Me=function(e){var t=new a;return"きそ"!=e.q&&"たま"!=e.q||(t.l=7,t.i=2),t},t.G=function(e){var t=new a,r=e.M(29);return"ひえい"==e.q||"きりしま"==e.q||"ちょうかい"==e.q||"じんつう"==e.q||"あかつき"==e.q?(t.s+=4,--t.l):"あきぐも"==e.q?t.s+=2*r:"ゆきかぜ"==e.q&&(t.s+=r,t.u+=r),"じんつう"==e.q&&(t.o+=6,t.s+=4),t},t.H=function(e){var t=new a;"ひえい"==e.q||"きりしま"==e.q?(t.s+=6,t.l-=2):"やまと"!=e.q&&"むさし"!=e.q||(t.s+=4,--t.l);var r=e.j(174);return 592==e.L&&(t.s+=3,t.o+=3,r>0&&(t.o+=5)),t},t.J=function(e){var t=0,r=new a;if(569!=e.L)return r;for(var n=0,i=0,o=e.k;i<o.length;i++){var u=o[i];12!=(t=u.m)&&13!=t||(u.xn,u.En>=2&&++n)}return n>0&&(++r.s,r.l+=3,r.u+=2),r},t.Oe=function(e){var t=new a,r=0,n=0;if(38==e.O||22==e.O)r=2,n=1;else{if(30!=e.O)return t;r=1,n=1}var i=e.j(267)+e.j(366);return t.s=r*i,t.l=n*i,t},t.je=function(e){var t=0,r=new a,n=e.j(267),i=e.j(366),o=n+i;if(566!=e.L&&567!=e.L&&568!=e.L||(n>0&&++r.s,1==i?(++r.s,r.u+=2):i>=2&&(r.s+=2,r.u+=4)),38!=e.O&&229!=e.L)return r;var u=!1,s=!1,c=!1,l=!1,f=!1,p=!1,h=!1;543==e.L?(r.s=1*o,u=!0):229==e.L?s=!0:542==e.L?(r.s=1*o,c=!0):563==e.L?(r.s=1*o,l=!0):564==e.L?(r.s=1*o,f=!0):578==e.L?(r.s=1*o,p=!0):569==e.L&&(r.s=1*o,h=!0);for(var d=0,g=0,m=0,b=e.k;m<b.length;m++){var y=b[m];12!=(t=y.m)&&13!=t||(y.xn>=5&&++d,y.En>=2&&++g)}return d>0&&n>0&&(38==e.O&&(r.s+=2,++r.o,0==u&&0==c&&0==l&&0==f&&0==p&&0==h&&(r.o+=2),++r.l),(c||u||s||l||f||p||h)&&(++r.s,r.o+=3,r.l+=2)),i>0&&(c||u||l||f||p||s||h)&&(1==i?r.u+=3:i>=2&&(r.u+=5),h&&(++r.s,r.u+=2),d>0&&(r.s+=2,r.l+=2,r.o+=4),g>0&&(++r.s,r.l+=2,r.u+=5)),r},t.K=function(e){var t=new a,r=!1;if(566!=e.L&&567!=e.L&&568!=e.L||(r=!0),0==r)return t;var n=e.j(15);return 30==e.O&&(1==n?t.o=2:n>=2&&(t.o=4)),t},t.Xe=function(e){var t=new a,r=!1;if([195,426,420,407,437,326,419,147,627].indexOf(e.L)>=0&&(r=!0),0==r)return t;var n=e.R(285),i=e.j(285);i>2&&(i=2),t.o=2*i,t.l=1*i;var o=n[10];return 1==o?++t.s:o>=2&&(t.s+=2),t},t.ze=function(e){var t=0,r=new a,n=!1;if([566,145,498,144,469,463,468,199,489,490,464,470,198,543,567,568,497,542,563,564,587,578,569].indexOf(e.L)>=0&&(n=!0),0==n)return r;var i=e.R(286),o=e.j(286);o>2&&(o=2),r.o=2*o,r.l=1*o;var u=i[10];return 1==u?++r.s:u>=2&&(r.s+=2),30==e.O&&(1==(t=i[5]+i[6]+i[7]+i[8]+i[9]+i[10])?++r.o:t>=2&&(r.o+=2)),r},t.qe=function(e){var t=new a,r=!1;if(566!=e.L&&567!=e.L&&568!=e.L||(r=!0),0==r)return t;var n=e.j(266);return 30==e.O&&(1==n?t.s=1:n>=2&&(t.s=3)),t},t.De=function(e){var t=0,r=new a,n=0,i=new a;if(23==e.O||18==e.O?(i.s=1,n=1):30==e.O&&(i.s=1,n=2),("しぐれ"==e.q||"ゆきかぜ"==e.q||"いそかぜ"==e.q)&&(i.l=1),!i.p())return r;var o=e.j(266);if(r=i.multiply(o),0==n)return r;for(var u=0,s=0,c=e.k;s<c.length;s++){var l=c[s];(12==(t=l.m)||13==t)&&l.xn>=5&&++u}return u>0&&(1==n?(++r.s,++r.l,r.o+=3):2==n&&(r.s+=2,++r.l,r.o+=3)),r},t.we=function(e){var t=new a,r=new a;if(149==e.L)r.s=2;else if(150==e.L)r.s=1;else if(152==e.L)r.s=1;else{if(151!=e.L)return t;r.s=2,r.u=1,r.l=2}var n=e.j(104);return t=r.multiply(n)},t.Je=function(e){var t=0,r=new a,n=0,i=new a;if(149==e.L)i.s=2,i.u=1,n=1;else if(150==e.L)i.s=1;else if(152==e.L)i.s=1;else{if(151!=e.L)return r;i.s=2,i.u=2,i.l=2,n=1}var o=e.j(289);if(r=i.multiply(o),0==n)return r;for(var u=0,s=0,c=e.k;s<c.length;s++){var l=c[s];(12==(t=l.m)||13==t)&&l.xn>=5&&++u}return u>0&&(r.s+=2,r.l+=2),r},t.Ke=function(e){var t=0,r=new a,n=0,i=new a;if(411==e.L)i.s=1;else if(412==e.L)i.s=1;else if(82==e.L)i.s=2,i.u=2,i.l=1,n=1;else if(553==e.L)i.s=3,i.u=2,i.l=1,i.P=3,n=1;else if(88==e.L)i.s=2,i.u=2,i.l=1,n=1;else{if(554!=e.L)return r;i.s=3,i.u=2,i.l=2,i.P=3,n=1}var o=e.j(290);if(r=i.multiply(o),0==n)return r;for(var u=0,s=0,c=e.k;s<c.length;s++){var l=c[s];(12==(t=l.m)||13==t)&&l.En>=2&&++u}return u>0&&(r.u+=2,r.l+=3),r},t.Ue=function(e){var t=new a,r=new a;if(553==e.L)r.s=8,r.l=2,r.u=1;else{if(554!=e.L)return t;r.s=8,r.l=2,r.u=1}var n=e.j(292);return t=r.multiply(n)},t.Qe=function(e){var t=new a,r=new a;if(553==e.L)r.s=6,r.l=1;else{if(554!=e.L)return t;r.s=6,r.l=1}var n=e.j(291);return t=r.multiply(n)},t.be=function(e){var t=new a,r=new a;if(553==e.L)r.s=4,r.l=2;else if(82==e.L)r.s=3,r.l=1;else if(88==e.L)r.s=3,r.l=1;else if(554==e.L)r.s=4,r.l=2;else if(411==e.L)r.s=2;else{if(412!=e.L)return t;r.s=2}var n=e.j(237);return t=r.multiply(n)},t.oe=function(e){var t=new a,r=new a;if(553==e.L)r.s=3;else if(82==e.L)r.s=2;else if(88==e.L)r.s=2;else if(554==e.L)r.s=3;else if(411==e.L)r.s=2;else{if(412!=e.L)return t;r.s=2}var n=e.j(79)+e.j(81);return t=r.multiply(n)},t.Le=function(e){for(var t,r=0,n=0,i=new a,o=0,u=0,s=null!==(t=e.T[229])&&void 0!==t?t:[];u<s.length;u++){s[u].level>=7&&o++}var c=o,l=0,f=0,p=0;if(622==e.L||623==e.L||624==e.L)r=e.j(229),i.s+=1*r,i.u+=1*r,l=2;else if(0==o)return i;if(488==e.L?(i.u+=3*c,l=1):220==e.L?i.u+=2*c:23==e.L?i.u+=1*c:160==e.L?(i.u+=2*c,l=1):224==e.L?i.u+=1*c:487==e.L?(i.u+=2*c,l=1):289==e.L&&(i.u+=1*c),(66==e.O||28==e.O)&&(i.s+=1*c,i.u+=1*c,f=1),1==e.D&&(i.s+=1*c,i.u+=1*c,p=1),("ゆら"==e.q||"なか"==e.q||"きぬ"==e.q)&&(i.s+=2*c),0==l+f+p)return i;for(var h=0,d=0,g=0,m=e.k;g<m.length;g++){var b=m[g];12!=(n=b.m)&&13!=n||(b.xn>=5&&++h,b.En>=2&&++d)}return 1==l?h>0&&(i.s+=3,i.l+=2):2==l&&(h>0&&(++i.s,++i.l),d>0&&(i.u+=2,i.l+=2)),1==f&&h>0&&(i.s+=2,i.l+=3),1==p&&h>0&&(++i.s,i.l+=4),i},t.se=function(e){var t=new a,r=new a;if(13!=e.D&&14!=e.D&&(r.o=-5),!r.p())return t;var n=e.j(67);return t=r.multiply(n)},t.ee=function(e){var t=new a,r=new a;if("しまかぜ"!=e.q&&4!=e.D&&54!=e.O||(r.o=1),!r.p())return t;var n=e.j(58);return t=r.multiply(n)},t._e=function(e){var t=new a,r=new a;if(54==e.O&&(r.o=1),!r.p())return t;var n=e.j(179);return t=r.multiply(n)},t.de=function(e){var t=new a,r=new a;if(66==e.O&&(r.o=1,r.l=2),591==e.L||592==e.L?(r.o+=6,r.l+=3):488!=e.L&&622!=e.L&&623!=e.L&&624!=e.L||(r.s+=2,r.o+=4,r.l+=4),!r.p())return t;var n=e.j(174);return t=r.multiply(n)},t.rt=function(e){var t=new a,r=new a;if(76==e.O&&(r.g=1,r.l=1),"しんよう"==e.q?(r.g+=2,++r.l):"グラーフ・ツェッペリン"!=e.q&&"アクィラ"!=e.q||(r.s=1,r.l=1),!r.p())return t;var n=e.j(305)+e.j(306);return t=r.multiply(n)},t.ue=function(e){var t=new a,r=new a;if(76==e.O&&(r.g=1,r.l=1),!r.p())return t;var n=e.j(82);return t=r.multiply(n)},t.nt=function(e){var t=new a,r=new a;if(76==e.O&&(r.g=1,r.l=1),!r.p())return t;var n=e.j(302);return t=r.multiply(n)},t.ct=function(e){var t=new a,r=new a;if(16==e.O||4==e.O||20==e.O||41==e.O?(r.s=1,r.u=1):89==e.O&&(r.s=1,r.u=2,r.l=1),!r.p())return t;var n=e.j(303);return t=r.multiply(n)},t.ot=function(e){var t=new a,r=new a;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(r.s=1,r.u=1,r.l=1),!r.p())return t;var n=e.j(307);return t=r.multiply(n)},t.ut=function(e){var t=new a,r=new a;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(r.s=1,r.u=1,r.l=1),2==e.D?++r.s:1==e.D&&(++r.u,++r.l),!r.p())return t;var n=e.j(308);return t=r.multiply(n)},t.st=function(e){var t=new a,r=new a;if(16==e.O||4==e.O||20==e.O||41==e.O?(r.s=1,r.g=1,r.l=1):89==e.O&&(r.s=1,r.g=2,r.l=2),!r.p())return t;var n=e.j(304);return t=r.multiply(n)},t.xe=function(e){var t=new a;return"そうりゅう"==e.q?t.s=4:"ひりゅう"==e.q&&(t.s=1),t},t.Ee=function(e){var t=new a,r=new a;if(553==e.L)r.s=4;else{if(554!=e.L)return 196==e.L?(t.s=3,t):197==e.L?(t.s=6,t):t;r.s=4}var n=e.j(100);return t=r.multiply(n)},t.W=function(e){var t=new a,r=new a;if(553==e.L)r.s=2;else{if(554!=e.L)return t;r.s=2}var n=e.j(24)+e.j(57)+e.j(111);return t=r.multiply(n)},t.te=function(e){var t=new a;if(553==e.L)t.s=3,t.l=2,t.i=1,t.P=5,t.h=1;else if(554==e.L)t.s=3,t.l=3,t.i=3,t.P=5,t.h=1;else if(196==e.L)t.P=5,t.h=1;else{if(197!=e.L)return t;t.P=5,t.h=1}return t},t.fe=function(e){var t=new a;return"そうりゅう"==e.q?t.s=1:"ひりゅう"==e.q&&(t.s=3),t},t.ae=function(e){var t=new a;if(196==e.L)t.s=7;else{if(197!=e.L)return t;t.s=3}return t},t.Pe=function(e){var t=new a;return"あかぎ"==e.q?t.s=3:"かが"==e.q||"しょうかく"==e.q?t.s=2:("ずいかく"==e.q||"りゅうじょう"==e.q)&&(t.s=1),t},t.he=function(e){var t=new a;return"あかぎ"==e.q?t.s=3:"かが"==e.q?t.s=2:"しょうかく"==e.q?(t.s=2,461!=e.L&&466!=e.L||(t.s+=2)):"ずいかく"==e.q?(t.s=1,462!=e.L&&467!=e.L||++t.s):"りゅうじょう"==e.q&&(t.s=1),t},t.St=function(e){var t=new a,r=new a;if(553==e.L)r.s=2;else if(554==e.L)r.s=4;else if(196==e.L)r.s=3;else if(197==e.L)r.s=3;else if(508==e.L)r.s=4;else{if(509!=e.L)return t;r.s=4}var n=e.j(320);return t=r.multiply(n)},t.Ve=function(e){var t=0,r=new a,n=new a,i=0;if(66==e.O||28==e.O)n.s=2,n.u=1,n.l=3,i=1;else{if(74!=e.O&&77!=e.O)return r;n.s=1,n.u=1,n.l=2,i=2}var o=e.j(293);r=n.multiply(o);for(var u=0,s=0,c=e.k;s<c.length;s++){var l=c[s];(12==(t=l.m)||13==t)&&l.xn>=5&&++u}var f=e.j(174);return 1==i?(u>0&&(r.s+=2,r.l+=3,++r.o),1==f?(r.s+=2,r.o+=4):f>=2&&(r.s+=3,r.o+=7)):2==i&&u>0&&(r.s+=2,r.l+=3,++r.g),r},t.We=function(e){var t=0,r=new a,n=new a;if(12!=e.O&&1!=e.O&&5!=e.O)return r;n.s=1;var i=e.j(294);r=n.multiply(i);for(var o=0,u=0,s=e.k;u<s.length;u++){var c=s[u];(12==(t=c.m)||13==t)&&c.xn>=5&&++o}var l=e.j(13),f=e.j(125),p=e.j(285),h=l+f+p;return o>0&&(r.s+=3,r.l+=2,++r.o),1==h?(++r.s,r.o+=3):h>=2&&(r.s+=2,r.o+=5),p>=1&&++r.o,r},t.Ye=function(e){var t=0,r=new a,n=new a;if(12!=e.O&&1!=e.O&&5!=e.O)return r;n.s=2,n.u=2;var i=e.j(295);r=n.multiply(i);for(var o=0,u=0,s=0,c=e.k;s<c.length;s++){var l=c[s];12!=(t=l.m)&&13!=t||(l.xn>=5&&++o,l.En>=2&&++u)}var f=e.j(13),p=e.j(125),h=e.j(285),d=f+p+h;return o>0&&(r.s+=3,r.l+=2,++r.o),1==d?(++r.s,r.o+=3):d>=2&&(r.s+=2,r.o+=5),h>=1&&++r.o,u>0&&(r.u+=6),r},t.$e=function(e){var t=new a,r=new a;if(12==e.O)r.l=2;else{if(1!=e.O&&5!=e.O)return t;r.l=1}var n=e.j(297);return t=r.multiply(n)},t.ce=function(e){var t=new a,r=new a;1!=e.O&&5!=e.O&&10!=e.O||++r.u,"ゆうだち"==e.q&&(++r.s,++r.u,r.l+=2),145==e.L?++r.s:144==e.L?++r.o:469==e.L?r.l+=2:242==e.L||497==e.L||244==e.L||498==e.L?++r.l:627==e.L&&++r.s;var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(63);return t=r.multiply(i)},t.Ze=function(e){var t=0,r=new a,n=new a;1!=e.O&&5!=e.O&&10!=e.O&&23!=e.O||++n.s,10!=e.O&&23!=e.O||++n.l,145==e.L?(++n.s,++n.u):144==e.L?(++n.s,++n.o):469==e.L||587==e.L||242==e.L?++n.l:497==e.L?(++n.s,++n.l):244==e.L?++n.l:498==e.L?(++n.u,++n.l):627==e.L&&(n.s+=2,++n.o);var i=!0;if(n.p()||(i=!1),0==i)return r;var o=e.j(296);r=n.multiply(o);var u=0;if(1!=e.O&&5!=e.O&&10!=e.O||(u=1),23==e.O&&(u=2),0==u)return r;for(var s=0,c=0,l=0,f=e.k;l<f.length;l++){var p=f[l];12!=(t=p.m)&&13!=t||(p.xn>=5&&++s,p.En>=2&&++c)}return s>0&&(1==u?(++r.s,r.l+=2,r.o+=2):2==u&&(++r.s,r.l+=2,r.o+=3)),e.j(285)+e.j(125)>=1&&1==u&&(++r.s,r.o+=3),e.j(15)+e.j(286)>=1&&2==u&&(++r.s,r.o+=3),c>0&&(1==u?r.u+=5:2==u&&(r.u+=6)),r},t.le=function(e){var t=0,r=0,n=new a,i=new a;142==e.L?(i.s+=2,++i.l):295==e.L||416==e.L||417==e.L?++i.s:264==e.L&&(++i.s,++i.u),7!=e.O&&13!=e.O&&8!=e.O&&29!=e.O&&9!=e.O&&31!=e.O||++i.s,i.p()&&(t=e.j(90),n=i.multiply(t));var o=[];if("あおば"==e.q&&(o[1]=1),13!=e.O&&7!=e.O||(o[2]=1),0==o.length)return n;for(var u=0,s=0,c=0,l=e.k;c<l.length;c++){var f=l[c];12!=(r=f.m)&&13!=r||(f.xn>=5&&++u,f.En>=2&&++s)}return s>0&&null!=o[1]&&(n.u+=5,n.l+=2),u>0&&null!=o[2]&&(n.s+=3,n.l+=2,n.o+=2),n},t.$=function(e){var t=0,r=new a,n=!1,i=new a;7!=e.O&&13!=e.O&&8!=e.O&&29!=e.O&&9!=e.O&&31!=e.O||(++i.s,n=!0),8!=e.O&&29!=e.O&&9!=e.O&&31!=e.O||(++i.s,++i.l,n=!0);var o=e.j(50);if(9!=e.O&&31!=e.O||o>=2&&(++i.s,n=!0),0==n)return r;r=i.multiply(o);for(var u=0,s=0,c=e.k;s<c.length;s++){var l=c[s];(12==(t=l.m)||13==t)&&l.xn>=5&&++u}return u>0&&(7==e.O||13==e.O?0==e.j(90)&&(++r.s,++r.l,++r.o):8!=e.O&&29!=e.O&&9!=e.O&&31!=e.O||(r.s+=3,r.l+=2,r.o+=2)),r},t.et=function(e){var t=new a,r=new a;67==e.O||78==e.O||82==e.O||88==e.O?(r.s+=2,++r.i,67==e.O&&(r.l-=2)):149!=e.L&&150!=e.L&&151!=e.L&&152!=e.L||(++r.s,++r.i,r.l-=3);var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(298)+e.j(299)+e.j(300);return t=r.multiply(i)},t.tt=function(e){var t=new a,r=new a;67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O||(r.u+=2,++r.l,++r.i);var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(301);return t=r.multiply(i)},t.it=function(e){var t,r=0,n=0,i=0,o=new a,u=new a;34==e.O?(u.s+=2,++u.u,++u.l):56==e.O?(u.s+=2,++u.l):90==e.O&&(u.s+=3,u.o+=2,++u.u,++u.l);var s=new a,c=new a;622!=e.L&&623!=e.L&&624!=e.L||(u.s+=2,++u.l,++u.g,s.s=1,s.o=1,c.s=3,c.l=2,c.o=2);var l=!0;if(u.p()||(l=!1),0==l)return o;var f=e.j(310);if(o=u.multiply(f),s.p()){r=0;for(var p=0,h=null!==(t=e.T[310])&&void 0!==t?t:[];p<h.length;p++){h[p].level>=7&&r++}r>0&&o.add(s.multiply(r))}if(c.p()){n=0;for(var d=0,g=e.k;d<g.length;d++){var m=g[d];(12==(i=m.m)||13==i)&&m.xn>=5&&++n}n>0&&o.add(c)}return o},t.Se=function(e){var t=new a,r=new a;34==e.O||56==e.O?++r.s:90==e.O&&(r.s+=2,++r.o);var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(119);return t=r.multiply(i)},t.lt=function(e){var t=new a,r=new a;87!=e.O&&91!=e.O||(r.s+=2,r.u+=2,++r.l,++r.i);var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(313);return t=r.multiply(i)},t.ft=function(e){var t=new a,r=new a;87!=e.O&&91!=e.O||(++r.s,r.o+=3);var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(314);return t=r.multiply(i)},t.at=function(e){var t=new a,r=new a;65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(r.s+=2,r.l+=3,r.S+=4),87!=e.O&&91!=e.O||(++r.s,t.h=1);var n=!0;if(r.p()||(n=!1),0==n)return t;var i=e.j(315);return t.add(r.multiply(i)),t},t.Bt=function(e){var t=new a,r=new a;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O&&67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O)return t;++r.s,++r.l,++r.u,95==e.O&&(++r.s,r.l+=2,r.u+=2);var n=e.j(358);return t=r.multiply(n)},t.ve=function(e){var t=0,r=new a,n=0;65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(n=1);var i=e.R(171),o=0;if(n>0){for(t=0;t<=10;)t>=5&&(o+=i[t]),t++;1==n&&(i[10]>0&&++r.s,o>0&&++r.l)}return r},t.$t=function(e){var t=new a,r=!1,n=new a;if(65==e.O||69==e.O||83==e.O||87==e.O||84==e.O||91==e.O||93==e.O||95==e.O||99==e.O||102==e.O||105==e.O||106==e.O?(n.s+=2,n.o+=4,r=!0):67==e.O||78==e.O||82==e.O||88==e.O?(++n.s,n.o+=2,r=!0):96==e.O&&(++n.s,++n.o,r=!0),0==r)return t;var i=e.j(376);return t.add(n.multiply(i)),t},t.en=function(e){var t=new a;return 65==e.O||69==e.O||83==e.O||87==e.O||84==e.O||91==e.O||93==e.O||95==e.O||99==e.O||102==e.O||105==e.O||106==e.O?(t.g+=2,++t.l,629==e.L&&(++t.g,t.l+=2)):67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O&&96!=e.O||(++t.g,++t.l),t},t.tn=function(e){var t=new a;return 65==e.O||69==e.O||83==e.O||87==e.O||84==e.O||91==e.O||93==e.O||95==e.O||99==e.O||102==e.O||105==e.O||106==e.O?(t.g+=3,++t.l,629==e.L&&(++t.g,++t.l)):67==e.O||78==e.O||82==e.O||88==e.O?(t.g+=2,++t.l):96==e.O&&(++t.g,++t.l),t},t.Re=function(e){var t=new a;return 65==e.O||69==e.O||83==e.O||87==e.O||84==e.O||91==e.O||93==e.O||95==e.O||99==e.O||102==e.O||105==e.O||106==e.O?(++t.u,t.l+=3,++t.S):67==e.O||78==e.O||82==e.O||88==e.O?(++t.u,t.l+=2):96==e.O&&(++t.u,++t.l),t},t.Be=function(e){var t=new a;return 65==e.O||69==e.O||83==e.O||87==e.O||84==e.O||91==e.O||93==e.O||95==e.O||99==e.O||102==e.O||105==e.O||106==e.O?(t.s+=2,t.u+=2,t.l+=3,t.S+=2):67==e.O||78==e.O||82==e.O||88==e.O?(++t.s,++t.u,t.l+=2,++t.S):96==e.O&&(++t.s,++t.u,++t.l),t},t.Ce=function(e){var t=new a,r=!1,n=!1;147!=e.L&&73!=e.O&&81!=e.O||(r=!0),"ゆうばり"==e.q&&(n=!0);var i=new a;if((r||n)&&(i.s+=2,++i.i),!i.p())return t;var o=e.j(282);return t=i.multiply(o)},t.Ne=function(e){var t=new a,r=!1;147!=e.L&&73!=e.O&&81!=e.O||(r=!0);var n=new a;if(r&&(n.o+=3,++n.s,++n.i),!n.p())return t;var i=e.j(283);return t=n.multiply(i)},t.Z=function(e){var t=new a,r=new a;if(["あさしも","はるかぜ","かみかぜ","やまかぜ","まいかぜ","しぐれ"].indexOf(e.q)>=0?(r.g+=3,r.l+=2,++r.s):["きしなみ","いそかぜ","はまかぜ","うしお","いかづち","やまぐも"].indexOf(e.q)>=0&&(r.g+=2,r.l+=2),!r.p())return t;var n=e.j(47);return t=r.multiply(n)},t.ge=function(e){var t=new a,r=new a;if([407,419,145,151,541].indexOf(e.L)>=0?(++r.s,r.u+=2,++r.i,r.l+=3):["おおよど","ひびき","かしま"].indexOf(e.q)>=0?(++r.u,++r.i,r.l+=3):["やはぎ","ゆきかぜ","いそかぜ","あさしも","はまかぜ","かすみ","すずつき"].indexOf(e.q)>=0&&(r.u+=2,++r.i,r.l+=2),!r.p())return t;var n=e.j(106);return t=r.multiply(n)},t.Fe=function(e){var t=new a,r=!1,n=new a;if([66,28,12,1,5,10,23,18,30,38,22,54,101].indexOf(e.O)>=0?(n.s=1,n.o=2,n.l=2,n.g=2,n.S=1,r=!0):[21,4,20,16,34,56,41,52].indexOf(e.O)>=0?(n.s=1,n.o=2,n.l=2,n.S=3,r=!0):[7,13,29,8,9,31].indexOf(e.O)>=0&&(n.s=1,n.l=2,n.S=3,r=!0),0==r)return t;var i=e.j(129);return t=n.multiply(i)},t.ye=function(e){var t=new a,r=new a;if(68==e.O&&(++r.s,r.u+=2,r.l+=3),!r.p())return t;var n=e.j(184);return t=r.multiply(n)},t.me=function(e){var t=new a,r=new a;if(68==e.O&&(r.s+=3,++r.u,++r.l),!r.p())return t;var n=e.j(188);return t=r.multiply(n)},t.ke=function(e){var t=new a,r=new a;if(68!=e.O&&63!=e.O||(++r.u,r.l+=2),!r.p())return t;var n=e.j(189);return t=r.multiply(n)},t.xt=function(e){var t=new a,r=new a;if(68==e.O&&(r.s+=4,++r.u,++r.l),!r.p())return t;var n=e.j(316);return t=r.multiply(n)},t.Te=function(e){var t=new a,r=new a;if(70==e.O?(r.s+=3,r.l+=2,r.S+=2):72!=e.O&&62!=e.O||(++r.l,r.S+=2),392==e.L&&(++r.s,r.l+=2,r.S+=2),!r.p())return t;var n=e.j(194);return t=r.multiply(n)},t.X=function(e){var t=0,r=new a;if(null=={11:1,18:1,7:1,10:1}[e.D])return r;for(var n=0,i=0,o=e.k;i<o.length;i++){var u=o[i];9==u.m&&(n<(t=u.level)&&(n=t))}return n>=2&&++r.S,n>=4&&++r.s,n>=6&&++r.S,n>=10&&(++r.s,++r.S),r},t.ne=function(e){var t,r=0,n=new a;if(null==e.T[61])return n;for(var i=0,o=0,u=null!==(t=e.T[61])&&void 0!==t?t:[];o<u.length;o++){i<(r=u[o].level)&&(i=r)}return 0==i||("そうりゅう"==e.q?(n.s+=3,n.S+=3):"ひりゅう"==e.q&&(n.s+=2,n.S+=2),508!=e.L&&509!=e.L&&560!=e.L||(++n.s,++n.S),i>=8&&197==e.L&&(++n.s,++n.S)),n},t.wt=function(e){var t=0,r=new a,n=new a,i=new a,o=new a;if(411==e.L||412==e.L?++n.s:82==e.L?(n.s+=2,n.u+=2,n.l+=2,o.u=2,o.l=3,o.P=1):553==e.L?(n.s+=2,n.u+=2,n.l+=2,n.P+=3,o.u=2,o.l=3,o.P=1,i.l=2,i.i=1):88==e.L?(n.s+=2,n.u+=2,n.l+=2,o.u=2,o.l=3,o.P=1):541==e.L||573==e.L?(n.s+=3,n.u+=2,++n.l,n.P+=2,i.s=2,i.l=2,i.i=1,i.P=1):554==e.L&&(n.s+=3,n.u+=2,n.l+=2,n.P+=3,o.u=2,o.l=3,o.P=1,i.s=1,i.l=2,i.i=1,i.P=1),!n.p())return r;var u=e.j(318);if(r=n.multiply(u),!i.p()&&!o.p())return r;for(var s=0,c=0,l=e.k;c<l.length;c++){var f=l[c];(12==(t=f.m)||13==t)&&f.En>=2&&++s}var p=e.j(290);return o.p()&&s>0&&0==p&&r.add(o),i.p()&&e.j(290)>=1&&r.add(i),r},t.dt=function(e){var t=new a,r=new a;if("こんごう"==e.q?(r.s=1,r.l=1,209==e.L||149==e.L?++r.s:591==e.L&&(r.s+=2,++r.o)):"ひえい"==e.q?(r.s=1,r.l=1,210==e.L||150==e.L?++r.s:592==e.L&&(r.s+=2,++r.u)):"はるな"==e.q?(r.s=1,r.l=1,211!=e.L&&151!=e.L||++r.s):"きりしま"==e.q?(r.s=1,r.l=1,212!=e.L&&152!=e.L||++r.s):("ふそう"==e.q||"やましろ"==e.q||"いせ"==e.q||"ひゅうが"==e.q)&&(r.s=1),!r.p())return t;var n=e.j(328);return t=r.multiply(n)},t._t=function(e){var t=new a,r=new a;if("こんごう"==e.q?(r.s=1,r.l=1,209==e.L?++r.s:149==e.L?(r.s+=2,++r.u):591==e.L&&(r.s+=3,++r.u,r.o+=2)):"ひえい"==e.q?(r.s=1,r.l=1,210==e.L?++r.s:150==e.L?(r.s+=2,++r.u):592==e.L&&(r.s+=3,++r.u,r.o+=2)):"はるな"==e.q?(r.s=1,r.l=1,211==e.L?++r.s:151==e.L&&(r.s+=2,++r.u)):"きりしま"==e.q?(r.s=1,r.l=1,212==e.L?++r.s:152==e.L&&(r.s+=2,++r.u)):("ふそう"==e.q||"やましろ"==e.q||"いせ"==e.q||"ひゅうが"==e.q)&&(r.s=1),!r.p())return t;var n=e.j(329);return t=r.multiply(n)},t.yt=function(e){var t=0,r=0,n=0,i=new a;if("コロラド"==e.q)return(t=e.j(330))>0&&(i.s+=1*t),(r=e.j(331))>0&&(i.s+=1*r,1496==e.L&&(i.s+=1*r,i.l+=1*r)),(n=e.j(332))>0&&(i.s+=1*n,1496==e.L&&(i.s+=1*n,i.l+=1*n,i.u+=1*n)),i;var o=new a;if(19==e.O?(o.s=1,(541==e.L||573==e.L)&&++o.s):88==e.O&&(o.s=1,576==e.L&&++o.s),!o.p())return i;var u=e.j(330)+e.j(331)+e.j(332);return i=o.multiply(u)},t.Et=function(e){var t=new a,r=new a;return 6==e.O&&(++r.s,++r.u),149==e.L||591==e.L||592==e.L?(r.s+=2,r.u+=2):150==e.L?(++r.s,++r.u):151==e.L?(++r.s,++r.u,++r.l):152==e.L?(r.s+=2,++r.u):541==e.L?(++r.s,r.u+=2):573==e.L&&(r.s+=2,r.u+=2,++r.l),r.p()?t=r.multiply(1):t},t.Y=function(e){var t=new a,r=new a;return 149==e.L||591==e.L||592==e.L?(++r.s,++r.u):150==e.L?++r.u:151==e.L?(++r.u,++r.l):152==e.L&&++r.s,r.p()?t=r.multiply(1):t},t.re=function(e){var t=new a,r=!1,n=new a;if(554==e.L||646==e.L?(r=!0,++n.s,n.g+=2):553==e.L&&(r=!0,++n.s,++n.g),0==r)return t;var i=e.j(69);return t.add(n.multiply(i)),t},t.ht=function(e){var t=new a,r=new a;if(554==e.L||646==e.L?(r.s=2,r.g=3,r.l=1):553==e.L&&(r.s=1,r.g=2,r.l=1),!r.p())return t;var n=e.j(324)+e.j(325);return t=r.multiply(n)},t.pt=function(e){var t=new a,r=new a;if(646==e.L?(r.s=3,r.g=5,r.l=3):554==e.L?(r.s=3,r.g=4,r.l=2):553==e.L&&(r.s=1,r.g=3,r.l=1),!r.p())return t;var n=e.j(326);return t=r.multiply(n)},t.vt=function(e){var t=new a,r=new a;if(646==e.L?(r.s=5,r.g=6,r.l=4):554==e.L?(r.s=4,r.g=5,r.l=2):553==e.L&&(r.s=2,r.g=4,r.l=1),!r.p())return t;var n=e.j(327);return t=r.multiply(n)},t.Ft=function(e){var t=new a,r=new a;if(554!=e.L&&553!=e.L||(r.s=5,r.u=2,r.l=2,r.g=1),!r.p())return t;var n=e.j(322);return t=r.multiply(n)},t.Pt=function(e){var t=new a,r=new a;if(554!=e.L&&553!=e.L||(r.s=6,r.u=3,r.l=3,r.g=2),!r.p())return t;var n=e.j(323);return t=r.multiply(n)},t.gt=function(e){var t=new a,r=new a;if(554!=e.L&&553!=e.L||(r.s=7,r.u=3,r.l=2),!r.p())return t;var n=e.j(319);return t=r.multiply(n)},t.kt=function(e){var t=new a,r=new a;if(277==e.L||278==e.L?(r.u=1,r.l=1):594!=e.L&&599!=e.L&&610!=e.L&&646!=e.L&&698!=e.L||(r.u=2,r.l=1),!r.p())return t;var n=e.j(335);return t=r.multiply(n)},t.Tt=function(e){var t=new a,r=new a;if(277==e.L||278==e.L?(r.s=1,r.u=1,r.l=1):594!=e.L&&599!=e.L&&610!=e.L&&646!=e.L&&698!=e.L||(r.s=1,r.u=2,r.l=1),!r.p())return t;var n=e.j(336);return t=r.multiply(n)},t.At=function(e){var t=new a,r=new a;if(277==e.L||278==e.L?(r.s=1,r.u=1,r.l=1):594!=e.L&&599!=e.L&&610!=e.L&&646!=e.L&&698!=e.L||(r.s=2,r.u=2,r.l=1),!r.p())return t;var n=e.j(337);return t=r.multiply(n)},t.It=function(e){var t=new a,r=new a;if(277==e.L||278==e.L?(r.s=1,r.u=1,r.l=2):594==e.L||646==e.L||698==e.L?(r.s=1,r.u=2,r.l=3):599!=e.L&&610!=e.L||(r.s=4,r.u=3,r.l=4),!r.p())return t;var n=e.j(338);return t=r.multiply(n)},t.Lt=function(e){var t=new a,r=new a;if(277==e.L||278==e.L?(r.s=1,r.u=2,r.l=2):594==e.L||646==e.L||698==e.L?(r.s=1,r.u=3,r.l=4):599!=e.L&&610!=e.L||(r.s=6,r.u=4,r.l=5),!r.p())return t;var n=e.j(339);return t=r.multiply(n)},t.U=function(e){var t=new a,r=new a;if(277==e.L||278==e.L||156==e.L?r.s=1:594==e.L||646==e.L||698==e.L?(r.s=1,r.l=1):599!=e.L&&610!=e.L||(r.s=2,r.l=1),!r.p())return t;var n=e.j(18)+e.j(52);return t=r.multiply(n)},t.Dt=function(e){var t=new a,r=new a;if(277==e.L||278==e.L||461==e.L||466==e.L||462==e.L||467==e.L?r.s=1:594==e.L||646==e.L||698==e.L?(r.s=2,r.u=1,r.l=1):599!=e.L&&610!=e.L||(r.s=3,r.u=2,r.l=2),!r.p())return t;var n=e.j(342);return t=r.multiply(n)},t.Ot=function(e){var t=new a,r=new a;if(277==e.L||278==e.L?r.s=2:461==e.L||466==e.L||462==e.L||467==e.L?r.s=1:594==e.L||646==e.L||698==e.L?(r.s=3,r.u=2,r.l=1):599!=e.L&&610!=e.L||(r.s=5,r.u=3,r.l=3),!r.p())return t;var n=e.j(343);return t=r.multiply(n)},t.jt=function(e){var t=new a,r=new a;if(599==e.L||610==e.L?r.s=3:555==e.L||560==e.L?(r.s=2,r.g=2):318==e.L?(r.s=4,r.g=1):282==e.L&&(r.s=2,r.g=1),!r.p())return t;var n=e.j(344);return t=r.multiply(n)},t.Mt=function(e){var t=new a,r=new a;if(599==e.L||610==e.L?(r.s=3,r.l=1):555==e.L||560==e.L?(r.s=3,r.g=2,r.l=2):318==e.L?(r.s=5,r.g=1,r.l=2):282==e.L&&(r.s=3,r.g=1,r.l=1),!r.p())return t;var n=e.j(345);return t=r.multiply(n)},t.Yt=function(e){var t=new a,r=!1,n=new a;if("しょうかく"==e.q?(n.s+=3,r=!0,t.o+=3,t.l+=3):"ずいかく"==e.q?(n.s+=2,r=!0,t.o+=3,t.l+=4):"たいほう"==e.q?(n.s+=2,r=!0,t.o+=3,t.l+=2):"じゅんよう"!=e.q&&"ひよう"!=e.q||(++n.s,r=!0,t.o+=2,t.l+=2),108==e.L||109==e.L?(++n.s,r=!0,++t.o):291==e.L||292==e.L?(++n.s,++n.g,r=!0,++t.o):296==e.L||297==e.L?(++n.s,++n.g,r=!0,++t.o,++t.l):116==e.L||74==e.L?(++n.s,++n.g,r=!0):117==e.L||282==e.L||185==e.L?(++n.s,n.g+=2,r=!0,++t.o,++t.l):560==e.L||555==e.L||318==e.L?(++n.s,n.g+=3,r=!0,++t.o,t.l+=2):508!=e.L&&509!=e.L||(++n.s,n.g+=2,r=!0,t.o+=2,t.l+=3),0==r)return t;var i=e.j(374);return t.add(n.multiply(i)),t},t.Wt=function(e){var t=new a,r=!1,n=new a;if("しょうかく"==e.q?(n.s+=2,r=!0,t.o+=2,t.l+=2):"ずいかく"==e.q?(++n.s,r=!0,t.o+=2,t.l+=3):"たいほう"==e.q?(++n.s,r=!0,t.o+=2,t.l+=2):"じゅんよう"!=e.q&&"ひよう"!=e.q||(++n.s,r=!0,++t.o,++t.l),108==e.L||109==e.L?(++n.s,r=!0):291==e.L||292==e.L?(++n.s,r=!0,++t.o):296==e.L||297==e.L?(++n.s,r=!0,++t.o,++t.l):116==e.L||74==e.L?(++n.g,r=!0):117==e.L||282==e.L||185==e.L?(++n.s,++n.g,r=!0,++t.o):560==e.L||555==e.L||318==e.L?(++n.s,n.g+=2,r=!0,++t.o,++t.l):508!=e.L&&509!=e.L||(++n.s,r=!0,t.o+=2,t.l+=2),0==r)return t;var i=e.j(373);return t.add(n.multiply(i)),t},t.Vt=function(e){var t=new a,r=!1,n=new a;if("しょうかく"==e.q||"ずいかく"==e.q||"たいほう"==e.q?(++n.s,r=!0,++t.o):"じゅんよう"!=e.q&&"ひよう"!=e.q||(++n.s,r=!0),108==e.L||109==e.L||291==e.L||292==e.L||296==e.L||297==e.L?(++n.s,r=!0):116==e.L||74==e.L||117==e.L||282==e.L||185==e.L?(++n.g,r=!0):560==e.L||555==e.L||318==e.L?(++n.g,r=!0,++t.o):508!=e.L&&509!=e.L||(++n.s,r=!0),0==r)return t;var i=e.j(372);return t.add(n.multiply(i)),t},t.Zt=function(e){var t=new a,r=!1,n=new a;if(69!=e.O&&83!=e.O&&84!=e.O&&105!=e.O||(n.u+=3,n.s+=3,n.l+=3,n.g+=3,r=!0),"かが"==e.q&&(++n.u,++n.s,++n.l,++n.g,r=!0),0==r)return t;var i=e.j(375);return t=n.multiply(i)},t.bt=function(e){var t=new a,r=new a;if("ガリバルディ"!=e.q&&"アブルッツィ"!=e.q||(r.s=1,r.u=1,r.l=1),!r.p())return t;var n=e.j(340);return t=r.multiply(n)},t.qt=function(e){var t=new a,r=new a;if("ガリバルディ"==e.q||"アブルッツィ"==e.q?(r.s=2,r.u=1,r.l=1):"ゴトランド"==e.q&&(r.s=1,r.u=1,r.l=1),!r.p())return t;var n=e.j(341);return t=r.multiply(n)},t.V=function(e){var t=new a,r=new a;if("ほうしょう"==e.q&&(r.s=2,r.l=2,r.g=2,r.u=2),75!=e.O&&76!=e.O||(r.s=2,r.g=3),7==e.D&&(++r.u,++r.l),!r.p())return t;var n=e.j(19);return t=r.multiply(n)},t.Ie=function(e){var t=new a,r=new a;if("ほうしょう"==e.q&&(r.s=3,r.l=4,r.g=4,r.u=3),75!=e.O&&76!=e.O||(r.s=2,r.g=5,r.u=1,r.l=1),7==e.D&&(r.g+=2,++r.u,++r.l),!r.p())return t;var n=e.j(228);return t=r.multiply(n)},t.Jt=function(e){var t=new a,r=!1,n=new a;if("ゴトランド"==e.q&&(n.s=4,n.g=3,n.l=2,n.S=3,r=!0,630==e.L&&(t.s+=2,t.o+=2,++t.l,++t.S)),70==e.O?(n.s=2,n.g=3,n.l=1,n.S=2,r=!0):72==e.O||62==e.O?(++n.s,n.g+=2,++n.l,n.S+=2,r=!0):67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O||(n.s+=2,n.g+=2,n.l+=2,n.S+=2,r=!0),0==r)return t;var i=e.j(368);return t.add(n.multiply(i)),t},t.Ht=function(e){var t=new a,r=!1,n=new a;if("ゴトランド"==e.q&&(n.s+=2,++n.g,++n.l,++n.S,r=!0),70==e.O?(++n.s,++n.g,++n.l,++n.S,r=!0):72==e.O||62==e.O?(++n.s,++n.l,++n.S,r=!0):67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O||(n.s+=2,n.l+=2,n.S+=2,r=!0),0==r)return t;var i=e.j(367);return t.add(n.multiply(i)),t},t.an=function(e){var t=new a,r=!1,n=new a;if(594==e.L||599==e.L?(r=!0,n.s+=2,n.l+=2):698==e.L||610==e.L?(r=!0,n.s+=3,n.l+=2):646==e.L&&(r=!0,n.s+=4,n.g+=4,n.l+=3,e.M(25)>0&&(t.s+=3,t.g+=6),e.j(326)+e.j(327)>0&&(t.s+=5,t.g+=4)),65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(r=!0,n.s+=2,n.g+=3,++n.l),0==r)return t;var i=e.j(389);return t.add(n.multiply(i)),t},t.Kt=function(e){var t=new a,r=!1,n=new a;if("ゴトランド"==e.q&&(n.s=5,n.g=4,n.l=4,n.S=3,r=!0,630==e.L&&(t.s+=3,t.o+=3,t.l+=2,t.S+=2)),70==e.O?(n.s+=3,n.g+=3,n.l+=2,n.S+=3,r=!0):72==e.O||62==e.O?(n.s+=2,n.g+=2,++n.l,n.S+=2,r=!0):67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O||(n.s+=2,n.g+=2,n.l+=2,n.S+=2,r=!0),0==r)return t;var i=e.j(369);return t.add(n.multiply(i)),t},t.Qt=function(e){var t=new a,r=!1,n=new a;if("ゴトランド"==e.q&&(n.s=1,n.g=3,n.l=1,n.S=2,r=!0),70==e.O?(++n.s,n.g+=3,++n.l,++n.S,r=!0):72==e.O||62==e.O?(++n.s,n.g+=2,++n.l,++n.S,r=!0):67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O||(n.s+=2,n.g+=3,n.l+=2,n.S+=2,r=!0,"ウォースパイト"==e.q&&(t.s+=4,++t.l,++t.S)),0==r)return t;var i=e.j(370);return t.add(n.multiply(i)),t},t.Ut=function(e){var t=new a,r=!1,n=new a;if("ゴトランド"==e.q&&(n.s=4,n.g=2,n.l=3,n.S=6,r=!0,630==e.L&&(t.s+=2,t.l+=2,t.S+=3)),70==e.O?(n.s+=2,++n.g,n.l+=2,n.S+=4,r=!0):79==e.O?(n.s+=2,++n.l,n.S+=3,r=!0):67!=e.O&&78!=e.O&&82!=e.O&&88!=e.O||(n.s+=3,++n.g,n.l+=2,n.S+=3,r=!0,88==e.O&&(t.s+=3,t.l+=2,t.S+=2)),0==r)return t;var i=e.j(371);return t.add(n.multiply(i)),t},t.Rt=function(e){var t=new a,r=new a;if(95==e.O?r.s=2:9==e.O&&(r.s=1),!r.p())return t;var n=e.j(356)+e.j(357);return t=r.multiply(n)},t.Ct=function(e){var t=new a,r=new a;if("パース"==e.q?(r.s=2,r.u=2,r.l=1):"ゆうばり"==e.q&&(r.s=1,r.u=1,r.l=1),622!=e.L&&623!=e.L&&624!=e.L||(++r.s,++r.u),!r.p())return t;var n=e.j(359);return t=r.multiply(n)},t.Nt=function(e){var t=new a,r=new a;if("デ・ロイテル"==e.q?(r.s=2,r.u=2,r.l=1):"ゴトランド"==e.q&&(r.s=2,r.u=1,r.l=1),41==e.O&&(r.s=1,r.u=1),!r.p())return t;var n=e.j(360)+e.j(361);return t=r.multiply(n)},t.Xt=function(e){var t=new a,r=new a,n=!1;if(99==e.O?(r.s=1,r.u=2,r.l=1,n=!0):34==e.O||21==e.O?(r.s=-3,r.u=-3,r.l=-8,n=!0):4==e.O||20==e.O||16==e.O?(r.s=-3,r.u=-2,r.l=-6,n=!0):89==e.O||56==e.O?(r.s=-2,r.u=-1,r.l=-4,n=!0):52!=e.O&&41!=e.O&&98!=e.O||(r.u=-1,r.l=-2,n=!0),65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(++r.u,++r.l,n=!0),0==n)return t;var i=e.j(362)+e.j(363);return t=r.multiply(i)},t.zt=function(e){new a;var t=new a;623==e.L||586==e.L||119==e.L||118==e.L?(t.o=1,t.l=-2,119==e.L?++t.o:623==e.L&&(++t.s,t.o+=3)):(t.s=-1,t.l=-7);var r=e.j(364);return t.multiply(r)},t.Ge=function(e){var t=new a,r=new a,n=!1;if(488!=e.L&&141!=e.L&&160!=e.L&&624!=e.L||(r.g=1,r.l=1,n=!0),0==n)return t;var i=e.j(287);return t=r.multiply(i)},t.He=function(e){var t=new a,r=new a,n=!1;if(488==e.L||141==e.L||160==e.L?(r.g=2,r.l=1,n=!0):624==e.L&&(r.s=1,r.g=3,r.l=2,n=!0),0==n)return t;var i=e.j(288);return t=r.multiply(i)},t.pe=function(e){var t=new a,r=new a,n=!1;return 488==e.L||141==e.L||160==e.L||622==e.L||623==e.L?(r.g=1,r.l=3,n=!0):624==e.L&&(r.g=3,r.l=5,n=!0),54==e.O&&(r.g=1,r.l=2,n=!0),0==n||(t=r.multiply(1)),t},t.Gt=function(e){var t=new a,r=new a,n=!1;return 37!=e.O&&19!=e.O&&2!=e.O&&26!=e.O&&6!=e.O||(++r.s,n=!0),136!=e.L&&148!=e.L&&546!=e.L&&541!=e.L&&573!=e.L||(++r.s,n=!0),591!=e.L&&592!=e.L||(r.s+=2,n=!0),0==n?t:t=r.multiply(1)},t.nn=function(e){var t=0,r=0,n=0,i=new a,o=new a,u=!1;1==e.D?(o.u+=2,++o.s,u=!0):21!=e.D&&16!=e.D||(++o.u,++o.s,u=!0),66==e.O||28==e.O?(++o.s,o.u+=2,u=!0):101==e.O&&(o.u+=2,++o.s,i.u+=2,i.s+=2,u=!0),"ゆら"==e.q||"なか"==e.q||"きぬ"==e.q||"いすず"==e.q?(o.s+=2,u=!0):"おおい"!=e.q&&"きたかみ"!=e.q||(o.u+=2,o.s+=2,u=!0),"ゆら"!=e.q&&"なか"!=e.q&&"きぬ"!=e.q&&"いすず"!=e.q&&"ゆうばり"!=e.q||(++o.g,u=!0),"てんりゅう"!=e.q&&"たつた"!=e.q&&"ゆうばり"!=e.q||(++o.s,u=!0),488==e.L?(o.u+=4,u=!0):220==e.L?(o.u+=3,u=!0):23==e.L?(o.u+=2,u=!0):160==e.L||487==e.L||141==e.L?(o.u+=3,u=!0):224==e.L||289==e.L||219==e.L?(o.u+=2,u=!0):56!=e.L&&113!=e.L&&22!=e.L||(o.u+=2,u=!0),488!=e.L&&160!=e.L&&487!=e.L&&141!=e.L||(++o.g,u=!0),477!=e.L&&478!=e.L&&624!=e.L||(o.g+=2,u=!0),477!=e.L&&478!=e.L&&624!=e.L&&622!=e.L||(o.u+=2,u=!0),u&&(t=e.j(379),i.add(o.multiply(t)));var s=new a,c=!1;if(16==e.D||3==e.D||4==e.D||21==e.D?(++s.s,s.l+=2,c=!0):1==e.D&&(++s.s,s.l+=4,c=!0),66==e.O||28==e.O||21==e.O||34==e.O?(s.s+=2,s.l+=3,c=!0):101==e.O&&(s.s+=4,s.l+=3,c=!0),488==e.L?(s.s+=2,s.l+=2,c=!0):487!=e.L&&160!=e.L&&141!=e.L&&118!=e.L&&119!=e.L||(++s.s,++s.l,c=!0),c){r=0;for(var l=0,f=e.k;l<f.length;l++){var p=f[l];(12==(n=p.m)||13==n)&&p.xn>=5&&++r}r>0&&i.add(s)}return i},t.cn=function(e){var t=0,r=0,n=0,i=new a,o=new a,u=!1;21!=e.D&&16!=e.D||(o.u+=2,++o.s,u=!0),101==e.O&&(o.u+=2,++o.s,u=!0,i.u+=2,i.s+=2),"ゆら"==e.q||"なか"==e.q||"きぬ"==e.q||"いすず"==e.q?(o.s+=2,u=!0):"おおい"!=e.q&&"きたかみ"!=e.q||(o.u+=2,o.s+=3,u=!0),"ゆら"!=e.q&&"なか"!=e.q&&"きぬ"!=e.q&&"いすず"!=e.q&&"ゆうばり"!=e.q||(++o.g,u=!0),"てんりゅう"!=e.q&&"たつた"!=e.q&&"ゆうばり"!=e.q||(++o.s,u=!0),488==e.L?(o.u+=4,u=!0):220==e.L?(o.u+=3,u=!0):23==e.L?(o.u+=2,u=!0):160==e.L||487==e.L||141==e.L?(o.u+=3,u=!0):224==e.L||289==e.L||219==e.L?(o.u+=2,u=!0):56!=e.L&&113!=e.L&&22!=e.L||(o.u+=2,u=!0),488!=e.L&&160!=e.L&&487!=e.L&&141!=e.L||(++o.g,u=!0),477!=e.L&&478!=e.L&&624!=e.L||(o.g+=2,u=!0),477!=e.L&&478!=e.L&&624!=e.L&&622!=e.L||(o.u+=2,u=!0),u&&(t=e.j(380),i.add(o.multiply(t)));var s=new a,c=!1;if(16!=e.D&&3!=e.D&&4!=e.D&&21!=e.D||(s.s+=2,++s.l,c=!0),101==e.O&&(s.s+=4,s.l+=3,c=!0),488!=e.L&&487!=e.L&&160!=e.L&&141!=e.L&&118!=e.L&&119!=e.L||(++s.s,s.l+=2,c=!0),c){r=0;for(var l=0,f=e.k;l<f.length;l++){var p=f[l];(12==(n=p.m)||13==n)&&p.xn>=5&&++r}r>0&&i.add(s)}return i},t.sn=function(e){var t,r=0,n=new a,i=new a,o=!1,u=0;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(++i.s,102==e.O&&++i.s,o=!0,u=1),0==o)return n;if(o&&(r=e.j(381),n.add(i.multiply(r))),0==u)return n;e.R(381);for(var s=0,c=0,l=null!==(t=e.T[381])&&void 0!==t?t:[];c<l.length;c++){l[c].level>=6&&s++}return 1==u&&(n.s+=1*s),n},t.in=function(e){var t=0,r=new a,n=new a,i=!1,o=0;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(++n.s,102==e.O?(++n.s,++n.i):93==e.O&&++n.s,i=!0,o=1),8==e.D&&(++n.s,i=!0),0==i)return r;var u=e.j(385);if(i&&r.add(n.multiply(u)),0==o)return r;var s=e.R(385),c=0;for(t=0;t<=10;)t>=6&&(c+=s[t]),t++;return 1==o&&(r.s+=1*c,r.i+=1*s[10]),r},t.ln=function(e){var t=0,r=new a,n=new a,i=!1,o=0;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(++n.s,i=!0,o=1),0==i)return r;var u=e.j(386);if(i&&r.add(n.multiply(u)),0==o)return r;var s=e.R(386),c=0,l=0;for(t=0;t<=10;)t>=2&&(c+=s[t]),t>=7&&(l+=s[t]),t++;return 1==o&&(r.s+=1*c,r.s+=1*l),r},t.fn=function(e){var t=0,r=new a,n=new a,i=!1,o=0;if(65!=e.O&&69!=e.O&&83!=e.O&&87!=e.O&&84!=e.O&&91!=e.O&&93!=e.O&&95!=e.O&&99!=e.O&&102!=e.O&&105!=e.O&&106!=e.O||(++n.s,i=!0,o=1),0==i)return r;var u=e.j(387);if(i&&r.add(n.multiply(u)),0==o)return r;var s=e.R(387),c=0,l=0;for(t=0;t<=10;)t>=2&&(c+=s[t]),t>=7&&(l+=s[t]),t++;return 1==o&&(r.s+=1*c,r.s+=1*l),r},t.rn=function(e){var t=0,r=new a,n=new a,i=!1,o=!1,u=new a,s=new a;if(1==e.D&&(n.u+=2,n.l+=2,++n.g,i=!0,u.s+=2,u.l+=3,s.u+=2,s.l+=3,o=!0),66!=e.O&&28!=e.O&&101!=e.O||(n.u+=2,++n.l,i=!0,++u.s,u.l+=2,s.u+=2,s.l+=2,o=!0),"ゆら"!=e.q&&"なか"!=e.q&&"きぬ"!=e.q||(++n.u,i=!0),488==e.L||220==e.L?(++n.l,i=!0,488==e.L&&(++u.s,++u.l,s.u+=2,s.l+=2,o=!0)):160==e.L||224==e.L?(++n.l,i=!0,160==e.L&&(++u.s,++u.l,s.u+=2,s.l+=2,o=!0)):487!=e.L&&289!=e.L||(++n.l,i=!0,487==e.L&&(++u.s,++u.l,s.u+=2,s.l+=2,o=!0)),0==i)return r;var c=e.j(382);if(r.add(n.multiply(c)),0==o)return r;for(var l=0,f=0,p=0,h=e.k;p<h.length;p++){var d=h[p];12!=(t=d.m)&&13!=t||(d.xn>=5&&++l,d.En>=2&&++f)}return l>0&&r.add(u),f>0&&r.add(s),r},t.on=function(e){var t=new a,r=new a,n=!1;if(44==e.O&&(r.o+=2,n=!0),"い58"==e.q&&(++r.o,n=!0),636==e.L?(r.o+=3,n=!0):607==e.L&&(r.o+=4,n=!0),0==n)return t;var i=e.j(383);return t.add(r.multiply(i)),t},t.un=function(e){var t=new a,r=new a,n=!1;44==e.O&&(r.l+=3,n=!0),"い58"==e.q&&(r.l+=2,n=!0),636==e.L?(r.l+=3,n=!0):607==e.L&&(r.l+=4,n=!0);var i=e.j(384);n&&t.add(r.multiply(i));var o=i,u=e.j(213),s=e.j(214),c=e.j(383);return o>0&&u+s+c>0&&(t.o+=3,t.l+=2),t},t.Ae=function(e){var t=0,r=new a;if(591!=e.L&&592!=e.L)return r;++r.i,++r.o;var n=e.R(204),i=0;for(t=0;t<=10;)t>=7&&(i+=n[t]),t++;return i>0&&++r.i,n[10]>0&&++r.o,r},t.ie=function(e){var t=0,r=new a;if(591!=e.L&&592!=e.L)return r;r.l+=2,++r.o;var n=e.R(87),i=0,o=0;for(t=0;t<=10;)t>=6&&(i+=n[t]),t>=8&&(o+=n[t]),t++;return i>0&&++r.l,o>0&&++r.o,n[10]>0&&++r.s,r},t}(Object),c=function(){function e(e){this.wn=e}return Object.defineProperty(e.prototype,"_",{get:function(){return this.wn.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gn",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Sn",{get:function(){return this.wn.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.wn.star},enumerable:!0,configurable:!0}),e.prototype.Fn=function(){return!1},Object.defineProperty(e.prototype,"Pn",{get:function(){return this.wn.proficiency.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hn",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"m",{get:function(){var e=this.wn.categoryId;return 38===e?3:93===e?13:94===e?9:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pn",{get:function(){return 128==this._?38:142==this._?43:281==this._?38:this.m},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vn",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dn",{get:function(){return this.wn.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_n",{get:function(){return this.wn.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yn",{get:function(){return this.wn.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mn",{get:function(){return this.wn.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"En",{get:function(){return this.wn.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kn",{get:function(){return this.wn.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Tn",{get:function(){return this.wn.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"An",{get:function(){return this.wn.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"In",{get:function(){return this.wn.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xn",{get:function(){return this.wn.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Ln",{get:function(){return this.wn.armor},enumerable:!0,configurable:!0}),e.prototype.bn=function(){return this.wn.radius},e}();t.createEquipmentBonus=function(e){var t=e.gears.map((function(e){return e&&new c(e)})).filter((function(e){return Boolean(e)})),r=s.B(e,t);return{firepower:r.s,torpedo:r.o,antiAir:r.u,armor:r.i,evasion:r.l,asw:r.g,los:r.S,accuracy:r.P,range:r.h}}},553:function(e,t,r){"use strict";var n=r(49),i=r(240),a=function(){function e(e){var t=this;this.ship=e,this.getCarrierShellingFm=function(e){void 0===e&&(e=!1);var r=t,n=r.ship;if("Shelling"!==r.type){var i=e?0:n.totalEquipmentStats("torpedo"),a=e?n.totalEquipmentStats((function(e){return e.is("AntiInstallationBomber")?e.bombing:0})):n.totalEquipmentStats("bombing"),o=Math.floor(Math.floor(1.3*a)+i)+15;return function(e){return 25+Math.floor(1.5*(e+o))}}},this.calcPower=function(e){var r=t.ship,i=e.formationModifier,a=e.engagementModifier,o=e.isCritical,u=e.isAntiInstallation,s=4+r.stats.firepower,c={a14:i*a*r.health.shellingPowerModifier},l=t.getCarrierShellingFm(u),f=o?Object(n.c)():void 0;return Object(n.b)({basic:s,cap:150,modifiers:c,fm14prev:l,fm11next:f})},this.calcAccuracy=function(e){var r=t.accuracyShipFactors,n=r.shipAccuracy,i=r.equipmentAccuracy,a=r.moraleModifier,o=e.formationModifier,u=Math.floor(64+n+i);return Math.floor(u*o*a)}}return Object.defineProperty(e.prototype,"type",{get:function(){return Object(i.b)(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracyShipFactors",{get:function(){var e=this.ship;return{shipAccuracy:e.shipAccuracy,equipmentAccuracy:e.totalEquipmentStats("accuracy"),moraleModifier:e.morale.getAccuracyModifier("shelling")}},enumerable:!0,configurable:!0}),e}();t.a=a},554:function(e,t,r){"use strict";var n=r(49),i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e){var t=this;this.state=e,this.calcPower=function(e){return function(e){var t=e.torpedo,r=e.improvementModifier,a=e.healthModifier,o=e.fleetFactor,u=e.formationModifier,s=e.engagementModifier,c=e.isCritical,l=e.optionalModifiers,f=u*s*a,p=Object(n.a)({a14:f},l),h=t+r+o,d=Object(n.b)({basic:h,cap:150,modifiers:p}),g=d.postcap;if(!c)return i(i({},d),{preCritical:g});var m=Math.floor(1.5*d.postcap);return i(i({},d),{preCritical:g,postcap:m})}(i(i({},t.state.power),e))},this.calcAccuracy=function(e){return r=i(i({},t.state.accuracy),e),n=r.shipAccuracy,a=r.equipmentAccuracy,o=r.improvementModifier,u=r.powerModifier,s=r.innateTorpedoAccuracy,c=r.formationModifier,l=r.moraleModifier,f=85+n+a+o+u+s,Math.floor(f*c*l);var r,n,a,o,u,s,c,l,f}};t.a=a,a.fromShip=function(e){var t=e.shipAccuracy,r={power:{torpedo:e.stats.torpedo,improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.torpedoPowerModifier})),healthModifier:e.health.torpedoPowerModifier},accuracy:{shipAccuracy:t,equipmentAccuracy:e.totalEquipmentStats("accuracy"),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.torpedoAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("torpedo")}};return new a(r)}},555:function(e,t,r){"use strict";var n=r(308),i=r(49),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e){var t=e.hasGear,r=1,n=1;return(t("Sonar")||t("LargeSonar"))&&t("DepthCharge")&&(r=1.15),t("AdditionalDepthCharge")&&t("DepthChargeProjector")&&(n=t("Sonar")?1.25:1.1),r*n},u=function(e){var t=e.shipType.is("CoastalDefenseShip")?1:0;return e.totalEquipmentStats((function(e){return e.is("AdditionalDepthCharge")?Math.sqrt(e.asw-2)+t:0}))},s=function(){function e(e){var t=this;this.state=e,this.calcBasicPower=function(e){void 0===e&&(e=0);var r=t.state.power,n=r.nakedAsw,i=r.equipmentAsw,a=r.improvementModifier,o=r.typeConstant;return 2*Math.sqrt(n)+1.5*i+a+o},this.calcPower=function(e){var r,o=t.state.power.proficiencyModifier;return e.isCritical&&(r=Object(i.c)(o)),n.a.createPower(a(a(a({},t.state.power),e),{fm11next:r}))},this.calcAccuracy=function(e){return n.a.calcAccuracy(a(a({},t.state.accuracy),e))}}return Object.defineProperty(e.prototype,"armorPenetration",{get:function(){return this.state.armorPenetration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.state.type},enumerable:!0,configurable:!0}),e}();t.a=s,s.fromShip=function(e,t){var r=function(e,t){var r=e.shipAccuracy,n=function(e,t){return void 0===t&&(t=!1),!t&&function(e){return!(!e.shipType.any("AviationCruiser","AviationBattleship","SeaplaneTender","LightAircraftCarrier","AmphibiousAssaultShip")&&!e.shipClass.is("RevisedKazahayaClass"))&&e.planes.some((function(e){return e.slotSize>0&&e.is("AswAircraft")}))}(e)?"AircraftCarrier":function(e){return 0!==e.nakedStats.asw&&!e.shipClass.any("FusouClass","IseClass","R1")}(e)?"DepthCharge":"None"}(e,"Night"===t),i=e.totalEquipmentStats((function(e){return e.is("Sonar")?2*e.asw:e.is("AdditionalDepthCharge")?e.asw:0})),a=1;return"AircraftCarrier"!==n||"Opening"===t||e.shipClass.is("RevisedKazahayaClass")||(a=e.getNormalProficiencyModifiers().power),{power:{nakedAsw:e.nakedStats.asw,equipmentAsw:e.totalEquipmentStats((function(e){return e.is("AswGear")?e.asw:0})),improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.aswPowerModifier})),typeConstant:"DepthCharge"===n?13:8,healthModifier:e.health.aswPowerModifier,synergyModifier:o(e),proficiencyModifier:a},accuracy:{shipAccuracy:r,aswEquipmentModifier:i,improvementModifier:e.totalEquipmentStats((function(e){return e.improvement.aswAccuracyModifier})),moraleModifier:e.morale.getAccuracyModifier("asw")},armorPenetration:u(e),type:n}}(e,t);return new s(r)}},556:function(e,t,r){"use strict";var n=r(560),i=r(49),a=function(e){var t=e.gearId;return 258===t||259===t},o=function(){function e(e){var t=this;this.ship=e,this.calcNightAerialAttackPower=function(e){var r=t,i=r.ship;return"NightAerialAttack"!==r.type?0:i.nakedStats.firepower+Object(n.a)(i.planes,(function(t){return t.calcNightAerialAttackPower(e)}))},this.calcBasicPower=function(e,r){var n=t,i=n.ship,a=n.type,o=i.stats.firepower,u=r?0:i.stats.torpedo,s=i.totalEquipmentStats((function(e){return e.improvement.nightAttackPowerModifier}));return"NightAerialAttack"===a?t.calcNightAerialAttackPower(r)+e:o+u+s+e},this.getCriticalFm=function(){if("NightAerialAttack"===t.type){var e=t.ship.getNormalProficiencyModifiers();return Object(i.c)(e.power)}return Object(i.c)()},this.calcPower=function(e){var r=e.nightContactModifier,n=e.formationModifier,a=e.specialAttack,o=e.isCritical,u=e.isAntiInstallation,s=t.calcBasicPower(r,u),c=t.ship.health.nightAttackPowerModifier,l=1,f=1;a&&(l=a.modifier.power,a.isDestroyerCutin&&(f=t.typeDModifier));var p=n*c*l*f,h=t.ship.getCruiserFitBonus(),d=Object(i.a)({a14:p,b14:h},e.modifiers),g=o?t.getCriticalFm():void 0;return Object(i.b)({basic:s,cap:300,modifiers:d,fm11next:g})},this.calcAccuracy=function(e){var r=e.starshellModifier,n=e.contactModifier,i=e.searchlightModifier,a=e.formationModifier,o=e.specialAttackModifier,u=void 0===o?1:o,s=e.fitGunBonus,c=void 0===s?0:s,l=t.ship,f=l.shipAccuracy,p=l.shipType,h=l.hasGear,d=l.totalEquipmentStats("accuracy"),g=l.totalEquipmentStats((function(e){return e.improvement.nightAttackAccuracyModifier})),m=l.morale.getAccuracyModifier("night"),b=0;p.isHeavyCruiserClass&&(h(6)&&(b=10),(h(90)||h(50))&&(b=15));var y=Math.floor((69+r)*n+f+d+g);return Math.floor(y*a*m*u+i+b+c)}}return Object.defineProperty(e.prototype,"type",{get:function(){return function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.shipId)&&!e.hasGear(a))&&e.planes.some((function(e){return e.slotSize>0&&e.isNightPlane})))}(this.ship)?"NightAerialAttack":"NightAttack"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeDModifier",{get:function(){var e=this.ship,t=e.countGear(267),r=e.countGear(366),n=t+r,i=1;return 0===n||(1===n&&(i=1.25),n>=2&&(i=1.4),r&&(i*=1.05)),i},enumerable:!0,configurable:!0}),e}();t.a=o},557:function(e,t,r){"use strict";var n=r(37),i=r(4051),a=r(3417),o=function(e){if(Array.isArray(e)){var t=e.map(o);return Object(i.a)(t,(function(e){return e&&e.id}))}var r=e,n=Object(a.a)(100);return l.getPossibleAntiAirCutins(r).find((function(e){return e.isSpecialAaci()?e.probability>Object(a.a)(100):e.probability>n}))},u=o,s=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,i++)n[i]=a[o];return n},c=function(){function e(e,t,r,n){var i=this;this.id=e,this.minimumBonus=t,this.fixedAirDefenseModifier=r,this.probability=n,this.isSpecialAaci=function(){return[34,35,39,40,41].includes(i.id)}}return e.fromId=function(e){return this.all.find((function(t){return t.id===e}))},e}(),l=t.a=c;c.all=[[1,8,1.7,65],[2,7,1.7,58],[3,5,1.6,50],[4,7,1.5,52],[5,5,1.5,55],[6,5,1.45,40],[7,4,1.35,45],[8,5,1.4,50],[9,3,1.3,40],[10,9,1.65,60],[11,7,1.5,55],[12,4,1.25,45],[13,5,1.35,35],[14,5,1.45,63],[15,4,1.3,58],[16,5,1.4,60],[17,3,1.25,55],[18,3,1.2,60],[19,6,1.45,55],[20,4,1.25,70],[21,6,1.45,60],[22,3,1.2,63],[23,2,1.05,80],[24,4,1.25,60],[25,8,1.55,60],[26,7,1.4,60],[28,5,1.4,53],[29,6,1.55,58],[30,4,1.3,42],[31,3,1.25,50],[32,4,1.2,32],[33,4,1.35,42],[34,8,1.6,60],[35,7,1.55,53],[36,7,1.55,59],[37,5,1.45,38],[39,11,1.7,60],[40,11,1.7,60],[41,10,1.65,60]].map((function(e){return new(c.bind.apply(c,s([void 0],e)))})),c.try=u,c.getPossibleAntiAirCutins=function(e){return function(e){var t,r=e.shipId,n=e.hasGear;!function(e){e[e.MayaKai2=428]="MayaKai2",e[e.IsuzuKai2=141]="IsuzuKai2",e[e.KasumiKai2B=470]="KasumiKai2B",e[e.KinuKai2=487]="KinuKai2",e[e.YuraKai2=488]="YuraKai2",e[e.MusashiKai=148]="MusashiKai",e[e.MusashiKai2=546]="MusashiKai2",e[e.IsokazeBKai=557]="IsokazeBKai",e[e.HamakazeBKai=558]="HamakazeBKai",e[e.SatsukiKai2=418]="SatsukiKai2",e[e.FumizukiKai2=548]="FumizukiKai2",e[e.Uit25=539]="Uit25",e[e.I504=530]="I504",e[e.TatsutaKai2=478]="TatsutaKai2"}(t||(t={}));var i=function(t){return e.masterId===t},a=function(e){return e.is("HighAngleMount")},o=function(e){return a(e)&&e.antiAir>=8},u=function(e){return e.is("Radar")},s=function(e){return e.is("AirRadar")},c=function(e){return e.is("AntiAircraftGun")},l=function(e){return c(e)&&e.antiAir>=9},f=function(e){return c(e)&&e.antiAir>=3&&e.antiAir<9},p=function(e){return 274===e.gearId},h=function(e){return e.is("AntiAircraftShell")},d=function(e){return e.is("AntiAircraftFireDirector")},g=function(e){return e.category.any("LargeCaliberMainGun","LargeCaliberMainGun2")},m=function(t,r){return e.countGear(t)>=r},b=function(t){return e.hasGear(t)},y=[];if(e.shipClass.is("FletcherClass")){var v=e.countGear(313),O=e.countGear(284)+v,w=e.countGear(308);w>=2&&y.push(34),w>0&&O>0&&y.push(35),O>=2&&e.hasGear(307)&&y.push(36),v>=2&&y.push(37)}var A=e.countGear(363),j=e.countGear(362)+A;return e.shipClass.is("AtlantaClass")&&j>=2&&(A>=1&&y.push(39),e.hasGear(307)&&y.push(40),y.push(41)),e.shipClass.is("AkizukiClass")&&b(a)?(m(a,2)&&b(u)&&y.push(1),b(u)&&y.push(2),m(a,2)&&y.push(3)):(i(t.MayaKai2)&&b(a)&&b(l)&&(b(s)&&y.push(10),y.push(11)),i(t.IsuzuKai2)&&b(a)&&b(c)&&(b(s)&&y.push(14),y.push(15)),i(t.KasumiKai2B)&&b(a)&&b(c)&&(b(s)&&y.push(16),y.push(17)),622===r&&n("HighAngleMount")&&n("AntiAircraftGun")&&n("AirRadar")&&y.push(16),i(t.KinuKai2)&&b(l)&&b((function(e){return a(e)&&e.antiAir<8}))&&y.push(19),i(t.YuraKai2)&&b(a)&&b(s)&&y.push(21),e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")&&b(p)&&b(h)&&b(s)&&y.push(25),b(d)&&b(g)&&b(h)&&b(s)&&y.push(4),m(o,2)&&b(s)&&y.push(5),b(d)&&b(g)&&b(h)&&y.push(6),b(o)&&b(s)&&y.push(8),b(d)&&b(a)&&b(s)&&y.push(7),i(t.MusashiKai2)&&b((function(e){return 275===e.gearId}))&&b(u)&&y.push(26),(e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")||i(t.MusashiKai)||i(t.MusashiKai2))&&b(p)&&b(s)&&y.push(28),(i(t.IsokazeBKai)||i(t.HamakazeBKai))&&b(a)&&b(s)&&y.push(29),b(d)&&b(a)&&y.push(9),[579,630].includes(e.shipId)&&e.hasGear(a)&&e.hasGear((function(e){return e.is("AntiAircraftGun")&&e.antiAir>=4}))&&y.push(33),b(l)&&b(s)&&e.countGear((function(e){return e.is("AntiAircraftGun")&&e.antiAir>=3}))>=2&&y.push(12),b(o)&&b(l)&&b(s)&&y.push(13),i(t.SatsukiKai2)&&b(l)&&y.push(18),i(t.KinuKai2)&&b(l)&&y.push(20),i(t.FumizukiKai2)&&b(l)&&y.push(22),(i(t.Uit25)||i(t.I504))&&b(f)&&y.push(23),["龍田改二","天龍改二"].includes(e.name)&&b(a)&&b(f)&&y.push(24),["天龍改二","Gotland改"].includes(e.name)&&e.countGear(a)>=3&&y.push(30),"天龍改二"===e.name&&e.countGear(a)>=2&&y.push(31),(e.shipClass.isRoyalNavy||e.shipClass.is("KongouClass")&&e.name.includes("改二"))&&(e.countGear(301)>=2||e.hasGear(301)&&e.hasGear(191)||e.hasGear(300)&&e.hasGear(191))&&y.push(32)),y}(e).map((function(e){return c.fromId(e)})).filter(n.b)}},558:function(e,t,r){"use strict";var n;!function(e){e.MainFleet="MainFleet",e.EscortFleet="EscortFleet"}(n||(n={})),t.a=n},602:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){var t=e.slotSize,r=e.antiAir,n=e.interception,i=void 0===n?0:n,a=e.antiBomber,o=void 0===a?0:a,u=e.improvementModifier,s=void 0===u?0:u,c=e.proficiencyModifier,l=void 0===c?0:c,f=e.isInterception,p=r+1.5*i+s;return void 0!==f&&f&&(p=r+i+2*o+s),Math.floor(p*Math.sqrt(t)+l)}},603:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e,t){return e.includes(t)}},604:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){var t=e.evasion,r=e.luck,n=e.improvementModifier,i=e.formationModifier,a=e.postcapModifier,o=void 0===a?0:a,u=e.additionalFm,s=Math.floor((t+Math.sqrt(2*r))*i),c=s;s>=65?c=Math.floor(55+2*Math.sqrt(s-65)):s>=40&&(c=Math.floor(40+3*Math.sqrt(s-40)));var l=Math.floor(c+o)+n;return u?u(l):l}},66:function(e,t,r){"use strict";r.r(t);var n=r(532);r.d(t,"getApShellModifiers",(function(){return n.b})),r.d(t,"calcCruiserFitBonus",(function(){return n.a}));var i=r(602);r.d(t,"calcFighterPower",(function(){return i.a}));var a=r(201);r.d(t,"calcStatAtLevel",(function(){return a.b})),r.d(t,"calcHpAtLevel",(function(){return a.a}));var o=r(308);r.d(t,"Asw",(function(){return o.a}));var u=r(162);r.d(t,"calcHitRateBasis",(function(){return u.a})),r.d(t,"createHitRate",(function(){return u.b})),r.d(t,"getHitStatus",(function(){return u.c}));var s=r(604);r.d(t,"calcEvasionValue",(function(){return s.a}))},88:function(e,t,r){"use strict";var n;!function(e){e[e.CoastalDefenseShip=1]="CoastalDefenseShip",e[e.Destroyer=2]="Destroyer",e[e.LightCruiser=3]="LightCruiser",e[e.TorpedoCruiser=4]="TorpedoCruiser",e[e.HeavyCruiser=5]="HeavyCruiser",e[e.AviationCruiser=6]="AviationCruiser",e[e.LightAircraftCarrier=7]="LightAircraftCarrier",e[e.Battlecruiser=8]="Battlecruiser",e[e.Battleship=9]="Battleship",e[e.AviationBattleship=10]="AviationBattleship",e[e.AircraftCarrier=11]="AircraftCarrier",e[e.SuperDreadnoughts=12]="SuperDreadnoughts",e[e.Submarine=13]="Submarine",e[e.SubmarineAircraftCarrier=14]="SubmarineAircraftCarrier",e[e.Transport=15]="Transport",e[e.SeaplaneTender=16]="SeaplaneTender",e[e.AmphibiousAssaultShip=17]="AmphibiousAssaultShip",e[e.ArmoredAircraftCarrier=18]="ArmoredAircraftCarrier",e[e.RepairShip=19]="RepairShip",e[e.SubmarineTender=20]="SubmarineTender",e[e.TrainingCruiser=21]="TrainingCruiser",e[e.FleetOiler=22]="FleetOiler"}(n||(n={})),t.a=n},98:function(e,t,r){"use strict";var n=r(3415),i=function(){function e(e,t,r,n,i){var a=this;void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=0),this.attackPower=e,this.defensePower=t,this.defenderCurrentHp=r,this.remainingAmmoModifier=n,this.armorPenetration=i,this.calcValue=function(e){var t=a,r=t.attackPower,n=t.remainingAmmoModifier,i=t.armorPenetration,o=Math.max(1,e-i),u=Math.floor((r-o)*n);return Math.max(0,u)},this.random=function(){return a.calcValue(a.defensePower.random())}}return Object.defineProperty(e.prototype,"min",{get:function(){return this.calcValue(this.defensePower.max)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.calcValue(this.defensePower.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.defensePower,t=this.calcValue;return e.values().map(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeadly",{get:function(){var e=this.min;return this.defenderCurrentHp<=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamageProbability",{get:function(){var e=this.values;return e.filter((function(e){return e<=0})).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamages",{get:function(){var e=this.defenderCurrentHp;return Object(n.a)(e).map((function(t){return Math.floor(.06*e+.08*t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadlyDamageProbability",{get:function(){var e=this.values,t=this.defenderCurrentHp;return e.filter((function(e){return t-e<=0})).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopperDamages",{get:function(){var e=this.defenderCurrentHp;return Object(n.a)(e).map((function(t){return Math.floor(.5*e+.3*t)}))},enumerable:!0,configurable:!0}),e}();t.a=i,i.calc=function(e,t,r){return void 0===e&&(e=0),void 0===r&&(r=1),new i(e,t,r).random()}}}]);