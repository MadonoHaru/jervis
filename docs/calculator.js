(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,r,t){"use strict";var i=function(){return(i=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},a=function(){function e(r,t,a){var n=this;this.id=r,this.name=t,this.modifiers=a,this.getModifiersWithRole=function(r){return n!==e.Vanguard?n.modifiers:i(i({},n.modifiers),"Main"===r?{shelling:{power:.5,accuracy:.8,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:.5,accuracy:1,evasion:1}}:{shelling:{power:1,accuracy:1.2,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}})},e.values.push(this)}return Object.defineProperty(e,"singleFleetFormations",{get:function(){return e.values.filter(function(e){return e.id<=10})},enumerable:!0,configurable:!0}),Object.defineProperty(e,"combinedFleetFormations",{get:function(){return e.values.filter(function(e){return e.id>10})},enumerable:!0,configurable:!0}),e.fromId=function(r){return e.values.find(function(e){return e.id===r})},Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){return this.modifiers.fleetAntiAir},enumerable:!0,configurable:!0}),e}();r.a=a,a.keys=["LineAhead","DoubleLine","Diamond","Echelon","LineAbreast","Vanguard","CruisingFormation1","CruisingFormation2","CruisingFormation3","CruisingFormation4"].concat(),a.values=[],a.LineAhead=new a(1,"単縦陣",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),a.DoubleLine=new a(2,"複縦陣",{fleetAntiAir:1.2,shelling:{power:.8,accuracy:1.2,evasion:1},torpedo:{power:.8,accuracy:.8,evasion:1},asw:{power:.8,accuracy:1.2,evasion:1},nightBattle:{power:1,accuracy:.9,evasion:1}}),a.Diamond=new a(3,"輪形陣",{fleetAntiAir:1.6,shelling:{power:.7,accuracy:1,evasion:1.1},torpedo:{power:.7,accuracy:.4,evasion:1.1},asw:{power:1.2,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:.7,evasion:1}}),a.Echelon=new a(4,"梯形陣",{fleetAntiAir:1,shelling:{power:.75,accuracy:1.2,evasion:1.2},torpedo:{power:.6,accuracy:.6,evasion:1.3},asw:{power:1.1,accuracy:1.2,evasion:1.3},nightBattle:{power:1,accuracy:.9,evasion:1.2}}),a.LineAbreast=new a(5,"単横陣",{fleetAntiAir:1,shelling:{power:.6,accuracy:1.2,evasion:1.3},torpedo:{power:.6,accuracy:.3,evasion:1.4},asw:{power:1.3,accuracy:1.2,evasion:1.1},nightBattle:{power:1,accuracy:.8,evasion:1.2}}),a.Vanguard=new a(6,"警戒陣",{fleetAntiAir:1.1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation1=new a(11,"第一警戒航行序列",{fleetAntiAir:1.1,shelling:{power:.8,accuracy:1,evasion:1},torpedo:{power:.7,accuracy:1,evasion:1},asw:{power:1.3,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation2=new a(12,"第二警戒航行序列",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:.9,accuracy:1,evasion:1},asw:{power:1.1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation3=new a(13,"第三警戒航行序列",{fleetAntiAir:1.5,shelling:{power:.7,accuracy:1,evasion:1},torpedo:{power:.6,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),a.CruisingFormation4=new a(14,"第四警戒航行序列",{fleetAntiAir:1,shelling:{power:1.1,accuracy:1.1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.7,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),a.isIneffective=function(e,r){return[[a.DoubleLine,a.LineAbreast],[a.LineAbreast,a.Echelon],[a.Echelon,a.LineAhead]].some(function(t){return t[0]===e&&t[1]===r})}},129:function(e,r,t){"use strict";t.d(r,"a",function(){return a}),t.d(r,"c",function(){return n}),t.d(r,"b",function(){return o});var i=t(34),a=function(e){var r=e.shellingType,t=5+e.firepower+e.combinedFleetFactor+e.improvementModifier;return"CarrierShelling"===r?function(e,r){var t=r.bombing,i=r.torpedo,a=e+Math.floor(Math.floor(1.3*t)+i)+15;return 25+Math.floor(1.5*a)}(t,e):t},n=function(e,r){var t=r.antiInstallationModifiers,i=r.formationModifier,a=r.engagementModifier,n=r.healthModifier,o=r.cruiserFitBonus;return(((e+t.b12)*t.a13+t.b13)*t.a13next+t.b13next)*i*a*n+o},o=function(e,r){var t=r.effectivenessMultiplicative,i=r.effectivenessAdditive,a=r.specialAttackModifier,n=r.apShellModifier,o=r.criticalModifier,s=r.proficiencyModifier,u=r.eventMapModifier,c=Math.floor(e)*a;return(t>1||i>0)&&(c=Math.floor(c*t)+i),n>1&&(c=Math.floor(c*n)),o>1&&(c=Math.floor(c*o*s)),c*u},s=function(){function e(e){this.shellingType="Shelling",this.firepower=0,this.torpedo=0,this.bombing=0,this.improvementModifier=0,this.combinedFleetFactor=0,this.formationModifier=1,this.engagementModifier=1,this.healthModifier=1,this.cruiserFitBonus=0,this.effectivenessMultiplicative=1,this.effectivenessAdditive=0,this.specialAttackModifier=1,this.apShellModifier=1,this.criticalModifier=1,this.proficiencyModifier=1,this.eventMapModifier=1,this.antiInstallationModifiers={b12:0,a13:1,b13:0,a13next:1,b13next:0},Object(i.c)(this,e)}return Object.defineProperty(e.prototype,"basicPower",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"precapPower",{get:function(){return n(this.basicPower,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cappedPower",{get:function(){return Object(i.f)(e.cap,this.precapPower)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCapped",{get:function(){return this.precapPower>e.cap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return o(this.cappedPower,this)},enumerable:!0,configurable:!0}),e}();r.d=s,s.cap=180},141:function(e,r,t){"use strict";t.d(r,"c",function(){return n}),t.d(r,"b",function(){return o}),t.d(r,"e",function(){return s}),t.d(r,"d",function(){return u}),t.d(r,"a",function(){return c});var i=t(605),a=t(34),n=function(e,r,t){return void 0===e&&(e=1),void 0===r&&(r=0),void 0===t&&(t=!1),function(i){var a=i*e+r;return t?Math.floor(a):a}},o=function(e){return void 0===e&&(e=1),function(r){return Math.floor(1.5*r*e)}},s=function(e){var r=e.a12,t=e.a13,a=e.a13next,o=e.a14,s=e.b12,u=e.b13,c=e.b13next,l=e.b14,p=n(r,s),f=n(t,u),h=n(a,c),d=n(o,l);return Object(i.a)(p,f,h,d)},u=function(e){var r=e.a5,t=e.a6,a=e.a11,o=e.b5,s=e.b6,u=e.b11,c=n(r,o,!0),l=n(t,s,!0),p=n(a,u);return Object(i.a)(c,l,p)},c=function(e){var r=e.basic,t=e.cap,i=e.modifiers,n=e.additionalFm,o=s(i),c=u(i),l=o(r),p=t<l,f=Object(a.f)(t,l);return{precap:l,isCapped:p,capped:f,postcap:n?n(c(f)):c(f)}}},147:function(e,r,t){"use strict";t.d(r,"b",function(){return a}),t.d(r,"a",function(){return n});var i=t(34),a=function(e){var r=e.combinedFleetFactor,t=e.level,i=e.luck,a=e.equipmentAccuracy,n=e.improvementModifier;return Math.floor(90+r+2*Math.sqrt(t)+1.5*Math.sqrt(i)+a+n)},n=function(e,r){var t=r.formationModifier,i=r.moraleModifier,a=r.fitGunBonus,n=r.specialAttackModifier,o=r.apShellModifier;return Math.floor((e*t*i+a)*n*o)},o=function(){function e(e){this.combinedFleetFactor=0,this.level=0,this.luck=0,this.equipmentAccuracy=0,this.improvementModifier=0,this.formationModifier=1,this.moraleModifier=1,this.fitGunBonus=0,this.specialAttackModifier=1,this.apShellModifier=1,Object(i.c)(this,e)}return Object.defineProperty(e.prototype,"basicAccuracy",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return n(this.basicAccuracy,this)},enumerable:!0,configurable:!0}),e}();r.c=o},160:function(e,r,t){"use strict";t.r(r);var i=t(404);t.d(r,"AntiAirCutin",function(){return i.a});var a=t(480);t.d(r,"CarrierBasedAerialCombat",function(){return a.a});var n=t(481);t.d(r,"LandBaseAerialSupport",function(){return n.a});var o=t(213);t.d(r,"FleetAntiAir",function(){return o.a});var s=t(258);t.d(r,"ShipAntiAir",function(){return s.a})},170:function(e,r,t){"use strict";t.d(r,"a",function(){return c}),t.d(r,"b",function(){return S});var i=t(405),a=t(37),n=t(88),o=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),a=0;for(r=0;r<t;r++)for(var n=arguments[r],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},s=["a1","a2","a3","a4","a5","a6","a7","a8","a9","a10","a11","a12","a13","a13next","a14","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b13next","b14"],u=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t={},i=function(e,r){var i;i=e.startsWith("a")?(t[e]||1)*r:(t[e]||0)+r,t[e]=i},a=function(e){s.forEach(function(r){var t=e[r];t&&i(r,t)})};return e.forEach(a),t},c={compose:u},l={attrs:"Installation"},p={attrs:"Pillbox"},f={attrs:"IsolatedIsland"},h={attrs:"SoftSkinned"},d={shipClassId:i.a.HarbourSummerPrincess},b={attrs:"SupplyDepot"},m=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{$or:o(e)}},y=[{gear:{categoryId:a.a.AntiAircraftShell},rules:[{target:m(f,d),count1:{a13:1.75}},{target:h,count1:{a13:2.5}}]},{gear:{categoryId:a.a.ArmorPiercingShell},rules:[{target:p,count1:{a13:1.85}},{target:d,count1:{a13:1.3}}]},{gear:126,rules:[{target:p,count1:{a13:1.6},count2:{a13:2.72}},{target:f,count1:{a13:1.4},count2:{a13:2.1}},{target:h,count1:{a13:1.3},count2:{a13:1.82}},{target:d,count1:{a13:1.4},count2:{a13:1.68}},{target:b,count1:{a5:1.25},count2:{a5:1.625}},{target:l,count1:{b13next:75},count2:{b13next:110},count3:{b13next:140},count4:{b13next:160}}]},{gear:{attrs:"AntiGroundRocketLauncher"},rules:[{target:p,count1:{a13:1.5},count2:{a13:2.7}},{target:f,count1:{a13:1.3},count2:{a13:2.145}},{target:h,count1:{a13:1.25},count2:{a13:1.875}},{target:d,count1:{a13:1.25},count2:{a13:1.75}},{target:b,count1:{a5:1.2},count2:{a5:1.68}}]},{gear:348,rules:[{target:l,count1:{b13next:55},count2:{b13next:115},count3:{b13next:160},count4:{b13next:190}}]},{gear:349,rules:[{target:l,count1:{b13next:80},count2:{b13next:170}}]},{gear:{attrs:"Mortar"},rules:[{target:p,count1:{a13:1.3},count2:{a13:1.95}},{target:f,count1:{a13:1.2},count2:{a13:1.68}},{target:h,count1:{a13:1.2},count2:{a13:1.56}},{target:d,count1:{a13:1.1},count2:{a13:1.265}},{target:b,count1:{a5:1.15},count2:{a5:1.38}}]},{gear:346,rules:[{target:l,count1:{b13next:30},count2:{b13next:55},count3:{b13next:75},count4:{b13next:90}}]},{gear:347,rules:[{target:l,count1:{b13next:60},count2:{b13next:110},count3:{b13next:150}}]},{gear:{categoryId:a.a.LandingCraft},rules:[{target:m(p,f),count1:{a13:1.8}},{target:h,count1:{a13:1.4}},{target:d,count1:{a13:1.7}},{target:b,count1:{a5:1.7}}]},{gear:193,rules:[{target:m(p,f,h),count1:{a13:1.15}},{target:d,count1:{a13:1.2}},{target:b,count1:{a5:1.2}}]},{gear:166,rules:[{target:p,count1:{a13:1.5},count2:{a13:2.1}},{target:f,count1:{a13:1.2},count2:{a13:1.68}},{target:h,count1:{a13:1.5},count2:{a13:1.95}},{target:d,count1:{a13:1.6},count2:{a13:2.4}},{target:b,count1:{a5:1.3},count2:{a5:2.08}}]},{gear:230,rules:[{target:l,count1:{a13:1.8,b13:25}}]},{gear:355,rules:[{target:p,count1:{a13:2}},{target:f,count1:{a13:1.8}},{target:h,count1:{a13:1.1}},{target:d,count1:{a13:2}},{target:b,count1:{a5:1.2}},{target:l,count1:{b13:25,a13next:1.4}}]},{gear:167,rules:[{target:m(p,f),count1:{a13:2.4},count2:{a13:3.24}},{target:h,count1:{a13:1.5},count2:{a13:1.8}},{target:d,count1:{a13:2.8},count2:{a13:4.2}},{target:b,count1:{a5:1.7},count2:{a5:2.55}}]},{gear:{categoryId:a.a.CarrierBasedDiveBomber},rules:[{target:p,count1:{a13:1.5},count2:{a13:3}},{target:f,count1:{a13:1.4},count2:{a13:2.45}},{target:d,count1:{a13:1.3}}]},{gear:{categoryId:{$in:[a.a.SeaplaneBomber,a.a.SeaplaneFighter]}},rules:[{target:p,count1:{a13:1.5}},{target:h,count1:{a13:1.2}},{target:d,count1:{a13:1.3}}]},{ship:{shipTypeId:{$in:[n.a.Destroyer,n.a.LightCruiser]}},target:p,bonus:{a13:1.4}},{ship:{shipTypeId:{$in:[n.a.Submarine,n.a.SubmarineAircraftCarrier]}},target:l,bonus:{b12:30}}],g=function(e,r){var t=e.countGear("LandingCraft"),i={};if(t){var a=e.totalEquipmentStats(function(e){return e.is("LandingCraft")?e.star:0});if(i.a13=1+a/t/50,!r)return i;i.a5=i.a13,e.hasGear(166)&&(i.a5*=i.a5)}return i},v=function(e,r){var t=e.countGear(167),i={};if(t){var a=e.totalEquipmentStats(function(e){return e.match(167)?e.star:0});if(i.a13=1+a/t/30,!r)return i;i.a5=i.a13}return i},S=function(e,r){var t=function(e,r){var t=function(i,a){void 0===a&&(a=0);var n=[];if(!function(e,r,t){var i=e.ship,a=e.target;return!(i&&!r.match(i))&&!(a&&!t.match(a))}(i,e,r))return n;var o=i.gear,s=i.bonus,u=i.rules,c=o?e.countGear(function(e){return e.match(o)}):a;return c&&n.push(function(e,r){var t=e.count1,i=e.count2,a=e.count3,n=e.count4,o=e.count5,s={};return[t,i,a,n,o].forEach(function(e,t){e&&r>t&&(s=e)}),s}(i,c)),s&&n.push(s),u&&n.push.apply(n,u.flatMap(function(e){return t(e,c)})),n};return t}(e,r),i=y.flatMap(function(e){return t(e)}),a=function(e,r){if(!r.isInstallation)return[];var t=r.is("SupplyDepot");return[g(e,t),v(e,t)]}(e,r);return u.apply(void 0,o(i,a))}},184:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"a",function(){return a});var i=function(e,r){var t=e[0],i=e[1];return Math.floor((i-t)*r/99+t)},a=function(e,r){var t=e[0],i=e[1],a=t;return r>=100&&(a+=t>=91?9:t>=70?8:t>=50?7:t>=40?6:t>=30?5:t>=8?4:3),Math.min(a,i)}},186:function(e,r,t){"use strict";t.d(r,"a",function(){return i}),t.d(r,"b",function(){return a});var i=function(e){var r=(e.accuracy-e.evasion)*e.moraleModifier;return r<10&&(r=10),r>96&&(r=96),r},a=function(e){var r=e.criticalRateConstant,t=e.hitRateBonus,a=void 0===t?0:t,n=e.criticalRateBonus,o=void 0===n?0:n,s=i(e),u=Math.floor(s+1+100*a),c=Math.floor(Math.sqrt(s)*r+1+100*o),l=Math.min(u/100,1),p=Math.min(c/100,1);return{hitRate:l,criticalRate:p,normalHitRate:l-p}}},213:function(e,r,t){"use strict";var i=t(57),a=t(406),n=t(3506),o=t(609),s=function(e){var r=e.name,t=e.antiAir,i=(e.category,e.improvement);if(0===t)return 0;return(e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?.35:e.is("AntiAircraftShell")?.6:e.is("Radar")?.4:"46cm三連装砲"===r?.25:.2)*t+i.fleetAntiAirModifier},u=function(e){return Math.floor(e.totalEquipmentStats(s))},c=function(){function e(e,r,t){this.ships=e,this.side=r,this.formationModifier=t}return Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.ships,r=this.side,t=this.formationModifier,a=Object(o.a)(e,u),n=2*Math.floor(t*a);return r===i.a.Player?n/1.3:n},enumerable:!0,configurable:!0}),e}();r.a=c,c.getCombinedFleetModifier=function(e,r){return e===a.a.EscortFleet?.48:r===n.a.AirDefenseBattle?.72:.8},c.calcFleetAntiAir=function(e,r,t){var a=(0,e.totalShipStats)(u),n=2*Math.floor(t*a);return r===i.a.Player?n/1.3:n}},220:function(e,r,t){"use strict";t.d(r,"a",function(){return s}),t.d(r,"c",function(){return u});var i=t(114),a=t(3507),n=t(129),o=t(147),s=function(e){var r=0;if(e.shipType.any("LightCruiser","TorpedoCruiser","TrainingCruiser")){var t=e.countGear(function(e){return[4,11].includes(e.masterId)}),i=e.countGear(function(e){return[65,119,139].includes(e.masterId)});r+=Math.sqrt(t)+2*Math.sqrt(i)}return e.shipClass.is("ZaraClass")&&(r+=Math.sqrt(e.countGear(162))),r},u=function(e,r){var t=e.getShellingStats();return r&&r.isCarrierSpecialAttack?t.specialProficiencyModifiers:t.normalProficiencyModifiers},c=function(){function e(e){var r=this;this.ship=e,this.calcPower=function(e){var t=e.role,o=void 0===t?"Main":t,s=e.isCritical,c=void 0!==s&&s,l=e.formation,p=void 0===l?i.a.LineAhead:l,f=e.engagement,h=void 0===f?a.a.Parallel:f,d=e.combinedFleetFactor,b=void 0===d?0:d,m=e.eventMapModifier,y=void 0===m?1:m,g=e.specialAttack,v=e.isArmorPiercing,S=void 0!==v&&v,A=e.target,w=r,C=w.shellingType,M=w.firepower,P=w.torpedo,I=w.bombing,O=w.improvementModifier,k=w.cruiserFitBonus,j=w.healthModifier,F=p.getModifiersWithRole(o).shelling.power,B=h.modifier,G=c?1.5:1,T=g?g.modifier.power:1,R=S?r.apShellModifiers.power:1,D=r.ship.getAntiInstallationModifier(A),q=A.isInstallation,L={shellingType:C,combinedFleetFactor:b,firepower:M,torpedo:q?0:P,bombing:q?r.ship.totalEquipmentStats(function(e){return e.is("AntiInstallationBomber")?e.bombing:0}):I,improvementModifier:O,antiInstallationModifiers:D,formationModifier:F,engagementModifier:B,healthModifier:j,cruiserFitBonus:k,effectivenessMultiplicative:D.a5,effectivenessAdditive:0,specialAttackModifier:T,apShellModifier:R,criticalModifier:G,proficiencyModifier:u(r.ship,g).power,eventMapModifier:y};return new n.d(L)},this.calcAccuracy=function(e){var t=r.ship,i=t.level,a=t.stats.luck,n=e.fitGunBonus,s=e.combinedFleetFactor,u=e.formationModifier,c=e.specialAttack,l=e.isArmorPiercing,p={combinedFleetFactor:s,level:i,luck:a,equipmentAccuracy:t.totalEquipmentStats("accuracy"),improvementModifier:t.totalEquipmentStats(function(e){return e.improvement.shellingAccuracyModifier}),moraleModifier:t.morale.getAccuracyModifier("shelling"),formationModifier:u,fitGunBonus:n,specialAttackModifier:c?c.modifier.accuracy:1,apShellModifier:l?r.apShellModifiers.accuracy:1};return new o.c(p)}}return Object.defineProperty(e.prototype,"shellingType",{get:function(){var e=this.ship,r=e.shipType,t=e.shipClass,i=e.isInstallation,a=e.hasGear;return r.isAircraftCarrierClass?"CarrierShelling":(t.is("RevisedKazahayaClass")||i)&&(a("DiveBomber")||a("TorpedoBomber"))?"CarrierShelling":"Shelling"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.ship.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.ship.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.ship.totalEquipmentStats("bombing")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvementModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){return e.improvement.shellingPowerModifier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cruiserFitBonus",{get:function(){return s(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"healthModifier",{get:function(){return this.ship.health.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellModifiers",{get:function(){var e=this.ship.hasGear;if(!e(function(e){return e.is("ArmorPiercingShell")})||!e(function(e){return e.is("MainGun")}))return{power:1,accuracy:1};var r=e(function(e){return e.is("SecondaryGun")}),t=e(function(e){return e.is("Radar")});return r&&t?{power:1.15,accuracy:1.3}:r?{power:1.15,accuracy:1.2}:t?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}},enumerable:!0,configurable:!0}),e}();r.b=c},24:function(e,r,t){"use strict";var i=t(74);t.d(r,"a",function(){return i})},242:function(e,r,t){"use strict";var i=t(160);t.d(r,"a",function(){return i})},258:function(e,r,t){"use strict";var i=t(57),a=function(e){var r=e.antiAir,t=(e.category,e.improvement);if(0===r)return 0;var i=0;return e.is("AntiAircraftGun")?i=6:e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?i=4:e.is("Radar")&&(i=3),i*r+t.adjustedAntiAirModifier},n=function(){function e(e,r,t,a,n){var o=this;void 0===a&&(a=1),this.ship=e,this.side=r,this.fleetAntiAir=t,this.combinedFleetModifier=a,this.antiAirCutin=n,this.calcProportionalShotdownRate=function(e){void 0===e&&(e=1);var r=o;return r.adjustedAntiAir*r.combinedFleetModifier*.5*.25*.02*e},this.calcFixedShotdownNumber=function(e,r){void 0===e&&(e=1),void 0===r&&(r=1);var t=o,a=t.adjustedAntiAir,n=t.fleetAntiAir,s=t.side,u=t.antiAirCutin,c=t.combinedFleetModifier,l=.5*(a*e+n*r)*.25*(s===i.a.Player?.8:.75)*c;return u&&(l*=u.fixedAirDefenseModifier),Math.floor(l)}}return Object.defineProperty(e.prototype,"adjustedAntiAir",{get:function(){return function(e,r){var t=e.stats,n=e.nakedStats,o=(0,e.totalEquipmentStats)(a);if(r===i.a.Enemy)return Math.floor(2*Math.floor(Math.sqrt(t.antiAir))+o);var s=n.antiAir+o;return 0===e.countGear()?s:2*Math.floor(s/2)}(this.ship,this.side)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumBonus",{get:function(){var e=this.side,r=this.antiAirCutin;return r?r.minimumBonus:e===i.a.Player?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAirPropellantBarrageChance",{get:function(){var e,r=this.ship,t=this.adjustedAntiAir,i=r.shipType;if(!(e=i).isAircraftCarrierClass&&!e.any("AviationCruiser","AviationBattleship","SeaplaneTender"))return 0;var a=r.countGear(274);if(!a)return 0;var n=r.shipClass.is("IseClass")?.25:0;return(t+.9*r.stats.luck)/281+.15*(a-1)+n},enumerable:!0,configurable:!0}),e}();r.a=n},259:function(e,r,t){"use strict";var i=t(114),a=t(3501),n=t(406),o=t(213),s=function(){return(s=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},u=function(){function e(e,r,t,a,n){this.side=e,this.fleetType=r,this.landBase=t,this.mainFleet=a,this.escortFleet=n,this.formation=i.a.LineAhead,this.name="",this.isCombinedFleet&&(this.formation=i.a.CruisingFormation4)}return Object.defineProperty(e.prototype,"allShips",{get:function(){var e=this.mainFleet,r=this.escortFleet,t=e.nonNullableShips.concat();return r?t.concat(r.nonNullableShips):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.allShips,r=this.side,t=this.formation;return new o.a(e,r,t.fleetAntiAirModifier).fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleet",{get:function(){return this.fleetType!==a.a.Single},enumerable:!0,configurable:!0}),e.prototype.getShipInformation=function(e){var r=this,t=r.mainFleet,i=r.escortFleet,a={side:r.side,fleetType:r.fleetType,fleetAntiAir:r.fleetAntiAir,formation:r.formation};return t.nonNullableShips.find(function(r){return r===e})?s(s({},a),{fleetRole:n.a.MainFleet}):i&&i.nonNullableShips.find(function(r){return r===e})?s(s({},a),{fleetRole:n.a.EscortFleet}):void 0},e}();r.a=u},260:function(e,r,t){"use strict";var i=function(){function e(e,r,t){this.player=e,this.enemy=r,this.battleType=t}return e.prototype.getShipInformation=function(e){var r=this.player,t=this.enemy,i=r.getShipInformation(e);if(i)return i;var a=t.getShipInformation(e);if(a)return a;throw console.error("ship info is not found")},e}();r.a=i},273:function(e,r,t){"use strict";t.d(r,"b",function(){return n}),t.d(r,"a",function(){return o});var i=t(141),a=t(170),n=function(e){var r=e.nakedAsw,t=e.equipmentAsw,i=e.improvementModifier,a=e.typeConstant;return 2*Math.sqrt(r)+1.5*t+i+a},o={createPower:function(e){var r=e.formationModifier,t=e.engagementModifier,o=e.healthModifier,s=e.synergyModifier,u=e.optionalModifiers,c=e.additionalFm,l=n(e),p=r*t*o*s,f=u?a.a.compose(u,{a14:p}):{a14:p};return Object(i.a)({basic:l,cap:150,modifiers:f,additionalFm:c})},calcAccuracy:function(e){var r=e.luck,t=e.level,i=e.aswEquipmentModifier,a=e.improvementModifier,n=e.formationModifier,o=e.moraleModifier;return(80+(2*Math.sqrt(t)+1.5*Math.sqrt(r))+i+a)*n*o}}},308:function(e,r,t){"use strict";var i=t(610),a=t(57),n=t(328),o=t(258),s=t(213),u=function(){function e(e){var r=this;this.combatInformation=e,this.shotdownInFighterCombat=function(e,r,t){var i;if(t===a.a.Player){var n=r/4,o=Math.floor(r/3*100);i=Math.floor(Math.random()*(o+1))/100+n}else{o=11-r;i=.35*Math.floor(Math.random()*(o+1))+.65*Math.floor(Math.random()*(o+1))}var s=i/10,u=Math.floor(e.slotSize*s);e.is("JetPoweredAircraft")?e.shotdown(.6*u):e.shotdown(u)},this.shipAntiAirDefense=function(e,t,i){var a=r.combatInformation.battleType,n=r.combatInformation.getShipInformation(e),u=n.side,c=n.fleetRole,l=n.fleetAntiAir,p=s.a.getCombinedFleetModifier(c,a),f=new o.a(e,u,l,p,i),h=0;Math.random()>.5&&(h+=Math.floor(t.slotSize*f.calcProportionalShotdownRate())),Math.random()>.5&&(h+=f.calcFixedShotdownNumber()),h+=f.minimumBonus,t.shotdown(h)}}return e.prototype.fighterCombat=function(e,r){var t=this,i=e.reduce(function(e,r){return e+r.fighterPower},0),o=r.reduce(function(e,r){return e+r.fighterPower},0),s=n.a.fromFighterPower(i,o);return e.forEach(function(e){return t.shotdownInFighterCombat(e,s.constant,a.a.Player)}),r.forEach(function(e){return t.shotdownInFighterCombat(e,s.constant,a.a.Enemy)}),s},e.prototype.antiAirDefense=function(e,r,t){for(var a=0,n=r;a<n.length;a++){var o=n[a],s=e[Object(i.a)(e.length-1)];this.shipAntiAirDefense(s,o,t)}},e}();r.a=u},311:function(e,r,t){"use strict";t.d(r,"b",function(){return s}),t.d(r,"c",function(){return u}),t.d(r,"a",function(){return c});var i=t(44),a=t(57),n=[{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Single,factors:[2,10]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Single,factors:[10,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Single,factors:[-5,10]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.Combined,factors:[5,5]},{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Combined,factors:[-5,-5]}],o=[{attackerFleetType:i.a.Single,defenderFleetType:i.a.CarrierTaskForce,factors:[10,5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.SurfaceTaskForce,factors:[5,-5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.TransportEscort,factors:[10,5]}],s=function(e,r){if(!e.fleetType.isCombined&&!r.fleetType.isCombined)return 0;var t="Main"===e.role?0:1;if(e.side===a.a.Player){var i=n.find(function(t){return t.attackerFleetType===e.fleetType&&t.defenderFleetType===r.fleetType});return i?i.factors[t]:0}if(e.fleetType.isCombined)return[10,-5][t];var s=o.find(function(t){return t.attackerFleetType===e.fleetType&&t.defenderFleetType===r.fleetType});return s?s.factors[t]:0},u=function(e,r){var t=function(t){return e.side===t?e.fleetType:r.fleetType},i=t(a.a.Player).isCombined,n=t(a.a.Enemy).isCombined;return i||n?i&&!n?0:15:5},c=function(e,r){return{shelling:s(e,r),torpedo:u(e,r)}}},328:function(e,r,t){"use strict";var i=function(){function e(r,t,i){this.id=r,this.name=t,this.constant=i,e.values.push(this)}return e.fromFighterPower=function(r,t){var i=e.getBoundaryValues(t);return r>=i.AirSupremacy?e.AirSupremacy:r>=i.AirSuperiority?e.AirSuperiority:r>=i.AirParity?e.AirParity:r>=i.AirDenial?e.AirDenial:e.AirIncapability},e.fromId=function(r){return e.values.find(function(e){return e.id===r})},Object.defineProperty(e.prototype,"contactMultiplier",{get:function(){switch(this){case e.AirSupremacy:return 3;case e.AirSuperiority:return 2;case e.AirDenial:return 1;default:return 0}},enumerable:!0,configurable:!0}),e}();r.a=i,i.values=[],i.AirSupremacy=new i(1,"制空権確保",1),i.AirSuperiority=new i(2,"航空優勢",3),i.AirParity=new i(0,"制空均衡",5),i.AirDenial=new i(3,"航空劣勢",7),i.AirIncapability=new i(4,"制空権喪失",10),i.getBoundaryValues=function(e){return{AirSupremacy:Math.ceil(3*e),AirSuperiority:Math.ceil(1.5*e),AirParity:Math.floor(2/3*e)+1,AirDenial:Math.floor(1/3*e)+1}}},34:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"d",function(){return a}),t.d(r,"c",function(){return n}),t.d(r,"f",function(){return o}),t.d(r,"e",function(){return s}),t.d(r,"a",function(){return u});var i=function(e){return null!=e},a=i,n=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var a=0,n=r;a<n.length;a++){var o=n[a];for(var s in o){var u=o[s];i(u)&&(e[s]=u)}}return e},o=function(e,r){return r<=e?r:e+Math.sqrt(r-e)},s=function(e){return/(改二|Верный)(?!丙)/.test(e)},u=function(e){return e.health.currentHp+e.getDefensePower().max}},3498:function(e,r,t){"use strict";var i=t(3623),a=t(446),n=t(266),o=function(){function e(e,r,t,i,o){var s=this;this.stats=e,this.category=r,this.improvement=t,this.proficiency=i,this.attrs=o,this.is=function(e){return s.attrs.includes(e)},this.match=function(e){return"number"==typeof e?s.gearId===e:Object(n.a)(e)(s)},this.toState=function(){return{masterId:s.masterId,improvement:s.improvement.value,proficiency:s.proficiency.internal}},this.calcFighterPower=function(e,r){void 0===r&&(r=!1);var t=s,i=t.antiAir,n=t.interception,o=t.antiBomber,u=t.improvement,c=t.proficiency,l=u.fighterPowerModifier,p=c.fighterPowerBonus;return Object(a.a)({slotSize:e,antiAir:i,interception:n,antiBomber:o,improvementModifier:l,proficiencyModifier:p,isInterception:r})}}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.stats.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.stats.categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.stats.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.stats.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvable",{get:function(){return this.stats.improvable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.stats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.stats.armor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.stats.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.stats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.stats.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.stats.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.stats.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.stats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.stats.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return this.stats.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.stats.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiBomber",{get:function(){return this.stats.antiBomber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interception",{get:function(){return this.stats.interception},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stats.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.improvement.value},enumerable:!0,configurable:!0}),e}(),s=t(37),u=function(){function e(e,r,t){void 0===e&&(e=0),this.value=e,this.stats=r,this.gearIs=t}return Object.defineProperty(e.prototype,"star",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactSelectionModifier",{get:function(){var e=this.value,r=this.gearIs;if(!r("ReconnaissanceAircraft"))return 0;var t=this.stats.los;if(r("CarrierBasedReconnaissanceAircraft")||r("CarrierBasedReconnaissanceAircraft2")){if(7===t)return.25*e;if(11===t)return.4*e}else{if(6===t)return.2*e;if(t>=4)return.14*e;if(3===t)return.1*e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerModifier",{get:function(){var e=this.value,r=this.gearIs;return r("Fighter")?.2*e:r("CarrierBasedDiveBomber")?.25*e:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirModifier",{get:function(){var e=this.gearIs,r=this.stats.antiAir;if(0===r)return 0;var t=0;return e("AntiAircraftGun")?t=r<=7?4:6:(e("AntiAircraftFireDirector")||e("HighAngleMount"))&&(t=r<=7?2:3),t*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){var e=this.gearIs,r=this.stats.antiAir;if(0===r)return 0;var t=0;return e("AntiAircraftFireDirector")||e("HighAngleMount")?t=r<=7?2:3:e("AirRadar")&&(t=1.5),t*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){var e=this.stats,r=e.firepower,t=e.gearId,i=this.gearIs;return r>12?1.5*Math.sqrt(this.value):i("CarrierBasedTorpedoBomber")?.2*this.value:[10,66,220,275].includes(t)?.2*this.value:[12,234,247].includes(t)?.3*this.value:i("MainGun")||i("SecondaryGun")||i("ArmorPiercingShell")||i("AntiAircraftFireDirector")||i("Searchlight")||i("AntiAircraftGun")||i("LandingCraft")||i("SpecialAmphibiousTank")||i("AntiAircraftShell")?Math.sqrt(this.value):i("Sonar")||i("LargeRadar")||i("DepthCharge")?.75*Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){var e=this.gearIs;return e("SurfaceRadar")?1.7*Math.sqrt(this.value):e("Radar")||e("MainGun")||e("SecondaryGun")||e("Sonar")||e("LargeSonar")||e("DepthCharge")||e("ArmorPiercingShell")||e("AntiAircraftFireDirector")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){var e=this.gearIs,r=this.stats,t=this.star;return e("CarrierBasedTorpedoBomber")?.2*t:e("DepthCharge")||e("Sonar")?Math.floor(t):e("Autogyro")?(r.asw>10?.3:.2)*t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Sonar:case s.a.LargeSonar:case s.a.DepthCharge:return 1.3*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Torpedo:case s.a.AntiAircraftGun:return 1.2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoAccuracyModifier",{get:function(){var e=this.star;switch(this.stats.categoryId){case s.a.Torpedo:case s.a.MidgetSubmarine:return 2*Math.sqrt(e)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){var e=this.gearIs,r=this.stats.gearId;return[10,66,220,275].includes(r)?.2*this.value:[12,234,247].includes(r)?.3*this.value:e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftShell")||e("AntiAircraftFireDirector")||e("Searchlight")||e("Torpedo")||e("LandingCraft")||e("SpecialAmphibiousTank")||e("MidgetSubmarine")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackAccuracyModifier",{get:function(){var e=this.gearIs,r=this.value;return e("SurfaceRadar")?1.6*Math.sqrt(r):e("MediumCaliberMainGun")||e("Radar")?1.3*Math.sqrt(r):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectiveLosModifier",{get:function(){var e=this.gearIs,r=this.value;return e("SmallRadar")?1.25*Math.sqrt(r):e("LargeRadar")||e("LargeRadar2")?1.4*Math.sqrt(r):e("CarrierBasedReconnaissanceAircraft")||e("CarrierBasedReconnaissanceAircraft2")||e("ReconnaissanceSeaplane")?1.2*Math.sqrt(r):e("SeaplaneBomber")?1.15*Math.sqrt(r):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePowerModifier",{get:function(){var e=this.gearIs;return e("MediumExtraArmor")?.2*this.value:e("LargeExtraArmor")?.3*this.value:0},enumerable:!0,configurable:!0}),e}(),c=t(392),l=function(e){var r=this;this.masters=e,this.create=function(e){if(e){var t=r.masters.find(function(r){return r.id===e.masterId});if(t){var i=c.a.from(t.attrs),a=new u(e.improvement,t,t.is),n=new c.b(e.proficiency,i);return new o(t,t.category,a,n,t.attrs)}}}},p=t(609),f=t(3509),h=function(e){var r=e.los,t=e.improvement,i=.6;return e.is("CarrierBasedTorpedoBomber")?i=.8:e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?i=1:e.is("ReconnaissanceSeaplane")?i=1.2:e.is("SeaplaneBomber")&&(i=1.1),i*(r+t.effectiveLosModifier)},d=function(e,r){var t=e.totalEquipmentStats,i=e.nakedStats,a=e.stats,n=t(h),o=a.getBonus("effectiveLos");return Math.sqrt(i.los+o)+n*r-2},b={calcGearEffectiveLos:h,calcShipEffectiveLos:d,calcFleetEffectiveLos:function(e,r,t){return e.totalShipStats(function(e){return d(e,r)})-Math.ceil(.4*t)+12}},m=t(34),y=function(){function e(e){var r=this;this.ships=e,this.totalShipStats=function(e){return Object(p.a)(r.nonNullableShips,e)},this.effectiveLos=function(e,t){return b.calcFleetEffectiveLos(r,e,t)}}return Object.defineProperty(e.prototype,"nonNullableShips",{get:function(){return this.ships.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planes",{get:function(){return Object(f.a)(this.nonNullableShips,function(e){return e.planes})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnknownSlot",{get:function(){return this.nonNullableShips.flatMap(function(e){return e.slots}).some(function(e){return e<0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(p.a)(this.planes.filter(function(e){return!e.is("ReconnaissanceAircraft")}),"fighterPower")},enumerable:!0,configurable:!0}),e}(),g=function(e){var r=this;this.shipFactory=e,this.create=function(e){var t=e.ships.map(r.shipFactory.create);return new y(t)}},v=function(){function e(e,r,t){var i=this;this.gear=e,this.slots=r,this.index=t,this.contactSelectionRate=function(e){var r=i.gear,t=r.los,a=r.improvement;return Math.ceil(t+a.contactSelectionModifier)/(20-2*e.contactMultiplier)},this.calcNightAerialAttackPower=function(e){void 0===e&&(e=!1);var r=i,t=r.isNightPlane,a=r.isNightAircraft,n=r.gear,o=r.slotSize;if(!a)return 0;var s=n.firepower,u=n.torpedo,c=n.asw,l=n.bombing,p=0,f=.3;t&&(p=3,f=.45);var h=Math.sqrt(n.improvement.value);return s+(e?0:u)+l+p*o+f*(s+u+c+l)*Math.sqrt(o)+h},this.shotdown=function(e){i.slotSize-=e,i.slotSize<0&&(i.slotSize=0)}}return Object.defineProperty(e.prototype,"is",{get:function(){return this.gear.is},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.gear.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.slots[this.index]},set:function(e){this.slots[this.index]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){var e=this.gear,r=this.slotSize;return e.calcFighterPower(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){var e=this.gear,r=this.slotSize;return e.calcFighterPower(r,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canContact",{get:function(){return this.is("CarrierBasedTorpedoBomber")||this.is("ReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactTriggerFactor",{get:function(){var e=this.gear,r=this.slotSize;return Math.floor(e.los*Math.sqrt(r))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInAirstrike",{get:function(){return 0!==this.slotSize&&(this.is("DiveBomber")||this.is("TorpedoBomber"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInCarrierShelling",{get:function(){var e=this.category;return 0!==this.slotSize&&e.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","JetPoweredFighterBomber","JetPoweredTorpedoBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosModifier",{get:function(){var e=this.gear,r=this.slotSize;return this.is("ReconnaissanceSeaplane")||this.is("SeaplaneBomber")?e.los*Math.floor(Math.sqrt(r)):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwordfish",{get:function(){return this.gear.name.includes("Swordfish")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightFighter",{get:function(){return 45===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAttacker",{get:function(){return 46===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightPlane",{get:function(){return this.isNightFighter||this.isNightAttacker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAircraft",{get:function(){var e=this.isNightPlane,r=this.isSwordfish,t=this.gear;return e||r||[154,320].includes(t.masterId)},enumerable:!0,configurable:!0}),e}(),S=function(e,r){var t=new Array;return e.map(function(i,a){var n=r[a];i&&n&&n.is("Aircraft")&&t.push(new v(n,e,a))}),t},A=function(e){var r=e.los;return e.is("LandBasedReconnaissanceAircraft")?r<=7?1.12:8===r?1.15:1.18:1},w=function(e){var r=e.los;return e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?r<=7?1.2:8===r?1.25:1.3:e.is("LandBasedReconnaissanceAircraft")?1.18:e.is("ReconnaissanceSeaplane")||e.is("LargeFlyingBoat")?r<=7?1.1:8===r?1.13:1.16:1},C=function(){function e(e,r){this.slots=e,this.gears=r,this.planes=S(e,r)}return Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlanes",{get:function(){return this.nonNullableGears.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(p.a)(this.planes,function(e){return e.fighterPower}),r=Math.max.apply(Math,this.nonNullableGears.map(A));return Math.floor(e*r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(p.a)(this.planes,function(e){return e.interceptionPower}),r=Math.max.apply(Math,this.nonNullableGears.map(w));return Math.floor(e*r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCombatRadius",{get:function(){return this.hasPlanes?Math.min.apply(Math,this.nonNullableGears.map(function(e){return e.radius})):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combatRadius",{get:function(){if(!this.hasPlanes)return 0;var e=this.minCombatRadius,r=this.nonNullableGears,t=Math.max.apply(Math,r.map(function(e){return e.is("ReconnaissanceAircraft")?e.radius:0}));if(t>0){var i=Math.min(Math.sqrt(t-e),3);return Math.round(e+i)}return e},enumerable:!0,configurable:!0}),e}(),M=function(e){var r=this;this.gearFactory=e,this.create=function(e){var t=e.equipments,i=e.slots.concat(),a=t.map(r.gearFactory.create);return new C(i,a)}},P=t(3501),I=function(){function e(e,r,t,i){var a=this;this.side=e,this.fleetType=r,this.fleets=t,this.landBase=i,this.getFighterPower=function(e){void 0===e&&(e=!1);var r=a,t=r.mainFleet,i=r.escortFleet;if(!t.hasUnknownSlot){if(!e||!i)return t.fighterPower;if(!i.hasUnknownSlot)return t.fighterPower+i.fighterPower}},this.getInterceptionPower=function(e){void 0===e&&(e=!1);var r=a,t=r.mainFleet,i=r.escortFleet;if(!t.hasUnknownSlot){var n=Object(p.a)(t.planes,function(e){return e.interceptionPower});if(!e||!i)return n;if(!i.hasUnknownSlot)return n+Object(p.a)(i.planes,function(e){return e.interceptionPower})}}}return Object.defineProperty(e.prototype,"isCombinedFleetOperation",{get:function(){return this.fleetType!==P.a.Single},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFleet",{get:function(){return this.fleets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escortFleet",{get:function(){if(this.isCombinedFleetOperation)return this.fleets[1]},enumerable:!0,configurable:!0}),e}(),O=function(){function e(e,r){this.fleetFactory=e,this.landBasedAirCorpsFactory=r}return e.prototype.create=function(e){var r=e.side,t=e.fleetType,i=e.fleets,a=e.landBase,n=i.map(this.fleetFactory.create),o=a.map(this.landBasedAirCorpsFactory.create);return new I(r,t,n,o)},e}(),k=t(405),j=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.map(function(e){return k.a[e]}).includes(r.shipClassId)}},F=j("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass"),B=j("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass"),G=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.some(function(e){return e(r)})}}(function(e){return 147===e.shipId},j("TashkentClass","GangutClass")),T=j("AirfieldPrincess","NorthernPrincess","HarbourPrincess","SupplyDepotPrincess","SupplyDepotSummerPrincess"),R=j("ArtilleryImp"),D=j("IsolatedIslandDemon","IsolatedIslandPrincess"),q={RoyalNavy:F,UsNavy:B,SovietNavy:G,Installation:function(e){return 0===e.speed},SoftSkinned:T,Pillbox:R,SupplyDepot:j("SupplyDepotPrincess","SupplyDepotSummerPrincess"),IsolatedIsland:D,Unremodeled:function(e){return e.sortId%10==1},Kai:function(e){return e.name.endsWith("改")},Kai2:function(e){return e.sortId%10>=6&&e.sortId%10<9}},L=Object.keys(q),N={from:function(e){return L.filter(function(r){return q[r](e)})}},E=function(){function e(e,r){var t=this;this.maxHp=e,this.currentHp=r,this.gte=function(e){var r=t.currentHp/t.maxHp;switch(e){case"Less":return r>=1;case"Shouha":return r>=.75;case"Chuuha":return r>=.5;case"Taiha":return r>=.25}return!0},this.lte=function(e){return e===t.damage||!t.gte(e)}}return Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.currentHp/this.maxHp;return e<=0?"Sunk":e<=.25?"Taiha":e<=.5?"Chuuha":e<=.75?"Shouha":"Less"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.7;case"Taiha":return.4}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.8}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswPowerModifier",{get:function(){return this.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){return this.lte("Taiha")?0:this.shellingPowerModifier},enumerable:!0,configurable:!0}),e}(),$={Sparkling:1.2,Normal:1,Orange:.8,Red:.5},K={accuracy:{shelling:$,asw:$,torpedo:{Sparkling:1.3,Normal:1,Orange:.7,Red:.35},night:$},evasion:{Sparkling:.7,Normal:1,Orange:1.2,Red:1.4}},x=function(){function e(e){var r=this;void 0===e&&(e=49),this.value=e,this.getAccuracyModifier=function(e){return K.accuracy[e][r.state]}}return Object.defineProperty(e.prototype,"state",{get:function(){var e=this.value;return e>=50?"Sparkling":e>=30?"Normal":e>=20?"Orange":"Red"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasionModifier",{get:function(){return K.evasion[this.state]},enumerable:!0,configurable:!0}),e}(),z=t(3554),H=t(607),_=t(610),V=t(448),J=t(449),U=t(170),W=function(){return(W=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},Y=function(){function e(e,r,t,i,a,o,s,u,c){var l=this;this.master=e,this.stats=r,this.nakedStats=t,this.health=i,this.morale=a,this.slots=o,this.gears=s,this.planes=u,this.attrs=c,this.is=function(e){return l.attrs.includes(e)},this.canEquip=function(e,r){var t=l.masterId,i=l.master,a=i.equippable,n=i.isAbyssal,o=e.gearId,s=e.categoryId;if(n)return!0;if(!a.categories.includes(s))return!1;if([492,392].includes(t)&&e.is("SeaplaneBomber"))return 194===o;if(l.slots.length<=r){return z.a.includes(s)||a.expantionSlot.includes(o)||33===o}return!l.shipClass.is("IseClass")||!Object(m.e)(l.name)||!(r>1&&e.is("MainGun"))},this.match=function(e){return"number"==typeof e?l.shipId===e:Object(n.a)(e)(l)},this.hasGear=function(e){var r=l.nonNullableGears;return"string"==typeof e?r.some(function(r){return r.is(e)}):"number"==typeof e?r.some(function(r){return r.masterId===e}):r.some(e)},this.countGear=function(e){var r=l.nonNullableGears;return void 0===e?r.length:"string"==typeof e?r.filter(function(r){return r.is(e)}).length:"number"==typeof e?r.filter(function(r){return r.masterId===e}).length:r.filter(e).length},this.totalEquipmentStats=function(e){return Object(p.a)(l.nonNullableGears,e)},this.getDefensePower=function(){var e=l.stats.armor+l.totalEquipmentStats(function(e){return e.improvement.defensePowerModifier}),r=.7*Math.max(e,1),t=r+.6*Math.floor(e-1);return{min:r,max:t,values:function(){return Object(H.a)(Math.floor(e)).map(function(e){return r+.6*e})},random:function(){return r+.6*Object(_.a)(Math.floor(e-1))}}},this.calcCruiserFitBonus=function(){var e=l,r=e.shipType,t=e.shipClass,i=e.countGear,a=r.any("LightCruiser","TorpedoCruiser","TrainingCruiser"),n=t.is("ZaraClass"),o=i(function(e){return[4,11].includes(e.masterId)}),s=i(function(e){return[65,119,139].includes(e.masterId)});return Object(V.a)({isLightCruiserClass:a,singleGunCount:o,twinGunCount:s,isZaraClass:n,zaraGunCount:Math.sqrt(i(162))})},this.getRemainingPlanes=function(){return l.planes.filter(m.b)},this.getNormalProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};if("CarrierShelling"!==l.getShellingType())return e;var r=l.getRemainingPlanes().filter(function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("LargeFlyingBoat")});e.power=1+Object(p.a)(r,function(e){return 0===e.index?e.gear.proficiency.criticalPowerModifier/100:e.gear.proficiency.criticalPowerModifier/200});var t=Object(p.a)(r,function(e){return e.gear.proficiency.internal})/r.length,i=0,a=0;return t>=10&&(i=Math.floor(Math.sqrt(.1*t))),t>=25&&(a=1),t>=40&&(a=2),t>=55&&(a=3),t>=70&&(a=4),t>=80&&(a=6),t>=100&&(a=9),e.hitRate=i+a,e.criticalRate=Object(p.a)(r,function(e){var r=e.gear.proficiency,t=r.internal,i=0;return 7===r.level&&(i=3),(Math.sqrt(Math.sqrt(.1*t))+i)/100}),e},this.getSpecialProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};return"CarrierShelling"!==l.getShellingType()?e:(l.getRemainingPlanes().filter(function(e){return e.participatesInCarrierShelling&&120===e.gear.proficiency.internal}).some(function(e){return 0===e.index})?e.power=1.25:e.power=1.106,e)},this.getSpecialEnemyModifier=function(e){return Object(U.b)(l,e)},this.getAntiInstallationModifier=function(e){var r=l.getSpecialEnemyModifier(e);return W(W({},{a13:1,a13next:1,a5:1,b12:0,b13:0,b13next:0}),r)},this.getShellingStats=function(){var e=l.stats,r=e.firepower,t=e.torpedo,i=e.luck,a=l.totalEquipmentStats("bombing"),n={power:l.totalEquipmentStats(function(e){return e.improvement.shellingPowerModifier}),accuracy:l.totalEquipmentStats(function(e){return e.improvement.shellingAccuracyModifier})},o=Object(V.b)({hasMainGun:l.hasGear("MainGun"),hasArmorPiercingShell:l.hasGear("ArmorPiercingShell"),hasSecondaryGun:l.hasGear("SecondaryGun"),hasRader:l.hasGear("Radar")}),s=l.getNormalProficiencyModifiers(),u=l.getSpecialProficiencyModifiers();return{shellingType:l.getShellingType(),firepower:r,torpedo:t,bombing:a,cruiserFitBonus:l.calcCruiserFitBonus(),healthModifier:l.health.shellingPowerModifier,accuracy:l.totalEquipmentStats("accuracy"),level:l.level,luck:i,moraleModifier:l.morale.getAccuracyModifier("shelling"),improvementModifiers:n,apShellModifiers:o,fitGunAccuracyBonus:0,normalProficiencyModifiers:s,specialProficiencyModifiers:u}},this.calcEvasionValue=function(e,r){var t=l.stats,i=t.evasion,a=t.luck,n=l.totalEquipmentStats(function(e){return e.is("EngineImprovement")?e.star:0}),o=Math.floor(1.5*Math.sqrt(n));return Object(J.a)({evasion:i,luck:a,improvementModifier:o,formationModifier:e,postcapModifier:r})},this.slotCapacities=e.slotCapacities.concat()}return Object.defineProperty(e.prototype,"shipId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClassId",{get:function(){return this.master.shipClassId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipTypeId",{get:function(){return this.master.shipType.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){return this.master.remodelGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.master.sortId%10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClass",{get:function(){return this.master.shipClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipType",{get:function(){return this.master.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.nakedStats.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(p.a)(this.planes.filter(function(e){var r=e.gear;return r.is("Fighter")||r.is("TorpedoBomber")||r.is("DiveBomber")}),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstallation",{get:function(){return 0===this.nakedStats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"installationType",{get:function(){var e=this.isInstallation,r=this.name;return e?r.includes("砲台")?"Pillbox":r.includes("離島")||r.includes("中枢")?"IsolatedIsland":r.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canNightAttack",{get:function(){var e=this.shipClass,r=(this.shipType,this.health),t=this.master;return!r.lte("Taiha")&&(e.is("ArkRoyalClass")?"Chuuha"!==r.damage&&this.planes.some(function(e){return e.isSwordfish}):t.firepower[0]>0)},enumerable:!0,configurable:!0}),e.prototype.getShellingType=function(){var e=this.shipType,r=this.shipClass,t=this.isInstallation,i=this.hasGear;return e.isAircraftCarrierClass?"CarrierShelling":(r.is("RevisedKazahayaClass")||t)&&(i("DiveBomber")||i("TorpedoBomber"))?"CarrierShelling":"Shelling"},e}(),Z=t(388),Q=t(3510),X=t(447),ee=t(3641),re=t(88),te=t(3553),ie=["firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","speed","effectiveLos"],ae=[{byGear:{gearId:294},byShip:{shipClassId:{$in:[k.a.FubukiClass,k.a.AyanamiClass,k.a.AkatsukiClass]}},multiple:{firepower:1},synergies:[{byGear:{attrs:"SurfaceRadar"},count1:{firepower:3,torpedo:1,evasion:2}},{byGear:{gearId:{$in:[13,125,285]}},count1:{firepower:1,torpedo:3},count2:{firepower:1,torpedo:2}},{byGear:{gearId:285},count1:{torpedo:1}}]},{byGear:{gearId:295},byShip:{shipClassId:{$in:[k.a.FubukiClass,k.a.AyanamiClass,k.a.AkatsukiClass]}},multiple:{firepower:2,antiAir:2},synergies:[{byGear:{attrs:"SurfaceRadar"},count1:{firepower:3,torpedo:1,evasion:2}},{byGear:{attrs:"AirRadar"},count1:{antiAir:6}},{byGear:{gearId:{$in:[13,125,285]}},count1:{firepower:1,torpedo:3},count2:{firepower:1,torpedo:2}},{byGear:{gearId:285},count1:{torpedo:1}}]},{byGear:{gearId:296},rules:[{byShip:{shipClassId:{$in:[k.a.AyanamiClass,k.a.AkatsukiClass]}},multiple:{firepower:1}},{byShip:{shipClassId:k.a.HatsuharuClass},multiple:{firepower:1,evasion:1}},{byShip:{shipId:497},multiple:{firepower:2,evasion:2}},{byShip:{shipId:145},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipId:498},multiple:{firepower:1,antiAir:1,evasion:2}},{byShip:{shipId:144},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipId:{$in:[587,469]}},multiple:{firepower:1,evasion:2}},{byShip:{shipClassId:k.a.ShiratsuyuClass,attrs:{$not:"Kai2"}},multiple:{firepower:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[k.a.AyanamiClass,k.a.AkatsukiClass,k.a.HatsuharuClass]}},count1:{firepower:1,torpedo:2,evasion:2}},{byShip:{shipClassId:k.a.ShiratsuyuClass},count1:{firepower:1,torpedo:3,evasion:2}}]},{byGear:{attrs:"AirRadar"},rules:[{byShip:{shipClassId:{$in:[k.a.AyanamiClass,k.a.AkatsukiClass,k.a.HatsuharuClass]}},count1:{antiAir:5}},{byShip:{shipClassId:k.a.ShiratsuyuClass},count1:{antiAir:6}}]},{byGear:{gearId:285},byShip:{shipClassId:{$in:[k.a.AyanamiClass,k.a.AkatsukiClass,k.a.HatsuharuClass]}},count1:{firepower:1,torpedo:3}},{byGear:{gearId:286},byShip:{shipClassId:k.a.ShiratsuyuClass},count1:{firepower:1,torpedo:3}}]},{byGear:{gearId:266},byShip:{shipClassId:{$in:[k.a.KagerouClass,k.a.AsashioClass,k.a.ShiratsuyuClass]}},multiple:{firepower:1},rules:[{byShip:{shipClassId:k.a.KagerouClass,attrs:"Kai2"},count1:{firepower:1},count2:{firepower:2}},{byShip:{shipId:{$in:[228,557,145]}},multiple:{evasion:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[k.a.AsashioClass,k.a.ShiratsuyuClass]}},count1:{firepower:1,torpedo:3,evasion:1}},{byShip:{shipClassId:k.a.KagerouClass},count1:{firepower:2,torpedo:3,evasion:1}}]}]},{byGear:{gearId:267},rules:[{byShip:{shipClassId:k.a.YuugumoClass,attrs:"Kai2"},multiple:{firepower:3,evasion:1}},{byShip:{shipClassId:{$in:[k.a.YuugumoClass,k.a.ShimakazeClass]},attrs:{$not:"Kai2"}},multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:k.a.KagerouClass},multiple:{firepower:1,evasion:1}},{byShip:{shipClassId:k.a.KagerouClass,attrs:"Kai2"},count1:{firepower:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:k.a.YuugumoClass,attrs:"Kai2"},count1:{firepower:3,torpedo:4,evasion:3}},{byShip:{shipClassId:k.a.YuugumoClass,attrs:{$not:"Kai2"}},count1:{firepower:2,torpedo:3,evasion:1}},{byShip:{shipId:229},count1:{firepower:1,torpedo:3,evasion:2}}]}]},{byGear:{gearId:293},rules:[{byShip:{shipClassId:{$in:[k.a.KamikazeClass,k.a.MutsukiClass]}},multiple:{firepower:2,antiAir:1,evasion:3}},{byShip:{shipClassId:{$in:[k.a.ShimushuClass,k.a.EtorofuClass]}},multiple:{firepower:1,antiAir:1,evasion:2}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[k.a.KamikazeClass,k.a.MutsukiClass]}},count1:{firepower:2,torpedo:1,evasion:3}},{byShip:{shipClassId:{$in:[k.a.ShimushuClass,k.a.EtorofuClass]}},count1:{firepower:2,evasion:3,asw:1}}]},{byGear:{gearId:174},byShip:{shipClassId:{$in:[k.a.KamikazeClass,k.a.MutsukiClass]}},count1:{firepower:2,torpedo:4},count2:{firepower:1,torpedo:3}}]},{byGear:229,minStar:7,rules:[{byShip:{$or:[{shipClassId:{$in:[k.a.KamikazeClass,k.a.MutsukiClass]}},{shipTypeId:re.a.CoastalDefenseShip}]},multiple:{firepower:1,antiAir:1}},{byShip:{shipId:488},multiple:{firepower:2,antiAir:3}},{byShip:{shipId:487},multiple:{firepower:2,antiAir:2}}],synergies:[{byGear:{attrs:"SurfaceRadar"},rules:[{byShip:{shipClassId:{$in:[k.a.KamikazeClass,k.a.MutsukiClass]}},count1:{firepower:2,evasion:3}},{byShip:{shipTypeId:re.a.CoastalDefenseShip},count1:{firepower:1,evasion:4}},{byShip:{shipId:{$in:[488,487]}},count1:{firepower:3,evasion:2}}]}]},{byGear:{gearId:297},rules:[{byShip:{shipClassId:k.a.FubukiClass},multiple:{evasion:2}},{byShip:{shipClassId:{$in:[k.a.AyanamiClass,k.a.AkatsukiClass]}},multiple:{evasion:1}}]},{byGear:{gearId:63},rules:[{byShip:{shipClassId:{$in:[k.a.AyanamiClass,k.a.AkatsukiClass,k.a.HatsuharuClass]}},multiple:{antiAir:1}},{byShip:{shipId:{$in:[242,497,498]}},multiple:{evasion:1}},{byShip:{shipId:145},multiple:{firepower:1}},{byShip:{shipId:144},multiple:{firepower:1,torpedo:1,antiAir:1,evasion:2}},{byShip:{shipId:{$in:[469,587]}},multiple:{evasion:2}}]},{byGear:{gearId:313},byShip:{attrs:"UsNavy",shipTypeId:re.a.Destroyer},multiple:{firepower:2,antiAir:2,evasion:1,armor:1}},{byGear:{gearId:308},rules:[{byShip:{attrs:"UsNavy",shipTypeId:re.a.Destroyer},multiple:{firepower:1,antiAir:1,evasion:1}},{byShip:{shipTypeId:re.a.Destroyer},multiple:{firepower:1}},{byShip:{shipTypeId:re.a.CoastalDefenseShip},multiple:{antiAir:1,evasion:1}}]},{byGear:{gearId:282},byShip:{$or:[{shipClassId:{$in:[k.a.TashkentClass,k.a.YuubariClass]}},{shipId:147}]},multiple:{firepower:2,armor:1}},{byGear:{gearId:90},rules:[{byShip:{shipId:{$in:[416,417,295]}},multiple:{firepower:1}},{byShip:{shipId:264},multiple:{firepower:1,antiAir:1}},{byShip:{shipId:142},multiple:{firepower:2,evasion:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},byShip:{shipClassId:{$in:[k.a.FurutakaClass,k.a.AobaClass]}},count1:{firepower:3,torpedo:2,evasion:2}},{byGear:{attrs:"AirRadar"},byShip:{shipId:{$in:[61,264]}},count1:{antiAir:5,evasion:2}}]},{byGear:{gearId:303},rules:[{byShip:{shipClassId:{$in:[k.a.KumaClass,k.a.NagaraClass,k.a.SendaiClass,k.a.AganoClass]}},multiple:{firepower:1,antiAir:1}},{byShip:{shipClassId:k.a.GotlandClass},multiple:{firepower:1,antiAir:2,evasion:1}}]},{byGear:{gearId:119},rules:[{byShip:{shipClassId:{$in:[k.a.YuubariClass,k.a.KatoriClass]}},multiple:{firepower:1}},{byShip:{shipClassId:k.a.NisshinClass},multiple:{firepower:2,torpedo:1}}]},{byGear:{gearId:310},rules:[{byShip:{shipClassId:k.a.YuubariClass},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipClassId:k.a.KatoriClass},multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:k.a.NisshinClass},multiple:{firepower:3,torpedo:2,antiAir:1,evasion:1}}]},{byGear:{gearId:340},byShip:{shipClassId:k.a.DucaDegliAbruzziClass},multiple:{firepower:1,antiAir:1,evasion:1}},{byGear:{gearId:341},rules:[{byShip:{shipClassId:k.a.DucaDegliAbruzziClass},multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{shipClassId:k.a.GotlandClass},multiple:{firepower:1,antiAir:1,evasion:1}}]},{byGear:{gearId:289},rules:[{byShip:{shipId:149},multiple:{firepower:2,antiAir:1}},{byShip:{shipId:151},multiple:{firepower:2,antiAir:2,evasion:2}},{byShip:{shipId:{$in:[150,152]}},multiple:{firepower:1}}],synergies:[{byGear:{attrs:"SurfaceRadar"},byShip:{shipId:{$in:[149,151]}},count1:{firepower:2,evasion:2}}]},{byGear:{gearId:290},rules:[{byShip:{shipClassId:k.a.FusouClass,attrs:"Kai2"},multiple:{firepower:1}},{byShip:{shipId:{$in:[82,88]}},multiple:{firepower:2,antiAir:2,evasion:1}},{byShip:{shipId:553},multiple:{firepower:3,antiAir:2,evasion:1}},{byShip:{shipId:554},multiple:{firepower:3,antiAir:2,evasion:2}}],synergies:[{byGear:{gearId:318},rules:[{byShip:{shipClassId:k.a.NagatoClass,attrs:"Kai2"},count1:{firepower:2,evasion:2,armor:1}},{byShip:{shipClassId:k.a.IseClass,shipTypeId:re.a.AviationBattleship},count1:{evasion:2,armor:1}},{byShip:{shipId:554},count1:{firepower:1}}]}]},{byGear:{gearId:318},rules:[{byShip:{shipClassId:k.a.NagatoClass,attrs:"Kai2"},multiple:{firepower:3,antiAir:2,evasion:1}},{byShip:{shipClassId:k.a.IseClass,shipTypeId:re.a.AviationBattleship},multiple:{firepower:2,antiAir:2,evasion:2}},{byShip:{shipId:554},multiple:{firepower:1}},{byShip:{shipClassId:k.a.FusouClass,attrs:"Kai2"},multiple:{firepower:1}}]},{byGear:{gearId:{$in:[290,318]}},synergies:[{byGear:{attrs:"AirRadar"},byShip:{shipClassId:k.a.IseClass,shipTypeId:re.a.AviationBattleship},count1:{antiAir:2,evasion:3}}]},{byGear:{gearId:104},rules:[{byShip:{shipId:149},multiple:{firepower:2}},{byShip:{shipId:{$in:[150,152]}},multiple:{firepower:1}},{byShip:{shipId:151},multiple:{firepower:2,antiAir:1,evasion:2}}]},{byGear:{gearId:{$in:[298,299,300]}},rules:[{byShip:{shipClassId:k.a.NelsonClass},multiple:{firepower:2,armor:1}},{byShip:{shipClassId:k.a.QueenElizabethClass},multiple:{firepower:2,armor:1,evasion:-2}},{byShip:{shipClassId:k.a.KongouClass,rank:6},multiple:{firepower:1,armor:1,evasion:-3}}]},{byGear:{gearId:328},rules:[{byShip:{shipClassId:{$in:[k.a.IseClass,k.a.FusouClass]}},multiple:{firepower:1}},{byShip:{shipClassId:k.a.KongouClass,rank:1},multiple:{firepower:1}},{byShip:{shipClassId:k.a.KongouClass,rank:{$in:[2,6]}},multiple:{firepower:2,evasion:1}},{byShip:{shipId:591},multiple:{firepower:3,torpedo:1,evasion:1}}]},{byGear:{gearId:329},rules:[{byShip:{shipClassId:{$in:[k.a.IseClass,k.a.FusouClass]}},multiple:{firepower:1}},{byShip:{shipClassId:k.a.KongouClass,rank:1},multiple:{firepower:1}},{byShip:{shipClassId:k.a.KongouClass,rank:2},multiple:{firepower:2,evasion:1}},{byShip:{shipClassId:k.a.KongouClass,rank:6},multiple:{firepower:3,antiAir:1,evasion:1}},{byShip:{shipId:591},multiple:{firepower:4,torpedo:2,antiAir:1,evasion:1}}]},{byGear:{gearId:330},rules:[{byShip:{shipId:{$in:[541,573,576]}},multiple:{firepower:2}},{byShip:{shipClassId:{$in:[k.a.NagatoClass,k.a.ColoradoClass]},rank:{$lte:2}},multiple:{firepower:1}}]},{byGear:{gearId:331},rules:[{byShip:{shipId:1496},multiple:{firepower:2,evasion:1}},{byShip:{shipId:{$in:[541,573,576]}},multiple:{firepower:2}},{byShip:{$or:[{shipClassId:k.a.NagatoClass,rank:{$lte:2}},{shipId:601}]},multiple:{firepower:1}}]},{byGear:{gearId:332},rules:[{byShip:{shipId:1496},multiple:{firepower:2,evasion:1,antiAir:1}},{byShip:{shipId:{$in:[541,573,576]}},multiple:{firepower:2}},{byShip:{$or:[{shipClassId:k.a.NagatoClass,rank:{$lte:2}},{shipId:601}]},multiple:{firepower:1}}]},{byGear:{gearId:174},rules:[{byShip:{shipClassId:k.a.KamikazeClass},multiple:{torpedo:1,evasion:2}},{byShip:{shipId:591},multiple:{torpedo:6,evasion:3}}]},{byGear:{gearId:285},byShip:{shipClassId:{$in:[k.a.FubukiClass,k.a.AyanamiClass,k.a.AkatsukiClass,k.a.HatsuharuClass]},attrs:"Kai2"},countCap:2,rules:[{multiple:{torpedo:2,evasion:1}},{minStar:10,multiple:{firepower:1}}]},{byGear:{gearId:286},byShip:{shipClassId:{$in:[k.a.ShiratsuyuClass,k.a.AsashioClass,k.a.KagerouClass,k.a.YuugumoClass]},attrs:"Kai2"},countCap:2,rules:[{multiple:{torpedo:2,evasion:1}},{byShip:{shipClassId:k.a.KagerouClass},minStar:5,multiple:{torpedo:1}},{minStar:10,multiple:{firepower:1}}]},{byGear:283,byShip:{attrs:"SovietNavy",shipTypeId:re.a.Destroyer},multiple:{firepower:1,torpedo:3,armor:1}},{byGear:314,byShip:{attrs:"UsNavy",shipTypeId:re.a.Destroyer},multiple:{firepower:1,torpedo:3}},{byGear:15,byShip:{shipClassId:k.a.KagerouClass,attrs:"Kai2"},countCap:2,multiple:{torpedo:2}},{byGear:58,byShip:{$or:[{shipTypeId:re.a.TorpedoCruiser},{shipClassId:{$in:[k.a.ShimakazeClass,k.a.AkizukiClass]}}]},multiple:{torpedo:1}},{byGear:179,byShip:{shipClassId:k.a.AkizukiClass},multiple:{torpedo:1}},{byGear:67,byShip:{shipTypeId:{$nin:[re.a.Submarine,re.a.SubmarineAircraftCarrier]}},multiple:{torpedo:-5}},{byGear:{gearId:{$in:[79,81]}},rules:[{byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:3}},{byShip:{$or:[{shipClassId:k.a.FusouClass,shipTypeId:re.a.AviationBattleship},{shipClassId:k.a.IseClass,attrs:"Kai"}]},multiple:{firepower:2}}]},{byGear:237,rules:[{byShip:{shipClassId:k.a.FusouClass,shipTypeId:re.a.AviationBattleship},multiple:{firepower:2}},{byShip:{shipClassId:k.a.IseClass,attrs:"Kai"},multiple:{firepower:3,evasion:1}},{byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:4,evasion:2}}]},{byGear:322,byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:5,antiAir:2,asw:1,evasion:2}},{byGear:323,byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:6,antiAir:3,asw:2,evasion:3}},{byGear:304,rules:[{byShip:{shipClassId:{$in:[k.a.KumaClass,k.a.NagaraClass,k.a.SendaiClass,k.a.AganoClass]}},multiple:{firepower:1,evasion:1,asw:1}},{byShip:{shipClassId:k.a.GotlandClass},multiple:{firepower:1,evasion:2,asw:2}}]},{byGear:194,effectiveLosBonus:!0,rules:[{byShip:392,multiple:{firepower:1,evasion:2,los:2}},{byShip:{shipClassId:k.a.CommandantTesteClass},multiple:{firepower:3,evasion:2,los:2}},{byShip:{shipClassId:{$in:[k.a.MizuhoClass,k.a.KamoiClass]}},multiple:{evasion:1,los:2}}]},{byGear:19,rules:[{byShip:{shipTypeId:re.a.LightAircraftCarrier},multiple:{antiAir:1,evasion:1}},{byShip:{shipClassId:k.a.HoushouClass},multiple:{firepower:1,asw:1,evasion:1}},{byShip:{shipClassId:{$in:[k.a.KasugaMaruClass,k.a.TaiyouClass]}},multiple:{firepower:1,asw:2}}]},{byGear:228,rules:[{byShip:{shipTypeId:re.a.LightAircraftCarrier},multiple:{antiAir:1,asw:2,evasion:1}},{byShip:{shipClassId:k.a.HoushouClass},multiple:{firepower:1,antiAir:2,evasion:2}},{byShip:{shipClassId:{$in:[k.a.KasugaMaruClass,k.a.TaiyouClass]}},multiple:{firepower:1,antiAir:1,asw:2,evasion:1}}]},{byGear:335,rules:[{byShip:{shipId:{$in:[594,599]}},count1:{antiAir:2,evasion:1}},{byShip:{shipId:{$in:[277,278]}},count1:{antiAir:1,evasion:1}}]},{byGear:336,rules:[{byShip:{shipId:{$in:[594,599]}},count1:{firepower:1,antiAir:2,evasion:1}},{byShip:{shipId:{$in:[277,278]}},count1:{firepower:1,antiAir:1,evasion:1}}]},{byGear:338,rules:[{byShip:599,count1:{firepower:4,antiAir:3,evasion:4}},{byShip:594,count1:{firepower:1,antiAir:2,evasion:3}},{byShip:{shipId:{$in:[277,278]}},count1:{firepower:1,antiAir:1,evasion:2}}]},{byGear:339,rules:[{byShip:599,count1:{firepower:6,antiAir:4,evasion:5}},{byShip:594,count1:{firepower:1,antiAir:3,evasion:4}},{byShip:{shipId:{$in:[277,278]}},count1:{firepower:1,antiAir:2,evasion:2}}]},{byGear:184,byShip:{shipClassId:k.a.AquilaClass},multiple:{firepower:1,antiAir:2,evasion:3}},{byGear:189,byShip:{shipClassId:{$in:[k.a.AquilaClass,k.a.GrafZeppelinClass]}},multiple:{antiAir:1,evasion:2}},{byGear:{gearId:{$in:[24,57,111]}},byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:2}},{byGear:99,rules:[{byShip:{shipClassId:k.a.HiryuuClass},count1:{firepower:1}},{byShip:{shipClassId:k.a.SouryuuClass},count1:{firepower:4}}]},{byGear:100,rules:[{byShip:196,count1:{firepower:3}},{byShip:197,count1:{firepower:6}},{byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},count1:{firepower:4}}]},{byGear:291,byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:6,evasion:1}},{byGear:292,byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:8,antiAir:1,evasion:2}},{byGear:319,byShip:{shipClassId:k.a.IseClass,attrs:"Kai2"},multiple:{firepower:7,antiAir:3,evasion:2}},{byGear:320,rules:[{byShip:{shipId:{$in:[196,197]}},multiple:{firepower:3}},{byShip:{shipId:{$in:[508,509,554]}},multiple:{firepower:4}},{byShip:553,multiple:{firepower:2}}]},{byGear:{gearId:{$in:[305,306]}},rules:[{byShip:{shipClassId:{$in:[k.a.AquilaClass,k.a.GrafZeppelinClass]}},multiple:{firepower:1,evasion:1}},{byShip:{remodelGroup:521,rank:{$gte:2}},multiple:{asw:1,evasion:1}},{byShip:{remodelGroup:534},multiple:{asw:3,evasion:2}}]},{byGear:316,byShip:{shipClassId:k.a.AquilaClass},multiple:{firepower:4,antiAir:1,evasion:1}},{byGear:{gearId:{$in:[18,52]}},rules:[{byShip:{shipId:{$in:[277,278,156]}},multiple:{firepower:1}},{byShip:594,multiple:{firepower:1,evasion:1}},{byShip:599,multiple:{firepower:2,evasion:1}}]},{byGear:342,rules:[{byShip:599,multiple:{firepower:3,antiAir:2,evasion:2}},{byShip:594,multiple:{firepower:2,antiAir:1,evasion:1}},{byShip:{$or:[{shipId:{$in:[277,278]}},{shipClassId:k.a.ShoukakuClass,attrs:"Kai2"}]},multiple:{firepower:1}}]},{byGear:343,rules:[{byShip:599,multiple:{firepower:5,antiAir:3,evasion:3}},{byShip:594,multiple:{firepower:3,antiAir:2,evasion:1}},{byShip:{shipId:{$in:[277,278]}},multiple:{firepower:2}},{byShip:{shipClassId:k.a.ShoukakuClass,attrs:"Kai2"},multiple:{firepower:1}}]},{byGear:93,rules:[{byShip:{shipClassId:k.a.HiryuuClass},count1:{firepower:3}},{byShip:{shipClassId:k.a.SouryuuClass},count1:{firepower:1}}]},{byGear:94,rules:[{byShip:196,count1:{firepower:7}},{byShip:197,count1:{firepower:3}}]},{byGear:143,rules:[{byShip:{shipId:{$in:[277,594]}},count1:{firepower:3}},{byShip:{shipId:{$in:[278,110,288,461,466]}},count1:{firepower:2}},{byShip:{shipId:{$in:[157,111,112,462,467]}},count1:{firepower:1}}]},{byGear:144,rules:[{byShip:{shipId:{$in:[461,466]}},count1:{firepower:4}},{byShip:{shipId:{$in:[277,594,599]}},count1:{firepower:3}},{byShip:{shipId:{$in:[278,110,288,462,467]}},count1:{firepower:2}},{byShip:{shipId:{$in:[111,112,157]}},count1:{firepower:1}}]},{byGear:{gearId:{$in:[82,302]}},byShip:{shipClassId:k.a.TaiyouClass},multiple:{asw:1,evasion:1}},{byGear:188,byShip:{shipClassId:k.a.AquilaClass},multiple:{firepower:3,antiAir:1,evasion:1}},{byGear:344,rules:[{byShip:318,multiple:{firepower:4,asw:1}},{byShip:{shipId:{$in:[555,560]}},multiple:{firepower:2,asw:2}},{byShip:599,multiple:{firepower:3}},{byShip:282,multiple:{firepower:2,asw:1}}]},{byGear:345,rules:[{byShip:318,multiple:{firepower:5,evasion:2,asw:1}},{byShip:{shipId:{$in:[555,560]}},multiple:{firepower:3,evasion:3,asw:2}},{byShip:599,multiple:{firepower:3,evasion:1}},{byShip:282,multiple:{firepower:3,evasion:1,asw:1}}]},{byGear:{categoryId:{$in:[s.a.CarrierBasedReconnaissanceAircraft,s.a.CarrierBasedReconnaissanceAircraft2]}},effectiveLosBonus:!0,rules:[{minStar:2,count1:{los:1}},{minStar:4,count1:{firepower:1}},{minStar:6,count1:{los:1}},{minStar:10,count1:{firepower:1,los:1}}]},{byGear:61,effectiveLosBonus:!0,rules:[{byShip:553,count1:{firepower:3,evasion:2,armor:1,range:1}},{byShip:554,count1:{firepower:3,evasion:3,armor:3,range:1}},{byShip:{shipId:{$in:[196,197]}},count1:{range:1}},{byShip:{shipClassId:k.a.SouryuuClass},minStar:1,count1:{firepower:3,los:3}},{byShip:{shipClassId:k.a.SouryuuClass},minStar:8,count1:{firepower:1,los:1}},{byShip:{shipClassId:k.a.HiryuuClass},minStar:1,count1:{firepower:2,los:2}},{byShip:{shipId:{$in:[560,508,509]}},minStar:1,count1:{firepower:1,los:1}}]},{byGear:106,rules:[{byShip:{shipId:{$in:[407,145,419,151,541]}},multiple:{firepower:1,antiAir:2,evasion:3,armor:1}},{byShip:{remodelGroup:{$in:[139,49,20,167,170,425,532]}},multiple:{antiAir:2,evasion:2,armor:1}},{byShip:{remodelGroup:{$in:[183,35,465]}},multiple:{antiAir:1,evasion:3,armor:1}}]},{byGear:307,byShip:{attrs:"UsNavy"},multiple:{firepower:1,antiAir:1,evasion:1}},{byGear:315,rules:[{byShip:{attrs:"UsNavy"},multiple:{firepower:2,evasion:3,los:4}},{byShip:{attrs:"UsNavy",shipTypeId:re.a.Destroyer},multiple:{firepower:1},count1:{range:1}}]},{byGear:47,rules:[{byShip:{remodelGroup:{$in:[471,473,43,457,122,425]}},multiple:{firepower:1,evasion:2,asw:3}},{byShip:{remodelGroup:{$in:[16,36,414,167,170,527]}},multiple:{evasion:2,asw:2}}]},{byGear:35,rules:[{byShip:{shipId:{$in:[149,591]}},count1:{firepower:1,antiAir:1}},{byShip:150,count1:{antiAir:1}},{byShip:151,count1:{antiAir:1,evasion:1}},{byShip:152,count1:{firepower:1}}]},{byGear:317,rules:[{byShip:{shipId:{$in:[149,591]}},count1:{firepower:3,antiAir:3}},{byShip:150,count1:{firepower:2,antiAir:2}},{byShip:{shipId:{$in:[151,573]}},count1:{firepower:2,antiAir:2,evasion:1}},{byShip:152,count1:{firepower:3,antiAir:2}},{byShip:541,count1:{firepower:1,antiAir:2}},{byShip:{shipClassId:k.a.KongouClass,rank:{$lte:2}},count1:{firepower:1,antiAir:1}}]},{byGear:301,byShip:{attrs:"RoyalNavy"},multiple:{antiAir:2,evasion:1,armor:1}},{byGear:268,byShip:{shipId:{$in:[216,547,217,146]}},count1:{evasion:7,armor:2}},{byGear:74,rules:[{byShip:{remodelGroup:55},count1:{firepower:2,torpedo:2,evasion:-1}},{byShip:{remodelGroup:{$in:[86,85,69,34]}},count1:{firepower:2,evasion:-1}},{byShip:{remodelGroup:132},multiple:{firepower:1}},{byShip:{remodelGroup:20},multiple:{antiAir:1}}]},{byGear:140,byShip:{remodelGroup:{$in:[86,85]}},count1:{firepower:3,evasion:-2}},{byGear:{gearId:{$in:[324,325]}},rules:[{byShip:553,multiple:{antiAir:1,evasion:1}},{byShip:554,multiple:{antiAir:2,evasion:1}}]},{byGear:326,rules:[{byShip:553,multiple:{asw:2,evasion:1}},{byShip:554,multiple:{firepower:1,asw:3,evasion:2}}]},{byGear:327,rules:[{byShip:553,multiple:{firepower:1,asw:3,evasion:1}},{byShip:554,multiple:{firepower:2,asw:4,evasion:2}}]}],ne=function(e,r){for(var t={},i=0,a=ie;i<a.length;i++){var n=a[i],o=(e[n]||0)+(r[n]||0);0!==o&&(t[n]=o)}return t},oe=function(e,r,t){return function(i){var a,n,o=i.byShip,s=i.minStar,u=i.countCap,c=i.multiple,l=i.count4,p=i.count3,f=i.count2,h=i.count1,d={};if(o&&!e.match(o))return d;if(s){var b=e.countGear(function(e){return e.match(r)&&e.star>=s});t=Math.min(t,b)}return u&&(t=Math.min(t,u)),c&&(a=c,n=t,d=Object(ee.a)(a,function(e){return e&&e*n})),[h,f,p,l].forEach(function(e,r){e&&t>r&&(d=ne(d,e))}),d}},se=function(e){var r=function(e){if(!e.hasGear(33))return{};var r=te.a.getSpeedGroup(e),t=e.countGear(34),i=e.countGear(87),a=te.a.getSpeedIncrement(r,t,i);return a>0?{speed:a}:e.shipClassId===k.a.JohnCButlerClass?{speed:5}:{}}(e);return ae.map(function(e){var r=function(t){var i=t.byGear,a=t.byShip,n=t.countCap,o=t.rules,s=t.synergies,u=t.effectiveLosBonus;if(a&&!e.match(a))return{};var c=e.countGear(function(e){return e.match(i)});if(0===c)return{};n&&(c=Math.min(n,c));var l=oe(e,i,c),p=l(t),f=o?o.map(l).reduce(ne,p):p;if(s){var h=s.map(r).reduce(ne,{});f=ne(f,h)}return u&&f.los&&(f=ne(f,{effectiveLos:f.los})),f};return r}(e)).reduce(ne,r)},ue=function(){function e(e,r,t){var i=this;void 0===t&&(t={}),this.nakedStats=e,this.gears=r,this.equipmentBonus=t,this.getBonus=function(e){var r=i.equipmentBonus;return Object(X.a)(ie,e)&&r[e]||0}}return e.prototype.getStat=function(e){var r=this.nakedStats,t=this.gears;return r[e]+Object(p.a)(t.filter(m.b),e)+this.getBonus(e)},Object.defineProperty(e.prototype,"hp",{get:function(){return this.nakedStats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.getStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.getStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.getStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.getStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.getStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.getStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.getStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.nakedStats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.getStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e=this.nakedStats,r=this.gears,t=this.getBonus,i=e.range,a=Object(Q.a)(r,"range");return(a&&a.range>i?a.range:i)+t("range")},enumerable:!0,configurable:!0}),e}(),ce=function(e,r){var t=this;this.masters=e,this.gearFactory=r,this.gearsFrom=function(e,r){return e?e.map(t.gearFactory.create):r.isAbyssal?r.initialEquipment.map(function(e){var r=e.id,i=e.improvement;return t.gearFactory.create({masterId:r,improvement:i})}):[]},this.create=function(e){if(e){var r=e.masterId,i=e.level,a=void 0===i?1:i,n=e.increased,o=e.morale,s=t.masters.find(function(e){return e.shipId===r});if(s){var u=t.gearsFrom(e.equipments,s),c=new Z.a(s,a,n),l=new ue(c,u),p=e.currentHp,f=void 0===p?l.hp:p,h=new E(l.hp,f),d=new x(o),b=e.slots?e.slots.concat():s.slotCapacities.concat(),m=S(b,u),y=N.from(s),g=new Y(s,l,c,h,d,b,u,m,y);return g.stats.equipmentBonus=se(g),g}}}},le=function(){function e(e){void 0===e&&(e=new i.a),this.masterData=e,this.gearFactory=new l(e.gears),this.shipFactory=new ce(e.ships,this.gearFactory),this.fleetFactory=new g(this.shipFactory),this.landBasedAirCorpsFactory=new M(this.gearFactory),this.operationFactory=new O(this.fleetFactory,this.landBasedAirCorpsFactory)}return Object.defineProperty(e.prototype,"createOperation",{get:function(){return this.operationFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createFleet",{get:function(){return this.fleetFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createLandBasedAirCorps",{get:function(){return this.landBasedAirCorpsFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createShip",{get:function(){return this.shipFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createGear",{get:function(){return this.gearFactory.create},enumerable:!0,configurable:!0}),e}();r.a=le},3501:function(e,r,t){"use strict";var i;!function(e){e.Single="Single",e.CarrierTaskForce="CarrierTaskForce",e.SurfaceTaskForce="SurfaceTaskForce",e.TransportEscort="TransportEscort",e.Combined="Combined"}(i||(i={})),r.a=i},3506:function(e,r,t){"use strict";var i;!function(e){e.NormalBattle="NormalBattle",e.NightBattle="NightBattle",e.NightToDayBattle="NightToDayBattle",e.AerialBattle="AerialBattle",e.AirDefenseBattle="AirDefenseBattle"}(i||(i={})),r.a=i},3507:function(e,r,t){"use strict";var i=function e(r,t,i){this.id=r,this.name=t,this.modifier=i,e.values.push(this)};r.a=i,i.values=[],i.Parallel=new i(1,"同航戦",1),i.HeadOn=new i(2,"反航戦",.8),i.CrossingTheTAdvantage=new i(3,"T有利",1.2),i.CrossingTheTDisadvantage=new i(4,"T不利",.6),i.random=function(e){void 0===e&&(e=!1);var r=Math.random();return r<.15?i.CrossingTheTAdvantage:r<.6?i.Parallel:r<.9?i.HeadOn:e?i.HeadOn:i.CrossingTheTDisadvantage}},3553:function(e,r,t){"use strict";var i;!function(e){e[e.FastA=0]="FastA",e[e.FastB1SlowA=1]="FastB1SlowA",e[e.FastB2SlowB=2]="FastB2SlowB",e[e.OtherC=3]="OtherC"}(i||(i={}));var a=function(){function e(r,t){var i=this;this.value=r,this.name=t,this.add=function(r){return e.fromNumber(i.value+r)}}return e.getSpeedGroup=function(r){var t=r.shipType,a=r.shipClass;if(e.fromNumber(r.nakedStats.speed)===e.Fast&&t.is("SeaplaneTender")||t.isSubmarineClass||["加賀型","夕張型","特種船丙型","工作艦","改風早型"].includes(a.name))return i.OtherC;if(["島風型","Ташкент級","大鳳型","翔鶴型","利根型","最上型"].includes(a.name))return i.FastA;if(["阿賀野型","蒼龍型","飛龍型","金剛型","大和型","Iowa級"].includes(a.name))return i.FastB1SlowA;var n=[181,316].includes(r.masterId),o=[404,406].includes(r.masterId),s=[331,429].includes(r.masterId),u=541===r.masterId;return n||o||s||u?i.FastB1SlowA:i.FastB2SlowB},e.getSpeedIncrement=function(e,r,t){var a=r+t;switch(e){case i.FastA:if(t>=1||a>=2)return 10;break;case i.FastB1SlowA:if(0===t)break;if(a>=3)return 15;if(a>=2)return 10;break;case i.FastB2SlowB:if(t>=2||a>=3)return 10}return a>=1?5:0},e}();r.a=a,a.Land=new a(0,"陸上"),a.Slow=new a(5,"低速"),a.Fast=new a(10,"高速"),a.FastPlus=new a(15,"高速+"),a.Fastest=new a(20,"最速"),a.fromNumber=function(e){var r=[a.Land,a.Slow,a.Fast,a.FastPlus,a.Fastest].find(function(r){return e<=r.value});return r||a.Fastest}},3560:function(e,r,t){"use strict";var i=t(328),a=t(609),n=t(610),o=function(){function e(r,t,i,a){this.id=r,this.name=t,this.typeFactor=i,this.modifier=a,e.all.push(this)}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierSpecialAttack",{get:function(){return 7===this.api},enumerable:!0,configurable:!0}),e}();r.a=o,o.all=[],o.MainMain=new o(6,"主主",150,{power:1.5,accuracy:1.2}),o.MainApShell=new o(5,"主徹",140,{power:1.3,accuracy:1.3}),o.MainRader=new o(4,"主電",130,{power:1.2,accuracy:1.5}),o.MainSecond=new o(3,"主副",120,{power:1.1,accuracy:1.3}),o.DoubleAttack=new o(2,"連撃",130,{power:1.2,accuracy:1.1}),o.FighterBomberAttacker=new o(7.1,"FBA",125,{power:1.25,accuracy:1}),o.BomberBomberAttacker=new o(7.2,"BBA",140,{power:1.2,accuracy:1}),o.BomberAttacker=new o(7.3,"BA",155,{power:1.15,accuracy:1}),o.getPossibleAircraftCarrierCutins=function(e){var r=new Array,t=e.planes.filter(function(e){return e.slotSize>0}),i=t.filter(function(e){return e.is("CarrierBasedDiveBomber")}).length,a=t.some(function(e){return e.is("CarrierBasedTorpedoBomber")});return 0!==i&&a?(r.push(o.BomberAttacker),i>=2&&r.push(o.BomberBomberAttacker),t.some(function(e){return e.is("CarrierBasedFighterAircraft")})&&r.push(o.FighterBomberAttacker),r.sort(function(e,r){return e.typeFactor-r.typeFactor})):r},o.getPossibleArtillerySpottings=function(e){var r=new Array,t=e.planes.some(function(e){return e.slotSize>0&&e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")}),i=e.countGear(function(e){return e.is("MainGun")});if(!t||0===i)return r;var a=e.hasGear(function(e){return e.is("ArmorPiercingShell")}),n=e.hasGear(function(e){return e.is("SecondaryGun")}),s=e.hasGear(function(e){return e.is("Radar")});return i>=2&&(r.push(o.DoubleAttack),a&&r.push(o.MainMain)),n&&(r.push(o.MainSecond),s&&r.push(o.MainRader),a&&r.push(o.MainApShell)),r.sort(function(e,r){return r.id-e.id})},o.getPossibleAttacks=function(e){return"Taiha"===e.health.damage?[]:e.shipType.isAircraftCarrierClass?o.getPossibleAircraftCarrierCutins(e):o.getPossibleArtillerySpottings(e)},o.calcFleetLosModifier=function(e){var r=e.totalShipStats(function(e){return e.nakedStats.los})+Object(a.a)(e.planes,function(e){return e.fleetLosModifier});return Math.floor(Math.sqrt(r)+.1*r)},o.calcBaseValue=function(e,r,t,a){var n=e.stats.luck,o=Math.floor(Math.sqrt(n)+10),s=e.totalEquipmentStats("los"),u=a?15:0;return t===i.a.AirSupremacy?Math.floor(o+.7*(r+1.6*s)+10)+u:t===i.a.AirSuperiority?Math.floor(o+.6*(r+1.2*s))+u:0},o.calcRate=function(e,r,t,i){var a=o.calcBaseValue(e,r,t,i),n=new Map,s=o.getPossibleAttacks(e),u=s.reduce(function(e,r){var t=(1-e)*(a/r.typeFactor);return t>1&&(t=1),n.set(r,t),e+t},0),c=1-u,l=c<=0,p=s.concat();l||p.unshift(void 0);var f=function(e){return e?n.get(e)||0:c};return{baseValue:a,attacks:s,rateMap:n,total:u,dayCombatAttacks:p,getAttackRate:f,entries:function(){return p.map(function(e){return[e,f(e)]})}}},o.try=function(e,r,t,i){for(var a=o.calcBaseValue(e,r,t,i),s=0,u=o.getPossibleAttacks(e);s<u.length;s++){var c=u[s];if(a>Object(n.a)(c.typeFactor-1))return c}}},3607:function(e,r,t){"use strict";var i;!function(e){e[e.None=1501]="None",e[e.Pillbox=1665]="Pillbox",e[e.IsolatedIsland=1668]="IsolatedIsland",e[e.SoftSkinned=1581]="SoftSkinned",e[e.HarbourSummerPrincess=1699]="HarbourSummerPrincess",e[e.SupplyDepot=1655]="SupplyDepot"}(i||(i={})),r.a=i},3608:function(e,r,t){"use strict";var i=t(96),a=t(186),n=t(129),o=t(220),s=t(34),u=t(147),c=t(114),l=function(){function e(e,r,t,i,a,n){void 0===a&&(a=1),void 0===n&&(n=1),this.battleState=e,this.attacker=r,this.defender=t,this.isCritical=i,this.eventMapModifier=a,this.remainingAmmoModifier=n}return Object.defineProperty(e.prototype,"power",{get:function(){return e.getShellingSupportPower(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,r=e.ship,t=e.formation,i=e.role,a=r.level,n=r.stats,o=r.totalEquipmentStats,s=t.getModifiersWithRole(i).shelling.accuracy;c.a.combinedFleetFormations.includes(t)&&(s=1),c.a.Vanguard===t&&(s=.8);var l=r.morale.getAccuracyModifier("shelling"),p=o("accuracy"),f=Object(u.b)({combinedFleetFactor:-26,level:a,luck:n.luck,equipmentAccuracy:p,improvementModifier:0});return{value:Object(u.a)(f,{formationModifier:s,moraleModifier:l,fitGunBonus:0,specialAttackModifier:1,apShellModifier:1})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiersWithRole(i).shelling.evasion;return r.calcEvasionValue(a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,i=this.defenderEvasionValue,n=t.ship.morale.evasionModifier;return Object(a.b)({accuracy:r.value,evasion:i,moraleModifier:n,criticalRateConstant:e.criticalRateConstant})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,a=r.ship.getDefensePower();return new i.a(e.value,a,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=l,l.criticalRateConstant=1.3,l.getShellingSupportPower=function(e){var r=e.battleState,t=e.attacker,i=e.isCritical,a=e.eventMapModifier,u=void 0===a?1:a,l=t.formation,p=t.role,f=t.ship,h=new o.b(f),d=h.shellingType,b=h.firepower,m=h.torpedo,y=h.bombing,g=h.healthModifier,v=l.getModifiersWithRole(p).shelling.power;c.a.combinedFleetFormations.includes(l)&&(v=1),c.a.Vanguard===l&&(v=.5);var S=r.engagement.modifier,A=i?1.5:1,w=Object(n.a)({shellingType:d,combinedFleetFactor:-1,firepower:b,torpedo:m,bombing:y,improvementModifier:0}),C=Object(n.c)(w,{formationModifier:v,engagementModifier:S,healthModifier:g,antiInstallationModifiers:{b12:0,a13:1,b13:0,a13next:1,b13next:0},cruiserFitBonus:0}),M=C>150,P=Object(s.f)(150,C);return{basicPower:w,precap:C,isCapped:M,capped:P,value:Object(n.b)(P,{effectivenessAdditive:0,effectivenessMultiplicative:1,specialAttackModifier:1,apShellModifier:1,criticalModifier:A,proficiencyModifier:1,eventMapModifier:u})}}},3609:function(e,r,t){"use strict";var i=t(273),a=t(186),n=t(114),o=t(96),s=t(403),u=function(){return(u=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},c=function(){function e(e){var r=this,t=e.attacker,i=e.defender,a=e.engagement,o=e.isCritical,c=void 0!==o&&o,l=e.isOpeningAaw,p=void 0!==l&&l,f=e.isNight,h=void 0!==f&&f,d=e.remainingAmmoModifier,b=void 0===d?1:d,m=e.optionalPowerModifiers;this.getFormationModifiers=function(){var e=r,t=e.attacker,i=e.defender,a=t.formation.getModifiersWithRole(t.role).asw,o={power:a.power,accuracy:a.accuracy,evasion:i.formation.getModifiersWithRole(i.role).asw.evasion};return n.a.isIneffective(t.formation,i.formation)?u(u({},o),{accuracy:1}):o},this.attacker=t,this.defender=i,this.engagement=a,this.isCritical=c,this.isOpeningAaw=p,this.isNight=h,this.remainingAmmoModifier=b,this.optionalPowerModifiers=m,this.attackerStatus=new s.a(t.ship,h)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,r=this.isOpeningAaw,t=this.optionalPowerModifiers,i=this.getFormationModifiers().power,a=this.engagement.modifier;return this.attackerStatus.createPower({formationModifier:i,engagementModifier:a,isCritical:e,isOpeningAaw:r,optionalModifiers:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker.ship,r=e.nakedStats,t=r.luck,a=r.level,n=this.attackerStatus.aswEquipmentAccuracyModifier,o=e.totalEquipmentStats(function(e){return e.improvement.aswAccuracyModifier}),s=e.morale.getAccuracyModifier("asw"),u=this.getFormationModifiers().accuracy;return i.a.calcAccuracy({luck:t,level:a,aswEquipmentModifier:n,improvementModifier:o,moraleModifier:s,formationModifier:u})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.getFormationModifiers().evasion;return this.defender.ship.calcEvasionValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,i=this.evasion,n=t.ship.morale.evasionModifier,o=e.criticalRateConstant;return Object(a.b)({accuracy:r,evasion:i,moraleModifier:n,criticalRateConstant:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=this.attackerStatus,a=r.ship.getDefensePower(),n=i.armorPenetration;return new o.a(e.postcap,a,r.ship.health.currentHp,t,n)},enumerable:!0,configurable:!0}),e}();r.a=c,c.cap=150,c.criticalRateConstant=1.1,c.isPossible=function(e,r){return!!r.shipType.isSubmarineClass&&"None"!==Object(s.b)(e)}},3610:function(e,r,t){"use strict";var i=t(186),a=t(96),n=t(596),o=t(311),s=function(){function e(e){var r=this,t=e.attacker,i=e.defender,a=e.engagement,o=e.isCritical,s=void 0!==o&&o,u=e.remainingAmmoModifier,c=void 0===u?1:u,l=e.innateTorpedoAccuracy,p=void 0===l?0:l,f=e.optionalPowerModifiers;this.getFormationModifiers=function(){var e=r,t=e.attacker,i=e.defender;return{attacker:t.formation.getModifiersWithRole(t.role).torpedo,defender:i.formation.getModifiersWithRole(i.role).torpedo}},this.attacker=t,this.defender=i,this.engagement=a,this.isCritical=s,this.remainingAmmoModifier=c,this.innateTorpedoAccuracy=p,this.optionalPowerModifiers=f,this.attackerStatus=new n.a(t.ship)}return Object.defineProperty(e.prototype,"power",{get:function(){var e=this.isCritical,r=this.optionalPowerModifiers,t=Object(o.c)(this.attacker,this.defender),i=this.getFormationModifiers().attacker.power,a=this.engagement.modifier;return this.attackerStatus.createPower({fleetFactor:t,formationModifier:i,engagementModifier:a,isCritical:e,optionalModifiers:r})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker.ship,r=e.nakedStats,t=r.luck,i=r.level,a=1.5*Math.sqrt(t)+2*Math.sqrt(i),n=e.totalEquipmentStats("accuracy"),o=e.totalEquipmentStats(function(e){return e.improvement.torpedoAccuracyModifier}),s=Math.floor(.2*this.power.preCritical),u=this.innateTorpedoAccuracy,c=this.getFormationModifiers().attacker.accuracy,l=e.morale.getAccuracyModifier("torpedo");return Math.floor((85+a+n+o+s+u)*c*l)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){var e=this.defender.ship,r=this.getFormationModifiers().defender.evasion,t=e.totalEquipmentStats(function(e){return e.is("Sonar")||e.is("LargeSonar")?0:1.5*Math.sqrt(e.star)});return e.calcEvasionValue(r,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,a=this.evasion,n=t.ship.morale.evasionModifier,o=e.criticalRateConstant;return Object(i.b)({accuracy:r,evasion:a,moraleModifier:n,criticalRateConstant:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=r.ship.getDefensePower();return new a.a(e.postcap,i,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=s,s.cap=150,s.criticalRateConstant=1.5,s.isPossible=function(e,r){return 0!==e.nakedStats.torpedo&&!r.isInstallation}},3611:function(e,r,t){"use strict";var i=t(311),a=t(96),n=t(186),o=t(114),s=t(57),u=t(129),c=t(147),l=function(){function e(e,r,t,i,a,n,o,s){void 0===n&&(n=1),void 0===o&&(o=1),void 0===s&&(s=0),this.battleState=e,this.attacker=r,this.defender=t,this.specialAttack=i,this.isCritical=a,this.eventMapModifier=n,this.remainingAmmoModifier=o,this.fitGunBonus=s}return Object.defineProperty(e.prototype,"attackStats",{get:function(){return this.attacker.ship.getShellingStats()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArmorPiercing",{get:function(){var e=this.defender.ship.shipType;return e.isBattleshipClass||e.isHeavyCruiserClass||e.any("AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combinedFleetFactors",{get:function(){var e=this.attacker,r=this.defender;return{power:Object(i.b)(e,r),accuracy:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifiers",{get:function(){var e=this.specialAttack,r=this.attackStats,t=r.shellingType,i=r.normalProficiencyModifiers,a=r.specialProficiencyModifiers;return"Shelling"===t?{power:1,hitRate:0,criticalRate:0}:e?a:i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,r=e.battleState,t=e.attacker,i=e.defender,a=e.isCritical,n=e.combinedFleetFactors,o=e.eventMapModifier,s=e.specialAttack,c=e.isArmorPiercing,l=r.engagement,p=t.role,f=t.formation,h=n.power,d=this.attackStats,b=d.shellingType,m=d.firepower,y=d.torpedo,g=d.bombing,v=d.improvementModifiers,S=d.healthModifier,A=d.cruiserFitBonus,w=d.apShellModifiers,C=f.getModifiersWithRole(p).shelling.power,M=l.modifier,P=a?1.5:1,I=s?s.modifier.power:1,O=c?w.power:1,k=t.ship.getAntiInstallationModifier(i.ship),j=i.ship.isInstallation,F=j?t.ship.totalEquipmentStats(function(e){return e.is("AntiInstallationBomber")?e.bombing:0}):g,B=k.a5,G=this.proficiencyModifiers.power,T={shellingType:b,combinedFleetFactor:h,firepower:m,torpedo:j?0:y,bombing:F,improvementModifier:v.power,antiInstallationModifiers:k,formationModifier:C,engagementModifier:M,healthModifier:S,cruiserFitBonus:A,effectivenessMultiplicative:B,effectivenessAdditive:0,specialAttackModifier:I,apShellModifier:O,criticalModifier:P,proficiencyModifier:G,eventMapModifier:o};return new u.d(T)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this,r=e.attacker,t=e.defender,i=e.combinedFleetFactors,a=e.isArmorPiercing,n=e.specialAttack,s=e.fitGunBonus,u=r.formation.getModifiersWithRole(r.role).shelling.accuracy;o.a.isIneffective(r.formation,t.formation)&&(u=1);var l=this.attackStats,p=l.level,f=l.luck,h=l.accuracy,d=l.improvementModifiers,b=l.moraleModifier,m=l.apShellModifiers,y=n?n.modifier.accuracy:1,g=a?m.accuracy:1,v={combinedFleetFactor:i.accuracy,level:p,luck:f,equipmentAccuracy:h,improvementModifier:d.accuracy,moraleModifier:b,formationModifier:u,fitGunBonus:s,specialAttackModifier:y,apShellModifier:g};return new c.c(v)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiersWithRole(i).shelling.evasion;return r.calcEvasionValue(a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var r=this.accuracy,t=this.defender,i=this.defenderEvasionValue,a=t.ship.morale.evasionModifier;return Object(n.b)({accuracy:r.value,evasion:i,moraleModifier:a,criticalRateConstant:e.criticalRateConstant,hitRateBonus:this.proficiencyModifiers.hitRate,criticalRateBonus:this.proficiencyModifiers.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=r.ship.getDefensePower();return new a.a(e.value,i,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){var e=this.damage,r=this.defender,t=this.hitRate,i=this.isCritical,a=r.ship.health,n=a.currentHp,o=a.maxHp,u=r.side,c=function(e){return(n-e)/o<=.25},l=function(e){return 0===e.length?0:e.filter(c).length/e.length},p=e.scratchDamageProbability,f=e.scratchDamages,h=e.deadlyDamageProbability,d=e.stopperDamages,b=u===s.a.Player?h:0,m=e.values.filter(function(e){return!(e<=0)&&!(u===s.a.Player&&n-e<=0)}),y=m.length/e.values.length*l(m)+p*l(f)+b*l(d);return i?t.criticalRate*y:t.normalHitRate*y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"can",{get:function(){var e=this.attacker,r=this.defender,t=r.ship.isInstallation,i=this.attackStats.shellingType,a=e.ship;if("Sunk"===a.health.damage)return!1;if(r.ship.shipType.isSubmarineClass)return!1;if("CarrierShelling"===i){if(a.health.lte("Taiha"))return!1;if(!a.shipType.is("ArmoredAircraftCarrier")&&a.health.lte("Chuuha"))return!1;var n=a.planes.filter(function(e){return e.slotSize>0});return(!t||!n.some(function(e){return e.is("DiveBomber")&&!e.is("AntiInstallationBomber")}))&&a.planes.some(function(e){return e.participatesInCarrierShelling})}return!a.shipType.isSubmarineClass||!t||a.hasGear("SpecialAmphibiousTank")},enumerable:!0,configurable:!0}),e}();r.a=l,l.criticalRateConstant=1.3},3623:function(e,r,t){"use strict";var i=t(3549),a=t(3551),n=t(3552),o=t(37),s=t(600),u=function(){return(u=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},c=function(e){return"number"==typeof e?[e,e]:e},l=function(){function e(r,t,i){var a=this;this.shipType=t,this.shipClass=i,this.getPrevShip=function(){return e.all.find(function(e){return e.remodel.nextId===a.shipId})},this.shipId=r.id,this.shipClassId=i.id,this.sortNo=r.sortNo,this.sortId=r.sortId,this.name=r.name,this.readingName=r.readingName,this.hp=c(r.hp),this.armor=c(r.armor),this.firepower=c(r.firepower),this.torpedo=c(r.torpedo),this.antiAir=c(r.antiAir),this.luck=c(r.luck),this.asw=c(r.asw),this.evasion=c(r.evasion),this.los=c(r.los),this.speed=r.speed,this.range=r.range,this.fuel=r.fuel,this.ammo=r.ammo,this.slotCapacities=r.slotCapacities.concat(),this.initialEquipment=r.equipments.map(function(e){return"number"==typeof e?{id:e,improvement:0}:e}),r.remodel?this.remodel=r.remodel:this.remodel={nextId:0,nextLevel:0};var n=r.equippable?r.equippable:{};this.equippable=u({categories:this.shipType.equippableCategoryIds,expantionSlot:[]},n),e.all.push(this)}return Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.shipId>e.abyssalIdFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRemodel",{get:function(){return this.remodel.nextId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canConvert",{get:function(){var r=this.shipId,t=this.remodel.nextId,i=e.all.find(function(e){return e.shipId===t});return!!i&&i.remodel.nextId===r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remodelGroup",{get:function(){for(var e=this.shipId,r=this.getPrevShip();r;)e=r.shipId,r=r.getPrevShip();return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.sortId%10},enumerable:!0,configurable:!0}),e}(),p=l;l.all=new Array,l.abyssalIdFrom=1500;var f=t(391),h=t(3550),d=t(88),b=function(){function e(e,r,t){var i=this;this.id=e,this.name=r,this.equippableCategoryIds=t,this.is=function(e){return i.id===d.a[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(i.is)},e===d.a.Battlecruiser&&(this.name="巡洋戦艦")}return Object.defineProperty(e.prototype,"isDestroyer",{get:function(){return this.id===d.a.Destroyer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLightCruiserClass",{get:function(){return this.any("LightCruiser","TorpedoCruiser","TrainingCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeavyCruiserClass",{get:function(){return this.any("HeavyCruiser","AviationCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBattleshipClass",{get:function(){return this.any("Battlecruiser","Battleship","AviationBattleship","SuperDreadnoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraftCarrierClass",{get:function(){return this.any("LightAircraftCarrier","AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubmarineClass",{get:function(){return[d.a.Submarine,d.a.SubmarineAircraftCarrier].includes(this.id)},enumerable:!0,configurable:!0}),e}(),m=b;b.all=h.a.map(function(e){var r=Object.entries(e.api_equip_type).filter(function(e){e[0];return 1===e[1]}).map(function(e){var r=e[0];e[1];return Number(r)});return new b(e.api_id,e.api_name,r)}),b.fromId=function(e){var r=b.all.find(function(r){return r.id===e});if(r)return r;var t=new b(e,"",[]);return b.all.push(t),t};var y=function(e){var r=this;void 0===e&&(e=i.a),this.shipsData=e,this.findMasterGear=function(e){return r.gears.find(function(r){return r.id===e})},this.findMasterShip=function(e){return r.ships.find(function(r){return r.shipId===e})},this.shipIdToName=function(e){var t=r.ships.find(function(r){return r.shipId===e});return t?t.name:""},this.shipNameToId=function(e){var t=r.ships.find(function(r){return r.name===e});return t?t.shipId:0},this.shipClassIdToName=function(e){return f.a.fromId(e).name},this.shipTypeIdToName=function(e){return m.fromId(e).name},this.gearIdToName=function(e){var t=r.findMasterGear(e);return t?t.name:""},this.gearNameToId=function(e){var t=r.gears.find(function(r){return r.name===e});return t&&t.id},this.gears=a.a.map(function(e){var r=e.api_id,t=e.api_type[2],i=o.b.find(t,r),a=n.a.includes(r);return new s.a(e,i,a)}),this.ships=e.map(function(e){var r=m.fromId(e.shipTypeId),t=f.a.fromId(e.classId);return new p(e,r,t)})};r.a=y},3640:function(e,r,t){"use strict";var i=t(601),a=t(96),n=t(34),o=function(){function e(e){this.starshellModifier=0,this.contactModifier=1,this.level=0,this.luck=0,this.equipmentAccuracy=0,this.improvementModifier=0,this.formationModifier=1,this.moraleModifier=1,this.specialAttackModifier=1,this.searchlightModifier=0,this.fitGunBonus=0,Object(n.c)(this,e)}return Object.defineProperty(e.prototype,"value",{get:function(){return r=(e=this).starshellModifier,t=e.contactModifier,i=e.level,a=e.luck,n=e.equipmentAccuracy,o=e.improvementModifier,s=e.formationModifier,u=e.moraleModifier,c=e.specialAttackModifier,l=e.searchlightModifier,p=e.fitGunBonus,f=Math.floor((69+r)*t+2*Math.sqrt(i)+1.5*Math.sqrt(a)+n+o),Math.floor(f*s*u*c+l+p);var e,r,t,i,a,n,o,s,u,c,l,p,f},enumerable:!0,configurable:!0}),e}(),s=t(186),u=function(){function e(e,r,t,i,a,n,o){void 0===a&&(a=0),void 0===n&&(n=1),void 0===o&&(o=1),this.attacker=e,this.defender=r,this.specialAttack=t,this.isCritical=i,this.nightContactModifier=a,this.eventMapModifier=n,this.remainingAmmoModifier=o}return Object.defineProperty(e.prototype,"attackerNightAttackStatus",{get:function(){return new i.a(this.attacker.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactModifier",{get:function(){return 5===this.nightContactModifier?{power:5,accuracy:1.1,criticalRate:1.57}:{power:0,accuracy:1,criticalRate:e.criticalRateConstant}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,r=this.specialAttack,t=this.contactModifier,i=e.formation,a=e.role,n=e.ship,s=n.stats,u=n.level,c=n.totalEquipmentStats,l=n.morale,p=n.shipType,f=n.hasGear,h=c(function(e){return e.improvement.nightAttackAccuracyModifier}),d=i.getModifiersWithRole(a).nightBattle.accuracy,b=r&&r.modifier.accuracy,m=0;return p.isHeavyCruiserClass&&(f(6)&&(m=10),(f(90)||f(50))&&(m=15)),new o({starshellModifier:void 0,contactModifier:t.accuracy,level:u,luck:s.luck,equipmentAccuracy:c("accuracy"),improvementModifier:h,formationModifier:d,moraleModifier:l.getAccuracyModifier("night"),specialAttackModifier:b,searchlightModifier:void 0,fitGunBonus:m})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,r=e.attacker,t=e.defender,i=e.isCritical,a=e.attackerNightAttackStatus,n=e.specialAttack,o=(e.eventMapModifier,r.role),s=r.formation;return a.calcPower({role:o,nightContactModifier:this.contactModifier.power,formation:s,specialAttack:n,isCritical:i,target:t.ship})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiersWithRole(i).nightBattle.evasion,n=r.shipType.isHeavyCruiserClass?5:0;return r.calcEvasionValue(a,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,r=this.defender,t=this.defenderEvasionValue,i=this.contactModifier,a=r.ship.morale.evasionModifier;return Object(s.b)({accuracy:e.value,evasion:t,moraleModifier:a,criticalRateConstant:i.criticalRate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defensePower,t=this.remainingAmmoModifier,i=this.defender;return new a.a(e.value,r,i.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=u;u.criticalRateConstant=1.5},37:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i,a=t(3500);!function(e){e[e.SmallCaliberMainGun=1]="SmallCaliberMainGun",e[e.MediumCaliberMainGun=2]="MediumCaliberMainGun",e[e.LargeCaliberMainGun=3]="LargeCaliberMainGun",e[e.SecondaryGun=4]="SecondaryGun",e[e.Torpedo=5]="Torpedo",e[e.CarrierBasedFighterAircraft=6]="CarrierBasedFighterAircraft",e[e.CarrierBasedDiveBomber=7]="CarrierBasedDiveBomber",e[e.CarrierBasedTorpedoBomber=8]="CarrierBasedTorpedoBomber",e[e.CarrierBasedReconnaissanceAircraft=9]="CarrierBasedReconnaissanceAircraft",e[e.ReconnaissanceSeaplane=10]="ReconnaissanceSeaplane",e[e.SeaplaneBomber=11]="SeaplaneBomber",e[e.SmallRadar=12]="SmallRadar",e[e.LargeRadar=13]="LargeRadar",e[e.Sonar=14]="Sonar",e[e.DepthCharge=15]="DepthCharge",e[e.ExtraArmor=16]="ExtraArmor",e[e.EngineImprovement=17]="EngineImprovement",e[e.AntiAircraftShell=18]="AntiAircraftShell",e[e.ArmorPiercingShell=19]="ArmorPiercingShell",e[e.VTFuze=20]="VTFuze",e[e.AntiAircraftGun=21]="AntiAircraftGun",e[e.MidgetSubmarine=22]="MidgetSubmarine",e[e.EmergencyRepairPersonnel=23]="EmergencyRepairPersonnel",e[e.LandingCraft=24]="LandingCraft",e[e.Autogyro=25]="Autogyro",e[e.AntiSubmarinePatrolAircraft=26]="AntiSubmarinePatrolAircraft",e[e.MediumExtraArmor=27]="MediumExtraArmor",e[e.LargeExtraArmor=28]="LargeExtraArmor",e[e.Searchlight=29]="Searchlight",e[e.SupplyTransportContainer=30]="SupplyTransportContainer",e[e.ShipRepairFacility=31]="ShipRepairFacility",e[e.SubmarineTorpedo=32]="SubmarineTorpedo",e[e.StarShell=33]="StarShell",e[e.CommandFacility=34]="CommandFacility",e[e.AviationPersonnel=35]="AviationPersonnel",e[e.AntiAircraftFireDirector=36]="AntiAircraftFireDirector",e[e.AntiGroundEquipment=37]="AntiGroundEquipment",e[e.LargeCaliberMainGun2=38]="LargeCaliberMainGun2",e[e.SurfaceShipPersonnel=39]="SurfaceShipPersonnel",e[e.LargeSonar=40]="LargeSonar",e[e.LargeFlyingBoat=41]="LargeFlyingBoat",e[e.LargeSearchlight=42]="LargeSearchlight",e[e.CombatRation=43]="CombatRation",e[e.Supplies=44]="Supplies",e[e.SeaplaneFighter=45]="SeaplaneFighter",e[e.SpecialAmphibiousTank=46]="SpecialAmphibiousTank",e[e.LandBasedAttackAircraft=47]="LandBasedAttackAircraft",e[e.LandBasedFighter=48]="LandBasedFighter",e[e.LandBasedReconnaissanceAircraft=49]="LandBasedReconnaissanceAircraft",e[e.TransportationMaterial=50]="TransportationMaterial",e[e.SubmarineEquipment=51]="SubmarineEquipment",e[e.JetPoweredFighter=56]="JetPoweredFighter",e[e.JetPoweredFighterBomber=57]="JetPoweredFighterBomber",e[e.JetPoweredTorpedoBomber=58]="JetPoweredTorpedoBomber",e[e.JetPoweredReconnaissanceAircraft=59]="JetPoweredReconnaissanceAircraft",e[e.LargeRadar2=93]="LargeRadar2",e[e.CarrierBasedReconnaissanceAircraft2=94]="CarrierBasedReconnaissanceAircraft2"}(i||(i={}));var n=function(){function e(e,r){var t=this;this.id=e,this.name=r,this.is=function(e){return t.id===i[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(t.is)}}return e.find=function(r,t){128===t||281===t?r=i.LargeCaliberMainGun2:142===t?r=i.LargeRadar2:151===t&&(r=i.CarrierBasedReconnaissanceAircraft2);var a=e.all.find(function(e){return e.id===r});if(a)return a;var n=new e(r,"");return this.all.push(n),n},e}();r.b=n,n.keyToId=function(e){return i[e]},n.numberToKey=function(e){var r=i[e];if(void 0!==r)return r},n.all=a.a.map(function(e){var r=e.api_id,t=e.api_name;return new n(r,t)})},388:function(e,r,t){"use strict";t.d(r,"b",function(){return a});var i=t(184),a=["hp","firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","luck"],n=function(){function e(e,r,t){this.master=e,this.level=r,this.increased=t}return e.prototype.getIncreasedStat=function(e){var r=this.increased;if(!r)return 0;var t=r[e];return t?t>1e5?1e5:t:0},Object.defineProperty(e.prototype,"hp",{get:function(){return Object(i.a)(this.master.hp,this.level)+this.getIncreasedStat("hp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower[1]+this.getIncreasedStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo[1]+this.getIncreasedStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir[1]+this.getIncreasedStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor[1]+this.getIncreasedStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return Object(i.b)(this.master.los,this.level)+this.getIncreasedStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return Object(i.b)(this.master.asw,this.level)+this.getIncreasedStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return Object(i.b)(this.master.evasion,this.level)+this.getIncreasedStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck[0]+this.getIncreasedStat("luck")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed+this.getIncreasedStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range+this.getIncreasedStat("range")},enumerable:!0,configurable:!0}),e}();r.a=n},391:function(e,r,t){"use strict";var i=t(405),a=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),a=0;for(r=0;r<t;r++)for(var n=arguments[r],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},n=Object.entries(i.b).filter(function(e){return"number"==typeof e[1]}),o=function(){function e(e,r){var t=this;this.name=e,this.id=r,this.is=function(e){return t.id===i.a[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(t.is)}}return e.fromId=function(r){var t=e.all.find(function(e){return e.id===r});if(t)return t;var i=new e("unkown",r);return e.all.push(i),i},Object.defineProperty(e.prototype,"isSpecialTypeDestroyer",{get:function(){return this.any("FubukiClass","AyanamiClass","AkatsukiClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsNavy",{get:function(){return this.any("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoyalNavy",{get:function(){return this.any("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass")},enumerable:!0,configurable:!0}),e}();r.a=o,o.all=n.map(function(e){return new(o.bind.apply(o,a([void 0],e)))})},392:function(e,r,t){"use strict";t.d(r,"a",function(){return n});var i=t(3510),a=function(e,r){var t=Object(i.a)(e.filter(function(e){return e.level<=r}),"value");return t?t.value:0},n={from:function(e){var r=function(r){return e.includes(r)};return r("Fighter")?"Fighter":r("SeaplaneBomber")?"SeaplaneBomber":r("DiveBomber")||r("TorpedoBomber")||r("ReconnaissanceAircraft")?"Other":"None"}},o=function(){function e(e,r){void 0===e&&(e=0),this.internal=e,this.type=r}return e.internalToLevel=function(r){return e.internalBounds.filter(function(e){return e<=r}).length-1},Object.defineProperty(e.prototype,"visible",{get:function(){return"None"!==this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return e.internalToLevel(this.internal)},set:function(r){this.internal=e.internalBounds[r]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerBonus",{get:function(){var r=this.internal,t=this.level,i=this.type;if(r<=0)return 0;var n=[];return"Fighter"===i?n=e.fighterPowerLevelBonuses.fighter:"SeaplaneBomber"===i&&(n=e.fighterPowerLevelBonuses.seaplaneBomber),a(n,t)+Math.sqrt(r/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalPowerModifier",{get:function(){var r=this.internal,t=this.level,i=a(e.criticalModifierLevelBonuses,t);return Math.floor(Math.sqrt(r)+i)},enumerable:!0,configurable:!0}),e}();r.b=o,o.internalBounds=[0,10,25,40,55,70,85,100],o.fighterPowerLevelBonuses={fighter:[{level:7,value:22},{level:5,value:14},{level:4,value:9},{level:3,value:5},{level:2,value:2},{level:0,value:0}],seaplaneBomber:[{level:7,value:6},{level:5,value:3},{level:2,value:1},{level:0,value:0}]},o.criticalModifierLevelBonuses=[{level:7,value:10},{level:6,value:7},{level:5,value:5},{level:4,value:4},{level:3,value:3},{level:2,value:2},{level:1,value:1},{level:0,value:0}]},403:function(e,r,t){"use strict";t.d(r,"b",function(){return o});var i=t(141),a=t(273),n=function(){return(n=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},o=function(e,r){return void 0===r&&(r=!1),r?e.nakedStats.asw>0?"DepthCharge":"None":e.shipType.any("AviationCruiser","AviationBattleship","SeaplaneTender","LightAircraftCarrier","AmphibiousAssaultShip")||352===e.shipId?e.planes.some(function(e){return e.slotSize>0&&(r=e.gear,t=r.asw,i=r.category,t>0&&i.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Autogyro","AntiSubmarinePatrolAircraft","LargeFlyingBoat"));var r,t,i})?"AircraftCarrier":"None":e.nakedStats.asw>0?"DepthCharge":"None"},s=function(){function e(e,r){var t=this;this.ship=e,this.isNight=r,this.getAdditionalFm=function(e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var a=t.type;if(e){if(r||"AircraftCarrier"!==a)return Object(i.b)();var n=t.ship.getNormalProficiencyModifiers().power;return Object(i.b)(n)}},this.createPower=function(e){var r=t,i=r.nakedAsw,o=r.healthModifier,s=r.typeConstant,u=r.equipmentAsw,c=r.improvementModifier,l=r.synergyModifier,p=t.getAdditionalFm(e.isCritical,e.isOpeningAaw);return a.a.createPower(n({nakedAsw:i,equipmentAsw:u,improvementModifier:c,typeConstant:s,healthModifier:o,synergyModifier:l,additionalFm:p},e))}}return Object.defineProperty(e.prototype,"type",{get:function(){return o(this.ship,this.isNight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeConstant",{get:function(){return"DepthCharge"===this.type?13:8},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nakedAsw",{get:function(){return this.ship.nakedStats.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"healthModifier",{get:function(){return this.ship.health.aswPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"synergyModifier",{get:function(){var e=this.ship.hasGear,r=1,t=1;return(e("Sonar")||e("LargeSonar"))&&e("DepthCharge")&&(r=1.15),e("AdditionalDepthCharge")&&e("DepthChargeProjector")&&(t=e("Sonar")?1.25:1.1),r*t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armorPenetration",{get:function(){var e=this.ship,r=e.shipType.is("CoastalDefenseShip")?1:0;return e.totalEquipmentStats(function(e){return e.is("AdditionalDepthCharge")?Math.sqrt(e.asw-2)+r:0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipmentAsw",{get:function(){return this.ship.totalEquipmentStats(function(e){return function(e){return e.category.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","SeaplaneBomber","Sonar","DepthCharge","Autogyro","AntiSubmarinePatrolAircraft","LargeSonar")}(e)?e.asw:0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvementModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){return e.improvement.aswPowerModifier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aswEquipmentAccuracyModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){return e.is("Sonar")?2*e.asw:e.is("AdditionalDepthCharge")?e.asw:0})},enumerable:!0,configurable:!0}),e}();r.a=s},404:function(e,r,t){"use strict";var i=t(34),a=t(3510),n=t(610),o=function(e){if(Array.isArray(e)){var r=e.map(o);return Object(a.a)(r,function(e){return e&&e.id})}var t=e,i=Object(n.a)(100);return l.getPossibleAntiAirCutins(t).find(function(e){return 34===e.id||35===e.id?e.probability>Object(n.a)(100):e.probability>i})},s=o,u=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),a=0;for(r=0;r<t;r++)for(var n=arguments[r],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},c=function(){function e(e,r,t,i){this.id=e,this.minimumBonus=r,this.fixedAirDefenseModifier=t,this.probability=i}return e.fromId=function(e){return this.all.find(function(r){return r.id===e})},e}(),l=r.a=c;c.all=[[1,8,1.7,65],[2,7,1.7,58],[3,5,1.6,50],[4,7,1.5,52],[5,5,1.5,55],[6,5,1.45,40],[7,4,1.35,45],[8,5,1.4,50],[9,3,1.3,40],[10,9,1.65,60],[11,7,1.5,55],[12,4,1.25,45],[13,5,1.35,35],[14,5,1.45,63],[15,4,1.3,58],[16,5,1.4,60],[17,3,1.25,55],[18,3,1.2,60],[19,6,1.45,55],[20,4,1.25,70],[21,6,1.45,60],[22,3,1.2,63],[23,2,1.05,80],[24,4,1.25,60],[25,8,1.55,60],[26,7,1.4,60],[28,5,1.4,53],[29,6,1.55,58],[30,4,1.3,42],[31,3,1.25,50],[32,4,1.2,32],[33,4,1.35,42],[34,8,1.6,60],[35,7,1.55,53],[36,7,1.55,59],[37,5,1.45,38]].map(function(e){return new(c.bind.apply(c,u([void 0],e)))}),c.try=s,c.getPossibleAntiAirCutins=function(e){return function(e){var r;!function(e){e[e.MayaKai2=428]="MayaKai2",e[e.IsuzuKai2=141]="IsuzuKai2",e[e.KasumiKai2B=470]="KasumiKai2B",e[e.KinuKai2=487]="KinuKai2",e[e.YuraKai2=488]="YuraKai2",e[e.MusashiKai=148]="MusashiKai",e[e.MusashiKai2=546]="MusashiKai2",e[e.IsokazeBKai=557]="IsokazeBKai",e[e.HamakazeBKai=558]="HamakazeBKai",e[e.SatsukiKai2=418]="SatsukiKai2",e[e.FumizukiKai2=548]="FumizukiKai2",e[e.Uit25=539]="Uit25",e[e.I504=530]="I504",e[e.TatsutaKai2=478]="TatsutaKai2"}(r||(r={}));var t=function(r){return e.masterId===r},i=function(e){return e.is("HighAngleMount")},a=function(e){return i(e)&&e.antiAir>=8},n=function(e){return e.is("Radar")},o=function(e){return e.is("AirRadar")},s=function(e){return e.is("AntiAircraftGun")},u=function(e){return s(e)&&e.antiAir>=9},c=function(e){return s(e)&&e.antiAir>=3&&e.antiAir<9},l=function(e){return 274===e.masterId},p=function(e){return e.is("AntiAircraftShell")},f=function(e){return e.is("AntiAircraftFireDirector")},h=function(e){return e.category.any("LargeCaliberMainGun","LargeCaliberMainGun2")},d=function(r,t){return e.countGear(r)>=t},b=function(r){return e.hasGear(r)},m=[];if(e.shipClass.is("FletcherClass")){var y=e.countGear(284)+e.countGear(313),g=e.countGear(308);g>=2&&m.push(34),g>0&&y>0&&m.push(35),y>=2&&(e.hasGear(307)&&m.push(36),m.push(37))}return e.shipClass.is("AkizukiClass")&&b(i)?(d(i,2)&&b(n)&&m.push(1),b(n)&&m.push(2),d(i,2)&&m.push(3)):(t(r.MayaKai2)&&b(i)&&b(u)?(b(o)&&m.push(10),m.push(11)):t(r.IsuzuKai2)&&b(i)&&b(s)?(b(o)&&m.push(14),m.push(15)):t(r.KasumiKai2B)&&b(i)&&b(s)?(b(o)&&m.push(16),m.push(17)):t(r.KinuKai2)&&b(u)&&b(function(e){return i(e)&&e.antiAir<8})?m.push(19):t(r.YuraKai2)&&b(i)&&b(o)?m.push(21):e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")&&b(l)&&b(p)&&b(o)&&m.push(25),b(f)&&b(h)&&b(p)&&b(o)&&m.push(4),d(a,2)&&b(o)&&m.push(5),b(f)&&b(h)&&b(p)&&m.push(6),b(a)&&b(o)&&m.push(8),b(f)&&b(i)&&b(o)&&m.push(7),t(r.MusashiKai2)&&b(function(e){return 275===e.masterId})&&b(n)&&m.push(26),(e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")||t(r.MusashiKai)||t(r.MusashiKai2))&&b(l)&&b(o)&&m.push(28),(t(r.IsokazeBKai)||t(r.HamakazeBKai))&&b(i)&&b(o)&&m.push(29),b(f)&&b(i)&&m.push(9),"Gotland改"===e.name&&e.hasGear(i)&&e.hasGear(function(e){return e.is("AntiAircraftGun")&&e.antiAir>=4})&&m.push(33),b(u)&&b(o)&&e.countGear(function(e){return e.is("AntiAircraftGun")&&e.antiAir>=3})>=2&&m.push(12),b(a)&&b(u)&&b(o)&&m.push(13),t(r.SatsukiKai2)&&b(u)&&m.push(18),t(r.KinuKai2)&&b(u)&&m.push(20),t(r.FumizukiKai2)&&b(u)&&m.push(22),(t(r.Uit25)||t(r.I504))&&b(c)&&m.push(23),["龍田改二","天龍改二"].includes(e.name)&&b(i)&&b(c)&&m.push(24),["天龍改二","Gotland改"].includes(e.name)&&e.countGear(i)>=3&&m.push(30),"天龍改二"===e.name&&e.countGear(i)>=2&&m.push(31),(e.shipClass.isRoyalNavy||e.shipClass.is("KongouClass")&&e.name.includes("改二"))&&(e.countGear(301)>=2||e.hasGear(301)&&e.hasGear(191)||e.hasGear(300)&&e.hasGear(191))&&m.push(32)),m}(e).map(function(e){return c.fromId(e)}).filter(i.b)}},406:function(e,r,t){"use strict";var i;!function(e){e.MainFleet="MainFleet",e.EscortFleet="EscortFleet"}(i||(i={})),r.a=i},44:function(e,r,t){"use strict";var i=function(){function e(r,t,i){this.id=r,this.key=t,this.name=i,e.values.push(this)}return Object.defineProperty(e.prototype,"isCombined",{get:function(){return this!==e.Single},enumerable:!0,configurable:!0}),e}();r.a=i,i.values=[],i.Single=new i(0,"Single","通常艦隊"),i.CarrierTaskForce=new i(1,"CarrierTaskForce","空母機動部隊"),i.SurfaceTaskForce=new i(2,"SurfaceTaskForce","水上打撃部隊"),i.TransportEscort=new i(3,"TransportEscort","輸送護衛部隊"),i.Combined=new i(5,"Combined","敵連合"),i.fromId=function(e){return i.values.find(function(r){return r.id===e})},i.fromString=function(e){return i.values.find(function(r){return r.key===e||r.name===e})}},446:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i=function(e){var r=e.slotSize,t=e.antiAir,i=e.interception,a=void 0===i?0:i,n=e.antiBomber,o=void 0===n?0:n,s=e.improvementModifier,u=void 0===s?0:s,c=e.proficiencyModifier,l=void 0===c?0:c,p=e.isInterception,f=t+1.5*a+u;return void 0!==p&&p&&(f=t+a+2*o+u),Math.floor(f*Math.sqrt(r)+l)}},447:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i=function(e,r){return e.includes(r)}},448:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"a",function(){return a});var i=function(e){var r=e.hasArmorPiercingShell,t=e.hasMainGun,i=e.hasRader,a=e.hasSecondaryGun;return r&&t?a&&i?{power:1.15,accuracy:1.3}:a?{power:1.15,accuracy:1.2}:i?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}:{power:1,accuracy:1}},a=function(e){var r=e.isLightCruiserClass,t=e.isZaraClass,i=e.singleGunCount,a=e.twinGunCount,n=e.zaraGunCount;return r?Math.sqrt(i)+2*Math.sqrt(a):t?Math.sqrt(n):0}},449:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i=function(e){var r=e.evasion,t=e.luck,i=e.improvementModifier,a=e.formationModifier,n=e.postcapModifier,o=void 0===n?0:n,s=e.additionalFm,u=Math.floor((r+Math.sqrt(2*t))*a),c=u;u>=65?c=Math.floor(55+2*Math.sqrt(u-65)):u>=40&&(c=Math.floor(40+3*Math.sqrt(u-40)));var l=Math.floor(c+o)+i;return s?s(l):l}},480:function(e,r,t){"use strict";var i,a=t(308),n=t(404),o=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),s=function(e){function r(r){var t=e.call(this,r)||this,i=t.combatInformation,a=i.player,n=i.enemy;return a.isCombinedFleet&&n.isCombinedFleet?(t.playerAntiAirDefenseShips=a.allShips,t.enemyAntiAirDefenseShips=n.allShips):(t.playerAntiAirDefenseShips=a.mainFleet.nonNullableShips,t.enemyAntiAirDefenseShips=n.mainFleet.nonNullableShips),t}return o(r,e),r.prototype.main=function(){var e=this.playerAntiAirDefenseShips,r=this.enemyAntiAirDefenseShips,t=this.combatInformation,i=e.flatMap(function(e){return e.planes}),a=r.flatMap(function(e){return e.planes}),o=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")},s=i.filter(o),u=a.filter(o),c=this.fighterCombat(s,u),l=t.player,p=(t.enemy,s.filter(function(e){return e.slotSize>0&&e.participatesInAirstrike})),f=u.filter(function(e){return e.slotSize>0&&e.participatesInAirstrike});return this.antiAirDefense(e,f,n.a.try(l.allShips)),this.antiAirDefense(r,p,n.a.try(l.allShips)),{airControlState:c}},r}(a.a);r.a=s},481:function(e,r,t){"use strict";var i,a=t(3509),n=t(328),o=t(57),s=t(308),u=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),c=function(e){function r(r,t){var i=e.call(this,r)||this;return i.landBasedAirCorps=t,i}return u(r,e),r.prototype.main=function(){var e=this,r=this.combatInformation.enemy,t=this.landBasedAirCorps,i=t.fighterPower,s=t.planes,u=Object(a.a)(r.allShips,function(e){return e.planes}),c=u.reduce(function(e,r){return e+r.fighterPower},0),l=n.a.fromFighterPower(i,c),p=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")||e.is("ReconnaissanceAircraft")},f=s.filter(p),h=u.filter(p);f.forEach(function(r){return e.shotdownInFighterCombat(r,l.constant,o.a.Player)}),h.forEach(function(r){return e.shotdownInFighterCombat(r,l.constant,o.a.Enemy)});var d=f.filter(function(e){return e.slotSize>0&&e.participatesInAirstrike});return this.antiAirDefense(r.allShips,d),{airControlState:l}},r}(s.a);r.a=c},555:function(e,r,t){"use strict";t.d(r,"b",function(){return i});var i=function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.masterId)&&!e.hasGear(function(e){return[258,259].includes(e.masterId)}))&&e.planes.some(function(e){return e.slotSize>0&&e.isNightPlane}))},a=function(e){var r=e.nakedStats,t=e.level;return r.luck<50?Math.floor(r.luck+15+.75*Math.sqrt(t)):Math.floor(Math.sqrt(r.luck-50)+65+.8*Math.sqrt(t))},n=function(){function e(r,t,i,a){var n=this;this.id=r,this.name=t,this.typeFactor=i,this.modifier=a,this.calcRate=function(r){return n===e.DoubleAttack?109/110:Math.ceil(r)/n.typeFactor}}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestroyerCutin",{get:function(){return 7===this.id||8===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAerialAttack",{get:function(){return 6===this.api},enumerable:!0,configurable:!0}),e}();r.a=n,n.DoubleAttack=new n(1,"連撃",110,{power:1.2,accuracy:1.1}),n.MainTorp=new n(2,"主魚",115,{power:1.3,accuracy:1.5}),n.TorpTorp=new n(3,"魚雷",122,{power:1.5,accuracy:1.65}),n.SubmarineTorpTorp=new n(3.1,"潜水魚雷",110,{power:1.65,accuracy:1}),n.SubmarineRadarTorp=new n(3.2,"潜水電探",102,{power:1.75,accuracy:1}),n.MainMainSecond=new n(4,"主副",130,{power:1.75,accuracy:1.65}),n.MainMainMain=new n(5,"主砲",140,{power:2,accuracy:1.5}),n.AerialAttack1=new n(6.1,"夜襲1.25",105,{power:1.25,accuracy:1}),n.AerialAttack2=new n(6.2,"夜襲1.20",115,{power:1.2,accuracy:1}),n.AerialAttack3=new n(6.3,"夜襲1.18",125,{power:1.18,accuracy:1}),n.SuiseiAttack=new n(6.4,"彗星夜襲",115,{power:1.2,accuracy:1}),n.MainTorpRadar=new n(7,"主魚電",130,{power:1.3,accuracy:1}),n.TorpRadarLookout=new n(8,"魚見電",150,{power:1.2,accuracy:1}),n.getPossibleSpecialAttacks=function(e){var r=e.shipType,t=e.hasGear,a=e.countGear,o=new Array;if(i(e)){var s=e.planes.filter(function(e){return e.slotSize>0}),u=s.filter(function(e){return e.isNightFighter}).length,c=s.filter(function(e){return e.isNightAttacker}).length,l=s.filter(function(e){return e.isNightPlane}).length,p=s.filter(function(e){return e.isNightAircraft&&!e.isNightPlane}).length,f=u>=1,h=c>=1,d=l>=1,b=s.some(function(e){return 320===e.gear.masterId});return u>=2&&h&&o.push(n.AerialAttack1),f&&h&&o.push(n.AerialAttack2),d&&b&&o.push(n.SuiseiAttack),f?((u+p>=3||c+p>=2)&&o.push(n.AerialAttack3),o):o}if(!e.canNightAttack)return o;var m=a(213)+a(214),y=a("Torpedo")+a("SubmarineTorpedo");r.is("Destroyer")&&t(function(e){return e.is("SurfaceRadar")})&&y>=1&&(t(function(e){return e.is("SmallCaliberMainGun")})&&o.push(n.MainTorpRadar),t(129)&&o.push(n.TorpRadarLookout));var g=a(function(e){return e.is("MainGun")}),v=a(function(e){return e.is("SecondaryGun")});return m>=1&&t(function(e){return e.is("SubmarineEquipment")})?o.push(n.SubmarineRadarTorp):m>=2?o.push(n.SubmarineTorpTorp):g>=3?o.push(n.MainMainMain):g>=2&&v>=1?o.push(n.MainMainSecond):y>=2?o.push(n.TorpTorp):g>=1&&y>=1?o.push(n.MainTorp):g+v>=2&&o.push(n.DoubleAttack),o},n.calcPreModifierValue=a,n.calcBaseValue=function(e,r,t,i){var n=a(e);return r&&(n+=15),"Chuuha"===e.health.damage&&(n+=18),e.hasGear(129)&&(n+=5),t.searchlight&&(n+=7),i.searchlight&&(n+=-5),t.starshell&&(n+=4),i.starshell&&(n+=-10),n}},57:function(e,r,t){"use strict";var i;!function(e){e.Player="Player",e.Enemy="Enemy"}(i||(i={})),r.a=i},596:function(e,r,t){"use strict";var i=t(141),a=t(170),n=function(){return(n=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},o=function(){function e(e){var r=this;this.ship=e,this.createPower=function(e){var t=e.fleetFactor,o=e.formationModifier,s=e.engagementModifier,u=e.optionalModifiers,c=void 0===u?{}:u,l=r,p=l.torpedo,f=l.improvementModifier,h=o*s*l.healthModifier,d=a.a.compose({a14:h},c),b=p+f+t,m=Object(i.a)({basic:b,cap:150,modifiers:d}),y=m.postcap;if(!e.isCritical)return n(n({},m),{preCritical:y});var g=Math.floor(1.5*m.postcap);return n(n({},m),{preCritical:y,postcap:g})}}return Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.ship.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvementModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){return e.improvement.torpedoPowerModifier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"healthModifier",{get:function(){return this.ship.health.torpedoPowerModifier},enumerable:!0,configurable:!0}),e}();r.a=o},600:function(e,r,t){"use strict";var i=t(37),a=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.includes(r.gearId)}},n=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.map(i.b.keyToId).includes(r.categoryId)}},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.every(function(e){return e(r)})}},s=n("SmallCaliberMainGun","MediumCaliberMainGun","LargeCaliberMainGun","LargeCaliberMainGun2"),u=n("SmallRadar","LargeRadar","LargeRadar2"),c=o(u,function(e){return e.los>=5}),l=o(u,function(e){return e.antiAir>=2}),p=n("ExtraArmor","MediumExtraArmor","LargeExtraArmor"),f=n("CarrierBasedFighterAircraft","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2"),h=n("ReconnaissanceSeaplane","SeaplaneBomber","SeaplaneFighter","LargeFlyingBoat"),d=n("LandBasedAttackAircraft","LandBasedFighter","LandBasedReconnaissanceAircraft"),b=n("JetPoweredFighter","JetPoweredFighterBomber","JetPoweredTorpedoBomber","JetPoweredReconnaissanceAircraft"),m=n("CarrierBasedFighterAircraft","SeaplaneFighter","LandBasedFighter","JetPoweredFighter"),y=n("CarrierBasedDiveBomber","SeaplaneBomber","JetPoweredFighterBomber"),g=n("CarrierBasedTorpedoBomber","JetPoweredTorpedoBomber","LandBasedAttackAircraft"),v=n("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane","LargeFlyingBoat","JetPoweredReconnaissanceAircraft","LandBasedReconnaissanceAircraft"),S=function(e){return e}({Abyssal:function(e){return e.gearId>500},HighAngleMount:function(e){return 16===e.iconId},MainGun:s,Radar:u,SurfaceRadar:c,AirRadar:l,Armor:p,CarrierBasedAircraft:f,Seaplane:h,LandBasedAircraft:d,JetPoweredAircraft:b,Fighter:m,DiveBomber:y,TorpedoBomber:g,ReconnaissanceAircraft:v,Aircraft:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.some(function(e){return e(r)})}}(m,y,g,v,n("Autogyro","AntiSubmarinePatrolAircraft")),AntiInstallationBomber:a(60,64,305,306,148,233,277,319),DepthChargeProjector:a(44,45),AdditionalDepthCharge:a(226,227),AntiGroundRocketLauncher:a(348,349),Mortar:a(346,347)}),A=Object.keys(S),w={from:function(e){var r=function(e){return A.filter(function(r){return S[r](e)})}(e),t=i.b.numberToKey(e.categoryId);return t&&r.push(t),r}};t.d(r,"b",function(){return C});var C=["armor","firepower","torpedo","speed","bombing","antiAir","asw","los","accuracy","evasion","interception","antiBomber","range","radius"],M=function(){function e(e,r,t){var a=this;this.category=r,this.improvable=t,this.radius=0,this.is=function(e){return a.attrs.includes(e)},this.id=e.api_id,this.name=e.api_name,this.categoryId=r.id,this.iconId=e.api_type[3],this.hp=e.api_taik,this.armor=e.api_souk,this.firepower=e.api_houg,this.torpedo=e.api_raig,this.speed=e.api_soku,this.bombing=e.api_baku,this.antiAir=e.api_tyku,this.asw=e.api_tais,this.los=e.api_saku,this.luck=e.api_luck,this.range=e.api_leng;var n=e.api_houm,o=e.api_houk;this.accuracy=0,this.evasion=0,this.antiBomber=0,this.interception=0,this.categoryId===i.a.LandBasedFighter?(this.antiBomber=n,this.interception=o):(this.accuracy=n,this.evasion=o),e.api_distance&&(this.radius=e.api_distance),this.attrs=w.from(this)}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}();r.a=M},601:function(e,r,t){"use strict";var i=t(609),a=t(114),n=t(34),o=function(){function e(e){this.nightAttackType="NightAttack",this.firepower=0,this.torpedo=0,this.improvementModifier=0,this.nightAerialAttackPower=0,this.nightContactModifier=0,this.formationModifier=1,this.healthModifier=1,this.specialAttackModifier=1,this.cruiserFitBonus=0,this.antiInstallationModifiers={b12:0,a13:1,b13:0,a13next:1,b13next:0},this.effectivenessMultiplicative=1,this.effectivenessAdditive=0,this.criticalModifier=1,this.proficiencyModifier=1,this.eventMapModifier=1,Object(n.c)(this,e)}return Object.defineProperty(e.prototype,"basicPower",{get:function(){return r=(e=this).nightAttackType,t=e.firepower,i=e.torpedo,a=e.improvementModifier,n=e.nightAerialAttackPower,o=e.nightContactModifier,"NightAerialAttack"===r?n+o:t+i+a+o;var e,r,t,i,a,n,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"precapPower",{get:function(){return e=this.basicPower,t=(r=this).formationModifier,i=r.healthModifier,a=r.specialAttackModifier,n=r.cruiserFitBonus,o=r.antiInstallationModifiers,(((e+o.b12)*o.a13+o.b13)*o.a13next+o.b13next)*t*i*a+n;var e,r,t,i,a,n,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cappedPower",{get:function(){return Object(n.f)(e.cap,this.precapPower)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCapped",{get:function(){return this.precapPower>e.cap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return e=this.cappedPower,t=(r=this).effectivenessMultiplicative,i=r.effectivenessAdditive,a=r.criticalModifier,n=r.proficiencyModifier,o=r.eventMapModifier,s=Math.floor(e),(t>1||i>0)&&(s=Math.floor(s*t+i)),a>1&&(s=Math.floor(s*a*n)),Math.floor(s*o);var e,r,t,i,a,n,o,s},enumerable:!0,configurable:!0}),e}(),s=o;o.cap=300;var u=t(220),c=t(555),l=function(){function e(e){var r=this;this.ship=e,this.calcPower=function(e){var t=e.role,i=void 0===t?"Main":t,n=e.nightContactModifier,o=void 0===n?0:n,c=e.formation,l=void 0===c?a.a.LineAhead:c,p=e.eventMapModifier,f=void 0===p?1:p,h=e.specialAttack,d=e.isCritical,b=void 0!==d&&d,m=e.target,y=r,g=y.ship,v=y.nightAttackType,S=y.proficiencyModifier,A=g.stats,w=A.firepower,C=A.torpedo,M=m.isInstallation,P=g.totalEquipmentStats(function(e){return e.improvement.nightAttackPowerModifier}),I=r.calcNightAerialAttackPower(M),O=l.getModifiersWithRole(i).nightBattle.power,k=g.health.nightAttackPowerModifier,j=g.getAntiInstallationModifier(m);M&&h&&h.isAerialAttack&&(j={a13:1,a13next:1,a5:1,b12:0,b13:0,b13next:0});var F=1;h&&(F=h.modifier.power,h.isDestroyerCutin&&g.hasGear(267)&&(F*=1.25));var B={nightAttackType:v,firepower:w,torpedo:M?0:C,improvementModifier:P,nightAerialAttackPower:I,nightContactModifier:o,formationModifier:O,healthModifier:k,specialAttackModifier:F,cruiserFitBonus:Object(u.a)(g),antiInstallationModifiers:j,effectivenessMultiplicative:j.a5,effectivenessAdditive:0,criticalModifier:b?1.5:1,proficiencyModifier:S.power,eventMapModifier:f};return new s(B)}}return Object.defineProperty(e.prototype,"nightAttackType",{get:function(){var e=this.ship;return Object(c.b)(e)?"NightAerialAttack":"NightAttack"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifier",{get:function(){var e=this.ship;return"NightAttack"===this.nightAttackType?{power:1,hitRate:0,criticalRate:0}:Object(u.c)(e)},enumerable:!0,configurable:!0}),e.prototype.calcNightAerialAttackPower=function(e){var r=this.ship;return"NightAerialAttack"!==this.nightAttackType?0:r.nakedStats.firepower+Object(i.a)(r.planes,function(r){return r.calcNightAerialAttackPower(e)})},e}();r.a=l},74:function(e,r,t){"use strict";t.r(r);var i=t(448);t.d(r,"getApShellModifiers",function(){return i.b}),t.d(r,"calcCruiserFitBonus",function(){return i.a});var a=t(446);t.d(r,"calcFighterPower",function(){return a.a});var n=t(184);t.d(r,"calcStatAtLevel",function(){return n.b}),t.d(r,"calcHpAtLevel",function(){return n.a});var o=t(141);t.d(r,"createFm",function(){return o.c}),t.d(r,"createCriticalFm",function(){return o.b}),t.d(r,"createPrecapFm",function(){return o.e}),t.d(r,"createPostcapFm",function(){return o.d}),t.d(r,"createAttackPower",function(){return o.a});var s=t(273);t.d(r,"calcBasicPower",function(){return s.b}),t.d(r,"Asw",function(){return s.a});var u=t(186);t.d(r,"calcHitRateBase",function(){return u.a}),t.d(r,"createHitRate",function(){return u.b});var c=t(449);t.d(r,"calcEvasionValue",function(){return c.a})},88:function(e,r,t){"use strict";var i;!function(e){e[e.CoastalDefenseShip=1]="CoastalDefenseShip",e[e.Destroyer=2]="Destroyer",e[e.LightCruiser=3]="LightCruiser",e[e.TorpedoCruiser=4]="TorpedoCruiser",e[e.HeavyCruiser=5]="HeavyCruiser",e[e.AviationCruiser=6]="AviationCruiser",e[e.LightAircraftCarrier=7]="LightAircraftCarrier",e[e.Battlecruiser=8]="Battlecruiser",e[e.Battleship=9]="Battleship",e[e.AviationBattleship=10]="AviationBattleship",e[e.AircraftCarrier=11]="AircraftCarrier",e[e.SuperDreadnoughts=12]="SuperDreadnoughts",e[e.Submarine=13]="Submarine",e[e.SubmarineAircraftCarrier=14]="SubmarineAircraftCarrier",e[e.Transport=15]="Transport",e[e.SeaplaneTender=16]="SeaplaneTender",e[e.AmphibiousAssaultShip=17]="AmphibiousAssaultShip",e[e.ArmoredAircraftCarrier=18]="ArmoredAircraftCarrier",e[e.RepairShip=19]="RepairShip",e[e.SubmarineTender=20]="SubmarineTender",e[e.TrainingCruiser=21]="TrainingCruiser",e[e.FleetOiler=22]="FleetOiler"}(i||(i={})),r.a=i},96:function(e,r,t){"use strict";var i=t(607),a=function(){function e(e,r,t,i,a){var n=this;void 0===e&&(e=0),void 0===i&&(i=1),void 0===a&&(a=0),this.attackPower=e,this.defensePower=r,this.defenderCurrentHp=t,this.remainingAmmoModifier=i,this.armorPenetration=a,this.calcValue=function(e){var r=n,t=r.attackPower,i=r.remainingAmmoModifier,a=r.armorPenetration,o=Math.max(1,e-a),s=Math.floor((t-o)*i);return Math.max(0,s)},this.random=function(){return n.calcValue(n.defensePower.random())}}return Object.defineProperty(e.prototype,"min",{get:function(){return this.calcValue(this.defensePower.max)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.calcValue(this.defensePower.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.defensePower,r=this.calcValue;return e.values().map(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeadly",{get:function(){var e=this.min;return this.defenderCurrentHp<=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamageProbability",{get:function(){var e=this.values;return e.filter(function(e){return e<=0}).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map(function(r){return Math.floor(.06*e+.08*r)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadlyDamageProbability",{get:function(){var e=this.values,r=this.defenderCurrentHp;return e.filter(function(e){return r-e<=0}).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopperDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map(function(r){return Math.floor(.5*e+.3*r)})},enumerable:!0,configurable:!0}),e}();r.a=a,a.calc=function(e,r,t){return void 0===e&&(e=0),void 0===t&&(t=1),new a(e,r,t).random()}}}]);