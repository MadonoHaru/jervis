(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"d",function(){return n}),t.d(r,"c",function(){return a}),t.d(r,"g",function(){return o}),t.d(r,"e",function(){return s}),t.d(r,"f",function(){return u}),t.d(r,"a",function(){return c});var i=function(e){return null!=e},n=i,a=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var n=0,a=r;n<a.length;n++){var o=a[n];for(var s in o){var u=o[s];i(u)&&(e[s]=u)}}return e},o=function(e,r){return r<=e?r:e+Math.sqrt(r-e)},s=function(e){return e.endsWith("改")},u=function(e){return/(改二|Верный)(?!丙)/.test(e)},c=function(e){return e.health.currentHp+e.getDefensePower().max}},112:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i=function(e,r,t){void 0===t&&(t=0);var i=e.stats,n=function(e){var r=e.evasion,t=e.luck,i=e.formationModifier;return Math.floor((r+Math.sqrt(2*t))*i)}({evasion:i.evasion,luck:i.luck,formationModifier:r}),a=n;n>=65?a=Math.floor(55+2*Math.sqrt(n-65)):n>=40&&(a=Math.floor(40+3*Math.sqrt(n-40)));var o=Math.floor(e.totalEquipmentStats(function(e){return e.improvement.evasionModifier}));return Math.floor(a+t)+o}},113:function(e,r,t){"use strict";var i=t(584),n=function(){function e(e,r,t,i){var n=this;void 0===e&&(e=0),void 0===i&&(i=1),this.attackPower=e,this.defensePower=r,this.defenderCurrentHp=t,this.remainingAmmoModifier=i,this.calcValue=function(e){var r=n,t=r.attackPower,i=r.remainingAmmoModifier,a=Math.floor((t-e)*i);return Math.max(0,a)},this.random=function(){return n.calcValue(n.defensePower.random())}}return Object.defineProperty(e.prototype,"min",{get:function(){return this.calcValue(this.defensePower.max)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.calcValue(this.defensePower.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=this.defensePower,r=this.calcValue;return e.values().map(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeadly",{get:function(){var e=this.min;return this.defenderCurrentHp<=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamageProbability",{get:function(){var e=this.values;return e.filter(function(e){return e<=0}).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scratchDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map(function(r){return Math.floor(.06*e+.08*r)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadlyDamageProbability",{get:function(){var e=this.values,r=this.defenderCurrentHp;return e.filter(function(e){return r-e<=0}).length/e.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopperDamages",{get:function(){var e=this.defenderCurrentHp;return Object(i.a)(e).map(function(r){return Math.floor(.5*e+.3*r)})},enumerable:!0,configurable:!0}),e}();r.a=n,n.calc=function(e,r,t){return void 0===e&&(e=0),void 0===t&&(t=1),new n(e,r,t).random()}},123:function(e,r,t){"use strict";t.d(r,"a",function(){return n}),t.d(r,"c",function(){return a}),t.d(r,"b",function(){return o});var i=t(10),n=function(e){var r=e.shellingType,t=5+e.firepower+e.combinedFleetFactor+e.improvementModifier;return"CarrierShelling"===r?function(e,r){var t=r.bombing,i=r.torpedo,n=e+Math.floor(Math.floor(1.3*t)+i)+15;return 25+Math.floor(1.5*n)}(t,e):t},a=function(e,r){var t=r.antiInstallationModifiers,i=r.formationModifier,n=r.engagementModifier,a=r.healthModifier,o=r.cruiserFitBonus;return(((e+t.shipTypeAdditive)*t.a13+t.b13)*t.a13d+t.b13d)*i*n*a+o},o=function(e,r){var t=r.effectivenessMultiplicative,i=r.effectivenessAdditive,n=r.specialAttackModifier,a=r.apShellModifier,o=r.criticalModifier,s=r.proficiencyModifier,u=r.eventMapModifier,c=Math.floor(e)*n;return(t>1||i>0)&&(c=Math.floor(c*t)+i),a>1&&(c=Math.floor(c*a)),o>1&&(c=Math.floor(c*o*s)),c*u},s=function(){function e(e){this.shellingType="Shelling",this.firepower=0,this.torpedo=0,this.bombing=0,this.improvementModifier=0,this.combinedFleetFactor=0,this.formationModifier=1,this.engagementModifier=1,this.healthModifier=1,this.cruiserFitBonus=0,this.effectivenessMultiplicative=1,this.effectivenessAdditive=0,this.specialAttackModifier=1,this.apShellModifier=1,this.criticalModifier=1,this.proficiencyModifier=1,this.eventMapModifier=1,this.antiInstallationModifiers={shipTypeAdditive:0,a13:1,b13:0,a13d:1,b13d:0},Object(i.c)(this,e)}return Object.defineProperty(e.prototype,"basicPower",{get:function(){return n(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preCapPower",{get:function(){return a(this.basicPower,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cappedPower",{get:function(){return Object(i.g)(e.cap,this.preCapPower)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCapped",{get:function(){return this.preCapPower>e.cap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return o(this.cappedPower,this)},enumerable:!0,configurable:!0}),e}();r.d=s,s.cap=180},132:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i,n=t(3427);!function(e){e[e.SmallCaliberMainGun=1]="SmallCaliberMainGun",e[e.MediumCaliberMainGun=2]="MediumCaliberMainGun",e[e.LargeCaliberMainGun=3]="LargeCaliberMainGun",e[e.SecondaryGun=4]="SecondaryGun",e[e.Torpedo=5]="Torpedo",e[e.CarrierBasedFighterAircraft=6]="CarrierBasedFighterAircraft",e[e.CarrierBasedDiveBomber=7]="CarrierBasedDiveBomber",e[e.CarrierBasedTorpedoBomber=8]="CarrierBasedTorpedoBomber",e[e.CarrierBasedReconnaissanceAircraft=9]="CarrierBasedReconnaissanceAircraft",e[e.ReconnaissanceSeaplane=10]="ReconnaissanceSeaplane",e[e.SeaplaneBomber=11]="SeaplaneBomber",e[e.SmallRadar=12]="SmallRadar",e[e.LargeRadar=13]="LargeRadar",e[e.Sonar=14]="Sonar",e[e.DepthCharge=15]="DepthCharge",e[e.ExtraArmor=16]="ExtraArmor",e[e.EngineImprovement=17]="EngineImprovement",e[e.AntiAircraftShell=18]="AntiAircraftShell",e[e.ArmorPiercingShell=19]="ArmorPiercingShell",e[e.VTFuze=20]="VTFuze",e[e.AntiAircraftGun=21]="AntiAircraftGun",e[e.MidgetSubmarine=22]="MidgetSubmarine",e[e.EmergencyRepairPersonnel=23]="EmergencyRepairPersonnel",e[e.LandingCraft=24]="LandingCraft",e[e.Autogyro=25]="Autogyro",e[e.AntiSubmarinePatrolAircraft=26]="AntiSubmarinePatrolAircraft",e[e.MediumExtraArmor=27]="MediumExtraArmor",e[e.LargeExtraArmor=28]="LargeExtraArmor",e[e.Searchlight=29]="Searchlight",e[e.SupplyTransportContainer=30]="SupplyTransportContainer",e[e.ShipRepairFacility=31]="ShipRepairFacility",e[e.SubmarineTorpedo=32]="SubmarineTorpedo",e[e.StarShell=33]="StarShell",e[e.CommandFacility=34]="CommandFacility",e[e.AviationPersonnel=35]="AviationPersonnel",e[e.AntiAircraftFireDirector=36]="AntiAircraftFireDirector",e[e.AntiGroundEquipment=37]="AntiGroundEquipment",e[e.LargeCaliberMainGun2=38]="LargeCaliberMainGun2",e[e.SurfaceShipPersonnel=39]="SurfaceShipPersonnel",e[e.LargeSonar=40]="LargeSonar",e[e.LargeFlyingBoat=41]="LargeFlyingBoat",e[e.LargeSearchlight=42]="LargeSearchlight",e[e.CombatRation=43]="CombatRation",e[e.Supplies=44]="Supplies",e[e.SeaplaneFighter=45]="SeaplaneFighter",e[e.SpecialAmphibiousTank=46]="SpecialAmphibiousTank",e[e.LandBasedAttackAircraft=47]="LandBasedAttackAircraft",e[e.LandBasedFighter=48]="LandBasedFighter",e[e.LandBasedReconnaissanceAircraft=49]="LandBasedReconnaissanceAircraft",e[e.TransportationMaterial=50]="TransportationMaterial",e[e.SubmarineEquipment=51]="SubmarineEquipment",e[e.JetPoweredFighter=56]="JetPoweredFighter",e[e.JetPoweredFighterBomber=57]="JetPoweredFighterBomber",e[e.JetPoweredTorpedoBomber=58]="JetPoweredTorpedoBomber",e[e.JetPoweredReconnaissanceAircraft=59]="JetPoweredReconnaissanceAircraft",e[e.LargeRadar2=93]="LargeRadar2",e[e.CarrierBasedReconnaissanceAircraft2=94]="CarrierBasedReconnaissanceAircraft2"}(i||(i={}));var a=function(){function e(e,r){var t=this;this.id=e,this.name=r,this.is=function(e){return t.id===i[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(t.is)}}return e.find=function(r,t){128===t||281===t?r=i.LargeCaliberMainGun2:142===t?r=i.LargeRadar2:151===t&&(r=i.CarrierBasedReconnaissanceAircraft2);var n=e.all.find(function(e){return e.id===r});if(n)return n;var a=new e(r,"");return this.all.push(a),a},e}();r.b=a,a.keyToId=function(e){return i[e]},a.numberToKey=function(e){var r=i[e];if(void 0!==r)return r},a.all=n.a.map(function(e){var r=e.api_id,t=e.api_name;return new a(r,t)})},138:function(e,r,t){"use strict";t.d(r,"b",function(){return n}),t.d(r,"a",function(){return a});var i=t(10),n=function(e){var r=e.combinedFleetFactor,t=e.level,i=e.luck,n=e.equipmentAccuracy,a=e.improvementModifier;return Math.floor(90+r+2*Math.sqrt(t)+1.5*Math.sqrt(i)+n+a)},a=function(e,r){var t=r.formationModifier,i=r.moraleModifier,n=r.fitGunBonus,a=r.specialAttackModifier,o=r.apShellModifier;return Math.floor((e*t*i+n)*a*o)},o=function(){function e(e){this.combinedFleetFactor=0,this.level=0,this.luck=0,this.equipmentAccuracy=0,this.improvementModifier=0,this.formationModifier=1,this.moraleModifier=1,this.fitGunBonus=0,this.specialAttackModifier=1,this.apShellModifier=1,Object(i.c)(this,e)}return Object.defineProperty(e.prototype,"basicAccuracy",{get:function(){return n(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return a(this.basicAccuracy,this)},enumerable:!0,configurable:!0}),e}();r.c=o},143:function(e,r,t){"use strict";var i=function(){return(i=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=function(){function e(r,t,n){var a=this;this.id=r,this.name=t,this.modifiers=n,this.getModifiersWithRole=function(r){return a!==e.Vanguard?a.modifiers:i(i({},a.modifiers),"Main"===r?{shelling:{power:.5,accuracy:.8,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:.5,accuracy:1,evasion:1}}:{shelling:{power:1,accuracy:1.2,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}})},e.values.push(this)}return Object.defineProperty(e,"singleFleetFormations",{get:function(){return e.values.filter(function(e){return e.id<=10})},enumerable:!0,configurable:!0}),Object.defineProperty(e,"combinedFleetFormations",{get:function(){return e.values.filter(function(e){return e.id>10})},enumerable:!0,configurable:!0}),e.fromId=function(r){return e.values.find(function(e){return e.id===r})},Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){return this.modifiers.fleetAntiAir},enumerable:!0,configurable:!0}),e}();r.a=n,n.keys=["LineAhead","DoubleLine","Diamond","Echelon","LineAbreast","Vanguard","CruisingFormation1","CruisingFormation2","CruisingFormation3","CruisingFormation4"].concat(),n.values=[],n.LineAhead=new n(1,"単縦陣",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.6,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.DoubleLine=new n(2,"複縦陣",{fleetAntiAir:1.2,shelling:{power:.8,accuracy:1.2,evasion:1},torpedo:{power:.8,accuracy:.8,evasion:1},asw:{power:.8,accuracy:1.2,evasion:1},nightBattle:{power:1,accuracy:.9,evasion:1}}),n.Diamond=new n(3,"輪形陣",{fleetAntiAir:1.6,shelling:{power:.7,accuracy:1,evasion:1.1},torpedo:{power:.7,accuracy:.4,evasion:1.1},asw:{power:1.2,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:.7,evasion:1}}),n.Echelon=new n(4,"梯形陣",{fleetAntiAir:1,shelling:{power:.75,accuracy:1.2,evasion:1.2},torpedo:{power:.6,accuracy:.6,evasion:1.3},asw:{power:1.1,accuracy:1.2,evasion:1.3},nightBattle:{power:1,accuracy:.9,evasion:1.2}}),n.LineAbreast=new n(5,"単横陣",{fleetAntiAir:1,shelling:{power:.6,accuracy:1.2,evasion:1.3},torpedo:{power:.6,accuracy:.3,evasion:1.4},asw:{power:1.3,accuracy:1.2,evasion:1.1},nightBattle:{power:1,accuracy:.8,evasion:1.2}}),n.Vanguard=new n(6,"警戒陣",{fleetAntiAir:1.1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation1=new n(11,"第一警戒航行序列",{fleetAntiAir:1.1,shelling:{power:.8,accuracy:1,evasion:1},torpedo:{power:.7,accuracy:1,evasion:1},asw:{power:1.3,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation2=new n(12,"第二警戒航行序列",{fleetAntiAir:1,shelling:{power:1,accuracy:1,evasion:1},torpedo:{power:.9,accuracy:1,evasion:1},asw:{power:1.1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation3=new n(13,"第三警戒航行序列",{fleetAntiAir:1.5,shelling:{power:.7,accuracy:1,evasion:1},torpedo:{power:.6,accuracy:1,evasion:1},asw:{power:1,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.CruisingFormation4=new n(14,"第四警戒航行序列",{fleetAntiAir:1,shelling:{power:1.1,accuracy:1.1,evasion:1},torpedo:{power:1,accuracy:1,evasion:1},asw:{power:.7,accuracy:1,evasion:1},nightBattle:{power:1,accuracy:1,evasion:1}}),n.isIneffective=function(e,r){return[[n.DoubleLine,n.LineAbreast],[n.LineAbreast,n.Echelon],[n.Echelon,n.LineAhead]].some(function(t){return t[0]===e&&t[1]===r})}},156:function(e,r,t){"use strict";t.r(r);var i=t(386);t.d(r,"AntiAirCutin",function(){return i.a});var n=t(456);t.d(r,"CarrierBasedAerialCombat",function(){return n.a});var a=t(457);t.d(r,"LandBaseAerialSupport",function(){return a.a});var o=t(208);t.d(r,"FleetAntiAir",function(){return o.a});var s=t(250);t.d(r,"ShipAntiAir",function(){return s.a})},174:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i=function(e,r,t,i){var n=(e-r)*t;return n<10&&(n=10),n>96&&(n=96),(n+i+1)/100}},180:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"a",function(){return n});var i=function(e,r){var t=e[0],i=e[1];return Math.floor((i-t)*r/99+t)},n=function(e,r){var t=e[0],i=e[1],n=t;return r>=100&&(n+=t>=91?9:t>=70?8:t>=50?7:t>=40?6:t>=30?5:t>=8?4:3),Math.min(n,i)}},197:function(e,r,t){"use strict";t.r(r);var i=t(425);t.d(r,"getApShellModifiers",function(){return i.b}),t.d(r,"calcCruiserFitBonus",function(){return i.a});var n=t(424);t.d(r,"calcFighterPower",function(){return n.a});var a=t(180);t.d(r,"calcStatAtLevel",function(){return a.b}),t.d(r,"calcHpAtLevel",function(){return a.a})},206:function(e,r,t){"use strict";t.d(r,"b",function(){return n});var i=t(180),n=["hp","firepower","armor","torpedo","evasion","antiAir","asw","speed","los","range","luck"],a=function(){function e(e,r,t){this.master=e,this.level=r,this.increased=t}return e.prototype.getIncreasedStat=function(e){var r=this.increased;if(!r)return 0;var t=r[e];return t?t>1e5?1e5:t:0},Object.defineProperty(e.prototype,"hp",{get:function(){return Object(i.a)(this.master.hp,this.level)+this.getIncreasedStat("hp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.master.firepower[1]+this.getIncreasedStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.master.torpedo[1]+this.getIncreasedStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.master.antiAir[1]+this.getIncreasedStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.master.armor[1]+this.getIncreasedStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return Object(i.b)(this.master.los,this.level)+this.getIncreasedStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return Object(i.b)(this.master.asw,this.level)+this.getIncreasedStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return Object(i.b)(this.master.evasion,this.level)+this.getIncreasedStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.master.luck[0]+this.getIncreasedStat("luck")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.master.speed+this.getIncreasedStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.master.range+this.getIncreasedStat("range")},enumerable:!0,configurable:!0}),e}();r.a=a},208:function(e,r,t){"use strict";var i=t(95),n=t(387),a=t(3431),o=t(144),s=function(e){var r=e.name,t=e.antiAir,i=(e.category,e.improvement);if(0===t)return 0;return(e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?.35:e.is("AntiAircraftShell")?.6:e.is("Radar")?.4:"46cm三連装砲"===r?.25:.2)*t+i.fleetAntiAirModifier},u=function(e){return Math.floor(e.totalEquipmentStats(s))},c=function(){function e(e,r,t){this.ships=e,this.side=r,this.formationModifier=t}return Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.ships,r=this.side,t=this.formationModifier,n=Object(o.a)(e,u),a=2*Math.floor(t*n);return r===i.a.Player?a/1.3:a},enumerable:!0,configurable:!0}),e}();r.a=c,c.getCombinedFleetModifier=function(e,r){return e===n.a.EscortFleet?.48:r===a.a.AirDefenseBattle?.72:.8},c.calcFleetAntiAir=function(e,r,t){var n=(0,e.totalShipStats)(u),a=2*Math.floor(t*n);return r===i.a.Player?a/1.3:a}},215:function(e,r,t){"use strict";t.d(r,"a",function(){return c}),t.d(r,"c",function(){return l});var i=t(143),n=t(3432),a=t(144),o=t(123),s=t(258),u=t(138),c=function(e){var r=0;if(e.shipType.any("LightCruiser","TorpedoCruiser","TrainingCruiser")){var t=e.countGear(function(e){return[4,11].includes(e.masterId)}),i=e.countGear(function(e){return[65,119,139].includes(e.masterId)});r+=Math.sqrt(t)+2*Math.sqrt(i)}return e.shipClass.is("ZaraClass")&&(r+=Math.sqrt(e.countGear(162))),r},l=function(e,r){var t={power:1,hitRate:0,criticalRate:0};if(r&&r.isCarrierSpecialAttack)return e.planes.filter(function(e){return e.participatesInCarrierShelling}).some(function(e){return 0===e.index})?t.power=1.25:t.power=1.106,t;var i=e.planes.filter(function(e){return e.slotSize>0&&e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("LargeFlyingBoat")});t.power=1+Object(a.a)(i,function(e){return 0===e.index?e.gear.proficiency.criticalPowerModifier/100:e.gear.proficiency.criticalPowerModifier/200});var n=Object(a.a)(i,function(e){return e.gear.proficiency.internal})/i.length,o=0,s=0;return n>=10&&(o=Math.floor(Math.sqrt(.1*n))),n>=25&&(s=1),n>=40&&(s=2),n>=55&&(s=3),n>=70&&(s=4),n>=80&&(s=6),n>=100&&(s=9),t.hitRate=o+s,t.criticalRate=Object(a.a)(i,function(e){var r=e.gear.proficiency,t=r.internal,i=0;return 7===r.level&&(i=3),(Math.sqrt(Math.sqrt(.1*t))+i)/100}),t},f=function(){function e(e){var r=this;this.ship=e,this.calcPower=function(e){var t=e.role,a=void 0===t?"Main":t,s=e.isCritical,u=void 0!==s&&s,c=e.formation,f=void 0===c?i.a.LineAhead:c,p=e.engagement,d=void 0===p?n.a.Parallel:p,h=e.combinedFleetFactor,m=void 0===h?0:h,b=e.eventMapModifier,g=void 0===b?1:b,v=e.specialAttack,y=e.isArmorPiercing,w=void 0!==y&&y,A=e.installationType,M=void 0===A?"None":A,C=r,S=C.shellingType,P=C.firepower,O=C.torpedo,j=C.bombing,k=C.improvementModifier,F=C.cruiserFitBonus,B=C.healthModifier,G=f.getModifiersWithRole(a).shelling.power,T=d.modifier,I=u?1.5:1,R=v?v.modifier.power:1,D=w?r.apShellModifiers.power:1,L=r.antiInstallationStatus.getModifiersFromType(M),q="None"!==M,N={shellingType:S,combinedFleetFactor:m,firepower:P,torpedo:q?0:O,bombing:q?r.ship.totalEquipmentStats(function(e){return e.is("AntiInstallationBomber")?e.bombing:0}):j,improvementModifier:k,antiInstallationModifiers:L,formationModifier:G,engagementModifier:T,healthModifier:B,cruiserFitBonus:F,effectivenessMultiplicative:L.postCapMultiplicative,effectivenessAdditive:0,specialAttackModifier:R,apShellModifier:D,criticalModifier:I,proficiencyModifier:l(r.ship,v).power,eventMapModifier:g};return new o.d(N)},this.calcAccuracy=function(e){var t=r.ship,i=t.level,n=t.stats.luck,a=e.fitGunBonus,o=e.combinedFleetFactor,s=e.formationModifier,c=e.specialAttack,l=e.isArmorPiercing,f={combinedFleetFactor:o,level:i,luck:n,equipmentAccuracy:t.totalEquipmentStats("accuracy"),improvementModifier:t.totalEquipmentStats(function(e){return e.improvement.shellingAccuracyModifier}),moraleModifier:t.morale.shellingAccuracyModifier,formationModifier:s,fitGunBonus:a,specialAttackModifier:c?c.modifier.accuracy:1,apShellModifier:l?r.apShellModifiers.accuracy:1};return new u.c(f)},this.antiInstallationStatus=new s.a(e)}return Object.defineProperty(e.prototype,"shellingType",{get:function(){var e=this.ship,r=e.shipType,t=e.shipClass,i=e.isInstallation,n=e.hasGear;return r.isAircraftCarrierClass?"CarrierShelling":(t.is("RevisedKazahayaClass")||i)&&(n("DiveBomber")||n("TorpedoBomber"))?"CarrierShelling":"Shelling"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.ship.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.ship.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.ship.totalEquipmentStats("bombing")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvementModifier",{get:function(){return this.ship.totalEquipmentStats(function(e){return e.improvement.shellingPowerModifier})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cruiserFitBonus",{get:function(){return c(this.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"healthModifier",{get:function(){return this.ship.health.shellingPowerModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apShellModifiers",{get:function(){var e=this.ship.hasGear;if(!e(function(e){return e.is("ArmorPiercingShell")})||!e(function(e){return e.is("MainGun")}))return{power:1,accuracy:1};var r=e(function(e){return e.is("SecondaryGun")}),t=e(function(e){return e.is("Radar")});return r&&t?{power:1.15,accuracy:1.3}:r?{power:1.15,accuracy:1.2}:t?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}},enumerable:!0,configurable:!0}),e}();r.b=f},250:function(e,r,t){"use strict";var i=t(95),n=function(e){var r=e.antiAir,t=(e.category,e.improvement);if(0===r)return 0;var i=0;return e.is("AntiAircraftGun")?i=6:e.is("AntiAircraftFireDirector")||e.is("HighAngleMount")?i=4:e.is("Radar")&&(i=3),i*r+t.adjustedAntiAirModifier},a=function(){function e(e,r,t,n,a){var o=this;void 0===n&&(n=1),this.ship=e,this.side=r,this.fleetAntiAir=t,this.combinedFleetModifier=n,this.antiAirCutin=a,this.calcProportionalShotdownRate=function(e){void 0===e&&(e=1);var r=o;return r.adjustedAntiAir*r.combinedFleetModifier*.5*.25*.02*e},this.calcFixedShotdownNumber=function(e,r){void 0===e&&(e=1),void 0===r&&(r=1);var t=o,n=t.adjustedAntiAir,a=t.fleetAntiAir,s=t.side,u=t.antiAirCutin,c=t.combinedFleetModifier,l=.5*(n*e+a*r)*.25*(s===i.a.Player?.8:.75)*c;return u&&(l*=u.fixedAirDefenseModifier),Math.floor(l)}}return Object.defineProperty(e.prototype,"adjustedAntiAir",{get:function(){return function(e,r){var t=e.stats,a=e.nakedStats,o=(0,e.totalEquipmentStats)(n);if(r===i.a.Enemy)return Math.floor(2*Math.floor(Math.sqrt(t.antiAir))+o);var s=a.antiAir+o;return 0===e.countGear()?s:2*Math.floor(s/2)}(this.ship,this.side)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumBonus",{get:function(){var e=this.side,r=this.antiAirCutin;return r?r.minimumBonus:e===i.a.Player?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAirPropellantBarrageChance",{get:function(){var e,r=this.ship,t=this.adjustedAntiAir,i=r.shipType;if(!(e=i).isAircraftCarrierClass&&!e.any("AviationCruiser","AviationBattleship","SeaplaneTender"))return 0;var n=r.countGear(274);if(!n)return 0;var a=r.shipClass.is("IseClass")?.25:0;return(t+.9*r.stats.luck)/281+.15*(n-1)+a},enumerable:!0,configurable:!0}),e}();r.a=a},251:function(e,r,t){"use strict";var i=t(143),n=t(3428),a=t(387),o=t(208),s=function(){return(s=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},u=function(){function e(e,r,t,n,a){this.side=e,this.fleetType=r,this.landBase=t,this.mainFleet=n,this.escortFleet=a,this.formation=i.a.LineAhead,this.name="",this.isCombinedFleet&&(this.formation=i.a.CruisingFormation4)}return Object.defineProperty(e.prototype,"allShips",{get:function(){var e=this.mainFleet,r=this.escortFleet,t=e.nonNullableShips.concat();return r?t.concat(r.nonNullableShips):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAir",{get:function(){var e=this.allShips,r=this.side,t=this.formation;return new o.a(e,r,t.fleetAntiAirModifier).fleetAntiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCombinedFleet",{get:function(){return this.fleetType!==n.a.Single},enumerable:!0,configurable:!0}),e.prototype.getShipInformation=function(e){var r=this,t=r.mainFleet,i=r.escortFleet,n={side:r.side,fleetType:r.fleetType,fleetAntiAir:r.fleetAntiAir,formation:r.formation};return t.nonNullableShips.find(function(r){return r===e})?s(s({},n),{fleetRole:a.a.MainFleet}):i&&i.nonNullableShips.find(function(r){return r===e})?s(s({},n),{fleetRole:a.a.EscortFleet}):void 0},e}();r.a=u},252:function(e,r,t){"use strict";var i=function(){function e(e,r,t){this.player=e,this.enemy=r,this.battleType=t}return e.prototype.getShipInformation=function(e){var r=this.player,t=this.enemy,i=r.getShipInformation(e);if(i)return i;var n=t.getShipInformation(e);if(n)return n;throw console.error("ship info is not found")},e}();r.a=i},258:function(e,r,t){"use strict";var i=t(144),n=t(10),a=function(){return(a=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},o=function(){function e(e){var r=this;this.ship=e,this.getModifiersFromType=function(e){var t={shipTypeAdditive:0,a13:1,b13:0,a13d:1,b13d:0,postCapMultiplicative:1};switch(e){case"SoftSkinned":return a(a({},t),r.antiSoftSkinnedModifiers);case"Pillbox":return a(a({},t),r.antiPillboxModifiers);case"IsolatedIsland":return a(a({},t),r.antiIsolatedIslandModifiers);case"SupplyDepot":return a(a(a({},t),r.antiSoftSkinnedModifiers),{postCapMultiplicative:r.antiSupplyDepotPostCapModifier})}return t}}return Object.defineProperty(e.prototype,"shipType",{get:function(){return this.ship.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gears",{get:function(){return this.ship.gears.filter(n.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasGear",{get:function(){return this.ship.hasGear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countGear",{get:function(){return this.ship.countGear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wgCount",{get:function(){return this.countGear(126)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wgAdditive",{get:function(){var e=this.wgCount;return 1===e?75:2===e?110:3===e?140:e>=4?160:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type4AntiGroundRocketLauncherAdditiv",{get:function(){var e=this.countGear(348);return 1===e?55:2===e?115:3===e?160:e>=4?190:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type4AntiGroundRocketLauncherConcentratedAdditiv",{get:function(){var e=this.countGear(349);return 1===e?80:e>=2?170:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiGroundRocketLauncherModifiers",{get:function(){var e=this.countGear(348)+this.countGear(349),r=this.type4AntiGroundRocketLauncherAdditiv+this.type4AntiGroundRocketLauncherConcentratedAdditiv;return 1===e?{b13d:r,antiPillbox:1.5,antiIsolatedIsland:1.3,antiSoftSkinned:1.25,antiSupplyDepotPostCap:1.2}:e>=2?{b13d:r,antiPillbox:2.7,antiIsolatedIsland:2.145,antiSoftSkinned:1.875,antiSupplyDepotPostCap:1.68}:{b13d:r,antiPillbox:1,antiIsolatedIsland:1,antiSoftSkinned:1,antiSupplyDepotPostCap:1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type2MortarCount",{get:function(){return this.countGear(346)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type2MortarConcentratedCount",{get:function(){return this.countGear(347)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type2MortarAdditiv",{get:function(){var e=this.type2MortarCount;return 1===e?30:2===e?55:3===e?75:e>=4?90:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type2MortarConcentratedAdditiv",{get:function(){var e=this.type2MortarConcentratedCount;return 1===e?60:2===e?110:e>=3?150:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mortarModifiers",{get:function(){var e=this.type2MortarCount+this.type2MortarConcentratedCount,r=this.type2MortarAdditiv+this.type2MortarConcentratedAdditiv;return 1===e?{b13d:r,antiPillbox:1.3,antiIsolatedIsland:1.2,antiSoftSkinned:1.2,antiSupplyDepotPostCap:1.15}:e>=2?{b13d:r,antiPillbox:1.95,antiIsolatedIsland:1.68,antiSoftSkinned:1.56,antiSupplyDepotPostCap:1.38}:{b13d:r,antiPillbox:1,antiIsolatedIsland:1,antiSoftSkinned:1,antiSupplyDepotPostCap:1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"landingCraftsImprovementMultiplicative",{get:function(){var e=this.gears.filter(function(e){return e.is("LandingCraft")});return 0===e.length?1:1+Object(i.a)(e,function(e){return e.improvement.value})/e.length/50},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specialAmphibiousTanksImprovementMultiplicative",{get:function(){var e=this.gears.filter(function(e){return e.is("SpecialAmphibiousTank")});return 0===e.length?1:1+Object(i.a)(e,function(e){return e.improvement.value})/e.length/30},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokuDaihatsuMultiplicative",{get:function(){return this.hasGear(193)?1.15:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shikonModifiers",{get:function(){return this.countGear(230)>=1?{b13:25,a13:1.8}:{b13:0,a13:1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"m4a1Modifiers",{get:function(){return this.countGear(355)>=1?{a13d:1.4,b13:25}:{a13d:1,b13:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submarineClassAdditive",{get:function(){return this.shipType.isSubmarineClass?30:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commonModifiers",{get:function(){var e=this,r=e.wgAdditive,t=e.antiGroundRocketLauncherModifiers,i=e.mortarModifiers,n=e.landingCraftsImprovementMultiplicative,a=e.specialAmphibiousTanksImprovementMultiplicative,o=e.shikonModifiers,s=e.m4a1Modifiers,u=e.tokuDaihatsuMultiplicative;return{shipTypeAdditive:e.submarineClassAdditive,a13:n*a*u*o.a13,b13:o.b13+s.b13,a13d:s.a13d,b13d:r+t.b13d+i.b13d}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiSoftSkinnedModifiers",{get:function(){var e=this.wgCount,r=this.commonModifiers,t=this.hasGear,i=this.countGear,n=r.a13;t("AntiAircraftShell")&&(n*=2.5),e>=1&&(n*=1.3),e>=2&&(n*=1.4),n*=this.antiGroundRocketLauncherModifiers.antiSoftSkinned,n*=this.mortarModifiers.antiSoftSkinned,(t("SeaplaneBomber")||t("SeaplaneFighter"))&&(n*=1.2),t("LandingCraft")&&(n*=1.4);var o=i(166);o>=1&&(n*=1.5),o>=2&&(n*=1.3);var s=i("SpecialAmphibiousTank");return s>=1&&(n*=1.5),s>=2&&(n*=1.2),t(355)&&(n*=1.1),a(a({},r),{a13:n})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiPillboxModifiers",{get:function(){var e=this,r=e.shipType,t=e.wgCount,i=e.commonModifiers,n=e.hasGear,o=e.countGear,s=i.a13;n("ArmorPiercingShell")&&(s*=1.85),t>=1&&(s*=1.6),t>=2&&(s*=1.7),s*=this.antiGroundRocketLauncherModifiers.antiPillbox,s*=this.mortarModifiers.antiPillbox,(n("SeaplaneBomber")||n("SeaplaneFighter")||n("CarrierBasedDiveBomber"))&&(s*=1.5),n("LandingCraft")&&(s*=1.8);var u=o(166);u>=1&&(s*=1.5),u>=2&&(s*=1.4);var c=o("SpecialAmphibiousTank");return c>=1&&(s*=2.4),c>=2&&(s*=1.35),(r.isDestroyer||r.isLightCruiserClass)&&(s*=1.4),a(a({},i),{a13:s})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiIsolatedIslandModifiers",{get:function(){var e=this.wgCount,r=this.commonModifiers,t=this.hasGear,i=this.countGear,n=r.a13;t("AntiAircraftShell")&&(n*=1.75),e>=1&&(n*=1.4),e>=2&&(n*=1.5),n*=this.antiGroundRocketLauncherModifiers.antiIsolatedIsland,n*=this.mortarModifiers.antiIsolatedIsland,t("CarrierBasedDiveBomber")&&(n*=1.4),t("LandingCraft")&&(n*=1.8);var o=i(166);o>=1&&(n*=1.2),o>=2&&(n*=1.4);var s=i("SpecialAmphibiousTank");return s>=1&&(n*=2.4),s>=2&&(n*=1.35),a(a({},r),{a13:n})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiSupplyDepotPostCapModifier",{get:function(){var e=this,r=e.wgCount,t=e.landingCraftsImprovementMultiplicative,i=e.specialAmphibiousTanksImprovementMultiplicative,n=e.hasGear,a=e.countGear,o=1;r>=1&&(o*=1.25),r>=2&&(o*=1.3),o*=this.antiGroundRocketLauncherModifiers.antiSupplyDepotPostCap,o*=this.mortarModifiers.antiSupplyDepotPostCap,n("LandingCraft")&&(o*=1.7),a(193)>=1&&(o*=1.2),o*=t;var s=a(166);s>=1&&(o*=1.3*t),s>=2&&(o*=1.6);var u=a("SpecialAmphibiousTank");return u>=1&&(o*=1.7),u>=2&&(o*=1.5),n(355)&&(o*=1.2),o*=i},enumerable:!0,configurable:!0}),e}();r.a=o},27:function(e,r,t){"use strict";var i=t(197);t.d(r,"a",function(){return i})},295:function(e,r,t){"use strict";var i=t(586),n=t(95),a=t(310),o=t(250),s=t(208),u=function(){function e(e){var r=this;this.combatInformation=e,this.shotdownInFighterCombat=function(e,r,t){var i;if(t===n.a.Player){var a=r/4,o=Math.floor(r/3*100);i=Math.floor(Math.random()*(o+1))/100+a}else{o=11-r;i=.35*Math.floor(Math.random()*(o+1))+.65*Math.floor(Math.random()*(o+1))}var s=i/10,u=Math.floor(e.slotSize*s);e.is("JetPoweredAircraft")?e.shotdown(.6*u):e.shotdown(u)},this.shipAntiAirDefense=function(e,t,i){var n=r.combatInformation.battleType,a=r.combatInformation.getShipInformation(e),u=a.side,c=a.fleetRole,l=a.fleetAntiAir,f=s.a.getCombinedFleetModifier(c,n),p=new o.a(e,u,l,f,i),d=0;Math.random()>.5&&(d+=Math.floor(t.slotSize*p.calcProportionalShotdownRate())),Math.random()>.5&&(d+=p.calcFixedShotdownNumber()),d+=p.minimumBonus,t.shotdown(d)}}return e.prototype.fighterCombat=function(e,r){var t=this,i=e.reduce(function(e,r){return e+r.fighterPower},0),o=r.reduce(function(e,r){return e+r.fighterPower},0),s=a.a.fromFighterPower(i,o);return e.forEach(function(e){return t.shotdownInFighterCombat(e,s.constant,n.a.Player)}),r.forEach(function(e){return t.shotdownInFighterCombat(e,s.constant,n.a.Enemy)}),s},e.prototype.antiAirDefense=function(e,r,t){for(var n=0,a=r;n<a.length;n++){var o=a[n],s=e[Object(i.a)(e.length-1)];this.shipAntiAirDefense(s,o,t)}},e}();r.a=u},310:function(e,r,t){"use strict";var i=function(){function e(r,t,i){this.id=r,this.name=t,this.constant=i,e.values.push(this)}return e.fromFighterPower=function(r,t){var i=e.getBoundaryValues(t);return r>=i.AirSupremacy?e.AirSupremacy:r>=i.AirSuperiority?e.AirSuperiority:r>=i.AirParity?e.AirParity:r>=i.AirDenial?e.AirDenial:e.AirIncapability},e.fromId=function(r){return e.values.find(function(e){return e.id===r})},Object.defineProperty(e.prototype,"contactMultiplier",{get:function(){switch(this){case e.AirSupremacy:return 3;case e.AirSuperiority:return 2;case e.AirDenial:return 1;default:return 0}},enumerable:!0,configurable:!0}),e}();r.a=i,i.values=[],i.AirSupremacy=new i(1,"制空権確保",1),i.AirSuperiority=new i(2,"航空優勢",3),i.AirParity=new i(0,"制空均衡",5),i.AirDenial=new i(3,"航空劣勢",7),i.AirIncapability=new i(4,"制空権喪失",10),i.getBoundaryValues=function(e){return{AirSupremacy:Math.ceil(3*e),AirSuperiority:Math.ceil(1.5*e),AirParity:Math.floor(2/3*e)+1,AirDenial:Math.floor(1/3*e)+1}}},3425:function(e,r,t){"use strict";var i=t(3536),n=t(424),a=t(530),o=function(){function e(e,r,t,i,o){var s=this;this.stats=e,this.category=r,this.improvement=t,this.proficiency=i,this.attrs=o,this.is=function(e){return s.attrs.includes(e)},this.match=function(e){return Object(a.a)(e)(s)},this.toState=function(){return{masterId:s.masterId,improvement:s.improvement.value,proficiency:s.proficiency.internal}},this.calcFighterPower=function(e,r){void 0===r&&(r=!1);var t=s,i=t.antiAir,a=t.interception,o=t.antiBomber,u=t.improvement,c=t.proficiency,l=u.fighterPowerModifier,f=c.fighterPowerBonus;return Object(n.a)({slotSize:e,antiAir:i,interception:a,antiBomber:o,improvementModifier:l,proficiencyModifier:f,isInterception:r})}}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.stats.gearId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.stats.categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this.stats.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.stats.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"improvable",{get:function(){return this.stats.improvable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.stats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.stats.firepower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.stats.armor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.stats.torpedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.stats.antiAir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.stats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bombing",{get:function(){return this.stats.bombing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.stats.asw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.stats.los},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.stats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.stats.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){return this.stats.accuracy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.stats.evasion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiBomber",{get:function(){return this.stats.antiBomber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interception",{get:function(){return this.stats.interception},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stats.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.gearId},enumerable:!0,configurable:!0}),e}(),s=o,u=function(){function e(e,r,t){void 0===e&&(e=0),this.value=e,this.stats=r,this.gearIs=t}return Object.defineProperty(e.prototype,"contactSelectionModifier",{get:function(){var e=this.value,r=this.gearIs;if(!r("ReconnaissanceAircraft"))return 0;var t=this.stats.los;if(r("CarrierBasedReconnaissanceAircraft")||r("CarrierBasedReconnaissanceAircraft2")){if(7===t)return.25*e;if(11===t)return.4*e}else{if(6===t)return.2*e;if(t>=4)return.14*e;if(3===t)return.1*e}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerModifier",{get:function(){var e=this.value,r=this.gearIs;return r("Fighter")?.2*e:r("CarrierBasedDiveBomber")?.25*e:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustedAntiAirModifier",{get:function(){var e=this.gearIs,r=this.stats.antiAir;if(0===r)return 0;var t=0;return e("AntiAircraftGun")?t=r<=7?4:6:(e("AntiAircraftFireDirector")||e("HighAngleMount"))&&(t=r<=7?2:3),t*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetAntiAirModifier",{get:function(){var e=this.gearIs,r=this.stats.antiAir;if(0===r)return 0;var t=0;return e("AntiAircraftFireDirector")||e("HighAngleMount")?t=r<=7?2:3:e("AirRadar")&&(t=1.5),t*Math.sqrt(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){var e=this.stats,r=e.firepower,t=e.gearId,i=this.gearIs;return r>12?1.5*Math.sqrt(this.value):i("CarrierBasedTorpedoBomber")?.2*this.value:[10,66,220,275].includes(t)?.2*this.value:[12,234,247].includes(t)?.3*this.value:i("MainGun")||i("SecondaryGun")||i("ArmorPiercingShell")||i("AntiAircraftFireDirector")||i("Searchlight")||i("AntiAircraftGun")||i("LandingCraft")||i("SpecialAmphibiousTank")||i("AntiAircraftShell")?Math.sqrt(this.value):i("Sonar")||i("LargeRadar")||i("DepthCharge")?.75*Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){var e=this.gearIs;return e("SurfaceRadar")?1.7*Math.sqrt(this.value):e("Radar")||e("MainGun")||e("SecondaryGun")||e("Sonar")||e("LargeSonar")||e("DepthCharge")||e("ArmorPiercingShell")||e("AntiAircraftFireDirector")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifier",{get:function(){var e=this.gearIs,r=this.stats.gearId;return[10,66,220,275].includes(r)?.2*this.value:[12,234,247].includes(r)?.3*this.value:e("MainGun")||e("SecondaryGun")||e("ArmorPiercingShell")||e("AntiAircraftShell")||e("AntiAircraftFireDirector")||e("Searchlight")||e("Torpedo")||e("LandingCraft")||e("SpecialAmphibiousTank")||e("MidgetSubmarine")?Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackAccuracyModifier",{get:function(){var e=this.gearIs,r=this.value;return e("SurfaceRadar")?1.6*Math.sqrt(r):e("MediumCaliberMainGun")||e("Radar")?1.3*Math.sqrt(r):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectiveLosModifier",{get:function(){var e=this.gearIs,r=this.value;return e("SmallRadar")?1.25*Math.sqrt(r):e("LargeRadar")||e("LargeRadar2")?1.4*Math.sqrt(r):e("CarrierBasedReconnaissanceAircraft")||e("CarrierBasedReconnaissanceAircraft2")||e("ReconnaissanceSeaplane")?1.2*Math.sqrt(r):e("SeaplaneBomber")?1.15*Math.sqrt(r):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasionModifier",{get:function(){return this.gearIs("EngineImprovement")?1.5*Math.sqrt(this.value):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePowerModifier",{get:function(){var e=this.gearIs;return e("MediumExtraArmor")?.2*this.value:e("LargeExtraArmor")?.3*this.value:0},enumerable:!0,configurable:!0}),e}(),c=u,l=t(376),f=function(e){var r=this;this.masters=e,this.create=function(e){if(e){var t=r.masters.find(function(r){return r.id===e.masterId});if(t){var i=l.a.from(t.attrs),n=new c(e.improvement,t,t.is),a=new l.b(e.proficiency,i);return new s(t,t.category,n,a,t.attrs)}}}},p=f,d=t(144),h=t(3434),m=t(10),b=t(206),g=function(){function e(e){this.hp=0,this.firepower=0,this.torpedo=0,this.antiAir=0,this.armor=0,this.asw=0,this.los=0,this.evasion=0,this.speed=0,this.range=0,this.luck=0,e&&this.add(e)}return e.prototype.add=function(e){for(var r=e.multiplier,t=void 0===r?1:r,i=0,n=b.b;i<n.length;i++){var a=n[i],o=e[a];"number"==typeof o&&(this[a]+=o*t)}return this},e}(),v=g,y=t(3435),w=function(e){var r=e.gears.filter(function(e){return!!e&&61===e.masterId}),t=Object(y.a)(r,function(e){return e.improvement.value});if(t){var i=new v,n=t.improvement.value;return"伊勢改二"===e.name&&i.add({firepower:3,evasion:2,armor:1,range:1}),"日向改二"===e.name&&i.add({firepower:3,evasion:3,armor:3,range:1}),"蒼龍改二"===e.name&&(i.add({range:1}),n>=1&&i.add({firepower:3,los:3}),n>=8&&i.add({firepower:1,los:1})),"飛龍改二"===e.name&&(i.add({range:1}),n>=1&&i.add({firepower:2,los:2})),["瑞鳳改二乙","鈴谷航改二","熊野航改二"].includes(e.name)&&n>=1&&i.add({firepower:1,los:1}),i}},A=[function(e){var r=e.gears.filter(m.b).filter(function(e){return e.category.any("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2")}).map(function(e){return e.improvement.value});if(0!==r.length){var t=new v,i=Math.max.apply(Math,r);return i>=10?t.add({firepower:2,los:3}):i>=6?t.add({firepower:1,los:2}):i>=4?t.add({firepower:1,los:1}):i>=2&&t.add({los:1}),t}},w],M=function(e){var r=e.countGear(194);if(0!==r){var t=new v;return 392===e.shipId&&t.add({multiplier:r,firepower:1,evasion:2,los:2}),e.shipClass.is("CommandantTesteClass")&&t.add({multiplier:r,firepower:3,evasion:2,los:2}),e.shipClass.any("MizuhoClass","KamoiClass")&&t.add({multiplier:r,evasion:1,los:2}),t}},C=A.concat(M),S=function(e){var r=e.los,t=e.improvement,i=.6;return e.is("CarrierBasedTorpedoBomber")?i=.8:e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?i=1:e.is("ReconnaissanceSeaplane")?i=1.2:e.is("SeaplaneBomber")&&(i=1.1),i*(r+t.effectiveLosModifier)},P=function(e,r){var t=e.totalEquipmentStats,i=e.nakedStats,n=t(S),a=Object(d.a)(C,function(r){var t=r(e);return t?t.los:0});return Math.sqrt(i.los+a)+n*r-2},O={gearEffectiveLos:S,shipEffectiveLos:P,fleetEffectiveLos:function(e,r,t){return e.totalShipStats(function(e){return P(e,r)})-Math.ceil(.4*t)+12}},j=function(){function e(e){var r=this;this.ships=e,this.totalShipStats=function(e){return Object(d.a)(r.nonNullableShips,e)},this.effectiveLos=function(e,t){return O.fleetEffectiveLos(r,e,t)}}return Object.defineProperty(e.prototype,"nonNullableShips",{get:function(){return this.ships.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planes",{get:function(){return Object(h.a)(this.nonNullableShips,function(e){return e.planes})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnknownSlot",{get:function(){return this.nonNullableShips.flatMap(function(e){return e.slots}).some(function(e){return e<0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(d.a)(this.planes.filter(function(e){return!e.is("ReconnaissanceAircraft")}),"fighterPower")},enumerable:!0,configurable:!0}),e}(),k=j,F=function(e){var r=this;this.shipFactory=e,this.create=function(e){var t=e.ships.map(r.shipFactory.create);return new k(t)}},B=F,G=function(){function e(e,r,t){var i=this;this.gear=e,this.slots=r,this.index=t,this.contactSelectionRate=function(e){var r=i.gear,t=r.los,n=r.improvement;return Math.ceil(t+n.contactSelectionModifier)/(20-2*e.contactMultiplier)},this.calcNightAerialAttackPower=function(e){void 0===e&&(e=!1);var r=i,t=r.isNightPlane,n=r.isNightAircraft,a=r.gear,o=r.slotSize;if(!n)return 0;var s=a.firepower,u=a.torpedo,c=a.asw,l=a.bombing,f=0,p=.3;t&&(f=3,p=.45);var d=Math.sqrt(a.improvement.value);return s+(e?0:u)+l+f*o+p*(s+u+c+l)*Math.sqrt(o)+d},this.shotdown=function(e){i.slotSize-=e,i.slotSize<0&&(i.slotSize=0)}}return Object.defineProperty(e.prototype,"is",{get:function(){return this.gear.is},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.gear.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slotSize",{get:function(){return this.slots[this.index]},set:function(e){this.slots[this.index]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){var e=this.gear,r=this.slotSize;return e.calcFighterPower(r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){var e=this.gear,r=this.slotSize;return e.calcFighterPower(r,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canContact",{get:function(){return this.is("CarrierBasedTorpedoBomber")||this.is("ReconnaissanceAircraft")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactTriggerFactor",{get:function(){var e=this.gear,r=this.slotSize;return Math.floor(e.los*Math.sqrt(r))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInAirstrike",{get:function(){return 0!==this.slotSize&&(this.is("DiveBomber")||this.is("TorpedoBomber"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"participatesInCarrierShelling",{get:function(){var e=this.category;return 0!==this.slotSize&&e.any("CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","JetPoweredFighterBomber","JetPoweredTorpedoBomber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fleetLosModifier",{get:function(){var e=this.gear,r=this.slotSize;return this.is("ReconnaissanceSeaplane")||this.is("SeaplaneBomber")?e.los*Math.floor(Math.sqrt(r)):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSwordfish",{get:function(){return this.gear.name.includes("Swordfish")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightFighter",{get:function(){return 45===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAttacker",{get:function(){return 46===this.gear.iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightPlane",{get:function(){return this.isNightFighter||this.isNightAttacker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNightAircraft",{get:function(){var e=this.isNightPlane,r=this.isSwordfish,t=this.gear;return e||r||[154,320].includes(t.masterId)},enumerable:!0,configurable:!0}),e}(),T=G,I=function(e,r){var t=new Array;return e.map(function(i,n){var a=r[n];i&&a&&a.is("Aircraft")&&t.push(new T(a,e,n))}),t},R=function(e){var r=e.los;return e.is("LandBasedReconnaissanceAircraft")?r<=7?1.12:8===r?1.15:1.18:1},D=function(e){var r=e.los;return e.is("CarrierBasedReconnaissanceAircraft")||e.is("CarrierBasedReconnaissanceAircraft2")?r<=7?1.2:8===r?1.25:1.3:e.is("LandBasedReconnaissanceAircraft")?1.18:e.is("ReconnaissanceSeaplane")||e.is("LargeFlyingBoat")?r<=7?1.1:8===r?1.13:1.16:1},L=function(){function e(e,r){this.slots=e,this.gears=r,this.planes=I(e,r)}return Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlanes",{get:function(){return this.nonNullableGears.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(d.a)(this.planes,function(e){return e.fighterPower}),r=Math.max.apply(Math,this.nonNullableGears.map(R));return Math.floor(e*r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptionPower",{get:function(){if(!this.hasPlanes)return 0;var e=Object(d.a)(this.planes,function(e){return e.interceptionPower}),r=Math.max.apply(Math,this.nonNullableGears.map(D));return Math.floor(e*r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCombatRadius",{get:function(){return this.hasPlanes?Math.min.apply(Math,this.nonNullableGears.map(function(e){return e.radius})):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combatRadius",{get:function(){if(!this.hasPlanes)return 0;var e=this.minCombatRadius,r=this.nonNullableGears,t=Math.max.apply(Math,r.map(function(e){return e.is("ReconnaissanceAircraft")?e.radius:0}));if(t>0){var i=Math.min(Math.sqrt(t-e),3);return Math.round(e+i)}return e},enumerable:!0,configurable:!0}),e}(),q=L,N=function(e){var r=this;this.gearFactory=e,this.create=function(e){var t=e.equipments,i=e.slots.concat(),n=t.map(r.gearFactory.create);return new q(i,n)}},E=N,K=t(3428),x=function(){function e(e,r,t,i){var n=this;this.side=e,this.fleetType=r,this.fleets=t,this.landBase=i,this.getFighterPower=function(e){void 0===e&&(e=!1);var r=n,t=r.mainFleet,i=r.escortFleet;if(!t.hasUnknownSlot){if(!e||!i)return t.fighterPower;if(!i.hasUnknownSlot)return t.fighterPower+i.fighterPower}},this.getInterceptionPower=function(e){void 0===e&&(e=!1);var r=n,t=r.mainFleet,i=r.escortFleet;if(!t.hasUnknownSlot){var a=Object(d.a)(t.planes,function(e){return e.interceptionPower});if(!e||!i)return a;if(!i.hasUnknownSlot)return a+Object(d.a)(i.planes,function(e){return e.interceptionPower})}}}return Object.defineProperty(e.prototype,"isCombinedFleetOperation",{get:function(){return this.fleetType!==K.a.Single},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFleet",{get:function(){return this.fleets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escortFleet",{get:function(){if(this.isCombinedFleetOperation)return this.fleets[1]},enumerable:!0,configurable:!0}),e}(),z=x,H=function(){function e(e,r){this.fleetFactory=e,this.landBasedAirCorpsFactory=r}return e.prototype.create=function(e){var r=e.side,t=e.fleetType,i=e.fleets,n=e.landBase,a=i.map(this.fleetFactory.create),o=n.map(this.landBasedAirCorpsFactory.create);return new z(r,t,a,o)},e}(),_=H,V=t(3479),J=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.map(function(e){return V.a[e]}).includes(r.shipClassId)}},W=J("AirfieldPrincess","NorthernPrincess","HarbourPrincess","SupplyDepotPrincess","SupplyDepotSummerPrincess"),U=J("ArtilleryImp"),$=J("IsolatedIslandDemon","IsolatedIslandPrincess"),Y=J("SupplyDepotPrincess","SupplyDepotSummerPrincess"),Z={Installation:function(e){return 0===e.speed},SoftSkinned:W,Pillbox:U,SupplyDepot:Y,IsolatedIsland:$},Q=Object.keys(Z),X={from:function(e){return Q.filter(function(r){return Z[r](e)})}},ee=function(e){var r=e.countGear(104);if(0!==r){var t=new v,i=e.masterId;return 151===i?t.add({multiplier:r,firepower:2,antiAir:1,evasion:2}):149===i?t.add({multiplier:r,firepower:2}):591!==i&&152!==i||t.add({multiplier:r,firepower:1}),t}},re=function(e){var r=e.countGear(15);if(0!==r){var t=new v,i=e.shipClass,n=e.name,a=Object(m.f)(n);return i.is("KagerouClass")&&a&&t.add({multiplier:r,torpedo:2}),t}},te=function(e){var r=e.countGear(174);if(0!==r){var t=new v,i=e.shipClass;return i.is("KamikazeClass")&&t.add({multiplier:r,torpedo:1,evasion:2}),i.is("KongouClass")&&t.add({multiplier:r,torpedo:6,evasion:3}),t}},ie=function(e){var r=e.countGear(179);if(0!==r){var t=new v;return e.shipClass.is("AkizukiClass")&&t.add({multiplier:r,torpedo:1}),t}},ne=function(e){var r=e.countGear(function(e){return 229===e.masterId&&e.improvement.value>=7});if(0!==r){var t=new v,i=e.name,n=e.shipClass.name,a="神風型"===n,o="睦月型"===n,s="海防艦"===e.shipType.name;return a||o||s?t.add({multiplier:r,firepower:1,antiAir:1}):"由良改二"===i?t.add({multiplier:r,firepower:2,antiAir:3}):"鬼怒改二"===i&&t.add({multiplier:r,firepower:2,antiAir:2}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&(a||o?t.add({firepower:2,evasion:3}):s?t.add({firepower:1,evasion:4}):"由良改二"!==i&&"鬼怒改二"!==i||t.add({firepower:3,evasion:2})),t}},ae=function(e){var r=e.countGear(266);if(0!==r){var t=new v,i=e.name,n=e.shipClass,a=n.is("ShiratsuyuClass"),o=n.is("AsashioClass"),s=n.is("KagerouClass");return s&&Object(m.f)(i)?1===r?t.add({firepower:2}):2===r?t.add({firepower:5}):3===r&&t.add({firepower:6}):"雪風改"===i||"磯風乙改"===i||"時雨改二"===i?t.add({multiplier:r,firepower:1,evasion:1}):(a||o||s)&&t.add({multiplier:r,firepower:1}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&(a||o?t.add({firepower:1,torpedo:3,evasion:1}):s&&t.add({firepower:2,torpedo:3,evasion:1})),t}},oe=function(e){var r=e.countGear(267);if(0!==r){var t=new v,i=e.name,n=e.shipClass.name,a="陽炎型"===n,o="夕雲型"===n,s="島風型"===n,u=Object(m.f)(i);return o&&u?t.add({multiplier:r,firepower:3,evasion:1}):o||s?t.add({multiplier:r,firepower:2,evasion:1}):a&&u?1===r?t.add({firepower:2,evasion:1}):2===r?t.add({firepower:3,evasion:2}):3===r&&t.add({firepower:4,evasion:3}):a&&t.add({multiplier:r,firepower:1,evasion:1}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&(o&&u?t.add({firepower:3,torpedo:4,evasion:3}):o?t.add({firepower:2,torpedo:3,evasion:1}):"島風改"===i&&t.add({firepower:1,torpedo:3,evasion:2})),t}},se=function(e){var r=e.gears.filter(m.b).filter(function(e){return 285===e.masterId}),t=r.length,i=r.filter(function(e){return e.improvement.value>=10}).length;if(0!==t){var n=new v,a=e.shipClass,o=Object(m.f)(e.name),s=a.isSpecialTypeDestroyer&&o,u=a.is("HatsuharuClass")&&o;return(s||u)&&(n.add({multiplier:Math.min(t,2),torpedo:2,evasion:1}),n.add({multiplier:Math.min(i,2),firepower:1})),n}},ue=function(e){var r=e.countGear(289);if(0!==r){var t=new v,i=e.name;return"金剛改二"===i?t.add({multiplier:r,firepower:2,antiAir:1}):"榛名改二"===i?t.add({multiplier:r,firepower:2,antiAir:2,evasion:2}):"比叡改二"!==i&&"霧島改二"!==i||t.add({multiplier:r,firepower:1}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&("金剛改二"!==i&&"榛名改二"!==i||t.add({firepower:2,evasion:2})),t}},ce=function(e){var r=e.countGear(293);if(0!==r){var t=new v,i=e.shipClass.name,n="占守型"===i,a="択捉型"===i,o="神風型"===i,s="睦月型"===i;o||s?t.add({multiplier:r,firepower:2,antiAir:1,evasion:3}):(n||a)&&t.add({multiplier:r,firepower:1,antiAir:1,evasion:2}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&(o||s?t.add({firepower:2,torpedo:1,evasion:3}):(n||a)&&t.add({firepower:2,evasion:3,asw:1}));var u=e.countGear(174);return 1===u?t.add({firepower:2,torpedo:4}):2===u&&t.add({firepower:3,torpedo:7}),t}},le=function(e){var r=e.countGear(294);if(0!==r){var t=new v;if(e.shipClass.isSpecialTypeDestroyer){t.add({multiplier:r,firepower:1}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&t.add({firepower:3,torpedo:1,evasion:2});var i=e.countGear(285),n=e.countGear(13)+e.countGear(125)+i;n>=1&&t.add({firepower:1,torpedo:3}),n>=2&&t.add({firepower:1,torpedo:2}),i>=1&&t.add({torpedo:1})}return t}},fe=function(e){var r=e.countGear(295);if(0!==r){var t=new v;if(e.shipClass.isSpecialTypeDestroyer){t.add({multiplier:r,firepower:2,antiAir:2}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&t.add({firepower:3,torpedo:1,evasion:2}),e.hasGear(function(e){return e.is("AirRadar")})&&t.add({antiAir:6});var i=e.countGear(285),n=e.countGear(13)+e.countGear(125)+i;n>=1&&t.add({firepower:1,torpedo:3}),n>=2&&t.add({firepower:1,torpedo:2}),i>=1&&t.add({torpedo:1})}return t}},pe=function(e){var r=e.countGear(296);if(0!==r){var t=new v,i=e.name,n=e.shipClass;return n.any("AyanamiClass","AkatsukiClass")?t.add({multiplier:r,firepower:1}):n.is("HatsuharuClass")?t.add({multiplier:r,firepower:1,evasion:1}):"白露改二"===i?t.add({multiplier:r,firepower:2,evasion:2}):"時雨改二"===i?t.add({multiplier:r,firepower:2,antiAir:1,evasion:1}):"村雨改二"===i?t.add({multiplier:r,firepower:1,antiAir:1,evasion:2}):"夕立改二"===i?t.add({multiplier:r,firepower:2,antiAir:1,evasion:1}):["江風改二","白露改二"].includes(i)?t.add({multiplier:r,firepower:2,evasion:2}):n.is("ShiratsuyuClass")&&t.add({multiplier:r,firepower:1}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&(n.any("AyanamiClass","AkatsukiClass","HatsuharuClass")?t.add({firepower:1,torpedo:2,evasion:2}):n.is("ShiratsuyuClass")&&t.add({firepower:1,torpedo:3,evasion:2})),e.hasGear(function(e){return e.is("AirRadar")})&&(n.any("AyanamiClass","AkatsukiClass","HatsuharuClass")?t.add({antiAir:5}):n.is("ShiratsuyuClass")&&t.add({antiAir:6})),e.hasGear(285)&&n.any("AyanamiClass","AkatsukiClass","HatsuharuClass")&&t.add({firepower:1,torpedo:3}),e.hasGear(286)&&n.is("ShiratsuyuClass")&&t.add({firepower:1,torpedo:3}),t}},de=function(e){var r=e.countGear(297);if(0!==r){var t=new v,i=e.shipClass.name,n="綾波型"===i,a="暁型"===i;return"吹雪型"===i?t.add({multiplier:r,evasion:2}):(n||a)&&t.add({multiplier:r,evasion:1}),t}},he=function(e){var r=e.countGear(301);if(0!==r&&e.shipClass.isRoyalNavy)return new v({multiplier:r,antiAir:2,evasion:1,armor:1})},me=function(e){var r=e.countGear(304);if(0!==r){var t=new v,i=e.shipClass;return i.is("KumaClass")||i.is("NagaraClass")||i.is("SendaiClass")||i.is("AganoClass")?t.add({multiplier:r,firepower:1,evasion:1,asw:1}):i.is("GotlandClass")&&t.add({multiplier:r,firepower:1,evasion:2,asw:2}),t}},be=t(3481),ge=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),n=0;for(r=0;r<t;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,n++)i[n]=a[o];return i}([function(e){var r=e.countGear(313);if(0!==r){var t=new v,i=e.shipClass,n=e.shipType;return i.isUsNavy&&n.is("Destroyer")&&t.add({multiplier:r,firepower:2,antiAir:2,evasion:1,armor:1}),t}},function(e){var r=e.countGear(308);if(0!==r){var t=new v,i=e.shipClass;if(e.shipType.is("Destroyer"))return i.isUsNavy?t.add({multiplier:r,firepower:2,antiAir:1,evasion:1}):t.add({multiplier:r,firepower:1}),t}},function(e){var r=e.countGear(282);if(0!==r){var t=new v,i=e.name.includes("Ташкент"),n=e.name.includes("Верный"),a=e.name.includes("夕張");return(i||n||a)&&t.add({multiplier:r,firepower:2,armor:1}),t}}],[function(e){var r=e.countGear(119);if(0!==r){var t=new v,i=e.shipClass;return i.any("KatoriClass","YuubariClass")&&t.add({multiplier:r,firepower:1}),i.is("NisshinClass")&&t.add({multiplier:r,firepower:2,torpedo:1}),t}},function(e){var r=e.countGear(310);if(0!==r){var t=new v,i=e.shipClass;return i.is("YuubariClass")&&t.add({multiplier:r,firepower:2,antiAir:1,evasion:1}),i.is("KatoriClass")&&t.add({multiplier:r,firepower:2,evasion:1}),i.is("NisshinClass")&&t.add({multiplier:r,firepower:3,torpedo:2,antiAir:1,evasion:1}),t}},function(e){var r=e.countGear(90);if(0!==r){var t=new v,i=e.shipClass,n=e.name.includes("青葉");return[416,417,295].includes(e.masterId)&&t.add({multiplier:r,firepower:1}),264===e.masterId&&t.add({multiplier:r,firepower:1,antiAir:1}),142===e.masterId&&t.add({multiplier:r,firepower:2,evasion:1}),e.hasGear(function(e){return e.is("SurfaceRadar")})&&(i.is("FurutakaClass")||i.is("AobaClass"))&&t.add({firepower:3,torpedo:2,evasion:2}),e.hasGear(function(e){return e.is("AirRadar")})&&n&&t.add({antiAir:5,evasion:2}),t}},function(e){var r=e.countGear(303);if(0!==r){var t=new v,i=e.shipClass;return i.any("KumaClass","NagaraClass","SendaiClass","AganoClass")?t.add({multiplier:r,firepower:1,antiAir:1}):i.is("GotlandClass")&&t.add({multiplier:r,firepower:1,antiAir:2,evasion:1}),t}},function(e){var r=e.countGear(340);if(0!==r){var t=new v;return e.shipClass.is("DucaDegliAbruzziClass")&&t.add({multiplier:r,firepower:1,antiAir:1,evasion:1}),t}},function(e){var r=e.countGear(341);if(0!==r){var t=new v,i=e.shipClass;return i.is("DucaDegliAbruzziClass")&&t.add({multiplier:r,firepower:2,antiAir:1,evasion:1}),i.is("GotlandClass")&&t.add({multiplier:r,firepower:1,antiAir:1,evasion:1}),t}}],[function(e){var r=e.countGear(318);if(0!==r){var t=new v,i=e.shipClass,n=Object(m.f)(e.name),a=i.is("NagatoClass")&&n,o=e.shipType.is("AviationBattleship")&&i.is("IseClass");return a&&t.add({multiplier:r,firepower:3,antiAir:2,evasion:1}),o&&t.add({multiplier:r,firepower:2,antiAir:2,evasion:2}),"日向改二"===e.name&&t.add({multiplier:r,firepower:1}),e.shipClass.is("FusouClass")&&n&&t.add({multiplier:r,firepower:1}),e.hasGear(290)&&(a&&t.add({firepower:2,evasion:2,armor:1}),o&&t.add({evasion:2,armor:1}),"日向改二"===e.name&&t.add({firepower:1})),e.hasGear(function(e){return e.is("AirRadar")})&&o&&t.add({antiAir:2,evasion:3}),t}},function(e){var r=e.countGear(290);if(0!==r){var t=new v,i=e.shipClass,n=Object(m.f)(e.name);return i.is("FusouClass")&&n&&t.add({multiplier:r,firepower:1}),i.is("IseClass")&&Object(m.e)(e.name)&&t.add({multiplier:r,firepower:2,antiAir:2,evasion:1}),"伊勢改二"===e.name&&t.add({multiplier:r,firepower:3,antiAir:2,evasion:1}),"日向改二"===e.name&&t.add({multiplier:r,firepower:3,antiAir:2,evasion:2}),e.hasGear(function(e){return e.is("AirRadar")})&&i.is("IseClass")&&n&&t.add({antiAir:2,evasion:3}),t}},function(e){var r=e.countGear(328);if(0!==r){var t=e.shipClass,i=new v;return t.is("KongouClass")&&("金剛改二丙"===e.name?i.add({multiplier:r,firepower:3,torpedo:1,evasion:1}):Object(m.f)(e.name)||Object(m.e)(e.name)?i.add({multiplier:r,firepower:2,evasion:1}):i.add({multiplier:r,firepower:1})),t.any("FusouClass","IseClass")&&i.add({multiplier:r,firepower:1}),i}},function(e){var r=e.countGear(329);if(0!==r){var t=e.shipClass,i=new v;return t.is("KongouClass")&&("金剛改二丙"===e.name?i.add({multiplier:r,firepower:4,torpedo:2,antiAir:1,evasion:1}):Object(m.f)(e.name)?i.add({multiplier:r,firepower:3,antiAir:1,evasion:1}):Object(m.e)(e.name)?i.add({multiplier:r,firepower:2,evasion:1}):i.add({multiplier:r,firepower:1})),t.any("FusouClass","IseClass")&&i.add({multiplier:r,firepower:1}),i}},function(e){var r=e.countGear(330);if(0!==r){var t=new v;return/^(Nelson改|長門改二|陸奥改二)$/.test(e.name)&&t.add({multiplier:r,firepower:2}),(/^(長門改?|陸奥改?)$/.test(e.name)||e.shipClass.is("ColoradoClass"))&&t.add({multiplier:r,firepower:1}),t}},function(e){var r=e.countGear(331);if(0!==r){var t=new v;return"Colorado改"===e.name&&t.add({multiplier:r,firepower:2,evasion:1}),/^(Nelson改|長門改二|陸奥改二)$/.test(e.name)&&t.add({multiplier:r,firepower:2}),/^(長門改?|陸奥改?|Colorado)$/.test(e.name)&&t.add({multiplier:r,firepower:1}),t}},function(e){var r=e.countGear(332);if(0!==r){var t=new v;return"Colorado改"===e.name?t.add({multiplier:r,firepower:2,evasion:1,antiAir:1}):/^(Nelson改|長門改二|陸奥改二)$/.test(e.name)?t.add({multiplier:r,firepower:2}):e.shipClass.any("NagatoClass","ColoradoClass")&&t.add({multiplier:r,firepower:1}),t}}],[function(e){var r=e.countGear(316);if(0!==r){var t=new v;return e.shipClass.is("AquilaClass")&&t.add({multiplier:r,firepower:4,antiAir:1,evasion:1}),t}},function(e){var r=e.countGear(184);if(0!==r){var t=new v;return e.shipClass.is("AquilaClass")&&t.add({multiplier:r,firepower:1,antiAir:2,evasion:3}),t}},function(e){var r=e.countGear(189);if(0!==r){var t=new v;return e.shipClass.any("AquilaClass","GrafZeppelinClass")&&t.add({multiplier:r,antiAir:1,evasion:2}),t}},function(e){var r=e.countGear(188);if(0!==r){var t=new v;return e.shipClass.is("AquilaClass")&&t.add({multiplier:r,firepower:3,antiAir:1,evasion:1}),t}},function(e){if(0!==e.countGear(335)){var r=new v;return["赤城改","加賀改"].includes(e.name)&&r.add({antiAir:1,evasion:1}),["赤城改二","赤城改二戊"].includes(e.name)&&r.add({antiAir:2,evasion:1}),r}},function(e){if(0!==e.countGear(336)){var r=new v;return["赤城改","加賀改"].includes(e.name)&&r.add({firepower:1,antiAir:1,evasion:1}),["赤城改二","赤城改二戊"].includes(e.name)&&r.add({firepower:1,antiAir:2,evasion:1}),r}},function(e){if(0!==e.countGear(338)){var r=new v;return["赤城改","加賀改"].includes(e.name)&&r.add({firepower:1,antiAir:1,evasion:2}),"赤城改二"===e.name&&r.add({firepower:1,antiAir:2,evasion:3}),"赤城改二戊"===e.name&&r.add({firepower:4,antiAir:3,evasion:4}),r}},function(e){if(0!==e.countGear(339)){var r=new v;return["赤城改","加賀改"].includes(e.name)&&r.add({firepower:1,antiAir:2,evasion:2}),"赤城改二"===e.name&&r.add({firepower:1,antiAir:3,evasion:4}),"赤城改二戊"===e.name&&r.add({firepower:6,antiAir:4,evasion:5}),r}}],[function(e){var r=e.countGear(18);if(0!==r){var t=new v;return["赤城改","加賀改","大鳳改"].includes(e.name)&&t.add({multiplier:r,firepower:1}),"赤城改二"===e.name&&t.add({multiplier:r,firepower:1,evasion:1}),"赤城改二戊"===e.name&&t.add({multiplier:r,firepower:2,evasion:1}),t}},function(e){var r=e.countGear(52);if(0!==r){var t=new v;return["赤城改","加賀改","大鳳改"].includes(e.name)&&t.add({multiplier:r,firepower:1}),"赤城改二"===e.name&&t.add({multiplier:r,firepower:1,evasion:1}),"赤城改二戊"===e.name&&t.add({multiplier:r,firepower:2,evasion:1}),t}},function(e){if(0!==e.countGear(93)){var r=new v;return e.name.startsWith("飛龍")&&r.add({firepower:3}),e.name.startsWith("蒼龍")&&r.add({firepower:1}),r}},function(e){if(0!==e.countGear(94)){var r=new v;return"飛龍改二"===e.name&&r.add({firepower:7}),"蒼龍改二"===e.name&&r.add({firepower:3}),r}},function(e){if(0!==e.countGear(143)){var r=new v;return e.name.startsWith("赤城改")&&r.add({firepower:3}),("加賀改"===e.name||e.name.startsWith("翔鶴"))&&r.add({firepower:2}),(e.name.startsWith("瑞鶴")||"龍驤改二"===e.name)&&r.add({firepower:1}),r}},function(e){if(0!==e.countGear(144)){var r=new v;return e.name.startsWith("赤城改")&&r.add({firepower:3}),/^翔鶴改二甲?/.test(e.name)&&r.add({firepower:4}),/^(瑞鶴改二甲?|翔鶴改?|加賀改)$/.test(e.name)&&r.add({firepower:2}),/^(瑞鶴改?|龍驤改二)$/.test(e.name)&&r.add({firepower:1}),r}},function(e){var r=e.countGear(342);if(0!==r){var t=new v;return(["赤城改","加賀改","大鳳改"].includes(e.name)||/^(瑞鶴改二|翔鶴改二)甲?$/.test(e.name))&&t.add({multiplier:r,firepower:1}),"赤城改二"===e.name&&t.add({multiplier:r,firepower:2,antiAir:1,evasion:1}),"赤城改二戊"===e.name&&t.add({multiplier:r,firepower:3,antiAir:2,evasion:2}),t}},function(e){var r=e.countGear(343);if(0!==r){var t=new v;return/^(瑞鶴改二|翔鶴改二)甲?$/.test(e.name)&&t.add({multiplier:r,firepower:1}),["赤城改","加賀改"].includes(e.name)&&t.add({multiplier:r,firepower:2}),"赤城改二"===e.name&&t.add({multiplier:r,firepower:3,antiAir:2,evasion:1}),"赤城改二戊"===e.name&&t.add({multiplier:r,firepower:5,antiAir:3,evasion:3}),t}},function(e){var r=e.countGear(344);if(0!==r){var t=new v;return"赤城改二戊"===e.name&&t.add({multiplier:r,firepower:3}),"龍鳳改"===e.name&&t.add({multiplier:r,firepower:4,asw:1}),/^瑞鳳改二乙?$/.test(e.name)&&t.add({multiplier:r,firepower:2,asw:2}),"祥鳳改"===e.name&&t.add({multiplier:r,firepower:2,asw:1}),t}},function(e){var r=e.countGear(345);if(0!==r){var t=new v;return"赤城改二戊"===e.name&&t.add({multiplier:r,firepower:3,evasion:1}),"龍鳳改"===e.name&&t.add({multiplier:r,firepower:5,asw:1,evasion:2}),/^瑞鳳改二乙?$/.test(e.name)&&t.add({multiplier:r,firepower:3,asw:2,evasion:2}),"祥鳳改"===e.name&&t.add({multiplier:r,firepower:3,asw:1,evasion:1}),t}}],[function(e){var r=Object(m.f)(e.name);if(e.shipClass.is("IseClass")&&r){var t=e.countGear(291),i=e.countGear(292),n=e.countGear(24)+e.countGear(57)+e.countGear(111),a=new v;return t&&a.add({multiplier:t,firepower:6,evasion:1}),i&&a.add({multiplier:i,firepower:8,evasion:2}),n&&a.add({multiplier:n,firepower:2}),a}},function(e){if(0!==e.countGear(99)){var r=new v;return e.name.startsWith("飛龍")&&r.add({firepower:1}),e.name.startsWith("蒼龍")&&r.add({firepower:4}),r}},function(e){if(0!==e.countGear(100)){var r=new v;return"飛龍改二"===e.name&&r.add({firepower:3}),"蒼龍改二"===e.name&&r.add({firepower:6}),"伊勢改二"===e.name&&r.add({firepower:4}),r}},function(e){var r=e.countGear(319);if(0!==r){var t=Object(m.f)(e.name),i=e.shipClass.is("IseClass")&&t;if(i){var n=new v;return i&&n.add({multiplier:r,firepower:7,antiAir:3,evasion:2}),n}}},function(e){if(0!==e.countGear(320)){var r=new v;return/^(蒼龍改二|飛龍改二)$/.test(e.name)&&r.add({firepower:3}),/^(鈴谷航改二|熊野航改二|日向改二)$/.test(e.name)&&r.add({firepower:4}),"伊勢改二"===e.name&&r.add({firepower:2}),r}},function(e){var r=e.countGear(305)+e.countGear(306);if(0!==r){var t=new v,i=e.shipClass,n=[534,381,536].includes(e.masterId);return i.any("GrafZeppelinClass","AquilaClass")?t.add({multiplier:r,firepower:1,evasion:1}):n?t.add({multiplier:r,asw:3,evasion:2}):i.is("TaiyouClass")&&t.add({multiplier:r,asw:1,evasion:1}),t}}],A,[function(e){var r=e.countGear(307);if(0!==r){var t=new v;return e.shipClass.isUsNavy&&t.add({multiplier:r,firepower:1,antiAir:1,evasion:1}),t}},function(e){var r=e.countGear(315);if(0!==r){var t=new v,i=e.shipClass;return i.any("JohnCButlerClass","FletcherClass")?(t.add({multiplier:r,firepower:3,evasion:3,los:4}),t.add({range:1})):i.isUsNavy&&t.add({multiplier:r,firepower:2,evasion:3,los:4}),t}},function(e){var r=e.countGear(106);if(0!==r){var t=new v,i=function(r){return["","改","乙改","改二","改二乙","改ニ丁"].map(function(e){return r+e}).includes(e.name)};return["潮","時雨","初霜"].some(i)||["榛名改二","長門改二"].includes(e.name)?t.add({multiplier:r,firepower:1,antiAir:2,evasion:3,armor:1}):["矢矧","霞","雪風","磯風","磯風","浜風","朝霜","涼月"].some(i)?t.add({multiplier:r,antiAir:2,evasion:2,armor:1}):(["大淀","響","鹿島"].some(i)||147===e.masterId)&&t.add({multiplier:r,antiAir:1,evasion:3,armor:1}),t}}],[function(e){if(0!==e.countGear(35)){var r=new v;return"金剛改二"===e.name||"金剛改二丙"===e.name?r.add({firepower:1,antiAir:1}):"比叡改二"===e.name?r.add({antiAir:1}):"榛名改二"===e.name?r.add({antiAir:1,evasion:1}):"霧島改二"===e.name&&r.add({firepower:1}),r}},function(e){if(0!==e.countGear(317)){var r=new v;return"金剛改二"===e.name||"金剛改二丙"===e.name?r.add({firepower:3,antiAir:3}):"比叡改二"===e.name?r.add({firepower:2,antiAir:2}):"榛名改二"===e.name||"陸奥改二"===e.name?r.add({firepower:2,antiAir:2,evasion:1}):"霧島改二"===e.name?r.add({firepower:3,antiAir:2}):"長門改二"===e.name?r.add({firepower:1,antiAir:2}):e.shipClass.is("KongouClass")&&r.add({firepower:1,antiAir:1}),r}}],[function(e){if(e.hasGear(268)&&["多摩改","多摩改二","木曾改","木曾改二"].includes(e.name))return new v({evasion:7,armor:2})}],[function(e){if(0!==e.countGear(74)){var r=new v,t=e.name,i=t.includes("比叡"),n=t.includes("霧島"),a=t.includes("鳥海"),o=t.includes("神通"),s=t.includes("暁"),u=t.includes("秋雲"),c=t.includes("雪風");return o?r.add({firepower:2,torpedo:2,evasion:-1}):i||n||a||s?r.add({firepower:2,evasion:-1}):u?r.add({firepower:1}):c&&r.add({antiAir:1}),r}},function(e){if(0!==e.countGear(140)){var r=new v,t=e.name,i=t.includes("比叡"),n=t.includes("霧島");return(i||n)&&r.add({firepower:3,evasion:-2}),r}}],[function(e){var r=e.gears.filter(m.b).filter(function(e){return 286===e.masterId}),t=r.length,i=r.filter(function(e){return e.improvement.value>=5}).length,n=r.filter(function(e){return e.improvement.value>=10}).length;if(0!==t){var a=new v,o=e.shipClass;if(Object(m.f)(e.name))return o.any("ShiratsuyuClass","AsashioClass","KagerouClass","YuugumoClass")&&(a.add({multiplier:Math.min(t,2),torpedo:2,evasion:1}),a.add({multiplier:Math.min(n,2),firepower:1}),o.is("KagerouClass")&&a.add({multiplier:Math.min(i,2),torpedo:1})),a}},function(e){var r=e.countGear(283);if(0!==r){var t=new v,i=e.name.includes("Ташкент"),n=e.name.includes("Верный");return(i||n)&&t.add({multiplier:r,firepower:1,torpedo:3,armor:1}),t}},function(e){var r=e.countGear(314);if(0!==r){var t=new v,i=e.shipClass,n=e.shipType;return i.isUsNavy&&n.is("Destroyer")&&t.add({multiplier:r,firepower:1,torpedo:3}),t}}],[function(e){var r=e.countGear(47);if(0!==r){var t=new v,i=function(r){return["","改","乙改","改二","改二乙","改ニ丁"].map(function(e){return r+e}).includes(e.name)};return["神風","春風","時雨","山風","舞風","朝霜"].some(i)?t.add({multiplier:r,firepower:1,evasion:2,asw:3}):["潮","雷","山雲","磯風","浜風","岸波"].some(i)&&t.add({multiplier:r,evasion:2,asw:2}),t}}],[function(e){var r=e.countGear(79)+e.countGear(81);if(0!==r){var t=new v,i=Object(m.f)(e.name),n=e.shipClass,a=n.is("IseClass"),o=n.is("FusouClass")&&i;return a&&i?t.add({multiplier:r,firepower:3}):(a||o)&&t.add({multiplier:r,firepower:2}),t}},function(e){var r=e.countGear(237);if(0!==r){var t=new v,i=Object(m.f)(e.name),n=e.shipClass,a=n.is("IseClass"),o=n.is("FusouClass")&&i;return a&&i?t.add({multiplier:r,firepower:4,evasion:2}):a?t.add({multiplier:r,firepower:3,evasion:1}):o&&t.add({multiplier:r,firepower:2}),t}},function(e){var r=e.countGear(322);if(0!==r){var t=new v;return e.shipClass.is("IseClass")&&Object(m.f)(e.name)&&t.add({multiplier:r,firepower:5,antiAir:2,asw:1,evasion:2}),t}},function(e){var r=e.countGear(323);if(0!==r){var t=new v;return e.shipClass.is("IseClass")&&Object(m.f)(e.name)&&t.add({multiplier:r,firepower:6,antiAir:3,asw:2,evasion:3}),t}},M],[function(e){var r=e.countGear(326);if(0!==r){var t=new v;return"伊勢改二"===e.name&&t.add({multiplier:r,firepower:2,asw:1,evasion:2}),"日向改二"===e.name&&t.add({multiplier:r,firepower:3,asw:2,evasion:3}),t}},function(e){var r=e.countGear(327);if(0!==r){var t=new v;return"伊勢改二"===e.name&&t.add({multiplier:r,firepower:1,asw:3,evasion:1}),"日向改二"===e.name&&t.add({multiplier:r,firepower:2,asw:4,evasion:2}),t}},function(e){var r=e.countGear(324)+e.countGear(325);if(0!==r){var t=new v;return"伊勢改二"===e.name&&t.add({multiplier:r,antiAir:1,evasion:1}),"日向改二"===e.name&&t.add({multiplier:r,antiAir:2,evasion:1}),t}}],[ee,re,te,ie,ne,ae,oe,se,ue,ce,le,fe,pe,de,he,me,function(e){if(e.hasGear(33)){var r=be.a.getSpeedGroup(e),t=e.countGear(34),i=e.countGear(87),n=be.a.getSpeedIncrement(r,t,i);return n>0?new v({speed:n}):[561,681].includes(e.masterId)?new v({speed:5}):void 0}},function(e){var r=e.countGear(58);if(0!==r){var t=new v,i=e.shipClass;return(e.shipType.is("TorpedoCruiser")||i.is("ShimakazeClass")||i.is("AkizukiClass"))&&t.add({multiplier:r,torpedo:1}),t}},function(e){var r=e.countGear(63);if(0!==r){var t=new v,i=e.name,n=e.shipClass.name;return"綾波型"===n||"暁型"===n||"初春型"===n?t.add({multiplier:r,antiAir:1}):["白露改","白露改二","村雨改二"].includes(i)?t.add({multiplier:r,evasion:1}):"時雨改二"===i?t.add({multiplier:r,firepower:1}):"夕立改二"===i?t.add({multiplier:r,firepower:1,torpedo:1,antiAir:1,evasion:2}):["江風改二","海風改二"].includes(i)&&t.add({multiplier:r,evasion:2}),t}},function(e){var r=e.countGear(67);if(0!==r){var t=new v;return e.shipType.isSubmarineClass||t.add({multiplier:r,torpedo:-5}),t}},function(e){var r=e.countGear(298)+e.countGear(299)+e.countGear(300);if(0!==r){var t=new v,i=e.shipClass;return i.is("NelsonClass")?t.add({multiplier:r,firepower:2,armor:1}):i.is("QueenElizabethClass")?t.add({multiplier:r,firepower:2,armor:1,evasion:-2}):i.is("KongouClass")&&Object(m.f)(e.name)&&t.add({multiplier:r,firepower:1,armor:1,evasion:-3}),t}},function(e){var r=e.countGear(82)+e.countGear(302);if(0!==r){var t=new v;return e.shipClass.is("TaiyouClass")&&t.add({multiplier:r,asw:1,evasion:1}),t}}]),ve=function(e){var r=new v;return ge.forEach(function(t){var i=t(e);i&&r.add(i)}),r},ye=function(){function e(e,r){var t=this;this.maxHp=e,this.currentHp=r,this.gte=function(e){var r=t.currentHp/t.maxHp;switch(e){case"Less":return r>=1;case"Shouha":return r>=.75;case"Chuuha":return r>=.5;case"Taiha":return r>=.25}return!0},this.lte=function(e){return e===t.damage||!t.gte(e)}}return Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.currentHp/this.maxHp;return e<=0?"Sunk":e<=.25?"Taiha":e<=.5?"Chuuha":e<=.75?"Shouha":"Less"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingPowerModifier",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.7;case"Taiha":return.4}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedoPowerModifire",{get:function(){switch(this.damage){case"Less":case"Shouha":return 1;case"Chuuha":return.8}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightAttackPowerModifire",{get:function(){return this.lte("Taiha")?0:this.shellingPowerModifier},enumerable:!0,configurable:!0}),e}(),we=function(){function e(e){void 0===e&&(e=49),this.value=e}return Object.defineProperty(e.prototype,"state",{get:function(){var e=this.value;return e>=50?"Sparkling":e>=30?"Normal":e>=20?"Orange":"Red"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shellingAccuracyModifier",{get:function(){switch(this.state){case"Sparkling":return 1.2;case"Normal":return 1;case"Orange":return.8;case"Red":return.5}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nightBattleAccuracyModifier",{get:function(){return this.shellingAccuracyModifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasionModifier",{get:function(){switch(this.state){case"Sparkling":return.7;case"Normal":return 1;case"Orange":return 1.2;case"Red":return 1.4}},enumerable:!0,configurable:!0}),e}(),Ae=t(3480),Me=t(584),Ce=t(586),Se=t(425),Pe=t(258),Oe=function(){function e(e,r,t,i,n,a,o,s,u){var c=this;this.master=e,this.stats=r,this.nakedStats=t,this.health=i,this.morale=n,this.slots=a,this.gears=o,this.planes=s,this.is=u,this.canEquip=function(e,r){var t=c.masterId,i=c.master,n=i.equippable,a=i.isAbyssal,o=e.gearId,s=e.categoryId;if(a)return!0;if(!n.categories.includes(s))return!1;if([492,392].includes(t)&&e.is("SeaplaneBomber"))return 194===o;if(c.slots.length<=r){return Ae.a.includes(s)||n.expantionSlot.includes(o)||33===o}return!c.shipClass.is("IseClass")||!Object(m.f)(c.name)||!(r>1&&e.is("MainGun"))},this.hasGear=function(e){var r=c.nonNullableGears;return"string"==typeof e?r.some(function(r){return r.is(e)}):"number"==typeof e?r.some(function(r){return r.masterId===e}):r.some(e)},this.countGear=function(e){var r=c.nonNullableGears;return void 0===e?r.length:"string"==typeof e?r.filter(function(r){return r.is(e)}).length:"number"==typeof e?r.filter(function(r){return r.masterId===e}).length:r.filter(e).length},this.totalEquipmentStats=function(e){return Object(d.a)(c.nonNullableGears,e)},this.getDefensePower=function(){var e=c.stats.armor+c.totalEquipmentStats(function(e){return e.improvement.defensePowerModifier}),r=.7*Math.max(e,1),t=r+.6*Math.floor(e-1);return{min:r,max:t,values:function(){return Object(Me.a)(Math.floor(e)).map(function(e){return r+.6*e})},random:function(){return r+.6*Object(Ce.a)(Math.floor(e-1))}}},this.calcCruiserFitBonus=function(){var e=c,r=e.shipType,t=e.shipClass,i=e.countGear,n=r.any("LightCruiser","TorpedoCruiser","TrainingCruiser"),a=t.is("ZaraClass"),o=i(function(e){return[4,11].includes(e.masterId)}),s=i(function(e){return[65,119,139].includes(e.masterId)});return Object(Se.a)({isLightCruiserClass:n,singleGunCount:o,twinGunCount:s,isZaraClass:a,zaraGunCount:Math.sqrt(i(162))})},this.getRemainingPlanes=function(){return c.planes.filter(m.b)},this.getNormalProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0},r=c.getRemainingPlanes().filter(function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("LargeFlyingBoat")});e.power=1+Object(d.a)(r,function(e){return 0===e.index?e.gear.proficiency.criticalPowerModifier/100:e.gear.proficiency.criticalPowerModifier/200});var t=Object(d.a)(r,function(e){return e.gear.proficiency.internal})/r.length,i=0,n=0;return t>=10&&(i=Math.floor(Math.sqrt(.1*t))),t>=25&&(n=1),t>=40&&(n=2),t>=55&&(n=3),t>=70&&(n=4),t>=80&&(n=6),t>=100&&(n=9),e.hitRate=i+n,e.criticalRate=Object(d.a)(r,function(e){var r=e.gear.proficiency,t=r.internal,i=0;return 7===r.level&&(i=3),(Math.sqrt(Math.sqrt(.1*t))+i)/100}),e},this.getSpecialProficiencyModifiers=function(){var e={power:1,hitRate:0,criticalRate:0};return c.getRemainingPlanes().filter(function(e){return e.participatesInCarrierShelling&&120===e.gear.proficiency.internal}).some(function(e){return 0===e.index})?e.power=1.25:e.power=1.106,e},this.getAntiInstallationStatus=function(){return new Pe.a(c)},this.getShellingStats=function(){var e=c.stats,r=e.firepower,t=e.torpedo,i=e.luck,n=c.totalEquipmentStats("bombing"),a={power:c.totalEquipmentStats(function(e){return e.improvement.shellingPowerModifier}),accuracy:c.totalEquipmentStats(function(e){return e.improvement.shellingAccuracyModifier})},o=Object(Se.b)({hasMainGun:c.hasGear("MainGun"),hasArmorPiercingShell:c.hasGear("ArmorPiercingShell"),hasSecondaryGun:c.hasGear("SecondaryGun"),hasRader:c.hasGear("Radar")}),s=c.getNormalProficiencyModifiers(),u=c.getSpecialProficiencyModifiers();return{shellingType:c.getShellingType(),firepower:r,torpedo:t,bombing:n,cruiserFitBonus:c.calcCruiserFitBonus(),healthModifier:c.health.shellingPowerModifier,accuracy:c.totalEquipmentStats("accuracy"),level:c.level,luck:i,moraleModifier:c.morale.shellingAccuracyModifier,improvementModifiers:a,apShellModifiers:o,fitGunAccuracyBonus:0,normalProficiencyModifiers:s,specialProficiencyModifiers:u}},this.slotCapacities=e.slotCapacities.concat()}return Object.defineProperty(e.prototype,"shipId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClassId",{get:function(){return this.master.shipClassId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipTypeId",{get:function(){return this.master.shipType.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipments",{get:function(){return this.gears},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterId",{get:function(){return this.master.shipId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.master.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipClass",{get:function(){return this.master.shipClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shipType",{get:function(){return this.master.shipType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.nakedStats.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPower",{get:function(){return Object(d.a)(this.planes.filter(function(e){var r=e.gear;return r.is("Fighter")||r.is("TorpedoBomber")||r.is("DiveBomber")}),"fighterPower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstallation",{get:function(){return 0===this.nakedStats.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"installationType",{get:function(){var e=this.isInstallation,r=this.name;return e?r.includes("砲台")?"Pillbox":r.includes("離島")||r.includes("中枢")?"IsolatedIsland":r.includes("集積")?"SupplyDepot":"SoftSkinned":"None"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonNullableGears",{get:function(){return this.gears.filter(m.b)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canNightAttack",{get:function(){var e=this.shipClass,r=(this.shipType,this.health),t=this.master;return!r.lte("Taiha")&&(e.is("ArkRoyalClass")?"Chuuha"!==r.damage&&this.planes.some(function(e){return e.isSwordfish}):t.firepower[0]>0)},enumerable:!0,configurable:!0}),e.prototype.getShellingType=function(){var e=this.shipType,r=this.shipClass,t=this.isInstallation,i=this.hasGear;return e.isAircraftCarrierClass?"CarrierShelling":(r.is("RevisedKazahayaClass")||t)&&(i("DiveBomber")||i("TorpedoBomber"))?"CarrierShelling":"Shelling"},e}(),je=function(){function e(e,r,t){this.nakedStats=e,this.gears=r,this.statsBonus=t}return e.prototype.getStat=function(e){var r=this.nakedStats,t=this.gears,i=this.statsBonus,n=0;return void 0!==i&&(n=i[e]),r[e]+Object(d.a)(t.filter(m.b),e)+n},Object.defineProperty(e.prototype,"hp",{get:function(){return this.nakedStats.hp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firepower",{get:function(){return this.getStat("firepower")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torpedo",{get:function(){return this.getStat("torpedo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAir",{get:function(){return this.getStat("antiAir")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"armor",{get:function(){return this.getStat("armor")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"los",{get:function(){return this.getStat("los")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asw",{get:function(){return this.getStat("asw")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"evasion",{get:function(){return this.getStat("evasion")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luck",{get:function(){return this.nakedStats.luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.getStat("speed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e=this.nakedStats,r=this.gears,t=this.statsBonus,i=e.range,n=Object(y.a)(r,"range"),a=n&&n.range>i?n.range:i;return void 0===t?a:a+t.range},enumerable:!0,configurable:!0}),e}(),ke=function(e,r){var t=this;this.masters=e,this.gearFactory=r,this.gearsFrom=function(e,r){return e?e.map(t.gearFactory.create):r.isAbyssal?r.initialEquipment.map(function(e){var r=e.id,i=e.improvement;return t.gearFactory.create({masterId:r,improvement:i})}):[]},this.create=function(e){if(e){var r=e.masterId,i=e.level,n=void 0===i?1:i,a=e.increased,o=e.morale,s=t.masters.find(function(e){return e.shipId===r});if(s){var u=t.gearsFrom(e.equipments,s),c=new b.a(s,n,a),l=new je(c,u),f=e.currentHp,p=void 0===f?l.hp:f,d=new ye(l.hp,p),h=new we(o),m=e.slots?e.slots.concat():s.slotCapacities.concat(),g=I(m,u),v=new Oe(s,l,c,d,h,m,u,g,X.from(s).includes);return v.stats.statsBonus=ve(v),v}}}},Fe=function(){function e(e){void 0===e&&(e=new i.a),this.masterData=e,this.gearFactory=new p(e.gears),this.shipFactory=new ke(e.ships,this.gearFactory),this.fleetFactory=new B(this.shipFactory),this.landBasedAirCorpsFactory=new E(this.gearFactory),this.operationFactory=new _(this.fleetFactory,this.landBasedAirCorpsFactory)}return Object.defineProperty(e.prototype,"createOperation",{get:function(){return this.operationFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createFleet",{get:function(){return this.fleetFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createLandBasedAirCorps",{get:function(){return this.landBasedAirCorpsFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createShip",{get:function(){return this.shipFactory.create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createGear",{get:function(){return this.gearFactory.create},enumerable:!0,configurable:!0}),e}();r.a=Fe},3428:function(e,r,t){"use strict";var i;!function(e){e.Single="Single",e.CarrierTaskForce="CarrierTaskForce",e.SurfaceTaskForce="SurfaceTaskForce",e.TransportEscort="TransportEscort",e.Combined="Combined"}(i||(i={})),r.a=i},3431:function(e,r,t){"use strict";var i;!function(e){e.NormalBattle="NormalBattle",e.NightBattle="NightBattle",e.NightToDayBattle="NightToDayBattle",e.AerialBattle="AerialBattle",e.AirDefenseBattle="AirDefenseBattle"}(i||(i={})),r.a=i},3432:function(e,r,t){"use strict";var i=function e(r,t,i){this.id=r,this.name=t,this.modifier=i,e.values.push(this)};r.a=i,i.values=[],i.Parallel=new i(1,"同航戦",1),i.HeadOn=new i(2,"反航戦",.8),i.CrossingTheTAdvantage=new i(3,"T有利",1.2),i.CrossingTheTDisadvantage=new i(4,"T不利",.6),i.random=function(e){void 0===e&&(e=!1);var r=Math.random();return r<.15?i.CrossingTheTAdvantage:r<.6?i.Parallel:r<.9?i.HeadOn:e?i.HeadOn:i.CrossingTheTDisadvantage}},3481:function(e,r,t){"use strict";var i;!function(e){e[e.FastA=0]="FastA",e[e.FastB1SlowA=1]="FastB1SlowA",e[e.FastB2SlowB=2]="FastB2SlowB",e[e.OtherC=3]="OtherC"}(i||(i={}));var n=function(){function e(r,t){var i=this;this.value=r,this.name=t,this.add=function(r){return e.fromNumber(i.value+r)}}return e.getSpeedGroup=function(r){var t=r.shipType,n=r.shipClass;if(e.fromNumber(r.nakedStats.speed)===e.Fast&&t.is("SeaplaneTender")||t.isSubmarineClass||["加賀型","夕張型","特種船丙型","工作艦","改風早型"].includes(n.name))return i.OtherC;if(["島風型","Ташкент級","大鳳型","翔鶴型","利根型","最上型"].includes(n.name))return i.FastA;if(["阿賀野型","蒼龍型","飛龍型","金剛型","大和型","Iowa級"].includes(n.name))return i.FastB1SlowA;var a=[181,316].includes(r.masterId),o=[404,406].includes(r.masterId),s=[331,429].includes(r.masterId),u=541===r.masterId;return a||o||s||u?i.FastB1SlowA:i.FastB2SlowB},e.getSpeedIncrement=function(e,r,t){var n=r+t;switch(e){case i.FastA:if(t>=1||n>=2)return 10;break;case i.FastB1SlowA:if(0===t)break;if(n>=3)return 15;if(n>=2)return 10;break;case i.FastB2SlowB:if(t>=2||n>=3)return 10}return n>=1?5:0},e}();r.a=n,n.Land=new n(0,"陸上"),n.Slow=new n(5,"低速"),n.Fast=new n(10,"高速"),n.FastPlus=new n(15,"高速+"),n.Fastest=new n(20,"最速"),n.fromNumber=function(e){var r=[n.Land,n.Slow,n.Fast,n.FastPlus,n.Fastest].find(function(r){return e<=r.value});return r||n.Fastest}},3486:function(e,r,t){"use strict";var i=t(310),n=t(144),a=t(586),o=function(){function e(r,t,i,n){this.id=r,this.name=t,this.typeFactor=i,this.modifier=n,e.all.push(this)}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCarrierSpecialAttack",{get:function(){return 7===this.api},enumerable:!0,configurable:!0}),e}();r.a=o,o.all=[],o.MainMain=new o(6,"主主",150,{power:1.5,accuracy:1.2}),o.MainApShell=new o(5,"主徹",140,{power:1.3,accuracy:1.3}),o.MainRader=new o(4,"主電",130,{power:1.2,accuracy:1.5}),o.MainSecond=new o(3,"主副",120,{power:1.1,accuracy:1.3}),o.DoubleAttack=new o(2,"連撃",130,{power:1.2,accuracy:1.1}),o.FighterBomberAttacker=new o(7.1,"FBA",125,{power:1.25,accuracy:1}),o.BomberBomberAttacker=new o(7.2,"BBA",140,{power:1.2,accuracy:1}),o.BomberAttacker=new o(7.3,"BA",155,{power:1.15,accuracy:1}),o.getPossibleAircraftCarrierCutins=function(e){var r=new Array,t=e.planes.filter(function(e){return e.slotSize>0}),i=t.filter(function(e){return e.is("CarrierBasedDiveBomber")}).length,n=t.some(function(e){return e.is("CarrierBasedTorpedoBomber")});return 0!==i&&n?(r.push(o.BomberAttacker),i>=2&&r.push(o.BomberBomberAttacker),t.some(function(e){return e.is("CarrierBasedFighterAircraft")})&&r.push(o.FighterBomberAttacker),r.sort(function(e,r){return e.typeFactor-r.typeFactor})):r},o.getPossibleArtillerySpottings=function(e){var r=new Array,t=e.planes.some(function(e){return e.slotSize>0&&e.is("ReconnaissanceSeaplane")||e.is("SeaplaneBomber")}),i=e.countGear(function(e){return e.is("MainGun")});if(!t||0===i)return r;var n=e.hasGear(function(e){return e.is("ArmorPiercingShell")}),a=e.hasGear(function(e){return e.is("SecondaryGun")}),s=e.hasGear(function(e){return e.is("Radar")});return i>=2&&(r.push(o.DoubleAttack),n&&r.push(o.MainMain)),a&&(r.push(o.MainSecond),s&&r.push(o.MainRader),n&&r.push(o.MainApShell)),r.sort(function(e,r){return r.id-e.id})},o.getPossibleAttacks=function(e){return"Taiha"===e.health.damage?[]:e.shipType.isAircraftCarrierClass?o.getPossibleAircraftCarrierCutins(e):o.getPossibleArtillerySpottings(e)},o.calcFleetLosModifier=function(e){var r=e.totalShipStats(function(e){return e.nakedStats.los})+Object(n.a)(e.planes,function(e){return e.fleetLosModifier});return Math.floor(Math.sqrt(r)+.1*r)},o.calcBaseValue=function(e,r,t,n){var a=e.stats.luck,o=Math.floor(Math.sqrt(a)+10),s=e.totalEquipmentStats("los"),u=n?15:0;return t===i.a.AirSupremacy?Math.floor(o+.7*(r+1.6*s)+10)+u:t===i.a.AirSuperiority?Math.floor(o+.6*(r+1.2*s))+u:0},o.calcRate=function(e,r,t,i){var n=o.calcBaseValue(e,r,t,i),a=new Map,s=o.getPossibleAttacks(e),u=s.reduce(function(e,r){var t=(1-e)*(n/r.typeFactor);return t>1&&(t=1),a.set(r,t),e+t},0),c=1-u,l=c<=0,f=s.concat();l||f.unshift(void 0);var p=function(e){return e?a.get(e)||0:c};return{baseValue:n,attacks:s,rateMap:a,total:u,dayCombatAttacks:f,getAttackRate:p,entries:function(){return f.map(function(e){return[e,p(e)]})}}},o.try=function(e,r,t,i){for(var n=o.calcBaseValue(e,r,t,i),s=0,u=o.getPossibleAttacks(e);s<u.length;s++){var c=u[s];if(n>Object(a.a)(c.typeFactor-1))return c}}},3500:function(e,r,t){"use strict";var i=function(){function e(r,t,i){this.id=r,this.key=t,this.name=i,e.values.push(this)}return Object.defineProperty(e.prototype,"isCombined",{get:function(){return this!==e.Single},enumerable:!0,configurable:!0}),e}();r.a=i,i.values=[],i.Single=new i(0,"Single","通常艦隊"),i.CarrierTaskForce=new i(1,"CarrierTaskForce","空母機動部隊"),i.SurfaceTaskForce=new i(2,"SurfaceTaskForce","水上打撃部隊"),i.TransportEscort=new i(3,"TransportEscort","輸送護衛部隊"),i.Combined=new i(5,"Combined","敵連合"),i.fromId=function(e){return i.values.find(function(r){return r.id===e})},i.fromString=function(e){return i.values.find(function(r){return r.key===e||r.name===e})}},3530:function(e,r,t){"use strict";var i=t(113),n=t(112),a=t(174),o=t(123),s=t(215),u=t(10),c=t(138),l=t(143),f=function(){function e(e,r,t,i,n,a){void 0===n&&(n=1),void 0===a&&(a=1),this.battleState=e,this.attacker=r,this.defender=t,this.isCritical=i,this.eventMapModifier=n,this.remainingAmmoModifier=a}return Object.defineProperty(e.prototype,"power",{get:function(){return e.getShellingSupportPower(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,r=e.ship,t=e.formation,i=e.role,n=r.level,a=r.stats,o=r.totalEquipmentStats,s=t.getModifiersWithRole(i).shelling.accuracy;l.a.combinedFleetFormations.includes(t)&&(s=1),l.a.Vanguard===t&&(s=.8);var u=r.morale.shellingAccuracyModifier,f=o("accuracy"),p=Object(c.b)({combinedFleetFactor:-26,level:n,luck:a.luck,equipmentAccuracy:f,improvementModifier:0});return{value:Object(c.a)(p,{formationModifier:s,moraleModifier:u,fitGunBonus:0,specialAttackModifier:1,apShellModifier:1})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,a=t.getModifiersWithRole(i).shelling.evasion;return Object(n.a)(r,a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,r=this.defender,t=this.defenderEvasionValue,i=r.ship.morale.evasionModifier;return Object(a.a)(e.value,t,i,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,n=r.ship.getDefensePower();return new i.a(e.value,n,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=f,f.getShellingSupportPower=function(e){var r=e.battleState,t=e.attacker,i=e.isCritical,n=e.eventMapModifier,a=void 0===n?1:n,c=t.formation,f=t.role,p=t.ship,d=new s.b(p),h=d.shellingType,m=d.firepower,b=d.torpedo,g=d.bombing,v=d.healthModifier,y=c.getModifiersWithRole(f).shelling.power;l.a.combinedFleetFormations.includes(c)&&(y=1),l.a.Vanguard===c&&(y=.5);var w=r.engagement.modifier,A=i?1.5:1,M=Object(o.a)({shellingType:h,combinedFleetFactor:-1,firepower:m,torpedo:b,bombing:g,improvementModifier:0}),C=Object(o.c)(M,{formationModifier:y,engagementModifier:w,healthModifier:v,antiInstallationModifiers:{shipTypeAdditive:0,a13:1,b13:0,a13d:1,b13d:0},cruiserFitBonus:0}),S=C>150,P=Object(u.g)(150,C);return{basicPower:M,preCap:C,isCapped:S,capped:P,value:Object(o.b)(P,{effectivenessAdditive:0,effectivenessMultiplicative:1,specialAttackModifier:1,apShellModifier:1,criticalModifier:A,proficiencyModifier:1,eventMapModifier:a})}}},3536:function(e,r,t){"use strict";var i=t(3475),n=t(3476),a=t(3477),o=t(132),s=t(578),u=function(){return(u=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},c=function(e){return"number"==typeof e?[e,e]:e},l=function(){function e(r,t,i){this.shipType=t,this.shipClass=i,this.shipId=r.id,this.shipClassId=i.id,this.sortNo=r.sortNo,this.sortId=r.sortId,this.name=r.name,this.readingName=r.readingName,this.hp=c(r.hp),this.armor=c(r.armor),this.firepower=c(r.firepower),this.torpedo=c(r.torpedo),this.antiAir=c(r.antiAir),this.luck=c(r.luck),this.asw=c(r.asw),this.evasion=c(r.evasion),this.los=c(r.los),this.speed=r.speed,this.range=r.range,this.fuel=r.fuel,this.ammo=r.ammo,this.slotCapacities=r.slotCapacities.concat(),this.initialEquipment=r.equipments.map(function(e){return"number"==typeof e?{id:e,improvement:0}:e}),r.remodel?this.remodel=r.remodel:this.remodel={nextId:0,nextLevel:0};var n=r.equippable?r.equippable:{};this.equippable=u({categories:this.shipType.equippableCategoryIds,expantionSlot:[]},n),e.all.push(this)}return Object.defineProperty(e.prototype,"isAbyssal",{get:function(){return this.shipId>e.abyssalIdFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRemodel",{get:function(){return this.remodel.nextId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canConvert",{get:function(){var r=this.shipId,t=this.remodel.nextId,i=e.all.find(function(e){return e.shipId===t});return!!i&&i.remodel.nextId===r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grade",{get:function(){return this.sortId%10},enumerable:!0,configurable:!0}),e}(),f=l;l.all=new Array,l.abyssalIdFrom=1500;var p=t(3479),d=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),n=0;for(r=0;r<t;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,n++)i[n]=a[o];return i},h=Object.entries(p.b).filter(function(e){return"number"==typeof e[1]}),m=function(){function e(e,r){var t=this;this.name=e,this.id=r,this.is=function(e){return t.id===p.a[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(t.is)}}return e.fromId=function(r){var t=e.all.find(function(e){return e.id===r});if(t)return t;var i=new e("unkown",r);return e.all.push(i),i},Object.defineProperty(e.prototype,"isSpecialTypeDestroyer",{get:function(){return this.any("FubukiClass","AyanamiClass","AkatsukiClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsNavy",{get:function(){return this.any("JohnCButlerClass","FletcherClass","IowaClass","LexingtonClass","EssexClass","CasablancaClass","ColoradoClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoyalNavy",{get:function(){return this.any("QueenElizabethClass","NelsonClass","ArkRoyalClass","JClass")},enumerable:!0,configurable:!0}),e}(),b=m;m.all=h.map(function(e){return new(m.bind.apply(m,d([void 0],e)))});var g,v=t(3478);!function(e){e[e.CoastalDefenseShip=1]="CoastalDefenseShip",e[e.Destroyer=2]="Destroyer",e[e.LightCruiser=3]="LightCruiser",e[e.TorpedoCruiser=4]="TorpedoCruiser",e[e.HeavyCruiser=5]="HeavyCruiser",e[e.AviationCruiser=6]="AviationCruiser",e[e.LightAircraftCarrier=7]="LightAircraftCarrier",e[e.Battlecruiser=8]="Battlecruiser",e[e.Battleship=9]="Battleship",e[e.AviationBattleship=10]="AviationBattleship",e[e.AircraftCarrier=11]="AircraftCarrier",e[e.SuperDreadnoughts=12]="SuperDreadnoughts",e[e.Submarine=13]="Submarine",e[e.SubmarineAircraftCarrier=14]="SubmarineAircraftCarrier",e[e.Transport=15]="Transport",e[e.SeaplaneTender=16]="SeaplaneTender",e[e.AmphibiousAssaultShip=17]="AmphibiousAssaultShip",e[e.ArmoredAircraftCarrier=18]="ArmoredAircraftCarrier",e[e.RepairShip=19]="RepairShip",e[e.SubmarineTender=20]="SubmarineTender",e[e.TrainingCruiser=21]="TrainingCruiser",e[e.FleetOiler=22]="FleetOiler"}(g||(g={}));var y=g,w=function(){function e(e,r,t){var i=this;this.id=e,this.name=r,this.equippableCategoryIds=t,this.is=function(e){return i.id===y[e]},this.any=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some(i.is)},e===y.Battlecruiser&&(this.name="巡洋戦艦")}return Object.defineProperty(e.prototype,"isDestroyer",{get:function(){return this.id===y.Destroyer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLightCruiserClass",{get:function(){return this.any("LightCruiser","TorpedoCruiser","TrainingCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeavyCruiserClass",{get:function(){return this.any("HeavyCruiser","AviationCruiser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBattleshipClass",{get:function(){return this.any("Battlecruiser","Battleship","AviationBattleship","SuperDreadnoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAircraftCarrierClass",{get:function(){return this.any("LightAircraftCarrier","AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSubmarineClass",{get:function(){return[y.Submarine,y.SubmarineAircraftCarrier].includes(this.id)},enumerable:!0,configurable:!0}),e}(),A=w;w.all=v.a.map(function(e){var r=Object.entries(e.api_equip_type).filter(function(e){e[0];return 1===e[1]}).map(function(e){var r=e[0];e[1];return Number(r)});return new w(e.api_id,e.api_name,r)}),w.fromId=function(e){var r=w.all.find(function(r){return r.id===e});if(r)return r;var t=new w(e,"",[]);return w.all.push(t),t};var M=function(){function e(e){void 0===e&&(e=i.a),this.shipsData=e,this.gears=n.a.map(function(e){var r=e.api_id,t=e.api_type[2],i=o.b.find(t,r),n=a.a.includes(r);return new s.a(e,i,n)}),this.ships=e.map(function(e){var r=A.fromId(e.shipTypeId),t=b.fromId(e.classId);return new f(e,r,t)})}return e.prototype.findMasterGear=function(e){return this.gears.find(function(r){return r.id===e})},e.prototype.findMasterShip=function(e){return this.ships.find(function(r){return r.shipId===e})},e}();r.a=M},3558:function(e,r,t){"use strict";var i=t(3500),n=t(95),a=[{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Single,factors:[2,10]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Single,factors:[10,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Single,factors:[-5,10]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.Combined,factors:[5,5]},{attackerFleetType:i.a.CarrierTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.SurfaceTaskForce,defenderFleetType:i.a.Combined,factors:[2,-5]},{attackerFleetType:i.a.TransportEscort,defenderFleetType:i.a.Combined,factors:[-5,-5]}],o=[{attackerFleetType:i.a.Single,defenderFleetType:i.a.CarrierTaskForce,factors:[10,5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.SurfaceTaskForce,factors:[5,-5]},{attackerFleetType:i.a.Single,defenderFleetType:i.a.TransportEscort,factors:[10,5]}],s=function(e,r){if(!e.fleetType.isCombined&&!r.fleetType.isCombined)return 0;var t="Main"===e.role?0:1;if(e.side===n.a.Player){var i=a.find(function(t){return t.attackerFleetType===e.fleetType&&t.defenderFleetType===r.fleetType});return i?i.factors[t]:0}if(e.fleetType.isCombined)return[10,-5][t];var s=o.find(function(t){return t.attackerFleetType===e.fleetType&&t.defenderFleetType===r.fleetType});return s?s.factors[t]:0},u=t(113),c=t(112),l=t(174),f=t(143),p=t(123),d=t(138),h=function(){function e(e,r,t,i,n,a,o,s,u){void 0===a&&(a=1),void 0===o&&(o=1),void 0===u&&(u=0),this.battleState=e,this.attacker=r,this.defender=t,this.specialAttack=i,this.isCritical=n,this.eventMapModifier=a,this.remainingAmmoModifier=o,this.manualInstallationType=s,this.fitGunBonus=u}return Object.defineProperty(e.prototype,"attackStats",{get:function(){return this.attacker.ship.getShellingStats()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArmorPiercing",{get:function(){var e=this.defender.ship.shipType;return e.isBattleshipClass||e.isHeavyCruiserClass||e.any("AircraftCarrier","ArmoredAircraftCarrier")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"combinedFleetFactors",{get:function(){var e=this.attacker,r=this.defender;return{power:s(e,r),accuracy:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifiers",{get:function(){this.attacker;var e=this.specialAttack,r=this.attackStats,t=r.shellingType,i=r.normalProficiencyModifiers,n=r.specialProficiencyModifiers;return"Shelling"===t?{power:1,hitRate:0,criticalRate:0}:void 0===e?i:n},enumerable:!0,configurable:!0}),e.prototype.getDefenderInstallationType=function(){var e=this.defender;return this.manualInstallationType||e.ship.installationType},Object.defineProperty(e.prototype,"power",{get:function(){var e=this,r=e.battleState,t=e.attacker,i=e.isCritical,n=e.combinedFleetFactors,a=e.eventMapModifier,o=e.specialAttack,s=e.isArmorPiercing,u=r.engagement,c=t.role,l=t.formation,f=n.power,d=this.getDefenderInstallationType(),h=this.attackStats,m=h.shellingType,b=h.firepower,g=h.torpedo,v=h.bombing,y=h.improvementModifiers,w=h.healthModifier,A=h.cruiserFitBonus,M=h.apShellModifiers,C=l.getModifiersWithRole(c).shelling.power,S=u.modifier,P=i?1.5:1,O=o?o.modifier.power:1,j=s?M.power:1,k=t.ship.getAntiInstallationStatus().getModifiersFromType(d),F="None"!==d,B=F?t.ship.totalEquipmentStats(function(e){return e.is("AntiInstallationBomber")?e.bombing:0}):v,G=k.postCapMultiplicative,T=this.proficiencyModifiers.power,I={shellingType:m,combinedFleetFactor:f,firepower:b,torpedo:F?0:g,bombing:B,improvementModifier:y.power,antiInstallationModifiers:k,formationModifier:C,engagementModifier:S,healthModifier:w,cruiserFitBonus:A,effectivenessMultiplicative:G,effectivenessAdditive:0,specialAttackModifier:O,apShellModifier:j,criticalModifier:P,proficiencyModifier:T,eventMapModifier:a};return new p.d(I)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this,r=e.attacker,t=e.defender,i=e.combinedFleetFactors,n=e.isArmorPiercing,a=e.specialAttack,o=e.fitGunBonus,s=r.formation.getModifiersWithRole(r.role).shelling.accuracy;f.a.isIneffective(r.formation,t.formation)&&(s=1);var u=this.attackStats,c=u.level,l=u.luck,p=u.accuracy,h=u.improvementModifiers,m=u.moraleModifier,b=u.apShellModifiers,g=a?a.modifier.accuracy:1,v=n?b.accuracy:1,y={combinedFleetFactor:i.accuracy,level:c,luck:l,equipmentAccuracy:p,improvementModifier:h.accuracy,moraleModifier:m,formationModifier:s,fitGunBonus:o,specialAttackModifier:g,apShellModifier:v};return new d.c(y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,n=t.getModifiersWithRole(i).shelling.evasion;return Object(c.a)(r,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,r=this.defender,t=this.defenderEvasionValue,i=r.ship.morale.evasionModifier;return Object(l.a)(e.value,t,i,this.proficiencyModifiers.hitRate)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalRate",{get:function(){var e=this.hitRate;return(Math.floor(1.3*Math.sqrt(100*e))+1)/100+this.proficiencyModifiers.criticalRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defender,t=this.remainingAmmoModifier,i=r.ship.getDefensePower();return new u.a(e.value,i,r.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taihaRate",{get:function(){var e=this,r=e.damage,t=e.defender,i=e.hitRate,a=e.criticalRate,o=e.isCritical,s=t.ship.health,u=s.currentHp,c=s.maxHp,l=t.side,f=function(e){return(u-e)/c<=.25},p=function(e){return 0===e.length?0:e.filter(f).length/e.length},d=r.scratchDamageProbability,h=r.scratchDamages,m=r.deadlyDamageProbability,b=r.stopperDamages,g=l===n.a.Player?m:0,v=r.values.filter(function(e){return!(e<=0)&&!(l===n.a.Player&&u-e<=0)}),y=v.length/r.values.length*p(v)+d*p(h)+g*p(b);return o?a*y:(i-a)*y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"can",{get:function(){var e=this.attacker,r=this.defender,t=r.ship.isInstallation,i=this.attackStats.shellingType,n=e.ship;if("Sunk"===n.health.damage)return!1;if(r.ship.shipType.isSubmarineClass)return!1;if("CarrierShelling"===i){if(n.health.lte("Taiha"))return!1;if(!n.shipType.is("ArmoredAircraftCarrier")&&n.health.lte("Chuuha"))return!1;var a=n.planes.filter(function(e){return e.slotSize>0});return(!t||!a.some(function(e){return e.is("DiveBomber")&&!e.is("AntiInstallationBomber")}))&&n.planes.some(function(e){return e.participatesInCarrierShelling})}return!n.shipType.isSubmarineClass||!t||n.hasGear("SpecialAmphibiousTank")},enumerable:!0,configurable:!0}),e}();r.a=h;h.getCombinedFleetFactor=s},3559:function(e,r,t){"use strict";var i=t(579),n=t(113),a=t(10),o=function(){function e(e){this.starshellModifier=0,this.contactModifier=1,this.level=0,this.luck=0,this.equipmentAccuracy=0,this.improvementModifier=0,this.formationModifier=1,this.moraleModifier=1,this.specialAttackModifier=1,this.searchlightModifier=0,this.fitGunBonus=0,Object(a.c)(this,e)}return Object.defineProperty(e.prototype,"value",{get:function(){return r=(e=this).starshellModifier,t=e.contactModifier,i=e.level,n=e.luck,a=e.equipmentAccuracy,o=e.improvementModifier,s=e.formationModifier,u=e.moraleModifier,c=e.specialAttackModifier,l=e.searchlightModifier,f=e.fitGunBonus,p=Math.floor((69+r)*t+2*Math.sqrt(i)+1.5*Math.sqrt(n)+a+o),Math.floor(p*s*u*c+l+f);var e,r,t,i,n,a,o,s,u,c,l,f,p},enumerable:!0,configurable:!0}),e}(),s=t(174),u=t(112),c=function(){function e(e,r,t,i,n,a,o,s){void 0===n&&(n=0),void 0===a&&(a=1),void 0===o&&(o=1),this.attacker=e,this.defender=r,this.specialAttack=t,this.isCritical=i,this.nightContactModifier=n,this.eventMapModifier=a,this.remainingAmmoModifier=o,this.manualInstallationType=s}return Object.defineProperty(e.prototype,"attackerNightAttackStatus",{get:function(){return new i.a(this.attacker.ship)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactModifier",{get:function(){return 5===this.nightContactModifier?{power:5,accuracy:1.1,criticalRate:1.57}:{power:0,accuracy:1,criticalRate:1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accuracy",{get:function(){var e=this.attacker,r=this.specialAttack,t=this.contactModifier,i=e.formation,n=e.role,a=e.ship,s=a.stats,u=a.level,c=a.totalEquipmentStats,l=a.morale,f=a.shipType,p=a.hasGear,d=c(function(e){return e.improvement.nightAttackAccuracyModifier}),h=i.getModifiersWithRole(n).nightBattle.accuracy,m=r&&r.modifier.accuracy,b=0;return f.isHeavyCruiserClass&&(p(6)&&(b=10),(p(90)||p(50))&&(b=15)),new o({starshellModifier:void 0,contactModifier:t.accuracy,level:u,luck:s.luck,equipmentAccuracy:c("accuracy"),improvementModifier:d,formationModifier:h,moraleModifier:l.nightBattleAccuracyModifier,specialAttackModifier:m,searchlightModifier:void 0,fitGunBonus:b})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=this,r=e.isCritical,t=e.manualInstallationType,i=e.attackerNightAttackStatus,n=e.specialAttack,a=e.eventMapModifier,o=this.attacker,s=o.role,u=o.formation,c=t||this.defender.ship.installationType;return i.calcPower({role:s,nightContactModifier:this.contactModifier.power,formation:u,installationType:c,specialAttack:n,isCritical:r,eventMapModifier:a})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defenderEvasionValue",{get:function(){var e=this.defender,r=e.ship,t=e.formation,i=e.role,n=t.getModifiersWithRole(i).nightBattle.evasion,a=r.shipType.isHeavyCruiserClass?5:0;return Object(u.a)(r,n,a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){var e=this.accuracy,r=this.defender,t=this.defenderEvasionValue,i=r.ship.morale.evasionModifier;return Object(s.a)(e.value,t,i,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensePower",{get:function(){return this.defender.ship.getDefensePower()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damage",{get:function(){var e=this.power,r=this.defensePower,t=this.remainingAmmoModifier,i=this.defender;return new n.a(e.value,r,i.ship.health.currentHp,t)},enumerable:!0,configurable:!0}),e}();r.a=c},376:function(e,r,t){"use strict";t.d(r,"a",function(){return a});var i=t(3435),n=function(e,r){var t=Object(i.a)(e.filter(function(e){return e.level<=r}),"value");return t?t.value:0},a={from:function(e){var r=function(r){return e.includes(r)};return r("DiveBomber")||r("TorpedoBomber")||r("ReconnaissanceAircraft")?"Other":r("Fighter")?"Fighter":r("SeaplaneBomber")?"SeaplaneBomber":"None"}},o=function(){function e(e,r){void 0===e&&(e=0),this.internal=e,this.type=r}return e.internalToLevel=function(r){return e.internalBounds.filter(function(e){return e<=r}).length-1},Object.defineProperty(e.prototype,"visible",{get:function(){return"None"!==this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return e.internalToLevel(this.internal)},set:function(r){this.internal=e.internalBounds[r]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fighterPowerBonus",{get:function(){var r=this.internal,t=this.level,i=this.type;if(r<=0)return 0;var a=[];return"Fighter"===i?a=e.fighterPowerLevelBonuses.fighter:"SeaplaneBomber"===i&&(a=e.fighterPowerLevelBonuses.seaplaneBomber),n(a,t)+Math.sqrt(r/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criticalPowerModifier",{get:function(){var r=this.internal,t=this.level,i=n(e.criticalModifierLevelBonuses,t);return Math.floor(Math.sqrt(r)+i)},enumerable:!0,configurable:!0}),e}();r.b=o,o.internalBounds=[0,10,25,40,55,70,85,100],o.fighterPowerLevelBonuses={fighter:[{level:7,value:22},{level:5,value:14},{level:4,value:9},{level:3,value:5},{level:2,value:2},{level:0,value:0}],seaplaneBomber:[{level:7,value:6},{level:5,value:3},{level:2,value:1},{level:0,value:0}]},o.criticalModifierLevelBonuses=[{level:7,value:10},{level:6,value:7},{level:5,value:5},{level:4,value:4},{level:3,value:3},{level:2,value:2},{level:1,value:1},{level:0,value:0}]},386:function(e,r,t){"use strict";var i=t(10),n=t(3435),a=t(586),o=function(e){if(Array.isArray(e)){var r=e.map(o);return Object(n.a)(r,function(e){return e&&e.id})}var t=e,i=Object(a.a)(100);return l.getPossibleAntiAirCutins(t).find(function(e){return 34===e.id||35===e.id?e.probability>Object(a.a)(100):e.probability>i})},s=o,u=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var i=Array(e),n=0;for(r=0;r<t;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,n++)i[n]=a[o];return i},c=function(){function e(e,r,t,i){this.id=e,this.minimumBonus=r,this.fixedAirDefenseModifier=t,this.probability=i}return e.fromId=function(e){return this.all.find(function(r){return r.id===e})},e}(),l=r.a=c;c.all=[[1,8,1.7,65],[2,7,1.7,58],[3,5,1.6,50],[4,7,1.5,52],[5,5,1.5,55],[6,5,1.45,40],[7,4,1.35,45],[8,5,1.4,50],[9,3,1.3,40],[10,9,1.65,60],[11,7,1.5,55],[12,4,1.25,45],[13,5,1.35,35],[14,5,1.45,63],[15,4,1.3,58],[16,5,1.4,60],[17,3,1.25,55],[18,3,1.2,60],[19,6,1.45,55],[20,4,1.25,70],[21,6,1.45,60],[22,3,1.2,63],[23,2,1.05,80],[24,4,1.25,60],[25,8,1.55,60],[26,7,1.4,60],[28,5,1.4,53],[29,6,1.55,58],[30,4,1.3,42],[31,3,1.25,50],[32,4,1.2,32],[33,4,1.35,42],[34,8,1.6,60],[35,7,1.55,53],[36,7,1.55,59],[37,5,1.45,38]].map(function(e){return new(c.bind.apply(c,u([void 0],e)))}),c.try=s,c.getPossibleAntiAirCutins=function(e){return function(e){var r;!function(e){e[e.MayaKai2=428]="MayaKai2",e[e.IsuzuKai2=141]="IsuzuKai2",e[e.KasumiKai2B=470]="KasumiKai2B",e[e.KinuKai2=487]="KinuKai2",e[e.YuraKai2=488]="YuraKai2",e[e.MusashiKai=148]="MusashiKai",e[e.MusashiKai2=546]="MusashiKai2",e[e.IsokazeBKai=557]="IsokazeBKai",e[e.HamakazeBKai=558]="HamakazeBKai",e[e.SatsukiKai2=418]="SatsukiKai2",e[e.FumizukiKai2=548]="FumizukiKai2",e[e.Uit25=539]="Uit25",e[e.I504=530]="I504",e[e.TatsutaKai2=478]="TatsutaKai2"}(r||(r={}));var t=function(r){return e.masterId===r},i=function(e){return e.is("HighAngleMount")},n=function(e){return i(e)&&e.antiAir>=8},a=function(e){return e.is("Radar")},o=function(e){return e.is("AirRadar")},s=function(e){return e.is("AntiAircraftGun")},u=function(e){return s(e)&&e.antiAir>=9},c=function(e){return s(e)&&e.antiAir>=3&&e.antiAir<9},l=function(e){return 274===e.masterId},f=function(e){return e.is("AntiAircraftShell")},p=function(e){return e.is("AntiAircraftFireDirector")},d=function(e){return e.category.any("LargeCaliberMainGun","LargeCaliberMainGun2")},h=function(r,t){return e.countGear(r)>=t},m=function(r){return e.hasGear(r)},b=[];if(e.shipClass.is("FletcherClass")){var g=e.countGear(284)+e.countGear(313),v=e.countGear(308);v>=2&&b.push(34),v>0&&g>0&&b.push(35),g>=2&&(e.hasGear(307)&&b.push(36),b.push(37))}return e.shipClass.is("AkizukiClass")&&m(i)?(h(i,2)&&m(a)&&b.push(1),m(a)&&b.push(2),h(i,2)&&b.push(3)):(t(r.MayaKai2)&&m(i)&&m(u)?(m(o)&&b.push(10),b.push(11)):t(r.IsuzuKai2)&&m(i)&&m(s)?(m(o)&&b.push(14),b.push(15)):t(r.KasumiKai2B)&&m(i)&&m(s)?(m(o)&&b.push(16),b.push(17)):t(r.KinuKai2)&&m(u)&&m(function(e){return i(e)&&e.antiAir<8})?b.push(19):t(r.YuraKai2)&&m(i)&&m(o)?b.push(21):e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")&&m(l)&&m(f)&&m(o)&&b.push(25),m(p)&&m(d)&&m(f)&&m(o)&&b.push(4),h(n,2)&&m(o)&&b.push(5),m(p)&&m(d)&&m(f)&&b.push(6),m(n)&&m(o)&&b.push(8),m(p)&&m(i)&&m(o)&&b.push(7),t(r.MusashiKai2)&&m(function(e){return 275===e.masterId})&&m(a)&&b.push(26),(e.shipClass.is("IseClass")&&e.shipType.is("AviationBattleship")||t(r.MusashiKai)||t(r.MusashiKai2))&&m(l)&&m(o)&&b.push(28),(t(r.IsokazeBKai)||t(r.HamakazeBKai))&&m(i)&&m(o)&&b.push(29),m(p)&&m(i)&&b.push(9),"Gotland改"===e.name&&e.hasGear(i)&&e.hasGear(function(e){return e.is("AntiAircraftGun")&&e.antiAir>=4})&&b.push(33),m(u)&&m(o)&&e.countGear(function(e){return e.is("AntiAircraftGun")&&e.antiAir>=3})>=2&&b.push(12),m(n)&&m(u)&&m(o)&&b.push(13),t(r.SatsukiKai2)&&m(u)&&b.push(18),t(r.KinuKai2)&&m(u)&&b.push(20),t(r.FumizukiKai2)&&m(u)&&b.push(22),(t(r.Uit25)||t(r.I504))&&m(c)&&b.push(23),["龍田改二","天龍改二"].includes(e.name)&&m(i)&&m(c)&&b.push(24),["天龍改二","Gotland改"].includes(e.name)&&e.countGear(i)>=3&&b.push(30),"天龍改二"===e.name&&e.countGear(i)>=2&&b.push(31),(e.shipClass.isRoyalNavy||e.shipClass.is("KongouClass")&&e.name.includes("改二"))&&(e.countGear(301)>=2||e.hasGear(301)&&e.hasGear(191)||e.hasGear(300)&&e.hasGear(191))&&b.push(32)),b}(e).map(function(e){return c.fromId(e)}).filter(i.b)}},387:function(e,r,t){"use strict";var i;!function(e){e.MainFleet="MainFleet",e.EscortFleet="EscortFleet"}(i||(i={})),r.a=i},424:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i=function(e){var r=e.slotSize,t=e.antiAir,i=e.interception,n=void 0===i?0:i,a=e.antiBomber,o=void 0===a?0:a,s=e.improvementModifier,u=void 0===s?0:s,c=e.proficiencyModifier,l=void 0===c?0:c,f=e.isInterception,p=t+1.5*n+u;return void 0!==f&&f&&(p=t+n+2*o+u),Math.floor(p*Math.sqrt(r)+l)}},425:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"a",function(){return n});var i=function(e){var r=e.hasArmorPiercingShell,t=e.hasMainGun,i=e.hasRader,n=e.hasSecondaryGun;return r&&t?n&&i?{power:1.15,accuracy:1.3}:n?{power:1.15,accuracy:1.2}:i?{power:1.1,accuracy:1.25}:{power:1.08,accuracy:1.1}:{power:1,accuracy:1}},n=function(e){var r=e.isLightCruiserClass,t=e.isZaraClass,i=e.singleGunCount,n=e.twinGunCount,a=e.zaraGunCount;return r?Math.sqrt(i)+2*Math.sqrt(n):t?Math.sqrt(a):0}},455:function(e,r,t){"use strict";var i=t(156);t.d(r,"a",function(){return i})},456:function(e,r,t){"use strict";var i,n=t(295),a=t(386),o=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),s=function(e){function r(r){var t=e.call(this,r)||this,i=t.combatInformation,n=i.player,a=i.enemy;return n.isCombinedFleet&&a.isCombinedFleet?(t.playerAntiAirDefenseShips=n.allShips,t.enemyAntiAirDefenseShips=a.allShips):(t.playerAntiAirDefenseShips=n.mainFleet.nonNullableShips,t.enemyAntiAirDefenseShips=a.mainFleet.nonNullableShips),t}return o(r,e),r.prototype.main=function(){var e=this.playerAntiAirDefenseShips,r=this.enemyAntiAirDefenseShips,t=this.combatInformation,i=e.flatMap(function(e){return e.planes}),n=r.flatMap(function(e){return e.planes}),o=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")},s=i.filter(o),u=n.filter(o),c=this.fighterCombat(s,u),l=t.player,f=(t.enemy,s.filter(function(e){return e.slotSize>0&&e.participatesInAirstrike})),p=u.filter(function(e){return e.slotSize>0&&e.participatesInAirstrike});return this.antiAirDefense(e,p,a.a.try(l.allShips)),this.antiAirDefense(r,f,a.a.try(l.allShips)),{airControlState:c}},r}(n.a);r.a=s},457:function(e,r,t){"use strict";var i,n=t(3434),a=t(310),o=t(95),s=t(295),u=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),c=function(e){function r(r,t){var i=e.call(this,r)||this;return i.landBasedAirCorps=t,i}return u(r,e),r.prototype.main=function(){var e=this,r=this.combatInformation.enemy,t=this.landBasedAirCorps,i=t.fighterPower,s=t.planes,u=Object(n.a)(r.allShips,function(e){return e.planes}),c=u.reduce(function(e,r){return e+r.fighterPower},0),l=a.a.fromFighterPower(i,c),f=function(e){return e.is("DiveBomber")||e.is("TorpedoBomber")||e.is("Fighter")||e.is("ReconnaissanceAircraft")},p=s.filter(f),d=u.filter(f);p.forEach(function(r){return e.shotdownInFighterCombat(r,l.constant,o.a.Player)}),d.forEach(function(r){return e.shotdownInFighterCombat(r,l.constant,o.a.Enemy)});var h=p.filter(function(e){return e.slotSize>0&&e.participatesInAirstrike});return this.antiAirDefense(r.allShips,h),{airControlState:l}},r}(s.a);r.a=c},533:function(e,r,t){"use strict";t.d(r,"b",function(){return i});var i=function(e){return!!e.shipType.isAircraftCarrierClass&&(!(![545,599].includes(e.masterId)&&!e.hasGear(function(e){return[258,259].includes(e.masterId)}))&&e.planes.some(function(e){return e.slotSize>0&&e.isNightPlane}))},n=function(e){var r=e.nakedStats,t=e.level;return r.luck<50?Math.floor(r.luck+15+.75*Math.sqrt(t)):Math.floor(Math.sqrt(r.luck-50)+65+.8*Math.sqrt(t))},a=function(){function e(r,t,i,n){var a=this;this.id=r,this.name=t,this.typeFactor=i,this.modifier=n,this.calcRate=function(r){return a===e.DoubleAttack?109/110:Math.ceil(r)/a.typeFactor}}return Object.defineProperty(e.prototype,"api",{get:function(){return Math.floor(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestroyerCutin",{get:function(){return 7===this.id||8===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAerialAttack",{get:function(){return 6===this.api},enumerable:!0,configurable:!0}),e}();r.a=a,a.DoubleAttack=new a(1,"連撃",110,{power:1.2,accuracy:1.1}),a.MainTorp=new a(2,"主魚",115,{power:1.3,accuracy:1.5}),a.TorpTorp=new a(3,"魚雷",122,{power:1.5,accuracy:1.65}),a.SubmarineTorpTorp=new a(3.1,"潜水魚雷",110,{power:1.65,accuracy:1}),a.SubmarineRadarTorp=new a(3.2,"潜水電探",102,{power:1.75,accuracy:1}),a.MainMainSecond=new a(4,"主副",130,{power:1.75,accuracy:1.65}),a.MainMainMain=new a(5,"主砲",140,{power:2,accuracy:1.5}),a.AerialAttack1=new a(6.1,"夜襲1.25",105,{power:1.25,accuracy:1}),a.AerialAttack2=new a(6.2,"夜襲1.20",115,{power:1.2,accuracy:1}),a.AerialAttack3=new a(6.3,"夜襲1.18",125,{power:1.18,accuracy:1}),a.SuiseiAttack=new a(6.4,"彗星夜襲",115,{power:1.2,accuracy:1}),a.MainTorpRadar=new a(7,"主魚電",130,{power:1.3,accuracy:1}),a.TorpRadarLookout=new a(8,"魚見電",150,{power:1.2,accuracy:1}),a.getPossibleSpecialAttacks=function(e){var r=e.shipType,t=e.hasGear,n=e.countGear,o=new Array;if(i(e)){var s=e.planes.filter(function(e){return e.slotSize>0}),u=s.filter(function(e){return e.isNightFighter}).length,c=s.filter(function(e){return e.isNightAttacker}).length,l=s.filter(function(e){return e.isNightPlane}).length,f=s.filter(function(e){return e.isNightAircraft&&!e.isNightPlane}).length,p=u>=1,d=c>=1,h=l>=1,m=s.some(function(e){return 320===e.gear.masterId});return u>=2&&d&&o.push(a.AerialAttack1),p&&d&&o.push(a.AerialAttack2),h&&m&&o.push(a.SuiseiAttack),p?((u+f>=3||c+f>=2)&&o.push(a.AerialAttack3),o):o}if(!e.canNightAttack)return o;var b=n(213)+n(214),g=n("Torpedo")+n("SubmarineTorpedo");r.is("Destroyer")&&t(function(e){return e.is("SurfaceRadar")})&&g>=1&&(t(function(e){return e.is("SmallCaliberMainGun")})&&o.push(a.MainTorpRadar),t(129)&&o.push(a.TorpRadarLookout));var v=n(function(e){return e.is("MainGun")}),y=n(function(e){return e.is("SecondaryGun")});return b>=1&&t(function(e){return e.is("SubmarineEquipment")})?o.push(a.SubmarineRadarTorp):b>=2?o.push(a.SubmarineTorpTorp):v>=3?o.push(a.MainMainMain):v>=2&&y>=1?o.push(a.MainMainSecond):g>=2?o.push(a.TorpTorp):v>=1&&g>=1?o.push(a.MainTorp):v+y>=2&&o.push(a.DoubleAttack),o},a.calcPreModifierValue=n,a.calcBaseValue=function(e,r,t,i){var a=n(e);return r&&(a+=15),"Chuuha"===e.health.damage&&(a+=18),e.hasGear(129)&&(a+=5),t.searchlight&&(a+=7),i.searchlight&&(a+=-5),t.starshell&&(a+=4),i.starshell&&(a+=-10),a}},578:function(e,r,t){"use strict";var i=t(132),n=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.includes(r.gearId)}},a=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.map(i.b.keyToId).includes(r.categoryId)}},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.every(function(e){return e(r)})}},s=a("SmallCaliberMainGun","MediumCaliberMainGun","LargeCaliberMainGun","LargeCaliberMainGun2"),u=a("SmallRadar","LargeRadar","LargeRadar2"),c=o(u,function(e){return e.los>=5}),l=o(u,function(e){return e.antiAir>=2}),f=a("ExtraArmor","MediumExtraArmor","LargeExtraArmor"),p=a("CarrierBasedFighterAircraft","CarrierBasedDiveBomber","CarrierBasedTorpedoBomber","CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2"),d=a("ReconnaissanceSeaplane","SeaplaneBomber","SeaplaneFighter","LargeFlyingBoat"),h=a("LandBasedAttackAircraft","LandBasedFighter","LandBasedReconnaissanceAircraft"),m=a("JetPoweredFighter","JetPoweredFighterBomber","JetPoweredTorpedoBomber","JetPoweredReconnaissanceAircraft"),b=a("CarrierBasedFighterAircraft","SeaplaneFighter","LandBasedFighter","JetPoweredFighter"),g=a("CarrierBasedDiveBomber","SeaplaneBomber","JetPoweredFighterBomber"),v=a("CarrierBasedTorpedoBomber","JetPoweredTorpedoBomber","LandBasedAttackAircraft"),y=a("CarrierBasedReconnaissanceAircraft","CarrierBasedReconnaissanceAircraft2","ReconnaissanceSeaplane","LargeFlyingBoat","JetPoweredReconnaissanceAircraft","LandBasedReconnaissanceAircraft"),w=function(e){return e}({Abyssal:function(e){return e.gearId>500},HighAngleMount:function(e){return 16===e.iconId},MainGun:s,Radar:u,SurfaceRadar:c,AirRadar:l,Armor:f,CarrierBasedAircraft:p,Seaplane:d,LandBasedAircraft:h,JetPoweredAircraft:m,Fighter:b,DiveBomber:g,TorpedoBomber:v,ReconnaissanceAircraft:y,Aircraft:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return e.some(function(e){return e(r)})}}(b,g,v,y,a("Autogyro","AntiSubmarinePatrolAircraft")),AntiInstallationBomber:n(60,64,305,306,148,233,277,319),AdditionalDepthCharge:n(226,227),Mortar:n(346,347)}),A=Object.keys(w),M={from:function(e){var r=function(e){return A.filter(function(r){return w[r](e)})}(e),t=i.b.numberToKey(e.categoryId);return t&&r.push(t),r}};t.d(r,"b",function(){return C});var C=["armor","firepower","torpedo","speed","bombing","antiAir","asw","los","accuracy","evasion","interception","antiBomber","range","radius"],S=function(){function e(e,r,t){var n=this;this.category=r,this.improvable=t,this.radius=0,this.is=function(e){return n.attrs.includes(e)},this.id=e.api_id,this.name=e.api_name,this.categoryId=r.id,this.iconId=e.api_type[3],this.hp=e.api_taik,this.armor=e.api_souk,this.firepower=e.api_houg,this.torpedo=e.api_raig,this.speed=e.api_soku,this.bombing=e.api_baku,this.antiAir=e.api_tyku,this.asw=e.api_tais,this.los=e.api_saku,this.luck=e.api_luck,this.range=e.api_leng;var a=e.api_houm,o=e.api_houk;this.accuracy=0,this.evasion=0,this.antiBomber=0,this.interception=0,this.categoryId===i.a.LandBasedFighter?(this.antiBomber=a,this.interception=o):(this.accuracy=a,this.evasion=o),e.api_distance&&(this.radius=e.api_distance),this.attrs=M.from(this)}return Object.defineProperty(e.prototype,"gearId",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}();r.a=S},579:function(e,r,t){"use strict";var i=t(144),n=t(143),a=t(10),o=function(){function e(e){this.nightAttackType="NightAttack",this.firepower=0,this.torpedo=0,this.improvementModifier=0,this.nightAerialAttackPower=0,this.nightContactModifier=0,this.formationModifier=1,this.healthModifier=1,this.specialAttackModifier=1,this.cruiserFitBonus=0,this.antiInstallationModifiers={shipTypeAdditive:0,a13:1,b13:0,a13d:1,b13d:0},this.effectivenessMultiplicative=1,this.effectivenessAdditive=0,this.criticalModifier=1,this.proficiencyModifier=1,this.eventMapModifier=1,Object(a.c)(this,e)}return Object.defineProperty(e.prototype,"basicPower",{get:function(){return r=(e=this).nightAttackType,t=e.firepower,i=e.torpedo,n=e.improvementModifier,a=e.nightAerialAttackPower,o=e.nightContactModifier,"NightAerialAttack"===r?a+o:t+i+n+o;var e,r,t,i,n,a,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preCapPower",{get:function(){return e=this.basicPower,t=(r=this).formationModifier,i=r.healthModifier,n=r.specialAttackModifier,a=r.cruiserFitBonus,o=r.antiInstallationModifiers,(((e+o.shipTypeAdditive)*o.a13+o.b13)*o.a13d+o.b13d)*t*i*n+a;var e,r,t,i,n,a,o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cappedPower",{get:function(){return Object(a.g)(e.cap,this.preCapPower)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCapped",{get:function(){return this.preCapPower>e.cap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return e=this.cappedPower,t=(r=this).effectivenessMultiplicative,i=r.effectivenessAdditive,n=r.criticalModifier,a=r.proficiencyModifier,o=r.eventMapModifier,s=Math.floor(e),(t>1||i>0)&&(s=Math.floor(s*t+i)),n>1&&(s=Math.floor(s*n*a)),Math.floor(s*o);var e,r,t,i,n,a,o,s},enumerable:!0,configurable:!0}),e}(),s=o;o.cap=300;var u=t(215),c=t(533),l=function(){function e(e){var r=this;this.ship=e,this.calcPower=function(e){var t=e.role,i=void 0===t?"Main":t,a=e.nightContactModifier,o=void 0===a?0:a,c=e.formation,l=void 0===c?n.a.LineAhead:c,f=e.eventMapModifier,p=void 0===f?1:f,d=e.installationType,h=void 0===d?"None":d,m=e.specialAttack,b=e.isCritical,g=void 0!==b&&b,v=r,y=v.ship,w=v.nightAttackType,A=v.proficiencyModifier,M=y.stats,C=M.firepower,S=M.torpedo,P=y.totalEquipmentStats(function(e){return e.improvement.nightAttackPowerModifier}),O="None"!==h,j=r.calcNightAerialAttackPower(O),k=l.getModifiersWithRole(i).nightBattle.power,F=y.health.nightAttackPowerModifire,B=y.getAntiInstallationStatus().getModifiersFromType(h);O&&m&&m.isAerialAttack&&(B={shipTypeAdditive:0,a13:1,b13:0,a13d:1,b13d:0,postCapMultiplicative:1});var G=1;m&&(G=m.modifier.power,m.isDestroyerCutin&&y.hasGear(267)&&(G*=1.25));var T={nightAttackType:w,firepower:C,torpedo:O?0:S,improvementModifier:P,nightAerialAttackPower:j,nightContactModifier:o,formationModifier:k,healthModifier:F,specialAttackModifier:G,cruiserFitBonus:Object(u.a)(y),antiInstallationModifiers:B,effectivenessMultiplicative:B.postCapMultiplicative,effectivenessAdditive:0,criticalModifier:g?1.5:1,proficiencyModifier:A.power,eventMapModifier:p};return new s(T)}}return Object.defineProperty(e.prototype,"nightAttackType",{get:function(){var e=this.ship;return Object(c.b)(e)?"NightAerialAttack":"NightAttack"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proficiencyModifier",{get:function(){var e=this.ship;return"NightAttack"===this.nightAttackType?{power:1,hitRate:0,criticalRate:0}:Object(u.c)(e)},enumerable:!0,configurable:!0}),e.prototype.calcNightAerialAttackPower=function(e){var r=this.ship;return"NightAerialAttack"!==this.nightAttackType?0:r.nakedStats.firepower+Object(i.a)(r.planes,function(r){return r.calcNightAerialAttackPower(e)})},e}();r.a=l},95:function(e,r,t){"use strict";var i;!function(e){e.Player="Player",e.Enemy="Enemy"}(i||(i={})),r.a=i}}]);